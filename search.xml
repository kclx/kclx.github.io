<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>LaTeXå…¬å¼å¤§å…¨</title>
      <link href="/2023/12/28/LaTeX%E5%85%AC%E5%BC%8F%E5%A4%A7%E5%85%A8/"/>
      <url>/2023/12/28/LaTeX%E5%85%AC%E5%BC%8F%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="å¸Œè…Šå­—æ¯"><a href="#å¸Œè…Šå­—æ¯" class="headerlink" title="å¸Œè…Šå­—æ¯"></a>å¸Œè…Šå­—æ¯</h2><table><thead><tr><th>å¤§å†™</th><th>LaTeX</th><th>å°å†™</th><th>LaTeX</th></tr></thead><tbody><tr><td>$$ A $$</td><td>A</td><td>$$ \alpha $$</td><td>\alpha</td></tr><tr><td>$$ B $$</td><td>B</td><td>$$ \beta $$</td><td>\beta</td></tr><tr><td>$$ \Gamma $$</td><td>\Gamma</td><td>$$ \gamma $$</td><td>\gamma</td></tr><tr><td>$$ E $$</td><td>E</td><td>$$ \epsilon $$</td><td>\epsilon</td></tr><tr><td></td><td></td><td>$$ \varepsilon $$</td><td>\varepsilon</td></tr><tr><td>$$ Z $$</td><td>Z</td><td>$$ \zeta $$</td><td>\zeta</td></tr><tr><td>$$ H $$</td><td>H</td><td>$$ \eta $$</td><td>\eta</td></tr><tr><td>$$ \Theta $$</td><td>\Theta</td><td>$$ \theta $$</td><td>\theta</td></tr><tr><td>$$ I $$</td><td>I</td><td>$$ \iota $$</td><td>\iota</td></tr><tr><td>$$ K $$</td><td>K</td><td>$$ \kappa $$</td><td>\kappa</td></tr><tr><td>$$ \Lambda $$</td><td>\Lambda</td><td>$$ \lambda $$</td><td>\lambda</td></tr><tr><td>$$ M $$</td><td>M</td><td>$$ \mu $$</td><td>\mu</td></tr><tr><td>$$ N $$</td><td>N</td><td>$$ \nu $$</td><td>\nu</td></tr><tr><td>$$ \Xi $$</td><td>\Xi</td><td>$$ \xi $$</td><td>\xi</td></tr><tr><td>$$ O $$</td><td>O</td><td>$$ \omicron $$</td><td>\omicron</td></tr><tr><td>$$ \Pi $$</td><td>\Pi</td><td>$$ \pi $$</td><td>\pi</td></tr><tr><td>$$ P $$</td><td>P</td><td>$$ \rho $$</td><td>\rho</td></tr><tr><td>$$ \Sigma $$</td><td>\Sigma</td><td>$$ \sigma $$</td><td>\sigma</td></tr><tr><td>$$ T $$</td><td>T</td><td>$$ \tau $$</td><td>\tau</td></tr><tr><td>$$ \Upsilon $$</td><td>\Upsilon</td><td>$$ \upsilon $$</td><td>\upsilon</td></tr><tr><td>$$ \Phi $$</td><td>\Phi</td><td>$$ \phi $$</td><td>\phi</td></tr><tr><td></td><td></td><td>$$ \varphi $$</td><td>\varphi</td></tr><tr><td>$$ X $$</td><td>X</td><td>$$ \chi $$</td><td>\chi</td></tr><tr><td>$$ \Psi $$</td><td>\Psi</td><td>$$ \psi $$</td><td>\psi</td></tr><tr><td>$$ \Omega $$</td><td>\omega</td><td>$$ \omega $$</td><td>\omega</td></tr></tbody></table><h2 id="å¯¹æ•°å‡½æ•°"><a href="#å¯¹æ•°å‡½æ•°" class="headerlink" title="å¯¹æ•°å‡½æ•°"></a>å¯¹æ•°å‡½æ•°</h2><table><thead><tr><th>ç®—å¼</th><th>LaTeX</th></tr></thead><tbody><tr><td>$$ \ln{x} $$</td><td>\ln{x}</td></tr><tr><td>$$ \log_{x}{y} $$</td><td>\log_{x}{y}</td></tr><tr><td>$$ \lg{x} $$</td><td>\lg{x}</td></tr></tbody></table><h2 id="ä¸‰è§’å‡½æ•°"><a href="#ä¸‰è§’å‡½æ•°" class="headerlink" title="ä¸‰è§’å‡½æ•°"></a>ä¸‰è§’å‡½æ•°</h2><table><thead><tr><th>å‡½æ•°</th><th>LaTeX</th><th>åç§°</th></tr></thead><tbody><tr><td>$$ \sin{x} $$</td><td>\sin{x}</td><td>æ­£å¼¦å‡½æ•°ï¼ˆSineï¼‰</td></tr><tr><td>$$ \cos{x} $$</td><td>\cos{x}</td><td>ä½™å¼¦å‡½æ•°ï¼ˆCosineï¼‰</td></tr><tr><td>$$ \tan{x} $$</td><td>\tan{x}</td><td>æ­£åˆ‡å‡½æ•°ï¼ˆTangentï¼‰</td></tr><tr><td>$$ \cot{x} $$</td><td>\cot{x}</td><td>ä½™åˆ‡å‡½æ•°ï¼ˆCotangentï¼‰</td></tr><tr><td>$$ \arccos{x} $$</td><td>\arccos{x}</td><td>åä½™å¼¦å‡½æ•°ï¼ˆInverse Cosineï¼‰</td></tr><tr><td>$$ \arcsin{x} $$</td><td>\arcsin{x}</td><td>åæ­£å¼¦å‡½æ•°ï¼ˆInverse Sineï¼‰</td></tr><tr><td>$$ \arctan{x} $$</td><td>\arctan{x}</td><td>åæ­£åˆ‡å‡½æ•°ï¼ˆInverse Tangentï¼‰</td></tr><tr><td>$$ \sec{x} $$</td><td>\sec{x}</td><td>æ­£å‰²å‡½æ•°ï¼ˆSecantï¼‰</td></tr><tr><td>$$ \csc{x} $$</td><td>\csc{x}</td><td>ä½™å‰²å‡½æ•°ï¼ˆCosecantï¼‰</td></tr></tbody></table><h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>äº¤</td><td>$$ \cap $$</td><td>\cap</td></tr><tr><td>å¹¶</td><td>$$ \cup $$</td><td>\cup</td></tr><tr><td>ç©º</td><td>$$ \emptyset $$</td><td>\emptyset or \empty</td></tr><tr><td>ä¹˜æ³•</td><td>$$ \circ $$</td><td>\circ</td></tr><tr><td>å‘å·¦ç®­å¤´</td><td>$$ \leftarrow $$</td><td>\larr or \leftarrow</td></tr><tr><td>å‘å³ç®­å¤´</td><td>$$ \to $$</td><td>\rarr or \to</td></tr><tr><td>å±äº</td><td>$$ \in $$</td><td>\in</td></tr><tr><td>ä¸å±äº</td><td>$$ \notin \not\in $$</td><td>\notin or \not\in</td></tr><tr><td>å³å­é›†</td><td>$$ \subset $$</td><td>\subset or \sub</td></tr><tr><td>å®æ•°é›†</td><td>$$ \mathbb {R} $$</td><td>\mathbb {R} or \R</td></tr><tr><td>è‡ªç„¶æ•°é›†</td><td>$$ \mathbb {N} $$</td><td>\mathbb {N} or \N</td></tr><tr><td>æ•´æ•°é›†</td><td>$$ \mathbb {Z} $$</td><td>\mathbb {Z} or \Z</td></tr><tr><td>æœ‰ç†æ•°é›†</td><td>$$ \mathbb {Q} $$</td><td>\mathbb {Q} or \Q</td></tr><tr><td>å¤æ•°é›†</td><td>$$ \mathbb {C} $$</td><td>\mathbb {C} or \C</td></tr><tr><td>è¡¥é›†</td><td>$$ Aâ€™ \quad A^c $$</td><td>Aâ€™ or A^c</td></tr><tr><td>å·®é›†</td><td>$$ \setminus $$</td><td>\setminus</td></tr><tr><td>å³çœŸå­é›†</td><td>$$ \subseteq $$</td><td>\subseteq</td></tr><tr><td>å³éçœŸå­é›†</td><td>$$ \subsetneq $$</td><td>\subsetneq</td></tr><tr><td>å·¦å­é›†</td><td>$$ \supset $$</td><td>\supset</td></tr><tr><td>å·¦çœŸå­é›†</td><td>$$ \supseteq $$</td><td>\supseteq</td></tr><tr><td>å³éçœŸå­é›†</td><td>$$ \supsetneq $$</td><td>\supsetneq</td></tr><tr><td>åŒæˆ–</td><td>$$ \odot $$</td><td>\odot</td></tr><tr><td>åŒä¸</td><td>$$ \otimes $$</td><td>\otimes</td></tr><tr><td>å·¦éå­é›†</td><td>$$ \not\supset $$</td><td>\not\supset</td></tr><tr><td>å³éå­é›†</td><td>$$ \not\subset $$</td><td>\not\sub or \not\subset</td></tr><tr><td>çœŸå­é›†ï¼ˆProper Subsetï¼‰</td><td>$$ \varsubsetneq $$</td><td>\varsubsetneq</td></tr><tr><td>çœŸè¶…é›†ï¼ˆProper Supersetï¼‰</td><td>$$ \varsupsetneq $$</td><td>\varsupsetneq</td></tr><tr><td>ä¸æ˜¯å­é›†ï¼ˆNot a Subsetï¼‰</td><td>$$ \nsubseteq $$</td><td>\nsubseteq</td></tr><tr><td>ä¸æ˜¯è¶…é›†ï¼ˆNot a Supersetï¼‰</td><td>$$ \nsupseteq $$</td><td>\nsupseteq</td></tr><tr><td>çœŸå­é›†è€Œä¸å…¨ç­‰äºï¼ˆProper Subset But Not Equivalent Toï¼‰</td><td>$$ \subsetneqq $$</td><td>\subsetneqq</td></tr><tr><td>çœŸè¶…é›†è€Œä¸å…¨ç­‰äºï¼ˆProper Superset But Not Equivalent Toï¼‰</td><td>$$ \supsetneqq $$</td><td>\supsetneqq</td></tr><tr><td>è¶…é›†è€Œä¸å…¨ç­‰äºï¼ˆSuperset But Not Equivalent Toï¼‰</td><td>$$ \supseteqq $$</td><td>\supseteqq</td></tr><tr><td>å­é›†è€Œä¸å…¨ç­‰äºï¼ˆSubset But Not Equivalent Toï¼‰</td><td>$$ \subseteqq $$</td><td>\subseteqq</td></tr><tr><td>çœŸå­é›†è€Œä¸å®Œå…¨ç­‰äºï¼ˆProper Subset But Not Equivalent Toï¼‰</td><td>$$ \varsubsetneqq $$</td><td>\varsubsetneqq</td></tr><tr><td>çœŸè¶…é›†è€Œä¸å®Œå…¨ç­‰äºï¼ˆProper Superset But Not Equivalent Toï¼‰</td><td>$$ \varsupsetneqq $$</td><td>\varsupsetneqq</td></tr><tr><td>ä¸æ˜¯å­é›†è€Œä¸å®Œå…¨ç­‰äºï¼ˆNot a Subset But Not Equivalent Toï¼‰</td><td>$$ \nsubseteqq $$</td><td>\nsubseteqq</td></tr><tr><td>ä¸æ˜¯è¶…é›†è€Œä¸å®Œå…¨ç­‰äºï¼ˆNot a Superset But Not Equivalent Toï¼‰</td><td>$$ \nsupseteqq $$</td><td>\nsupseteqq</td></tr></tbody></table><h2 id="é€»è¾‘"><a href="#é€»è¾‘" class="headerlink" title="é€»è¾‘"></a>é€»è¾‘</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>åˆå–</td><td>$$ \wedge \quad \land $$</td><td>\wedge or \land</td></tr><tr><td>æŠ˜å–</td><td>$$ \vee \quad \lor $$</td><td>\vee or \lor</td></tr><tr><td>å¦</td><td>$$ \neg $$</td><td>\neg</td></tr><tr><td>ä¸ç­‰äº</td><td>$$ \neq \quad \not&#x3D; $$</td><td>\neq or \not&#x3D;</td></tr><tr><td>çº¦ç­‰äº</td><td>$$ \approx $$</td><td>\approx</td></tr><tr><td>ç­‰äº</td><td>$$ &#x3D; $$</td><td>&#x3D;</td></tr><tr><td>å¤§äº</td><td>$$ &gt; $$</td><td>&gt;</td></tr><tr><td>å°äº</td><td>$$ &lt; $$</td><td>&lt;</td></tr><tr><td>å¤§äºç­‰äº</td><td>$$ \geq $$</td><td>\geq</td></tr><tr><td>å°äºç­‰äº</td><td>$$ \leq $$</td><td>\leq</td></tr><tr><td>ä¸å¤§äºç­‰äº</td><td>$$ \ngeq \quad \not\geq $$</td><td>\ngeq or \not\geq</td></tr><tr><td>ä¸å°äºç­‰äº</td><td>$$ \nleq \quad \not\leq $$</td><td>\nleq or \not\leq</td></tr><tr><td>æ’å®šç­‰äº</td><td>$$ \equiv $$</td><td>\equiv</td></tr><tr><td>ä¸å°äº</td><td>$$ \not&lt; \quad \nless $$</td><td>\not&lt; or \nless</td></tr><tr><td>ä¸å¤§äº</td><td>$$ \not&gt; \quad \ngtr $$</td><td>\not&gt; or \ngtr</td></tr><tr><td>å°äºè€Œä¸ç­‰äºï¼ˆLess Than But Not Equal Toï¼‰</td><td>$$ \lneq $$</td><td>\lneq</td></tr><tr><td>å¤§äºè€Œä¸ç­‰äºï¼ˆGreater Than But Not Equal Toï¼‰</td><td>$$ \gneq $$</td><td>\gneq</td></tr><tr><td>ä¸å°äºç­‰äºï¼ˆNot Less Than or Equal Toï¼‰</td><td>$$ \nleqslant $$</td><td>\nleqslant</td></tr><tr><td>ä¸å¤§äºç­‰äºï¼ˆNot Greater Than or Equal Toï¼‰</td><td>$$ \ngeqslant $$</td><td>\ngeqslant</td></tr><tr><td>å°äºè€Œä¸å…¨ç­‰äºï¼ˆLess Than But Not Equivalent Toï¼‰</td><td>$$ \lneqq $$</td><td>\lneqq</td></tr><tr><td>å¤§äºè€Œä¸å…¨ç­‰äºï¼ˆGreater Than But Not Equivalent Toï¼‰</td><td>$$ \gneqq $$</td><td>\gneqq</td></tr><tr><td>å°äºè€Œä¸ç­‰äºï¼ˆVertical Bar Not Equal Toï¼‰</td><td>$$ \lvertneqq $$</td><td>\lvertneqq</td></tr><tr><td>å¤§äºè€Œä¸ç­‰äºï¼ˆVertical Bar Greater Than Not Equal Toï¼‰</td><td>$$ \gvertneqq $$</td><td>\gvertneqq</td></tr><tr><td>ä¸å°äºè€Œä¸å…¨ç­‰äºï¼ˆNot Less Than But Not Equivalent Toï¼‰</td><td>$$ \nleqq $$</td><td>\nleqq</td></tr><tr><td>ä¸å¤§äºè€Œä¸å…¨ç­‰äºï¼ˆNot Greater Than But Not Equivalent Toï¼‰</td><td>$$ \ngeqq $$</td><td>\ngeqq</td></tr><tr><td>å°äºè€Œä¸ç›¸ä¼¼äºï¼ˆLess Not Similarï¼‰</td><td>$$ \lnsim $$</td><td>\lnsim</td></tr><tr><td>å¤§äºè€Œä¸ç›¸ä¼¼äºï¼ˆGreater Not Similarï¼‰</td><td>$$ \gnsim $$</td><td>\gnsim</td></tr><tr><td>å°äºè€Œä¸è¿‘ä¼¼äºï¼ˆLess Not Approximatelyï¼‰</td><td>$$ \lnapprox $$</td><td>\lnapprox</td></tr><tr><td>å¤§äºè€Œä¸è¿‘ä¼¼äºï¼ˆGreater Not Approximatelyï¼‰</td><td>$$ \gnapprox $$</td><td>\gnapprox</td></tr><tr><td>ä¸è¢«å‰é©±ï¼ˆNot Precedesï¼‰</td><td>$$ \nprec $$</td><td>\nprec</td></tr><tr><td>ä¸è¢«åç»§ï¼ˆNot Succeedsï¼‰</td><td>$$ \nsucc $$</td><td>\nsucc</td></tr><tr><td>ä¸è¢«å‰é©±ç­‰äºï¼ˆNot Precedes or Equal Toï¼‰</td><td>$$ \npreceq $$</td><td>\npreceq</td></tr><tr><td>ä¸è¢«åç»§ç­‰äºï¼ˆNot Succeeds or Equal Toï¼‰</td><td>$$ \nsucceq $$</td><td>\nsucceq</td></tr><tr><td>å‰é©±ä¸å…¨ç­‰äºï¼ˆPrecedes But Not Equivalent Toï¼‰</td><td>$$ \precneqq $$</td><td>\precneqq</td></tr><tr><td>åç»§ä¸å…¨ç­‰äºï¼ˆSucceeds But Not Equivalent Toï¼‰</td><td>$$ \succneqq $$</td><td>\succneqq</td></tr><tr><td>å‰é©±ä¸ç›¸ä¼¼äºï¼ˆPrecedes Not Similarï¼‰</td><td>$$ \precnsim $$</td><td>\precnsim</td></tr><tr><td>åç»§ä¸ç›¸ä¼¼äºï¼ˆSucceeds Not Similarï¼‰</td><td>$$ \succnsim $$</td><td>\succnsim</td></tr><tr><td>å‰é©±ä¸è¿‘ä¼¼äºï¼ˆPrecedes Not Approximatelyï¼‰</td><td>$$ \precnapprox $$</td><td>\precnapprox</td></tr><tr><td>åç»§ä¸è¿‘ä¼¼äºï¼ˆSucceeds Not Approximatelyï¼‰</td><td>$$ \succnapprox $$</td><td>\succnapprox</td></tr><tr><td>ä¸ç›¸ä¼¼äºï¼ˆNot Similar Toï¼‰</td><td>$$ \nsim $$</td><td>\nsim</td></tr><tr><td>ä¸å…¨ç­‰äºï¼ˆNot Congruentï¼‰</td><td>$$ \ncong $$</td><td>\ncong</td></tr><tr><td>ä¸å‚ç›´æ¨å¯¼ï¼ˆNot Right Tackï¼‰</td><td>$$ \nvdash $$</td><td>\nvdash</td></tr><tr><td>ä¸å‚ç›´åŒæ¨å¯¼ï¼ˆNot Right Double Tackï¼‰</td><td>$$ \nvDash $$</td><td>\nvDash</td></tr><tr><td>ä¸å‚ç›´ä¸‰æ¨å¯¼ï¼ˆNot Right Tack Aboveï¼‰</td><td>$$ \nVdash $$</td><td>\nVdash</td></tr><tr><td>ä¸å‚ç›´ä¸‰åŒæ¨å¯¼ï¼ˆNot Right Double Tack Aboveï¼‰</td><td>$$ \nVDash $$</td><td>\nVDash</td></tr><tr><td>åŒå°äºå·</td><td>$$ \ll $$</td><td>\ll</td></tr><tr><td>åŒå¤§äºå·</td><td>$$ \gg $$</td><td>\gg</td></tr><tr><td>ç‚¹ç­‰å·</td><td>$$ \doteq $$</td><td>\doteq</td></tr><tr><td>å°äºå·</td><td>$$ \prec $$</td><td>\prec</td></tr><tr><td>å¤§äºå·</td><td>$$ \succ $$</td><td>\succ</td></tr><tr><td>å°äºç­‰äºå·</td><td>$$ \preceq $$</td><td>\preceq</td></tr><tr><td>å¤§äºç­‰äºå·</td><td>$$ \succeq $$</td><td>\succeq</td></tr><tr><td>ç›¸ä¼¼æˆ–ç­‰äºå·</td><td>$$ \simeq $$</td><td>\simeq</td></tr><tr><td>åŒä½™</td><td>$$ \cong $$</td><td>\cong</td></tr><tr><td>æ–¹æ¡†å†…å°äºå·</td><td>$$ \sqsubset $$</td><td>\sqsubset</td></tr><tr><td>æ–¹æ¡†å†…å¤§äºå·</td><td>$$ \sqsupset $$</td><td>\sqsupset</td></tr><tr><td>Join æˆ– Bowtie</td><td>$$ \Join \quad \bowtie $$</td><td>\Join or \bowtie</td></tr><tr><td>æ–¹æ¡†å†…å°äºç­‰äºå·</td><td>$$ \sqsubseteq $$</td><td>\sqsubseteq</td></tr><tr><td>æ–¹æ¡†å†…å¤§äºç­‰äºå·</td><td>$$ \sqsupseteq $$</td><td>\sqsupseteq</td></tr><tr><td>åŒ…å«äº</td><td>$$ \ni $$</td><td>\ni</td></tr><tr><td>æ­£æ¯”äº</td><td>$$ \propto $$</td><td>\propto</td></tr><tr><td>å‚ç›´æ¨å¯¼</td><td>$$ \vdash $$</td><td>\vdash</td></tr><tr><td>æ¨å¯¼å‚ç›´</td><td>$$ \dashv $$</td><td>\dashv</td></tr><tr><td>æ¨¡å‹å…³ç³»</td><td>$$ \models $$</td><td>\models</td></tr><tr><td>è¿‘ä¼¼äº</td><td>$$ \asymp $$</td><td>\asymp</td></tr></tbody></table><h2 id="é«˜çº§è¿ç®—"><a href="#é«˜çº§è¿ç®—" class="headerlink" title="é«˜çº§è¿ç®—"></a>é«˜çº§è¿ç®—</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>å¹³å‡æ•°</td><td>$$ \overline{xyz} $$</td><td>\overline{xyz}</td></tr><tr><td>å¼€æ–¹</td><td>$$ \sqrt{x} $$</td><td>\sqrt{x}</td></tr><tr><td>é«˜é˜¶å¼€æ–¹</td><td>$$ \sqrt[x]{y} $$</td><td>\sqrt[x]{y}</td></tr><tr><td>æé™</td><td>$$ \lim $$</td><td>\lim</td></tr><tr><td>æ±‚å’Œ</td><td>$$ \sum $$</td><td>\sum</td></tr><tr><td>ç§¯åˆ†</td><td>$$ \int $$</td><td>\int</td></tr><tr><td>å¾®åˆ†</td><td>$$ \partial $$</td><td>\partial</td></tr><tr><td>æ±‚ç§¯</td><td>$$ \prod $$</td><td>\prod</td></tr><tr><td>äºŒé‡ç§¯åˆ†</td><td>$$ \iint $$</td><td>\iint</td></tr><tr><td>å¤šé‡ç§¯åˆ†</td><td>$$ \idotsint $$</td><td>\idotsint</td></tr><tr><td>æ›²çº¿ç§¯åˆ†</td><td>$$ \oint $$</td><td>\oint</td></tr></tbody></table><h2 id="å››åˆ™è¿ç®—"><a href="#å››åˆ™è¿ç®—" class="headerlink" title="å››åˆ™è¿ç®—"></a>å››åˆ™è¿ç®—</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>åŠ </td><td>$$ + $$</td><td>+</td></tr><tr><td>å‡</td><td>$$ - $$</td><td>-</td></tr><tr><td>åŠ å‡</td><td>$$ \pm $$</td><td>\pm</td></tr><tr><td>å‡åŠ </td><td>$$ \mp $$</td><td>\mp</td></tr><tr><td>ä¹˜æ³•</td><td>$$ \times $$</td><td>\times</td></tr><tr><td>ç‚¹ä¹˜</td><td>$$ \cdot $$</td><td>\cdot</td></tr><tr><td>æ˜Ÿä¹˜</td><td>$$ \ast $$</td><td>\ast</td></tr><tr><td>é™¤æ³•</td><td>$$ \div $$</td><td>\div</td></tr><tr><td>æ–œæ³•</td><td>$$ &#x2F; $$</td><td>&#x2F;</td></tr><tr><td>åˆ†å¼</td><td>$$ \frac{x}{y} $$</td><td>\frac{x}{y}</td></tr><tr><td>åˆ†å¼</td><td>$$ {x}\over{y} $$</td><td>{x}\over{y}</td></tr><tr><td>ç»å¯¹å€¼</td><td>$$ \lvert x \lvert \quad | x | $$</td><td>\lvert x \lvert or |x|</td></tr><tr><td>ä¸æ˜¯æ•´é™¤ï¼ˆNot Dividesï¼‰</td><td>$$ \nmid $$</td><td>\nmid</td></tr><tr><td>ä¸æ˜¯çŸ­æ•´é™¤</td><td>$$ \nshortmid $$</td><td>\nshortmid</td></tr></tbody></table><h2 id="äºŒå…ƒè¿ç®—ç¬¦"><a href="#äºŒå…ƒè¿ç®—ç¬¦" class="headerlink" title="äºŒå…ƒè¿ç®—ç¬¦"></a>äºŒå…ƒè¿ç®—ç¬¦</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>éå·¦åŠå°è£…ï¼ˆUnrestricted Left Half Bracketï¼‰</td><td>$$ \unlhd $$</td><td>\unlhd</td></tr><tr><td>éå³åŠå°è£…ï¼ˆUnrestricted Right Half Bracketï¼‰</td><td>$$ \unrhd $$</td><td>\unrhd</td></tr><tr><td>æ–¹å—å¹¶é›†ï¼ˆSquare Cupï¼‰</td><td>$$ \sqcup $$</td><td>\sqcup</td></tr><tr><td>æ–¹å—äº¤é›†ï¼ˆSquare Capï¼‰</td><td>$$ \sqcap $$</td><td>\sqcap</td></tr><tr><td>ç›´å’Œï¼ˆDirect Sumï¼‰</td><td>$$ \oplus $$</td><td>\oplus</td></tr><tr><td>ç›´å·®ï¼ˆDirect Minusï¼‰</td><td>$$ \ominus $$</td><td>\ominus</td></tr><tr><td>å¤šé‡å¹¶é›†ï¼ˆMultiset Unionï¼‰</td><td>$$ \uplus $$</td><td>\uplus</td></tr><tr><td>æ··åˆï¼ˆAmalgamationï¼‰</td><td>$$ \amalg $$</td><td>\amalg</td></tr><tr><td>å·¦åŠå°è£…ï¼ˆLeft Half Bracketï¼‰</td><td>$$ \lhd $$</td><td>\lhd</td></tr><tr><td>å³åŠå°è£…ï¼ˆRight Half Bracketï¼‰</td><td>$$ \rhd $$</td><td>\rhd</td></tr><tr><td>ç‚¹åŠ å·</td><td>$$ \dotplus $$</td><td>\dotplus</td></tr><tr><td>ä¸­ç‚¹</td><td>$$ \centerdot $$</td><td>\centerdot</td></tr><tr><td>å·¦ä¹˜å·</td><td>$$ \ltimes $$</td><td>\ltimes</td></tr><tr><td>å³ä¹˜å·</td><td>$$ \rtimes $$</td><td>\rtimes</td></tr><tr><td>å°é›†åˆå·®</td><td>$$ \smallsetminus $$</td><td>\smallsetminus</td></tr><tr><td>åŒå¹¶é›†</td><td>$$ \doublecup $$</td><td>\doublecup</td></tr><tr><td>åŒäº¤é›†</td><td>$$ \doublecap $$</td><td>\doublecap</td></tr><tr><td>å³ä¸‰æ¬¡ä¹˜å·</td><td>$$ \rightthreetimes $$</td><td>\rightthreetimes</td></tr><tr><td>å·¦ä¸‰æ¬¡ä¹˜å·</td><td>$$ \leftthreetimes $$</td><td>\leftthreetimes</td></tr></tbody></table><h2 id="å·¨è¿ç®—ç¬¦"><a href="#å·¨è¿ç®—ç¬¦" class="headerlink" title="å·¨è¿ç®—ç¬¦"></a>å·¨è¿ç®—ç¬¦</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>å¹¶é›†ï¼ˆUnionï¼‰</td><td>$$ \bigcup $$</td><td>\bigcup</td></tr><tr><td>äº¤é›†ï¼ˆIntersectionï¼‰</td><td>$$ \bigcap $$</td><td>\bigcap</td></tr><tr><td>é€»è¾‘æˆ–ï¼ˆLogical Orï¼‰</td><td>$$ \bigvee $$</td><td>\bigvee</td></tr><tr><td>é€»è¾‘ä¸ï¼ˆLogical Andï¼‰</td><td>$$ \bigwedge $$</td><td>\bigwedge</td></tr><tr><td>æ–¹å—å¹¶é›†ï¼ˆSquare Cupï¼‰</td><td>$$ \bigsqcup $$</td><td>\bigsqcup</td></tr><tr><td>å¤šé‡å¹¶é›†ï¼ˆMultiset Unionï¼‰</td><td>$$ \biguplus $$</td><td>\biguplus</td></tr><tr><td>åœ†ç‚¹è¿ç®—ï¼ˆCircle Dotï¼‰</td><td>$$ \bigodot $$</td><td>\bigodot</td></tr><tr><td>ç›´å’Œï¼ˆDirect Sumï¼‰</td><td>$$ \bigoplus $$</td><td>\bigoplus</td></tr><tr><td>å¼ é‡ç§¯ï¼ˆTensor Productï¼‰</td><td>$$ \bigotimes $$</td><td>\bigotimes</td></tr></tbody></table><h2 id="ç®­å¤´"><a href="#ç®­å¤´" class="headerlink" title="ç®­å¤´"></a>ç®­å¤´</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>çŸ­å·¦ç®­å¤´ï¼ˆShort Left Arrowï¼‰</td><td>$$ \dashleftarrow $$</td><td>\dashleftarrow</td></tr><tr><td>çŸ­å³ç®­å¤´ï¼ˆShort Right Arrowï¼‰</td><td>$$ \dashrightarrow $$</td><td>\dashrightarrow</td></tr><tr><td>å·¦å·¦ç®­å¤´ï¼ˆLeftwards Double Arrow Over Rightwards Double Arrowï¼‰</td><td>$$ \leftleftarrows $$</td><td>\leftleftarrows</td></tr><tr><td>å³å³ç®­å¤´ï¼ˆRightwards Double Arrow Over Leftwards Double Arrowï¼‰</td><td>$$ \rightrightarrows $$</td><td>\rightrightarrows</td></tr><tr><td>å·¦å·¦ç®­å¤´ï¼ˆLeftwards Triple Arrowï¼‰</td><td>$$ \Lleftarrow $$</td><td>\Lleftarrow</td></tr><tr><td>å³å³ç®­å¤´ï¼ˆRightwards Triple Arrowï¼‰</td><td>$$ \Rrightarrow $$</td><td>\Rrightarrow</td></tr><tr><td>åŒå¤´å·¦ç®­å¤´ï¼ˆLeftwards Double Arrow With Double Vertical Strokeï¼‰</td><td>$$ \twoheadleftarrow $$</td><td>\twoheadleftarrow</td></tr><tr><td>åŒå¤´å³ç®­å¤´ï¼ˆRightwards Double Arrow With Double Vertical Strokeï¼‰</td><td>$$ \twoheadrightarrow $$</td><td>\twoheadrightarrow</td></tr><tr><td>å°¾éƒ¨å·¦ç®­å¤´ï¼ˆLeftwards Arrow With Tailï¼‰</td><td>$$ \leftarrowtail $$</td><td>\leftarrowtail</td></tr><tr><td>å°¾éƒ¨å³ç®­å¤´ï¼ˆRightwards Arrow With Tailï¼‰</td><td>$$ \rightarrowtail $$</td><td>\rightarrowtail</td></tr><tr><td>å·¦æ–œç®­å¤´ï¼ˆUpwards Arrow With Tip Leftwardsï¼‰</td><td>$$ \Lsh $$</td><td>\Lsh</td></tr><tr><td>å³æ–œç®­å¤´ï¼ˆUpwards Arrow With Tip Rightwardsï¼‰</td><td>$$ \Rsh $$</td><td>\Rsh</td></tr><tr><td>å·¦å¾ªç¯ç®­å¤´ï¼ˆLeftwards Open-Headed Arrow With Circled Tailï¼‰</td><td>$$ \looparrowleft $$</td><td>\looparrowleft</td></tr><tr><td>å³å¾ªç¯ç®­å¤´ï¼ˆRightwards Open-Headed Arrow With Circled Tailï¼‰</td><td>$$ \looparrowright $$</td><td>\looparrowright</td></tr><tr><td>å·¦å¼¯æ›²ç®­å¤´ï¼ˆLeftwards Arrow With Curved Tailï¼‰</td><td>$$ \curvearrowleft $$</td><td>\curvearrowleft</td></tr><tr><td>å³å¼¯æ›²ç®­å¤´ï¼ˆRightwards Arrow With Curved Tailï¼‰</td><td>$$ \curvearrowright $$</td><td>\curvearrowright</td></tr><tr><td>å·¦åœ†å½¢ç®­å¤´ï¼ˆAnticlockwise Open Circle Arrowï¼‰</td><td>$$ \circlearrowleft $$</td><td>\circlearrowleft</td></tr><tr><td>å³åœ†å½¢ç®­å¤´ï¼ˆClockwise Open Circle Arrowï¼‰</td><td>$$ \circlearrowright $$</td><td>\circlearrowright</td></tr><tr><td>å¤šé‡æ˜ å°„ï¼ˆMultimapï¼‰</td><td>$$ \multimap $$</td><td>\multimap</td></tr><tr><td>ä¸Šä¸Šç®­å¤´ï¼ˆUpwards Paired Arrowsï¼‰</td><td>$$ \upuparrows $$</td><td>\upuparrows</td></tr><tr><td>ä¸‹ä¸‹ç®­å¤´ï¼ˆDownwards Paired Arrowsï¼‰</td><td>$$ \downdownarrows $$</td><td>\downdownarrows</td></tr><tr><td>å·¦ä¸Šå¼¯é’©ç®­å¤´ï¼ˆUpwards Harpoon With Barb Leftwardsï¼‰</td><td>$$ \upharpoonleft $$</td><td>\upharpoonleft</td></tr><tr><td>å³ä¸Šå¼¯é’©ç®­å¤´ï¼ˆUpwards Harpoon With Barb Rightwardsï¼‰</td><td>$$ \upharpoonright $$</td><td>\upharpoonright</td></tr><tr><td>å³ä¸‹å¼¯é’©ç®­å¤´ï¼ˆDownwards Harpoon With Barb</td><td>$$ \downharpoonright $$</td><td>\downharpoonright</td></tr><tr><td>å·¦ä¸‹å¼¯é’©ç®­å¤´ï¼ˆDownwards Harpoon With Barb Leftwardsï¼‰</td><td>$$ \downharpoonleft $$</td><td>\downharpoonleft</td></tr><tr><td>å³æ³¢æµªç®­å¤´ï¼ˆRightwards Squiggle Arrowï¼‰</td><td>$$ \rightsquigarrow \quad \leadsto $$</td><td>\rightsquigarrow or \leadsto</td></tr><tr><td>å·¦å³æ³¢æµªç®­å¤´ï¼ˆLeft Right Squiggle Arrowï¼‰</td><td>$$ \leftrightsquigarrow $$</td><td>\leftrightsquigarrow</td></tr><tr><td>å‘ä¸Šç®­å¤´ï¼ˆUpwards Arrowï¼‰</td><td>$$ \uparrow $$</td><td>\uparrow</td></tr><tr><td>å‘ä¸‹ç®­å¤´ï¼ˆDownwards Arrowï¼‰</td><td>$$ \downarrow $$</td><td>\downarrow</td></tr><tr><td>å‘ä¸ŠåŒç®­å¤´ï¼ˆUpwards Double Arrowï¼‰</td><td>$$ \Uparrow $$</td><td>\Uparrow</td></tr><tr><td>å‘ä¸‹åŒç®­å¤´ï¼ˆDownwards Double Arrowï¼‰</td><td>$$ \Downarrow $$</td><td>\Downarrow</td></tr><tr><td>ä¸Šä¸‹ç®­å¤´ï¼ˆUp Down Arrowï¼‰</td><td>$$ \updownarrow $$</td><td>\updownarrow</td></tr><tr><td>ä¸Šä¸‹åŒç®­å¤´ï¼ˆUp Down Double Arrowï¼‰</td><td>$$ \Updownarrow $$</td><td>\Updownarrow</td></tr><tr><td>ä¸æ˜¯å·¦ç®­å¤´ï¼ˆNot Left Arrowï¼‰</td><td>$$ \nleftarrow $$</td><td>\nleftarrow</td></tr><tr><td>ä¸æ˜¯å³ç®­å¤´ï¼ˆNot Right Arrowï¼‰</td><td>$$ \nrightarrow $$</td><td>\nrightarrow</td></tr><tr><td>ä¸æ˜¯å·¦åŒç®­å¤´ï¼ˆNot Left Double Arrowï¼‰</td><td>$$ \nLeftarrow $$</td><td>\nLeftarrow</td></tr><tr><td>ä¸æ˜¯å³åŒç®­å¤´ï¼ˆNot Right Double Arrowï¼‰</td><td>$$ \nRightarrow $$</td><td>\nRightarrow</td></tr><tr><td>ä¸æ˜¯å·¦å³åŒç®­å¤´ï¼ˆNot Left Right Double Arrowï¼‰</td><td>$$ \nLeftrightarrow $$</td><td>\nLeftrightarrow</td></tr><tr><td>ä¸æ˜¯åŒå‘ç®­å¤´ï¼ˆNot Left Right Arrowï¼‰</td><td>$$ \nleftrightarrow $$</td><td>\nleftrightarrow</td></tr><tr><td>å·¦å³åŒå‘ç®­å¤´ï¼ˆLeft Right Double Arrowï¼‰</td><td>$$ \Leftrightarrow $$</td><td>\Leftrightarrow</td></tr><tr><td>å·¦å³åŒå‘ç®­å¤´ï¼Œç®€å†™å½¢å¼ï¼ˆLeft Right Arrowï¼‰</td><td>$$ \leftrightarrow $$</td><td>\leftrightarrow</td></tr><tr><td>æ˜ å°„</td><td>$$ \mapsto $$</td><td>\mapsto</td></tr><tr><td>é•¿æ˜ å°„</td><td>$$ \longmapsto $$</td><td>\longmapsto</td></tr><tr><td>å·¦é’©å¤´ç®­å¤´</td><td>$$ \hookleftarrow $$</td><td>\hookleftarrow</td></tr><tr><td>å³é’©å¤´ç®­å¤´</td><td>$$ \hookrightarrow $$</td><td>\hookrightarrow</td></tr><tr><td>å·¦ä¸Šå¼¯ç®­å¤´</td><td>$$ \leftharpoonup $$</td><td>\leftharpoonup</td></tr><tr><td>å³ä¸Šå¼¯ç®­å¤´</td><td>$$ \rightharpoonup $$</td><td>\rightharpoonup</td></tr><tr><td>å·¦ä¸‹å¼¯ç®­å¤´</td><td>$$ \leftharpoondown $$</td><td>\leftharpoondown</td></tr><tr><td>å³ä¸‹å¼¯ç®­å¤´</td><td>$$ \rightharpoondown $$</td><td>\rightharpoondown</td></tr><tr><td>å³å·¦åŒç®­å¤´</td><td>$$ \rightleftharpoons $$</td><td>\rightleftharpoons</td></tr><tr><td>å¦‚æœä¸”ä»…å¦‚æœ</td><td>$$ \iff $$</td><td>\iff</td></tr><tr><td>å‘å³ä¸Šè§’ç®­å¤´</td><td>$$ \nearrow $$</td><td>\nearrow</td></tr><tr><td>å‘å³ä¸‹è§’ç®­å¤´</td><td>$$ \searrow $$</td><td>\searrow</td></tr><tr><td>å‘å·¦ä¸‹è§’ç®­å¤´</td><td>$$ \swarrow $$</td><td>\swarrow</td></tr><tr><td>å‘å·¦ä¸Šè§’ç®­å¤´</td><td>$$ \nwarrow $$</td><td>\nwarrow</td></tr></tbody></table><h2 id="æ‹¬å·"><a href="#æ‹¬å·" class="headerlink" title="æ‹¬å·"></a>æ‹¬å·</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>å·¦æ‹¬å·ï¼ˆLeft Parenthesisï¼‰</td><td>$$ ( $$</td><td>(</td></tr><tr><td>å³æ‹¬å·ï¼ˆRight Parenthesisï¼‰</td><td>$$ ) $$</td><td>)</td></tr><tr><td>è‡ªé€‚åº”å¤§å°çš„æ‹¬å·ï¼ˆAdaptive-sized Parenthesesï¼‰</td><td>$$ \left( \right) $$</td><td>\left( \right)</td></tr><tr><td>å·¦æ–¹æ‹¬å·ï¼ˆLeft Square Bracketï¼‰</td><td>$$ [ \quad \lbrack $$</td><td>[ or \lbrack</td></tr><tr><td>å³æ–¹æ‹¬å·ï¼ˆRight Square Bracketï¼‰</td><td>$$ ] \quad \rbrack $$</td><td>] or \rbrack</td></tr><tr><td>è‡ªé€‚åº”å¤§å°çš„æ–¹æ‹¬å·ï¼ˆAdaptive-sized Square Bracketsï¼‰</td><td>$$ \left[ \right] $$</td><td>\left[ \right]</td></tr><tr><td>å·¦èŠ±æ‹¬å·ï¼ˆLeft Curly Braceï¼‰</td><td>$$ \{ \quad \lbrace $$</td><td>\\{ or \lbrace</td></tr><tr><td>å³èŠ±æ‹¬å·ï¼ˆRight Curly Braceï¼‰</td><td>$$ \} \quad \rbrace $$</td><td>\\} or \rbrace</td></tr><tr><td>å·¦å°–æ‹¬å·ï¼ˆLeft Angle Bracketï¼‰</td><td>$$ \langle $$</td><td>\lang or \langle</td></tr><tr><td>å³å°–æ‹¬å·ï¼ˆRight Angle Bracketï¼‰</td><td>$$ \rangle $$</td><td>\rang or \rangle</td></tr><tr><td>æ–œæ ï¼ˆForward Slashï¼‰</td><td>$$ &#x2F; $$</td><td>&#x2F;</td></tr><tr><td>åæ–œæ ï¼ˆBackslashï¼‰</td><td>$$ \backslash $$</td><td>\backslash</td></tr><tr><td>å·¦ä¸Šè§’æ‹¬å·ï¼ˆLeft Ceiling Bracketï¼‰</td><td>$$ \lceil $$</td><td>\lceil</td></tr><tr><td>å³ä¸Šè§’æ‹¬å·ï¼ˆRight Ceiling Bracketï¼‰</td><td>$$ \rceil $$</td><td>\rceil</td></tr><tr><td>å·¦ä¸‹è§’æ‹¬å·ï¼ˆLeft Floor Bracketï¼‰</td><td>$$ \lfloor $$</td><td>\lfloor</td></tr><tr><td>å³ä¸‹è§’æ‹¬å·ï¼ˆRight Floor Bracketï¼‰</td><td>$$ \rfloor $$</td><td>\rfloor</td></tr><tr><td>å·¦å¤§æ‹¬å·ï¼ˆLeft Large Parenthesisï¼‰</td><td>$$ \lgroup $$</td><td>\lgroup</td></tr><tr><td>å³å¤§æ‹¬å·ï¼ˆRight Large Parenthesisï¼‰</td><td>$$ \rgroup $$</td><td>\rgroup</td></tr><tr><td>å·¦å¤§æ‹¬å·ï¼ˆLeft Moustacheï¼‰</td><td>$$ \lmoustache $$</td><td>\lmoustache</td></tr><tr><td>å³å¤§æ‹¬å·ï¼ˆRight Moustacheï¼‰</td><td>$$ \rmoustache $$</td><td>\rmoustache</td></tr><tr><td>å•ç«–çº¿ï¼ˆVertical Lineï¼‰</td><td>$$ \arrowvert $$</td><td>\arrowvert</td></tr><tr><td>åŒç«–çº¿ï¼ˆDouble Vertical Lineï¼‰</td><td>$$ \Arrowvert $$</td><td>\Arrowvert</td></tr><tr><td>å¤§æ‹¬å·ç«–çº¿ï¼ˆBrace Vertical Lineï¼‰</td><td>$$ \bracevert $$</td><td>\bracevert</td></tr><tr><td>å·¦ä¸Šè§’æ‹¬å·ï¼ˆUpper Left Cornerï¼‰</td><td>$$ \ulcorner $$</td><td>\ulcorner</td></tr><tr><td>å³ä¸Šè§’æ‹¬å·ï¼ˆUpper Right Cornerï¼‰</td><td>$$ \urcorner $$</td><td>\urcorner</td></tr><tr><td>å·¦ä¸‹è§’æ‹¬å·ï¼ˆLower Left Cornerï¼‰</td><td>$$ \llcorner $$</td><td>\llcorner</td></tr><tr><td>å³ä¸‹è§’æ‹¬å·ï¼ˆLower Right Cornerï¼‰</td><td>$$ \lrcorner $$</td><td>\lrcorner</td></tr></tbody></table><h2 id="å›¾å½¢"><a href="#å›¾å½¢" class="headerlink" title="å›¾å½¢"></a>å›¾å½¢</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>ä¸å¹³è¡Œ</td><td>$$ \nparallel $$</td><td>\nparallel</td></tr><tr><td>ä¸æ˜¯çŸ­å¹³è¡Œï¼ˆNot Short Parallelï¼‰</td><td>$$ \nshortparallel $$</td><td>\nshortparallel</td></tr></tbody></table><h2 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>æ–¹æ‹¬å·åŒ…å›´çš„çŸ©é˜µ</td><td>$$ \begin{bmatrix} 0 &amp; -1 \\ 1 &amp; 0 \end{bmatrix} $$</td><td><code>\begin&#123;bmatrix&#125; 0 &amp; -1 \\ 1 &amp; 0 \end&#123;bmatrix&#125;</code></td></tr><tr><td>æ— æ‹¬å·åŒ…å›´çš„çŸ©é˜µ</td><td>$$ \begin{matrix} 0 &amp; 1 \\ 1 &amp; 0 \end{matrix} $$</td><td><code>\begin&#123;matrix&#125; 0 &amp; 1 \\ 1 &amp; 0 \end&#123;matrix&#125;</code></td></tr><tr><td>åœ†æ‹¬å·åŒ…å›´çš„çŸ©é˜µ</td><td>$$ \begin{pmatrix} 0 &amp; -i \\ i &amp; 0 \end{pmatrix} $$</td><td><code>\begin&#123;pmatrix&#125; 0 &amp; -i \\ i &amp; 0 \end&#123;pmatrix&#125;</code></td></tr><tr><td>å¤§æ‹¬å·åŒ…å›´çš„çŸ©é˜µ</td><td>$$ \begin{Bmatrix} 1 &amp; 0 \\ 0 &amp; -1 \end{Bmatrix} $$</td><td><code>\begin&#123;Bmatrix&#125; 1 &amp; 0 \\ 0 &amp; -1 \end&#123;Bmatrix&#125;</code></td></tr><tr><td>å•ç«–çº¿çš„è¡Œåˆ—å¼</td><td>$$ \begin{vmatrix} a &amp; b \\ c &amp; d \end{vmatrix} $$</td><td><code>\begin&#123;vmatrix&#125; a &amp; b \\ c &amp; d \end&#123;vmatrix&#125;</code></td></tr><tr><td>åŒç«–çº¿çš„è¡Œåˆ—å¼</td><td>$$ \begin{Vmatrix} i &amp; 0 \\ 0 &amp; -i \end{Vmatrix} $$</td><td><code>\begin&#123;Vmatrix&#125; i &amp; 0 \\ 0 &amp; -i \end&#123;Vmatrix&#125;</code></td></tr></tbody></table><h2 id="ç‰¹æ®Šç¬¦å·"><a href="#ç‰¹æ®Šç¬¦å·" class="headerlink" title="ç‰¹æ®Šç¬¦å·"></a>ç‰¹æ®Šç¬¦å·</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>æ¯ä¸ª</td><td>$$ \forall $$</td><td>\forall</td></tr><tr><td>æ— ç©·</td><td>$$ \infty $$</td><td>\infty</td></tr><tr><td>å­˜åœ¨</td><td>$$ \exists $$</td><td>\exists</td></tr><tr><td>æ¢¯åº¦</td><td>$$ \nabla $$</td><td>\nabla</td></tr><tr><td>å‚ç›´</td><td>$$ \bot \quad \perp $$</td><td>\bot or \perp</td></tr><tr><td>è§’</td><td>$$ \angle $$</td><td>\angle</td></tr><tr><td>å› ä¸º</td><td>$$ \because $$</td><td>\because</td></tr><tr><td>æ‰€ä»¥</td><td>$$ \therefore $$</td><td>\therefore</td></tr><tr><td>ç©ºæ ¼</td><td>$$ \quad $$</td><td>\quad</td></tr><tr><td>ä¸Šåˆ’çº¿</td><td>$$ \bar{x} $$</td><td>\bar{x}</td></tr><tr><td>æ³¢æµªçº¿</td><td>$$ \sim $$</td><td>\sim</td></tr><tr><td>æ¨ªå‘çœç•¥å·</td><td>$$ \dots $$</td><td>\dots</td></tr><tr><td>æ¨ªå‘çš„å±…ä¸­çœç•¥å·</td><td>$$ \cdots $$</td><td>\cdots</td></tr><tr><td>ç«–å‘çœç•¥å·</td><td>$$ \vdots $$</td><td>\vdots</td></tr><tr><td>å¯¹è§’çº¿çœç•¥å·</td><td>$$ \ddots $$</td><td>\ddots</td></tr></tbody></table><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><table><thead><tr><th>åç§°</th><th>ç¬¦å·</th><th>LaTeX</th></tr></thead><tbody><tr><td>å·¦ä¸‰è§’ï¼ˆLeft Triangleï¼‰</td><td>$$ \triangleleft $$</td><td>\triangleleft</td></tr><tr><td>å³ä¸‰è§’ï¼ˆRight Triangleï¼‰</td><td>$$ \triangleright $$</td><td>\triangleright</td></tr><tr><td>æ˜Ÿå·ï¼ˆStarï¼‰</td><td>$$ \star $$</td><td>\star</td></tr><tr><td>æ³¢æµªç¬¦å·ï¼ˆWreath Productï¼‰</td><td>$$ \wr $$</td><td>\wr</td></tr><tr><td>åŒå®å‰‘ï¼ˆDouble Daggerï¼‰</td><td>$$ \ddagger $$</td><td>\ddagger</td></tr><tr><td>å®å‰‘ï¼ˆDaggerï¼‰</td><td>$$ \dagger $$</td><td>\dagger</td></tr><tr><td>åœ†ç‚¹ï¼ˆBulletï¼‰</td><td>$$ \bullet $$</td><td>\bullet</td></tr><tr><td>è±å½¢ï¼ˆDiamondï¼‰</td><td>$$ \diamond $$</td><td>\diamond</td></tr><tr><td>æ–œçº¿åœ†åœˆï¼ˆSlashed Circleï¼‰</td><td>$$ \oslash $$</td><td>\oslash</td></tr><tr><td>çº¦åŒ–æ™®æœ—å…‹å¸¸æ•°ï¼ˆReduced Planck Constantï¼‰</td><td>$$ \hbar $$</td><td>\hbar</td></tr><tr><td>çº¦åŒ–æ™®æœ—å…‹å¸¸æ•°ï¼ˆAlternative form of Reduced Planck Constantï¼‰</td><td>$$ \hslash $$</td><td>\hslash</td></tr><tr><td>åŸŸï¼ˆBlackboard Bold kï¼‰</td><td>$$ \Bbbk $$</td><td>\Bbbk</td></tr><tr><td>æ–¹å—ï¼ˆOpen Boxï¼‰</td><td>$$ \square $$</td><td>\square</td></tr><tr><td>å®å¿ƒæ–¹å—ï¼ˆFilled Boxï¼‰</td><td>$$ \blacksquare $$</td><td>\blacksquare</td></tr><tr><td>å¯¼æ•°ç®—å­</td><td>$$ \circledS $$</td><td>\circledS</td></tr><tr><td>å°ä¸‰è§’å½¢ï¼ˆOpen Up Pointing Triangleï¼‰</td><td>$$ \vartriangle $$</td><td>\vartriangle</td></tr><tr><td>å®å¿ƒå°ä¸‰è§’å½¢ï¼ˆFilled Up Pointing Triangleï¼‰</td><td>$$ \blacktriangle $$</td><td>\blacktriangle</td></tr><tr><td>è¡¥é›†ç¬¦å·ï¼ˆComplementï¼‰</td><td>$$ \complement $$</td><td>\complement</td></tr><tr><td>å°å€’ä¸‰è§’å½¢ï¼ˆOpen Down Pointing Triangleï¼‰</td><td>$$ \triangledown $$</td><td>\triangledown</td></tr><tr><td>å®å¿ƒå°å€’ä¸‰è§’å½¢ï¼ˆFilled Down Pointing Triangleï¼‰</td><td>$$ \blacktriangledown $$</td><td>\blacktriangledown</td></tr><tr><td>å››å¶è‰ç¬¦å·ï¼ˆGameï¼‰</td><td>$$ \Game $$</td><td>\Game</td></tr><tr><td>è±å½¢ï¼ˆLozenge</td><td>$$ \lozenge $$</td><td>\lozenge</td></tr><tr><td>å®å¿ƒè±å½¢ï¼ˆFilled Lozengeï¼‰</td><td>$$ \blacklozenge $$</td><td>\blacklozenge</td></tr><tr><td>å¤§æ˜Ÿå·ï¼ˆBig Starï¼‰</td><td>$$ \bigstar $$</td><td>\bigstar</td></tr><tr><td>è„šé•¿å°å†™å­—æ¯ L</td><td>$$ \ell $$</td><td>\ell</td></tr><tr><td>æ–œå‘ä¸‹ç®­å¤´ï¼ˆDown Right Diagonal Ellipsisï¼‰</td><td>$$ \diagdown $$</td><td>\diagdown</td></tr><tr><td>æµ‹é‡è§’åº¦ç¬¦å·ï¼ˆMeasured Angleï¼‰</td><td>$$ \measuredangle $$</td><td>\measuredangle</td></tr><tr><td>æ–œå‘ä¸Šç®­å¤´ï¼ˆUp Right Diagonal Ellipsisï¼‰</td><td>$$ \diagup $$</td><td>\diagup</td></tr><tr><td>å¸¦åæ’‡å·çš„æ’‡å·ï¼ˆBackwards Primeï¼‰</td><td>$$ \backprime $$</td><td>\backprime</td></tr><tr><td>ä¸å­˜åœ¨ç¬¦å·ï¼ˆThere Does Not Existï¼‰</td><td>$$ \nexists $$</td><td>\nexists</td></tr><tr><td>åè½¬å¤§å†™ Fï¼ˆInverted Capital Fï¼‰</td><td>$$ \Finv $$</td><td>\Finv</td></tr><tr><td>ç©ºé›†ç¬¦å·ï¼ˆEmpty Setï¼‰</td><td>$$ \varnothing $$</td><td>\varnothing</td></tr><tr><td>åŸƒå¡ç‰¹å­—ç¬¦ï¼Œè¡¨ç¤ºä¸€ç§è¯­éŸ³å­¦ç¬¦å·ï¼ˆEthï¼‰</td><td>$$ \eth $$</td><td>\eth</td></tr><tr><td>çƒé¢è§’ç¬¦å·ï¼ˆSpherical Angleï¼‰</td><td>$$ \sphericalangle $$</td><td>\sphericalangle</td></tr><tr><td>ç”µå¯¼ç‡çš„å•ä½ï¼ˆMho, Inverted Ohmï¼‰</td><td>$$ \mho $$</td><td>\mho</td></tr><tr><td>è™šæ•°å•ä½ â€œiâ€</td><td>$$ \imath $$</td><td>\imath</td></tr><tr><td>è™šæ•°å•ä½ â€œjâ€</td><td>$$ \jmath $$</td><td>\jmath</td></tr><tr><td>å®æ•°é›†ï¼ˆ\Reï¼‰</td><td>$$ \Re $$</td><td>\Re</td></tr><tr><td>è™šæ•°é›†ï¼ˆ\Imï¼‰</td><td>$$ \Im $$</td><td>\Im</td></tr><tr><td></td><td>$$ \aleph $$</td><td>\aleph</td></tr><tr><td></td><td>$$ \wp $$</td><td>\wp</td></tr><tr><td></td><td>$$ \top $$</td><td>\top</td></tr><tr><td>å¹³æ–¹æ ¹</td><td>$$ \surd $$</td><td>\surd</td></tr><tr><td>çº¢å¿ƒ</td><td>$$ \heartsuit $$</td><td>\heartsuit</td></tr><tr><td>æ¢…èŠ±</td><td>$$ \clubsuit $$</td><td>\clubsuit</td></tr><tr><td>é»‘æ¡ƒ</td><td>$$ \spadesuit $$</td><td>\spadesuit</td></tr><tr><td>é™è°ƒ</td><td>$$ \flat $$</td><td>\flat</td></tr><tr><td>è¿˜åŸåˆ°è‡ªç„¶éŸ³</td><td>$$ \natural $$</td><td>\natural</td></tr><tr><td>å‡è°ƒ</td><td>$$ \sharp $$</td><td>\sharp</td></tr><tr><td>æ–¹ç‰‡</td><td>$$ \diamondsuit $$</td><td>\diamondsuit</td></tr><tr><td>èŠ‚ï¼ˆsectionï¼‰</td><td>$$ \S $$</td><td>\S</td></tr><tr><td>ç™¾åˆ†å·</td><td>$$ \% $$</td><td>%</td></tr><tr><td>éŸ³è°ƒ</td><td>$$ \\P $$</td><td>\P</td></tr><tr><td>ç¬‘è„¸</td><td>$$ \smile $$</td><td>\smile</td></tr><tr><td>çš±çœ‰</td><td>$$ \frown $$</td><td>\frown</td></tr><tr><td>å·æ›²çš„ V å½¢</td><td>$$ \curlyvee $$</td><td>\curlyvee</td></tr><tr><td>å·æ›²çš„ W å½¢</td><td>$$ \curlywedge $$</td><td>\curlywedge</td></tr><tr><td>æˆ–æ¡</td><td>$$ \veebar $$</td><td>\veebar</td></tr><tr><td>æ æ¥”å½¢</td><td>$$ \barwedge $$</td><td>\barwedge</td></tr><tr><td>åŒæ æ¥”å½¢</td><td>$$ \doublebarwedge $$</td><td>\doublebarwedge</td></tr><tr><td>æ–¹æ¡†åŠ å·</td><td>$$ \boxplus $$</td><td>\boxplus</td></tr><tr><td>æ–¹æ¡†å‡å·</td><td>$$ \boxminus $$</td><td>\boxminus</td></tr><tr><td>å¸¦åœ†å‡å·</td><td>$$ \circleddash $$</td><td>\circleddash</td></tr><tr><td>æ–¹æ¡†ä¹˜å·</td><td>$$ \boxtimes $$</td><td>\boxtimes</td></tr><tr><td>æ–¹æ¡†ç‚¹å·</td><td>$$ \boxdot $$</td><td>\boxdot</td></tr><tr><td>å¸¦åœˆçš„åœ†åœˆ</td><td>$$ \circledcirc $$</td><td>\circledcirc</td></tr><tr><td>æ’å…¥ç¬¦å·</td><td>$$ \intercal $$</td><td>\intercal</td></tr><tr><td>å¸¦åœ†æ˜Ÿå·</td><td>$$ \circledast $$</td><td>\circledast</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç¥æåŒå­¦ç”Ÿæ—¥å¿«ä¹ï¼</title>
      <link href="/2023/10/03/%E7%A5%9D%E6%9D%8E%E5%90%8C%E5%AD%A6%E7%94%9F%E6%97%A5%E5%BF%AB%E4%B9%90%EF%BC%81/"/>
      <url>/2023/10/03/%E7%A5%9D%E6%9D%8E%E5%90%8C%E5%AD%A6%E7%94%9F%E6%97%A5%E5%BF%AB%E4%B9%90%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»Šå¤©æ˜¯æåŒå­¦çš„ç”Ÿæ—¥ğŸ‚"><a href="#ä»Šå¤©æ˜¯æåŒå­¦çš„ç”Ÿæ—¥ğŸ‚" class="headerlink" title="ä»Šå¤©æ˜¯æåŒå­¦çš„ç”Ÿæ—¥ğŸ‚"></a>ä»Šå¤©æ˜¯æåŒå­¦çš„ç”Ÿæ—¥ğŸ‚</h1>]]></content>
      
      
      
        <tags>
            
            <tag> happy birthday </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Regressionç®—æ³•ç®€æ</title>
      <link href="/2023/08/03/Regression%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/"/>
      <url>/2023/08/03/Regression%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="Regressionç®—æ³•ç®€æ"><a href="#Regressionç®—æ³•ç®€æ" class="headerlink" title="Regressionç®—æ³•ç®€æ"></a>Regressionç®—æ³•ç®€æ</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>å›å½’ï¼ˆRegressionï¼‰æ˜¯æœºå™¨å­¦ä¹ ä¸­çš„ä¸€ç§é‡è¦ç®—æ³•å’Œä»»åŠ¡ï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯é¢„æµ‹è¿ç»­æ•°å€¼å‹çš„è¾“å‡ºï¼ˆæˆ–ç§°ä¸ºç›®æ ‡å˜é‡ï¼‰åœ¨è¾“å…¥ç‰¹å¾ï¼ˆæˆ–ç§°ä¸ºè‡ªå˜é‡ï¼‰çš„åŸºç¡€ä¸Šã€‚å›å½’å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ç§å»ºæ¨¡æŠ€æœ¯ï¼Œå®ƒç”¨äºåˆ†æå˜é‡ä¹‹é—´çš„å…³ç³»å¹¶é¢„æµ‹æœªæ¥çš„è¶‹åŠ¿ã€‚</p><p>åœ¨å›å½’ä¸­ï¼Œæˆ‘ä»¬å‡è®¾è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºä¹‹é—´å­˜åœ¨æŸç§å‡½æ•°å…³ç³»ï¼Œå›å½’ç®—æ³•çš„ç›®æ ‡å°±æ˜¯æ‰¾åˆ°è¿™ä¸ªå‡½æ•°ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨æ–°çš„è¾“å…¥æ•°æ®ä¸Šè¿›è¡Œé¢„æµ‹ã€‚è¿™ä¸ªå‡½æ•°é€šå¸¸è¢«ç§°ä¸ºå›å½’æ¨¡å‹ï¼Œå®ƒå¯ä»¥ç”¨æ¥é¢„æµ‹è¿ç»­çš„è¾“å‡ºå€¼ã€‚</p><p>å›å½’é—®é¢˜å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p><ol><li><p><strong>çº¿æ€§å›å½’ï¼ˆLinear Regressionï¼‰ï¼š</strong> è¿™æ˜¯æœ€ç®€å•çš„å›å½’æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒå‡è®¾è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºä¹‹é—´å­˜åœ¨çº¿æ€§å…³ç³»ã€‚çº¿æ€§å›å½’è¯•å›¾æ‰¾åˆ°æœ€ä½³æ‹Ÿåˆçš„ç›´çº¿ï¼ˆæˆ–è¶…å¹³é¢ï¼‰ï¼Œä½¿å¾—è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºçš„æ‹Ÿåˆè¯¯å·®æœ€å°ã€‚</p></li><li><p><strong>å¤šé¡¹å¼å›å½’ï¼ˆPolynomial Regressionï¼‰ï¼š</strong> åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œçº¿æ€§æ¨¡å‹æ— æ³•å‡†ç¡®åœ°æ•æ‰è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å¤æ‚å…³ç³»ã€‚å¤šé¡¹å¼å›å½’é€šè¿‡å¼•å…¥å¤šé¡¹å¼é¡¹æ¥æ‰©å±•çº¿æ€§æ¨¡å‹ï¼Œä»è€Œæ›´å¥½åœ°æ‹Ÿåˆæ•°æ®ã€‚</p></li><li><p><strong>å²­å›å½’ï¼ˆRidge Regressionï¼‰å’ŒLassoå›å½’ï¼ˆLasso Regressionï¼‰ï¼š</strong> è¿™äº›æ˜¯æ­£åˆ™åŒ–çš„å›å½’æ–¹æ³•ï¼Œç”¨äºæ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚å®ƒä»¬é€šè¿‡æ·»åŠ æ­£åˆ™åŒ–é¡¹æ¥é™åˆ¶æ¨¡å‹å‚æ•°çš„å¤§å°ï¼Œä»è€Œåœ¨æ‹Ÿåˆæ•°æ®æ—¶æ›´åŠ ç¨³å®šã€‚</p></li><li><p><strong>æ”¯æŒå‘é‡å›å½’ï¼ˆSupport Vector Regressionï¼ŒSVRï¼‰ï¼š</strong> ç±»ä¼¼äºæ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ï¼ŒSVRé€šè¿‡åœ¨è¾“å…¥ç©ºé—´ä¸­æ‰¾åˆ°ä¸€ä¸ªâ€œè¾¹ç•Œå¸¦â€æ¥é¢„æµ‹è¾“å‡ºã€‚å®ƒç€é‡äºåœ¨å…è®¸ä¸€å®šè¯¯å·®çš„æƒ…å†µä¸‹æ‹Ÿåˆæ•°æ®ã€‚</p></li><li><p><strong>å†³ç­–æ ‘å›å½’ï¼ˆDecision Tree Regressionï¼‰ï¼š</strong> è¿™ç§æ–¹æ³•ä½¿ç”¨å†³ç­–æ ‘æ¥å»ºç«‹è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚å®ƒå°†è¾“å…¥ç©ºé—´åˆ’åˆ†æˆä¸åŒçš„åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸå¯¹åº”ä¸€ä¸ªè¾“å‡ºå€¼ã€‚</p></li><li><p><strong>éšæœºæ£®æ—å›å½’ï¼ˆRandom Forest Regressionï¼‰ï¼š</strong> éšæœºæ£®æ—æ˜¯åŸºäºå†³ç­–æ ‘çš„é›†æˆæ–¹æ³•ï¼Œå®ƒé€šè¿‡ç»„åˆå¤šä¸ªå†³ç­–æ ‘æ¥æ”¹å–„é¢„æµ‹æ€§èƒ½ï¼Œå¹¶å‡å°‘è¿‡æ‹Ÿåˆé£é™©ã€‚</p></li><li><p><strong>ç¥ç»ç½‘ç»œå›å½’ï¼ˆNeural Network Regressionï¼‰ï¼š</strong> å€ŸåŠ©æ·±åº¦ç¥ç»ç½‘ç»œï¼Œç¥ç»ç½‘ç»œå›å½’èƒ½å¤Ÿå»ºæ¨¡å¤æ‚çš„éçº¿æ€§å…³ç³»ã€‚å®ƒé€‚ç”¨äºæ›´å¤§è§„æ¨¡å’Œæ›´å¤æ‚çš„æ•°æ®é›†ã€‚</p></li></ol><p>å›å½’é—®é¢˜çš„è¯„ä¼°é€šå¸¸ä½¿ç”¨å„ç§æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚å‡æ–¹è¯¯å·®ï¼ˆMean Squared Errorï¼‰ã€å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMean Absolute Errorï¼‰ã€å†³å®šç³»æ•°ï¼ˆCoefficient of Determinationï¼ŒR-squaredï¼‰ç­‰æ¥è¡¡é‡æ¨¡å‹çš„é¢„æµ‹æ€§èƒ½ã€‚</p><div class="note info"><p>é€»è¾‘å›å½’è™½ç„¶åå­—ä¸­åŒ…å«â€œå›å½’â€ï¼Œä½†å®é™…ä¸Šå®ƒæ˜¯ä¸€ç§åˆ†ç±»ç®—æ³•ï¼Œè€Œä¸æ˜¯å›å½’ç®—æ³•ã€‚é€»è¾‘å›å½’ç”¨äºè§£å†³äºŒåˆ†ç±»é—®é¢˜ï¼Œå³å°†è¾“å…¥ç‰¹å¾æ˜ å°„åˆ°ä¸€ä¸ªæ¦‚ç‡å€¼ï¼Œè¡¨ç¤ºå±äºæŸä¸ªç±»åˆ«çš„å¯èƒ½æ€§ï¼Œç„¶åæ ¹æ®é˜ˆå€¼æ¥è¿›è¡Œåˆ†ç±»å†³ç­–ã€‚</p></div><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>å›å½’åœ¨è®¸å¤šä¸åŒé¢†åŸŸéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå®ƒä¸»è¦ç”¨äºé¢„æµ‹å’Œå»ºæ¨¡è¿ç»­æ•°å€¼å‹çš„è¾“å‡ºå˜é‡ã€‚</p><ol><li><p><strong>ç»æµå­¦å’Œé‡‘èï¼š</strong> å›å½’å¯ç”¨äºé¢„æµ‹è‚¡ç¥¨ä»·æ ¼ã€å•†å“ä»·æ ¼ã€é€šè´§è†¨èƒ€ç‡ç­‰ç»æµå’Œé‡‘èæŒ‡æ ‡ï¼Œå¸®åŠ©æŠ•èµ„å†³ç­–å’Œé£é™©ç®¡ç†ã€‚</p></li><li><p><strong>æˆ¿åœ°äº§ï¼š</strong> ç”¨äºé¢„æµ‹æˆ¿ä»·ï¼Œè€ƒè™‘åˆ°å„ç§æˆ¿å±‹ç‰¹å¾ï¼ˆå¦‚é¢ç§¯ã€åœ°ç†ä½ç½®ã€æ¥¼å±‚ç­‰ï¼‰å¯¹ä»·æ ¼çš„å½±å“ã€‚</p></li><li><p><strong>åŒ»å­¦ï¼š</strong> å›å½’å¯ä»¥åº”ç”¨äºç–¾ç—…é£é™©é¢„æµ‹ã€è¯ç‰©å‰‚é‡é€‰æ‹©ä»¥åŠåŒ»ç–—æˆæœ¬é¢„æµ‹ç­‰é¢†åŸŸã€‚</p></li><li><p><strong>è‡ªç„¶ç§‘å­¦ï¼š</strong> åœ¨ç‰©ç†ã€åŒ–å­¦ã€åœ°ç†ç­‰é¢†åŸŸï¼Œå›å½’å¯ç”¨äºåˆ†æå®éªŒæ•°æ®ã€æ¨¡æ‹Ÿç‰©ç†è¿‡ç¨‹ï¼Œå¹¶å¸®åŠ©ç†è§£è‡ªç„¶ç°è±¡ã€‚</p></li><li><p><strong>ç¤¾ä¼šç§‘å­¦ï¼š</strong> ç”¨äºé¢„æµ‹äººå£ç»Ÿè®¡æ•°æ®ã€ç¤¾ä¼šè¡Œä¸ºè¶‹åŠ¿ã€é€‰æ°‘æŠ•ç¥¨å€¾å‘ç­‰ã€‚</p></li><li><p><strong>å·¥ç¨‹å’ŒæŠ€æœ¯ï¼š</strong> å›å½’å¯ç”¨äºé¢„æµ‹äº§å“å¯¿å‘½ã€ææ–™å¼ºåº¦ã€å·¥ç¨‹å‚æ•°ç­‰ï¼Œæœ‰åŠ©äºè®¾è®¡å’Œåˆ¶é€ è¿‡ç¨‹çš„ä¼˜åŒ–ã€‚</p></li><li><p><strong>å¸‚åœºè¥é”€ï¼š</strong> å›å½’åœ¨å¸‚åœºè¥é”€ä¸­ç”¨äºé¢„æµ‹é”€å”®é‡ã€å¸‚åœºä»½é¢ï¼Œä»¥åŠäº†è§£å¹¿å‘ŠæŠ•æ”¾å’Œä¿ƒé”€ç­–ç•¥å¯¹é”€å”®çš„å½±å“ã€‚</p></li><li><p><strong>ç¯å¢ƒç§‘å­¦ï¼š</strong> å›å½’å¯ç”¨äºåˆ†æç¯å¢ƒæ•°æ®ï¼Œä¾‹å¦‚é¢„æµ‹æ°”æ¸©å˜åŒ–ã€å¤§æ°”æ±¡æŸ“æ°´å¹³ç­‰ã€‚</p></li><li><p><strong>å†œä¸šï¼š</strong> ç”¨äºé¢„æµ‹å†œä½œç‰©äº§é‡ã€åœŸå£¤è´¨é‡ï¼Œä»¥åŠå†œä¸šå®è·µå¯¹æ”¶æˆçš„å½±å“ã€‚</p></li><li><p><strong>æ•™è‚²ï¼š</strong> åœ¨æ•™è‚²é¢†åŸŸï¼Œå›å½’å¯ä»¥ç”¨äºé¢„æµ‹å­¦ç”Ÿçš„å­¦æœ¯æˆç»©ï¼Œä»¥åŠäº†è§£ä¸åŒå› ç´ å¯¹å­¦ç”Ÿè¡¨ç°çš„å½±å“ã€‚</p></li><li><p><strong>è¿è¾“ä¸ç‰©æµï¼š</strong> ç”¨äºé¢„æµ‹è´§è¿é‡ã€äº¤é€šæ‹¥å µæƒ…å†µï¼Œä»¥åŠè¿è¾“æˆæœ¬çš„å˜åŒ–ã€‚</p></li></ol><h2 id="å¿…å¤‡çŸ¥è¯†"><a href="#å¿…å¤‡çŸ¥è¯†" class="headerlink" title="å¿…å¤‡çŸ¥è¯†"></a>å¿…å¤‡çŸ¥è¯†</h2><ol><li><p>çŸ©é˜µæ±‚é€†</p><p>çŸ©é˜µæ±‚é€†æ˜¯ä¸€ä¸ªåœ¨çº¿æ€§ä»£æ•°ä¸­éå¸¸é‡è¦çš„æ“ä½œï¼Œå®ƒç”¨äºè§£å†³ä¸€ç³»åˆ—é—®é¢˜ï¼Œä¾‹å¦‚çº¿æ€§æ–¹ç¨‹ç»„çš„æ±‚è§£ã€çº¿æ€§å˜æ¢çš„é€†å˜æ¢ç­‰ã€‚å¯¹äºä¸€ä¸ªæ–¹é˜µï¼ˆå³è¡Œæ•°å’Œåˆ—æ•°ç›¸ç­‰çš„çŸ©é˜µï¼‰ï¼Œå¦‚æœå®ƒæ˜¯å¯é€†çš„ï¼ˆä¹Ÿç§°ä¸ºéå¥‡å¼‚çš„ï¼‰ï¼Œåˆ™å¯ä»¥æ±‚å‡ºå®ƒçš„é€†çŸ©é˜µã€‚</p><p>è®¾Aæ˜¯ä¸€ä¸ªné˜¶æ–¹é˜µï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªné˜¶çŸ©é˜µBï¼Œä½¿å¾—AB &#x3D; BA &#x3D; Iï¼ˆå…¶ä¸­Iæ˜¯né˜¶å•ä½çŸ©é˜µï¼‰ï¼Œåˆ™ç§°Bæ˜¯Açš„é€†çŸ©é˜µï¼Œè®°ä½œAâ»Â¹ã€‚</p><p>ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çŸ©é˜µéƒ½æ˜¯å¯é€†çš„ã€‚ä¸€ä¸ªçŸ©é˜µAå¯é€†çš„æ¡ä»¶æ˜¯å…¶è¡Œåˆ—å¼ä¸ä¸ºé›¶ï¼Œå³det(A) â‰  0ã€‚</p><p>å¯¹äºä¸€ä¸ªå¯é€†çŸ©é˜µAï¼Œå®ƒçš„é€†çŸ©é˜µAâ»Â¹å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ±‚è§£ï¼š</p><p>å¦‚æœAæ˜¯ä¸€ä¸ª2x2çŸ©é˜µï¼š$$A &#x3D; \begin{bmatrix} a &amp; b \ c &amp; d \end{bmatrix}$$<br>åˆ™Açš„é€†çŸ©é˜µä¸ºï¼š$$A^{-1} &#x3D; \frac{1}{ad - bc} \begin{bmatrix} d &amp; -b \ -c &amp; a \end{bmatrix}$$</p><p>å¯¹äºæ›´é«˜ç»´çš„çŸ©é˜µï¼Œå¯ä»¥ä½¿ç”¨é«˜æ–¯-çº¦æ—¦æ¶ˆå…ƒæ³•ã€LUåˆ†è§£ç­‰æ–¹æ³•æ¥æ±‚é€†çŸ©é˜µã€‚å¦å¤–ï¼Œè®¸å¤šæ•°å€¼è®¡ç®—åº“å’Œè½¯ä»¶æä¾›äº†æ±‚é€†çŸ©é˜µçš„å‡½æ•°ï¼Œå¦‚Pythonçš„NumPyåº“ä¸­çš„<code>numpy.linalg.inv()</code>å‡½æ•°ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒçŸ©é˜µæ±‚é€†å¯èƒ½ä¼šæ¶‰åŠåˆ°æ•°å€¼ç¨³å®šæ€§çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨è®¡ç®—æœºä¸­ä½¿ç”¨æœ‰é™çš„æµ®ç‚¹æ•°è¡¨ç¤ºã€‚å¯¹äºå¤§å‹æˆ–ç—…æ€ï¼ˆill-conditionedï¼‰çš„çŸ©é˜µï¼Œæ±‚é€†å¯èƒ½ä¼šå¯¼è‡´æ•°å€¼ä¸ç¨³å®šï¼Œéœ€è¦è°¨æ…å¤„ç†ã€‚</p><div class="note warning"><p>è¿™é‡ŒçŸ©é˜µçš„mathjaxæ ¼å¼ä¸å…¼å®¹ï¼Œbcä½ç½®åº”è¯¥æ˜¯æ¢è¡Œæ˜¾ç¤ºçš„ï¼</p></div></li><li><p>æœ€å°äºŒä¹˜æ³•</p><p>æœ€å°äºŒä¹˜æ³•ï¼ˆLeast Squares Methodï¼‰æ˜¯ä¸€ç§ç”¨äºæ‹Ÿåˆæ•°æ®å’Œä¼°è®¡æ¨¡å‹å‚æ•°çš„ç»Ÿè®¡æŠ€æœ¯ã€‚å®ƒçš„ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡æœ€å°åŒ–å®é™…è§‚æµ‹å€¼ä¸æ¨¡å‹é¢„æµ‹å€¼ä¹‹é—´çš„è¯¯å·®çš„å¹³æ–¹å’Œï¼Œæ¥æ‰¾åˆ°æœ€ä½³çš„æ¨¡å‹å‚æ•°ã€‚æœ€å°äºŒä¹˜æ³•åœ¨å›å½’åˆ†æã€æ›²çº¿æ‹Ÿåˆç­‰é—®é¢˜ä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚</p><p>åœ¨å›å½’åˆ†æä¸­ï¼Œæœ€å°äºŒä¹˜æ³•ç”¨äºæ‹Ÿåˆä¸€ä¸ªçº¿æ€§æ¨¡å‹ï¼Œä½¿æ¨¡å‹çš„é¢„æµ‹å€¼ä¸è§‚æµ‹å€¼ä¹‹é—´çš„è¯¯å·®æœ€å°åŒ–ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªåŒ…å« $m$ ä¸ªæ ·æœ¬çš„æ•°æ®é›†ï¼Œæ¯ä¸ªæ ·æœ¬åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ç‰¹å¾ $x$ å’Œä¸€ä¸ªè¾“å‡º $y$ã€‚æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªçº¿æ€§æ¨¡å‹ $y &#x3D; f(x)$ï¼Œå…¶ä¸­ $f(x)$ è¡¨ç¤ºè¾“å…¥ç‰¹å¾ $x$ å¯¹åº”çš„æ¨¡å‹é¢„æµ‹å€¼ã€‚ç„¶åï¼Œé€šè¿‡æœ€å°äºŒä¹˜æ³•ï¼Œæˆ‘ä»¬å¯»æ‰¾æœ€ä½³çš„æ¨¡å‹å‚æ•°ï¼ˆå›å½’ç³»æ•°ï¼‰ä½¿å¾—è§‚æµ‹å€¼ä¸é¢„æµ‹å€¼ä¹‹é—´çš„è¯¯å·®å¹³æ–¹å’Œæœ€å°ã€‚</p><p>æ•°å­¦ä¸Šï¼Œå¯¹äºä¸€ä¸ªçº¿æ€§æ¨¡å‹ $y &#x3D; w_0 + w_1x_1 + w_2x_2 + \ldots + w_nx_n$ï¼Œæœ€å°äºŒä¹˜æ³•çš„ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä½³çš„å›å½’ç³»æ•° $w_0, w_1, w_2, \ldots, w_n$ï¼Œä½¿å¾—è¯¯å·®å¹³æ–¹å’Œæœ€å°ï¼Œå³æœ€å°åŒ–ä»¥ä¸‹çš„æŸå¤±å‡½æ•°ï¼š</p><p>$$\text{Loss} &#x3D; \sum_{i&#x3D;1}^{m} (y_i - \hat{y}_i)^2$$</p><p>å…¶ä¸­ï¼Œ$y_i$ æ˜¯ç¬¬ $i$ ä¸ªæ ·æœ¬çš„å®é™…è¾“å‡ºï¼Œ$\hat{y}_i$ æ˜¯æ¨¡å‹é¢„æµ‹çš„è¾“å‡ºã€‚</p><p>æœ€å°äºŒä¹˜æ³•çš„æ±‚è§£è¿‡ç¨‹é€šå¸¸æ¶‰åŠå¯¹æŸå¤±å‡½æ•°è¿›è¡Œæ±‚å¯¼ï¼Œç„¶åå°†å¯¼æ•°è®¾ç½®ä¸ºé›¶ï¼Œä»è€Œå¾—åˆ°æ¨¡å‹å‚æ•°çš„è§£æè§£ã€‚è¿™ä¸ªè§£æè§£å¯ä»¥ç”¨äºæ±‚è§£æœ€ä½³çš„å›å½’ç³»æ•°ã€‚</p><p>å‡è®¾æœ‰ä»¥ä¸‹å˜é‡ï¼š</p><ul><li>$x_{\text{test}}$: å¾…é¢„æµ‹çš„æ ·æœ¬ç‚¹çš„ç‰¹å¾å‘é‡</li><li>$x_{\text{arr}}$: æ‰€æœ‰æ ·æœ¬çš„ç‰¹å¾æ•°æ®çŸ©é˜µï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæ ·æœ¬çš„ç‰¹å¾å‘é‡</li><li>$y_{\text{arr}}$: æ‰€æœ‰æ ·æœ¬çš„ç›®æ ‡å˜é‡å‘é‡</li><li>$\tau$: å¸¦å®½å‚æ•°ï¼Œæ§åˆ¶æƒé‡çš„è¡°å‡é€Ÿç‡</li><li>$w^{(i)}$: æ ·æœ¬ç‚¹çš„æƒé‡çŸ©é˜µï¼Œè¡¨ç¤ºæ ·æœ¬ç‚¹ä¸å¾…é¢„æµ‹ç‚¹çš„è·ç¦»æ‰€è®¡ç®—çš„æƒé‡</li><li>$\mathbf{x}_{\text{mat}}$: æ ·æœ¬ç‰¹å¾æ•°æ®çŸ©é˜µ</li><li>$\mathbf{y}_{\text{mat}}$: æ ·æœ¬ç›®æ ‡å˜é‡çŸ©é˜µ</li><li>$\mathbf{x}_ {\text{tx}}$: çŸ©é˜µ $\mathbf{x}_{\text{mat}}$ çš„è½¬ç½®ä¸è‡ªèº«çš„ä¹˜ç§¯</li><li>$\mathbf{w}_{\text{mat}}$: æƒé‡çŸ©é˜µ $\mathbf{w}$ï¼Œå¯¹è§’çŸ©é˜µï¼Œç”± $w^{(i)}$ ç»„æˆ</li><li>$\mathbf{y}_{\text{hat}}$: é¢„æµ‹ç‚¹ä¼°è®¡å€¼çŸ©é˜µ</li></ul><p>æœ€å°äºŒä¹˜æ³•è®¡ç®—å›å½’ç³»æ•°çš„æ•°å­¦å…¬å¼ä¸ºï¼š<br>$$ \mathbf{w}_{\text{mat}} &#x3D; \text{diag}(w^{(1)}, w^{(2)}, \ldots, w^{(m)}) \quad \text{(å¯¹è§’çŸ©é˜µ)} $$</p><p>$$ \mathbf{x} _ {\text{tx}} &#x3D; \mathbf{x} _ {\text{mat}}^T \cdot \mathbf{x} _ {\text{mat}} $$</p><p>$$ \hat{\beta} &#x3D; (\mathbf{x}_ {\text{tx}} \cdot \mathbf{w}_ {\text{mat}} \cdot \mathbf{x}_ {\text{mat}})^{-1} \cdot \mathbf{x}_ {\text{mat}}^T \cdot \mathbf{w}_ {\text{mat}} \cdot \mathbf{y}_ {\text{mat}} $$</p><p>$$ \mathbf{y}_ {\text{hat}} &#x3D; \mathbf{x}_ {\text{test}} \cdot \hat{\beta} $$</p></li></ol><h2 id="çº¿æ€§å›å½’"><a href="#çº¿æ€§å›å½’" class="headerlink" title="çº¿æ€§å›å½’"></a>çº¿æ€§å›å½’</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>çº¿æ€§å›å½’æ˜¯ä¸€ç§å¸¸è§ä¸”ç®€å•çš„å›å½’ç®—æ³•ï¼Œç”¨äºå»ºç«‹è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºä¹‹é—´çš„çº¿æ€§å…³ç³»ã€‚å…¶åŸç†å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p><strong>å‡è®¾çº¿æ€§å…³ç³»ï¼š</strong> é¦–å…ˆï¼Œçº¿æ€§å›å½’å‡è®¾è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºä¹‹é—´å­˜åœ¨çº¿æ€§å…³ç³»ï¼Œå³å¯ä»¥ç”¨çº¿æ€§æ–¹ç¨‹æ¥è¡¨ç¤ºã€‚è¿™ä¸ªçº¿æ€§æ–¹ç¨‹çš„å½¢å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š$$y &#x3D; w_0 + w_1x_1 + w_2x_2 + \ldots + w_nx_n$$å…¶ä¸­ï¼Œ$y$æ˜¯é¢„æµ‹çš„è¾“å‡ºï¼Œ$x_1, x_2, \ldots, x_n$æ˜¯è¾“å…¥ç‰¹å¾ï¼Œ$w_0, w_1, w_2, \ldots, w_n$æ˜¯å›å½’ç³»æ•°ï¼ˆæƒé‡ï¼‰ã€‚</p></li><li><p><strong>æœ€å°åŒ–è¯¯å·®ï¼š</strong> çº¿æ€§å›å½’çš„ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä½³çš„å›å½’ç³»æ•°ï¼Œä½¿å¾—é¢„æµ‹å€¼ä¸çœŸå®è¾“å‡ºä¹‹é—´çš„è¯¯å·®æœ€å°åŒ–ã€‚é€šå¸¸ä½¿ç”¨å‡æ–¹è¯¯å·®ï¼ˆMean Squared Errorï¼ŒMSEï¼‰ä½œä¸ºè¡¡é‡è¯¯å·®çš„æŒ‡æ ‡ã€‚MSEçš„å®šä¹‰ä¸ºï¼š$$MSE &#x3D; \frac{1}{m} \sum_{i&#x3D;1}^{m} (y_i - \hat{y}_i)^2$$å…¶ä¸­ï¼Œ$m$æ˜¯æ ·æœ¬æ•°é‡ï¼Œ$y_i$æ˜¯ç¬¬$i$ä¸ªæ ·æœ¬çš„çœŸå®è¾“å‡ºï¼Œ$\hat{y}_i$æ˜¯çº¿æ€§æ¨¡å‹é¢„æµ‹çš„è¾“å‡ºã€‚</p></li><li><p><strong>æ±‚è§£å›å½’ç³»æ•°ï¼š</strong> æœ€å°åŒ–MSEçš„è¿‡ç¨‹å¯ä»¥ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–ç®—æ³•ï¼Œå¸¸è§çš„æ–¹æ³•æ˜¯æœ€å°äºŒä¹˜æ³•ï¼ˆOrdinary Least Squaresï¼ŒOLSï¼‰ã€‚æœ€å°äºŒä¹˜æ³•çš„ç›®æ ‡æ˜¯æ‰¾åˆ°èƒ½å¤Ÿæœ€å°åŒ–è¯¯å·®å¹³æ–¹å’Œçš„å›å½’ç³»æ•°ï¼Œä»è€Œå¾—åˆ°æœ€ä½³æ‹Ÿåˆçš„ç›´çº¿ï¼ˆæˆ–è¶…å¹³é¢ï¼‰ã€‚</p></li><li><p><strong>ç‰¹å¾å¤„ç†ï¼š</strong> åœ¨è¿›è¡Œçº¿æ€§å›å½’ä¹‹å‰ï¼Œé€šå¸¸éœ€è¦å¯¹è¾“å…¥ç‰¹å¾è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç‰¹å¾ç¼©æ”¾ã€ç‰¹å¾é€‰æ‹©ã€ç‰¹å¾å˜æ¢ç­‰ã€‚è¿™æœ‰åŠ©äºæé«˜æ¨¡å‹çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p></li><li><p><strong>é¢„æµ‹å’Œè¯„ä¼°ï¼š</strong> åœ¨è®­ç»ƒå®Œæˆåï¼Œä½¿ç”¨è®­ç»ƒå¾—åˆ°çš„å›å½’ç³»æ•°æ¥è¿›è¡Œé¢„æµ‹ã€‚å¯¹äºæ–°çš„è¾“å…¥ç‰¹å¾ï¼Œé€šè¿‡çº¿æ€§æ–¹ç¨‹è®¡ç®—é¢„æµ‹å€¼ã€‚æ¨¡å‹çš„æ€§èƒ½å¯ä»¥é€šè¿‡å„ç§æŒ‡æ ‡ï¼ˆå¦‚R-squaredã€å‡æ–¹è¯¯å·®ç­‰ï¼‰æ¥è¿›è¡Œè¯„ä¼°ã€‚</p></li></ol><h2 id="å±€éƒ¨åŠ æƒçº¿æ€§å›å½’"><a href="#å±€éƒ¨åŠ æƒçº¿æ€§å›å½’" class="headerlink" title="å±€éƒ¨åŠ æƒçº¿æ€§å›å½’"></a>å±€éƒ¨åŠ æƒçº¿æ€§å›å½’</h2><h3 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å±€éƒ¨åŠ æƒçº¿æ€§å›å½’ï¼ˆLocally Weighted Linear Regressionï¼ŒLWLRï¼‰æ˜¯ä¸€ç§éå‚æ•°å›å½’æ–¹æ³•ï¼Œç”¨äºåœ¨å›å½’åˆ†æä¸­æ‹Ÿåˆæ•°æ®å¹¶é¢„æµ‹ç›®æ ‡å˜é‡ã€‚ä¸ä¼ ç»Ÿçš„çº¿æ€§å›å½’æ–¹æ³•ä¸åŒï¼ŒLWLR åœ¨é¢„æµ‹æ—¶è€ƒè™‘äº†æ ·æœ¬ç‚¹é™„è¿‘çš„æƒé‡ï¼Œä»è€Œèƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰æ•°æ®ä¸­çš„å±€éƒ¨éçº¿æ€§å…³ç³»ã€‚</p><p>LWLR çš„ä¸»è¦æ€æƒ³æ˜¯ï¼Œå¯¹äºå¾…é¢„æµ‹çš„æ•°æ®ç‚¹ï¼Œé€šè¿‡å¯¹è®­ç»ƒæ•°æ®ä¸­çš„æ¯ä¸ªç‚¹èµ‹äºˆä¸åŒçš„æƒé‡ï¼Œæ¥è¿›è¡ŒåŠ æƒçº¿æ€§å›å½’ã€‚åœ¨é¢„æµ‹æ—¶ï¼Œè·ç¦»å¾…é¢„æµ‹ç‚¹è¿‘çš„è®­ç»ƒæ ·æœ¬ä¼šè¢«èµ‹äºˆè¾ƒé«˜çš„æƒé‡ï¼Œè€Œè·ç¦»è¾ƒè¿œçš„è®­ç»ƒæ ·æœ¬åˆ™ä¼šè¢«èµ‹äºˆè¾ƒä½çš„æƒé‡ã€‚è¿™æ ·å¯ä»¥ä½¿å¾—æ¨¡å‹åœ¨å±€éƒ¨åŒºåŸŸå†…æ›´å…³æ³¨äºé‚»è¿‘æ ·æœ¬ï¼Œä»è€Œæ›´å¥½åœ°é€‚åº”å±€éƒ¨çš„æ•°æ®åˆ†å¸ƒã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå¯¹äºå¾…é¢„æµ‹ç‚¹ $(x_{\text{test}}, y_{\text{test}})$ï¼ŒLWLR çš„å›å½’æ¨¡å‹ä¸ºï¼š</p><p>$$y_{\text{test}} &#x3D; x_{\text{test}}^T \cdot \hat{\beta}$$</p><p>å…¶ä¸­ï¼Œ$\hat{\beta}$ æ˜¯é€šè¿‡åŠ æƒæœ€å°äºŒä¹˜æ³•è®¡ç®—å¾—åˆ°çš„å›å½’ç³»æ•°ï¼Œæƒé‡ $w^{(i)}$ ç”±æ ¸å‡½æ•°è®¡ç®—å¾—å‡ºï¼š</p><p>$$w^{(i)} &#x3D; \exp\left(-\frac{(x^{(i)} - x_{\text{test}})^T \cdot (x^{(i)} - x_{\text{test}})}{2\tau^2}\right)$$</p><p>å…¶ä¸­ï¼Œ$x^{(i)}$ æ˜¯è®­ç»ƒæ ·æœ¬çš„ç‰¹å¾å‘é‡ï¼Œ$\tau$ æ˜¯ä¸€ä¸ªç”¨æˆ·æŒ‡å®šçš„å‚æ•°ï¼Œæ§åˆ¶æƒé‡çš„è¡°å‡é€Ÿåº¦ã€‚æ ¸å‡½æ•°é€šå¸¸ä½¿ç”¨é«˜æ–¯æ ¸å‡½æ•°ï¼ˆGaussian Kernelï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–ç±»å‹çš„æ ¸å‡½æ•°ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒLWLR æ˜¯ä¸€ç§éå‚æ•°æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¸å¯¹æ¨¡å‹å½¢å¼åšå‡ºæ˜ç¡®çš„å‡è®¾ï¼Œè€Œæ˜¯åœ¨æ¯ä¸ªé¢„æµ‹ç‚¹å¤„éƒ½è¿›è¡ŒåŠ æƒçº¿æ€§å›å½’ã€‚è™½ç„¶ LWLR åœ¨å±€éƒ¨èƒ½å¤Ÿæ›´å¥½åœ°æ‹Ÿåˆæ•°æ®ï¼Œä½†ä¹Ÿå­˜åœ¨è®¡ç®—å¤æ‚åº¦é«˜å’Œå‚æ•°é€‰æ‹©çš„é—®é¢˜ã€‚</p><p>LWLR åœ¨å¤„ç†æ•°æ®ä¸­å­˜åœ¨å±€éƒ¨éçº¿æ€§å…³ç³»æ—¶å…·æœ‰ä¼˜åŠ¿ï¼Œä½†åœ¨å…¨å±€è¶‹åŠ¿è¾ƒä¸ºæ˜æ˜¾çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆã€‚</p><h2 id="å²­å›å½’"><a href="#å²­å›å½’" class="headerlink" title="å²­å›å½’"></a>å²­å›å½’</h2><h3 id="åŸç†-2"><a href="#åŸç†-2" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å²­å›å½’ï¼ˆRidge Regressionï¼‰æ˜¯ä¸€ç§ç”¨äºå¤„ç†å¤šé‡å…±çº¿æ€§é—®é¢˜çš„çº¿æ€§å›å½’æŠ€æœ¯ï¼Œå®ƒåœ¨æœ€å°äºŒä¹˜æ³•çš„åŸºç¡€ä¸Šå¼•å…¥äº†æ­£åˆ™åŒ–é¡¹ï¼Œæœ‰åŠ©äºæé«˜æ¨¡å‹çš„ç¨³å®šæ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚å²­å›å½’çš„ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡å¯¹å›å½’ç³»æ•°çš„å¤§å°è¿›è¡Œé™åˆ¶ï¼Œæ¥å‡å°æ¨¡å‹çš„å¤æ‚åº¦ï¼Œä»è€Œé™ä½è¿‡æ‹Ÿåˆçš„é£é™©ã€‚</p><p>åœ¨æ™®é€šçš„æœ€å°äºŒä¹˜çº¿æ€§å›å½’ä¸­ï¼Œæˆ‘ä»¬è¯•å›¾æœ€å°åŒ–æŸå¤±å‡½æ•° $J(\beta) &#x3D; \sum_{i&#x3D;1}^{m}(y^{(i)} - \mathbf{x}^{(i)T}\beta)^2$ï¼Œå…¶ä¸­ $\beta$ æ˜¯å›å½’ç³»æ•°ï¼Œ$y^{(i)}$ æ˜¯ç›®æ ‡å˜é‡ï¼Œ$\mathbf{x}^{(i)}$ æ˜¯ç‰¹å¾å‘é‡ã€‚è€Œå²­å›å½’åˆ™åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå¼•å…¥äº†ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼Œä½¿å¾—æœ€å°åŒ–çš„ç›®æ ‡å˜ä¸ºï¼š</p><p>$$J_{\text{ridge}}(\beta) &#x3D; \sum_{i&#x3D;1}^{m}(y^{(i)} - \mathbf{x}^{(i)T}\beta)^2 + \lambda \sum_{j&#x3D;1}^{n}\beta_j^2$$</p><p>å…¶ä¸­ $\lambda$ æ˜¯ä¸€ä¸ªç”¨æˆ·æŒ‡å®šçš„æ­£åˆ™åŒ–å‚æ•°ï¼Œ$n$ æ˜¯ç‰¹å¾çš„æ•°é‡ã€‚ç¬¬äºŒé¡¹ $\lambda \sum_{j&#x3D;1}^{n}\beta_j^2$ è¢«ç§°ä¸ºå²­æƒ©ç½šé¡¹ï¼ˆRidge Penaltyï¼‰ï¼Œå®ƒæƒ©ç½šäº†å›å½’ç³»æ•°çš„å¤§å°ã€‚å½“ $\lambda$ è¾ƒå¤§æ—¶ï¼Œå›å½’ç³»æ•°ä¼šè¢«å¼ºçƒˆæƒ©ç½šï¼Œè¶‹å‘äºæ¥è¿‘äºé›¶ï¼Œä»è€Œå‡å°æ¨¡å‹çš„å¤æ‚åº¦ã€‚</p><p>å²­å›å½’çš„æ±‚è§£è¿‡ç¨‹å¯ä»¥ä½¿ç”¨ç±»ä¼¼æœ€å°äºŒä¹˜æ³•çš„æ–¹æ³•ï¼Œé€šè¿‡æ±‚è§£ä¸‹é¢çš„æœ€ä¼˜åŒ–é—®é¢˜æ¥å¾—åˆ°å›å½’ç³»æ•° $\beta$ï¼š</p><p>$$ \hat{\beta}_ {\text{ridge}} &#x3D; \arg\min_{\beta} \left( \sum_{i&#x3D;1}^{m} \left(y^{(i)} - \mathbf{x}^{(i)T}\beta\right)^2 + \lambda \sum_{j&#x3D;1}^{n} \beta_j^2 \right) $$</p><p>å²­å›å½’çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥å¤„ç†å¤šé‡å…±çº¿æ€§é—®é¢˜ï¼Œå³ç‰¹å¾ä¹‹é—´å­˜åœ¨å¼ºç›¸å…³æ€§çš„æƒ…å†µã€‚åœ¨æ™®é€šçš„çº¿æ€§å›å½’ä¸­ï¼Œå½“ç‰¹å¾ä¹‹é—´å­˜åœ¨å…±çº¿æ€§æ—¶ï¼Œå›å½’ç³»æ•°çš„ä¼°è®¡å¯èƒ½ä¼šå˜å¾—ä¸ç¨³å®šï¼Œè€Œå²­å›å½’é€šè¿‡å¼•å…¥æ­£åˆ™åŒ–é¡¹å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚</p><p>é€‰æ‹©åˆé€‚çš„æ­£åˆ™åŒ–å‚æ•° $\lambda$ å¯¹å²­å›å½’çš„æ€§èƒ½å…·æœ‰é‡è¦å½±å“ã€‚è¾ƒå°çš„ $\lambda$ å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œè€Œè¾ƒå¤§çš„ $\lambda$ å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹æ¬ æ‹Ÿåˆã€‚é€šå¸¸å¯ä»¥é€šè¿‡äº¤å‰éªŒè¯ç­‰æ–¹æ³•æ¥é€‰æ‹©æœ€ä¼˜çš„ $\lambda$ å€¼ã€‚</p><h2 id="å‰å‘é€æ­¥å›å½’"><a href="#å‰å‘é€æ­¥å›å½’" class="headerlink" title="å‰å‘é€æ­¥å›å½’"></a>å‰å‘é€æ­¥å›å½’</h2><h3 id="åŸç†-3"><a href="#åŸç†-3" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å‰å‘é€æ­¥å›å½’æ˜¯ä¸€ä¸ªåŸºäºè´ªå©ªç®—æ³•çš„ç‰¹å¾é€‰æ‹©æ–¹æ³•ã€‚å®ƒä»ä¸€ä¸ªåŒ…å«æ— ç‰¹å¾çš„æ¨¡å‹å¼€å§‹ï¼Œå¹¶é€æ­¥æ·»åŠ æˆ–å‡å°‘ç‰¹å¾ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªç»ˆæ­¢æ¡ä»¶ï¼ˆä¾‹å¦‚ï¼Œè¾¾åˆ°é¢„å®šçš„ç‰¹å¾æ•°é‡æˆ–è¯¯å·®ä¸å†æ˜¾è‘—å‡å°‘ï¼‰ã€‚</p><p>åŸç†ï¼š</p><ol><li>å¼€å§‹æ—¶ï¼Œæ¨¡å‹ä¸åŒ…å«ä»»ä½•ç‰¹å¾ï¼Œå³æ‰€æœ‰å›å½’ç³»æ•°éƒ½è®¾ä¸º0ã€‚</li><li>æ¯ä¸€æ­¥ï¼Œè€ƒè™‘æ·»åŠ ä¸€ä¸ªç‰¹å¾æˆ–å‡å»ä¸€ä¸ªç‰¹å¾ï¼Œæˆ–è€…å¢åŠ &#x2F;å‡å°‘ä¸€ä¸ªç‰¹å¾çš„ç³»æ•°ã€‚</li><li>é€‰æ‹©é‚£äº›èƒ½å¤Ÿä½¿è¯¯å·®æœ€å°åŒ–çš„ç‰¹å¾æˆ–ç³»æ•°æ›´æ–°ã€‚</li></ol><p>å…¬å¼å¦‚ä¸‹ï¼š</p><ol><li><p>è®¡ç®—å½“å‰æ¨¡å‹çš„è¯¯å·® $E_0$ï¼ˆä¾‹å¦‚ï¼Œå‡æ–¹è¯¯å·®ï¼‰:</p><p>$$ E_0 &#x3D; \sum_{i&#x3D;1}^N (y_i - \mathbf{x}_i^T \mathbf{w})^2 $$</p><p>å…¶ä¸­ï¼Œ$y_i$ æ˜¯ç¬¬ $i$ ä¸ªè§‚æµ‹å€¼çš„å“åº”å˜é‡ï¼Œ$\mathbf{x}_i$ æ˜¯ç¬¬ $i$ ä¸ªè§‚æµ‹å€¼çš„ç‰¹å¾å‘é‡ï¼Œ$\mathbf{w}$ æ˜¯å›å½’ç³»æ•°å‘é‡ã€‚</p></li><li><p>å¯¹äºæ¯ä¸€ä¸ªç‰¹å¾ $j$ï¼Œè®¡ç®—å¢åŠ æˆ–å‡å°‘è¿™ä¸ªç‰¹å¾ï¼ˆæˆ–æ”¹å˜å®ƒçš„ç³»æ•°ï¼‰æ—¶çš„æ–°è¯¯å·® $E_j$:</p><p>$$ E_j &#x3D; \sum_{i&#x3D;1}^N (y_i - \mathbf{x}_i^T \mathbf{w} + \Delta w_j \mathbf{x} _{ij})^2 $$</p><p>å…¶ä¸­ï¼Œ$\Delta w_j$ æ˜¯å¯¹ç¬¬ $j$ ä¸ªç³»æ•°çš„æ”¹å˜é‡ï¼Œ$\mathbf{x}_{ij}$ æ˜¯ç¬¬ $i$ ä¸ªè§‚æµ‹å€¼çš„ç¬¬ $j$ ä¸ªç‰¹å¾ã€‚</p></li><li><p>é€‰æ‹©é‚£ä¸ªä½¿ $E_j - E_0$ æœ€å°çš„ç‰¹å¾è¿›è¡Œæ›´æ–°ã€‚</p></li><li><p>é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°æ»¡è¶³ç»ˆæ­¢æ¡ä»¶ã€‚</p><p>åœ¨æ¯ä¸€æ­¥ï¼Œå‰å‘é€æ­¥å›å½’ä¼šå°è¯•å¢åŠ ã€å‡å°‘æˆ–ä¸æ”¹å˜æ¯ä¸€ä¸ªç‰¹å¾çš„ç³»æ•°ï¼Œç„¶åé€‰æ‹©é‚£ä¸ªä½¿è¯¯å·®æœ€å°åŒ–çš„æ›´æ–°ã€‚è¿™æ˜¯ä¸€ä¸ªè¿­ä»£çš„ã€åŸºäºè´ªå©ªç­–ç•¥çš„è¿‡ç¨‹ï¼Œæ—¨åœ¨é€æ­¥æ„å»ºä¸€ä¸ªè¯¯å·®æœ€å°çš„æ¨¡å‹ã€‚</p></li></ol><h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2><h3 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="abalone.txt" href="/citation/Regression/abalone.txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">abalone.txt</p><p class="url">/citation/Regression/abalone.txt</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="data.txt" href="/citation/Regression/data.txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">data.txt</p><p class="url">/citation/Regression/data.txt</p></div></a></div></div><h3 id="çº¿æ€§å›å½’-1"><a href="#çº¿æ€§å›å½’-1" class="headerlink" title="çº¿æ€§å›å½’"></a>çº¿æ€§å›å½’</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">loadDataSet</span>(<span class="params">fileName</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŠ è½½æ•°æ®</span></span><br><span class="line"><span class="string">    è§£æä»¥ tab é”®åˆ†éš”çš„æ–‡ä»¶ä¸­çš„æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dataMat :   feature å¯¹åº”çš„æ•°æ®é›†</span></span><br><span class="line"><span class="string">        labelMat :  feature å¯¹åº”çš„åˆ†ç±»æ ‡ç­¾ï¼Œå³ç±»åˆ«æ ‡ç­¾</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    numFeat = <span class="built_in">len</span>(<span class="built_in">open</span>(fileName).readline().split(<span class="string">&#x27;\t&#x27;</span>)) - <span class="number">1</span></span><br><span class="line">    dataMat = []</span><br><span class="line">    labelMat = []</span><br><span class="line">    fr = <span class="built_in">open</span>(fileName)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fr.readlines():</span><br><span class="line">        lineArr = []</span><br><span class="line">        curLine = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(numFeat):</span><br><span class="line">            lineArr.append(<span class="built_in">float</span>(curLine[i]))</span><br><span class="line">        dataMat.append(lineArr)</span><br><span class="line">        labelMat.append(<span class="built_in">float</span>(curLine[-<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">return</span> dataMat, labelMat</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">standRegres</span>(<span class="params">xArr, yArr</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    çº¿æ€§å›å½’</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        xArr : è¾“å…¥çš„æ ·æœ¬æ•°æ®ï¼ŒåŒ…å«æ¯ä¸ªæ ·æœ¬æ•°æ®çš„ feature</span></span><br><span class="line"><span class="string">        yArr : å¯¹åº”äºè¾“å…¥æ•°æ®çš„ç±»åˆ«æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªæ ·æœ¬å¯¹åº”çš„ç›®æ ‡å˜é‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        ws: å›å½’ç³»æ•°</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    xMat = mat(xArr)</span><br><span class="line">    yMat = mat(yArr).T</span><br><span class="line">    xTx = xMat.T * xMat</span><br><span class="line">    <span class="keyword">if</span> linalg.det(xTx) == <span class="number">0.0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This matrix is singular, cannot do inverse&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    ws = xTx.I * (xMat.T * yMat)</span><br><span class="line">    <span class="keyword">return</span> ws</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">regression1</span>():</span><br><span class="line">    xArr, yArr = loadDataSet(<span class="string">&quot;8.Regression/data.txt&quot;</span>)</span><br><span class="line">    xMat = mat(xArr)</span><br><span class="line">    yMat = mat(yArr)</span><br><span class="line">    ws = standRegres(xArr, yArr)</span><br><span class="line">    fig = plt.figure()</span><br><span class="line">    ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">    ax.scatter(xMat[:, <span class="number">1</span>].flatten(), yMat.T[:, <span class="number">0</span>].flatten().A[<span class="number">0</span>])</span><br><span class="line">    xCopy = xMat.copy()</span><br><span class="line">    xCopy.sort(<span class="number">0</span>)</span><br><span class="line">    yHat = xCopy * ws</span><br><span class="line">    ax.plot(xCopy[:, <span class="number">1</span>], yHat)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    regression1()</span><br></pre></td></tr></table></figure><h3 id="å±€éƒ¨åŠ æƒçº¿æ€§å›å½’-1"><a href="#å±€éƒ¨åŠ æƒçº¿æ€§å›å½’-1" class="headerlink" title="å±€éƒ¨åŠ æƒçº¿æ€§å›å½’"></a>å±€éƒ¨åŠ æƒçº¿æ€§å›å½’</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">loadDataSet</span>(<span class="params">fileName</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŠ è½½æ•°æ®</span></span><br><span class="line"><span class="string">    è§£æä»¥ tab é”®åˆ†éš”çš„æ–‡ä»¶ä¸­çš„æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dataMat :   feature å¯¹åº”çš„æ•°æ®é›†</span></span><br><span class="line"><span class="string">        labelMat :  feature å¯¹åº”çš„åˆ†ç±»æ ‡ç­¾ï¼Œå³ç±»åˆ«æ ‡ç­¾</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    numFeat = <span class="built_in">len</span>(<span class="built_in">open</span>(fileName).readline().split(<span class="string">&#x27;\t&#x27;</span>)) - <span class="number">1</span></span><br><span class="line">    dataMat = []</span><br><span class="line">    labelMat = []</span><br><span class="line">    fr = <span class="built_in">open</span>(fileName)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fr.readlines():</span><br><span class="line">        lineArr = []</span><br><span class="line">        curLine = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(numFeat):</span><br><span class="line">            lineArr.append(<span class="built_in">float</span>(curLine[i]))</span><br><span class="line">        dataMat.append(lineArr)</span><br><span class="line">        labelMat.append(<span class="built_in">float</span>(curLine[-<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">return</span> dataMat, labelMat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lwlr</span>(<span class="params">testPoint, xArr, yArr, k=<span class="number">1.0</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å±€éƒ¨åŠ æƒçº¿æ€§å›å½’ï¼Œåœ¨å¾…é¢„æµ‹ç‚¹é™„è¿‘çš„æ¯ä¸ªç‚¹èµ‹äºˆä¸€å®šçš„æƒé‡ï¼Œåœ¨å­é›†ä¸ŠåŸºäºæœ€å°å‡æ–¹å·®æ¥è¿›è¡Œæ™®é€šçš„å›å½’ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        testPoint: æ ·æœ¬ç‚¹</span></span><br><span class="line"><span class="string">        xArr: æ ·æœ¬çš„ç‰¹å¾æ•°æ®ï¼Œå³ feature</span></span><br><span class="line"><span class="string">        yArr: æ¯ä¸ªæ ·æœ¬å¯¹åº”çš„ç±»åˆ«æ ‡ç­¾ï¼Œå³ç›®æ ‡å˜é‡</span></span><br><span class="line"><span class="string">        k: å…³äºèµ‹äºˆæƒé‡çŸ©é˜µçš„æ ¸çš„ä¸€ä¸ªå‚æ•°ï¼Œä¸æƒé‡çš„è¡°å‡é€Ÿç‡æœ‰å…³</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        testPoint * ws: æ•°æ®ç‚¹ä¸å…·æœ‰æƒé‡çš„ç³»æ•°ç›¸ä¹˜å¾—åˆ°çš„é¢„æµ‹ç‚¹</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    xMat = mat(xArr)</span><br><span class="line">    yMat = mat(yArr).T</span><br><span class="line">    m = shape(xMat)[<span class="number">0</span>]</span><br><span class="line">    weights = mat(eye((m)))</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">        diffMat = testPoint - xMat[j, :]</span><br><span class="line">        weights[j, j] = exp(diffMat * diffMat.T / (-<span class="number">2.0</span> * k ** <span class="number">2</span>))</span><br><span class="line">    xTx = xMat.T * (weights * xMat)</span><br><span class="line">    <span class="keyword">if</span> linalg.det(xTx) == <span class="number">0.0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This matrix is singular, cannot do inverse&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    ws = xTx.I * (xMat.T * (weights * yMat))</span><br><span class="line">    <span class="keyword">return</span> testPoint * ws</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lwlrTest</span>(<span class="params">testArr, xArr, yArr, k=<span class="number">1.0</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æµ‹è¯•å±€éƒ¨åŠ æƒçº¿æ€§å›å½’ï¼Œå¯¹æ•°æ®é›†ä¸­æ¯ä¸ªç‚¹è°ƒç”¨ lwlr() å‡½æ•°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        testArr: æµ‹è¯•æ‰€ç”¨çš„æ‰€æœ‰æ ·æœ¬ç‚¹</span></span><br><span class="line"><span class="string">        xArr: æ ·æœ¬çš„ç‰¹å¾æ•°æ®ï¼Œå³ feature</span></span><br><span class="line"><span class="string">        yArr: æ¯ä¸ªæ ·æœ¬å¯¹åº”çš„ç±»åˆ«æ ‡ç­¾ï¼Œå³ç›®æ ‡å˜é‡</span></span><br><span class="line"><span class="string">        k: æ§åˆ¶æ ¸å‡½æ•°çš„è¡°å‡é€Ÿç‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        yHat: é¢„æµ‹ç‚¹çš„ä¼°è®¡å€¼</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    m = shape(testArr)[<span class="number">0</span>]</span><br><span class="line">    yHat = zeros(m)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">        yHat[i] = lwlr(testArr[i], xArr, yArr, k)</span><br><span class="line">    <span class="keyword">return</span> yHat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lwlrTestPlot</span>(<span class="params">xArr, yArr, k=<span class="number">1.0</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    é¦–å…ˆå°† X æ’åºï¼Œå…¶ä½™çš„éƒ½ä¸ lwlrTest ç›¸åŒï¼Œè¿™æ ·æ›´å®¹æ˜“ç»˜å›¾</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        xArr: æ ·æœ¬çš„ç‰¹å¾æ•°æ®ï¼Œå³ feature</span></span><br><span class="line"><span class="string">        yArr: æ¯ä¸ªæ ·æœ¬å¯¹åº”çš„ç±»åˆ«æ ‡ç­¾ï¼Œå³ç›®æ ‡å˜é‡ï¼Œå®é™…å€¼</span></span><br><span class="line"><span class="string">        k: æ§åˆ¶æ ¸å‡½æ•°çš„è¡°å‡é€Ÿç‡çš„æœ‰å…³å‚æ•°ï¼Œè¿™é‡Œè®¾å®šçš„æ˜¯å¸¸é‡å€¼ 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        yHat: æ ·æœ¬ç‚¹çš„ä¼°è®¡å€¼</span></span><br><span class="line"><span class="string">        xCopy: xArr çš„å¤åˆ¶</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    yHat = zeros(shape(yArr))</span><br><span class="line">    xCopy = mat(xArr)</span><br><span class="line">    xCopy.sort(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape(xArr)[<span class="number">0</span>]):</span><br><span class="line">        yHat[i] = lwlr(xCopy[i], xArr, yArr, k)</span><br><span class="line">    <span class="keyword">return</span> yHat, xCopy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">regression2</span>():</span><br><span class="line">    xArr, yArr = loadDataSet(<span class="string">&quot;8.Regression/data.txt&quot;</span>)</span><br><span class="line">    yHat = lwlrTest(xArr, xArr, yArr, <span class="number">0.01</span>)</span><br><span class="line">    xMat = mat(xArr)</span><br><span class="line">    srtInd = xMat[:, <span class="number">1</span>].argsort(<span class="number">0</span>)</span><br><span class="line">    xSort = xMat[srtInd][:, <span class="number">0</span>, :]</span><br><span class="line">    fig = plt.figure()</span><br><span class="line">    ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">    ax.plot(xSort[:, <span class="number">1</span>], yHat[srtInd])</span><br><span class="line">    ax.scatter(xMat[:, <span class="number">1</span>].flatten().A[<span class="number">0</span>], mat(yArr).T.flatten().A[<span class="number">0</span>], s=<span class="number">2</span>, c=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    regression2()</span><br></pre></td></tr></table></figure><h3 id="å²­å›å½’-1"><a href="#å²­å›å½’-1" class="headerlink" title="å²­å›å½’"></a>å²­å›å½’</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">loadDataSet</span>(<span class="params">fileName</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    åŠ è½½æ•°æ®</span></span><br><span class="line"><span class="string">    è§£æä»¥tabé”®åˆ†éš”çš„æ–‡ä»¶ä¸­çš„æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        fileName: æ–‡ä»¶å</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        dataMat : ç‰¹å¾æ•°æ®é›†</span></span><br><span class="line"><span class="string">        labelMat : ç±»åˆ«æ ‡ç­¾</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    numFeat = <span class="built_in">len</span>(<span class="built_in">open</span>(fileName).readline().split(<span class="string">&#x27;\t&#x27;</span>)) - <span class="number">1</span></span><br><span class="line">    dataMat = []</span><br><span class="line">    labelMat = []</span><br><span class="line">    fr = <span class="built_in">open</span>(fileName)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fr.readlines():</span><br><span class="line">        lineArr = []</span><br><span class="line">        curLine = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(numFeat):</span><br><span class="line">            lineArr.append(<span class="built_in">float</span>(curLine[i]))</span><br><span class="line">        dataMat.append(lineArr)</span><br><span class="line">        labelMat.append(<span class="built_in">float</span>(curLine[-<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">return</span> dataMat, labelMat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ridgeRegres</span>(<span class="params">xMat, yMat, lam=<span class="number">0.2</span></span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    è¿›è¡Œå²­å›å½’æ±‚è§£</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        xMat: ç‰¹å¾æ•°æ®</span></span><br><span class="line"><span class="string">        yMat: ç±»åˆ«æ ‡ç­¾ï¼Œå®é™…å€¼</span></span><br><span class="line"><span class="string">        lam: Î»å€¼ï¼Œç”¨äºä½¿çŸ©é˜µéå¥‡å¼‚</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        å›å½’ç³»æ•°</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    xTx = xMat.T * xMat</span><br><span class="line">    denom = xTx + eye(shape(xMat)[<span class="number">1</span>]) * lam</span><br><span class="line">    <span class="keyword">if</span> linalg.det(denom) == <span class="number">0.0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This matrix is singular, cannot do inverse&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    ws = denom.I * (xMat.T * yMat)</span><br><span class="line">    <span class="keyword">return</span> ws</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ridgeTest</span>(<span class="params">xArr, yArr</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    åœ¨ä¸€ç»„ Î» ä¸Šæµ‹è¯•å²­å›å½’ç»“æœ</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        xArr: ç‰¹å¾æ•°æ®</span></span><br><span class="line"><span class="string">        yArr: ç±»åˆ«æ ‡ç­¾ï¼ŒçœŸå®æ•°æ®</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        æ‰€æœ‰å›å½’ç³»æ•°è¾“å‡ºåˆ°çŸ©é˜µå¹¶è¿”å›</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    xMat = mat(xArr)</span><br><span class="line">    yMat = mat(yArr).T</span><br><span class="line">    yMean = mean(yMat, <span class="number">0</span>)</span><br><span class="line">    yMat = yMat - yMean</span><br><span class="line">    xMeans = mean(xMat, <span class="number">0</span>)</span><br><span class="line">    xVar = var(xMat, <span class="number">0</span>)</span><br><span class="line">    xMat = (xMat - xMeans) / xVar</span><br><span class="line">    numTestPts = <span class="number">30</span></span><br><span class="line">    wMat = zeros((numTestPts, shape(xMat)[<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(numTestPts):</span><br><span class="line">        ws = ridgeRegres(xMat, yMat, exp(i - <span class="number">10</span>))</span><br><span class="line">        wMat[i, :] = ws.T</span><br><span class="line">    <span class="keyword">return</span> wMat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">regression3</span>():</span><br><span class="line">    abX, abY = loadDataSet(<span class="string">&quot;8.Regression/abalone.txt&quot;</span>)</span><br><span class="line">    ridgeWeights = ridgeTest(abX, abY)</span><br><span class="line">    fig = plt.figure()</span><br><span class="line">    ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">    ax.plot(ridgeWeights)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    regression3()</span><br></pre></td></tr></table></figure><h3 id="å‰å‘é€æ­¥å›å½’-1"><a href="#å‰å‘é€æ­¥å›å½’-1" class="headerlink" title="å‰å‘é€æ­¥å›å½’"></a>å‰å‘é€æ­¥å›å½’</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">stageWise</span>(<span class="params">xArr, yArr, eps=<span class="number">0.01</span>, numIt=<span class="number">100</span></span>):</span><br><span class="line">    xMat = mat(xArr)</span><br><span class="line">    yMat = mat(yArr).T</span><br><span class="line">    yMean = mean(yMat, <span class="number">0</span>)</span><br><span class="line">    yMat = yMat - yMean  <span class="comment"># ä¹Ÿå¯ä»¥è§„åˆ™åŒ–ysä½†ä¼šå¾—åˆ°æ›´å°çš„coef</span></span><br><span class="line">    xMat = regularize(xMat)</span><br><span class="line">    m, n = shape(xMat)</span><br><span class="line">    returnMat = zeros((numIt, n))  <span class="comment"># æµ‹è¯•ä»£ç åˆ é™¤</span></span><br><span class="line">    ws = zeros((n, <span class="number">1</span>))</span><br><span class="line">    wsTest = ws.copy()</span><br><span class="line">    wsMax = ws.copy()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(numIt):</span><br><span class="line">        <span class="built_in">print</span>(ws.T)</span><br><span class="line">        lowestError = inf</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="keyword">for</span> sign <span class="keyword">in</span> [-<span class="number">1</span>, <span class="number">1</span>]:</span><br><span class="line">                wsTest = ws.copy()</span><br><span class="line">                wsTest[j] += eps * sign</span><br><span class="line">                yTest = xMat * wsTest</span><br><span class="line">                rssE = rssError(yMat.A, yTest.A)</span><br><span class="line">                <span class="keyword">if</span> rssE &lt; lowestError:</span><br><span class="line">                    lowestError = rssE</span><br><span class="line">                    wsMax = wsTest</span><br><span class="line">        ws = wsMax.copy()</span><br><span class="line">        returnMat[i, :] = ws.T</span><br><span class="line">    <span class="keyword">return</span> returnMat</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">regularize</span>(<span class="params">xMat</span>):  <span class="comment"># æŒ‰åˆ—è¿›è¡Œè§„èŒƒåŒ–</span></span><br><span class="line">    inMat = xMat.copy()</span><br><span class="line">    inMeans = mean(inMat, <span class="number">0</span>)  <span class="comment"># è®¡ç®—å¹³å‡å€¼ç„¶åå‡å»å®ƒ</span></span><br><span class="line">    inVar = var(inMat, <span class="number">0</span>)  <span class="comment"># è®¡ç®—é™¤ä»¥Xiçš„æ–¹å·®</span></span><br><span class="line">    inMat = (inMat - inMeans) / inVar</span><br><span class="line">    <span class="keyword">return</span> inMat</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rssError</span>(<span class="params">yArr, yHatArr</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        Desc:</span></span><br><span class="line"><span class="string">            è®¡ç®—åˆ†æé¢„æµ‹è¯¯å·®çš„å¤§å°</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            yArr: çœŸå®çš„ç›®æ ‡å˜é‡</span></span><br><span class="line"><span class="string">            yHatArr: é¢„æµ‹å¾—åˆ°çš„ä¼°è®¡å€¼</span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            è®¡ç®—çœŸå®å€¼å’Œä¼°è®¡å€¼å¾—åˆ°çš„å€¼çš„å¹³æ–¹å’Œä½œä¸ºæœ€åçš„è¿”å›å€¼</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> ((yArr - yHatArr) ** <span class="number">2</span>).<span class="built_in">sum</span>()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">standRegres</span>(<span class="params">xArr, yArr</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    Description: </span></span><br><span class="line"><span class="string">        çº¿æ€§å›å½’</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        xArr : è¾“å…¥çš„æ ·æœ¬æ•°æ®ï¼ŒåŒ…å«æ¯ä¸ªæ ·æœ¬æ•°æ®çš„ feature</span></span><br><span class="line"><span class="string">        yArr : å¯¹åº”äºè¾“å…¥æ•°æ®çš„ç±»åˆ«æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªæ ·æœ¬å¯¹åº”çš„ç›®æ ‡å˜é‡</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        ws: å›å½’ç³»æ•°</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># mat()å‡½æ•°å°†xArrï¼ŒyArrè½¬æ¢ä¸ºçŸ©é˜µ mat().T ä»£è¡¨çš„æ˜¯å¯¹çŸ©é˜µè¿›è¡Œè½¬ç½®æ“ä½œ</span></span><br><span class="line">    xMat = mat(xArr)</span><br><span class="line">    yMat = mat(yArr).T</span><br><span class="line">    <span class="comment"># çŸ©é˜µä¹˜æ³•çš„æ¡ä»¶æ˜¯å·¦çŸ©é˜µçš„åˆ—æ•°ç­‰äºå³çŸ©é˜µçš„è¡Œæ•°</span></span><br><span class="line">    xTx = xMat.T * xMat</span><br><span class="line">    <span class="comment"># å› ä¸ºè¦ç”¨åˆ°xTxçš„é€†çŸ©é˜µï¼Œæ‰€ä»¥äº‹å…ˆéœ€è¦ç¡®å®šè®¡ç®—å¾—åˆ°çš„xTxæ˜¯å¦å¯é€†ï¼Œæ¡ä»¶æ˜¯çŸ©é˜µçš„è¡Œåˆ—å¼ä¸ä¸º0</span></span><br><span class="line">    <span class="comment"># linalg.det() å‡½æ•°æ˜¯ç”¨æ¥æ±‚å¾—çŸ©é˜µçš„è¡Œåˆ—å¼çš„ï¼Œå¦‚æœçŸ©é˜µçš„è¡Œåˆ—å¼ä¸º0ï¼Œåˆ™è¿™ä¸ªçŸ©é˜µæ˜¯ä¸å¯é€†çš„ï¼Œå°±æ— æ³•è¿›è¡Œæ¥ä¸‹æ¥çš„è¿ç®—</span></span><br><span class="line">    <span class="keyword">if</span> linalg.det(xTx) == <span class="number">0.0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This matrix is singular, cannot do inverse&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="comment"># æœ€å°äºŒä¹˜æ³•</span></span><br><span class="line">    <span class="comment"># http://cwiki.apachecn.org/pages/viewpage.action?pageId=5505133</span></span><br><span class="line">    <span class="comment"># ä¹¦ä¸­çš„å…¬å¼ï¼Œæ±‚å¾—wçš„æœ€ä¼˜è§£</span></span><br><span class="line">    ws = xTx.I * (xMat.T * yMat)</span><br><span class="line">    <span class="keyword">return</span> ws</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">stageWise</span>(<span class="params">xArr,yArr,eps=<span class="number">0.01</span>,numIt=<span class="number">100</span></span>):</span><br><span class="line">    xMat = mat(xArr); yMat=mat(yArr).T</span><br><span class="line">    yMean = mean(yMat,<span class="number">0</span>)</span><br><span class="line">    yMat = yMat - yMean     <span class="comment"># ä¹Ÿå¯ä»¥è§„åˆ™åŒ–ysä½†ä¼šå¾—åˆ°æ›´å°çš„coef</span></span><br><span class="line">    xMat = regularize(xMat)</span><br><span class="line">    m,n=shape(xMat)</span><br><span class="line">    <span class="comment">#returnMat = zeros((numIt,n)) # æµ‹è¯•ä»£ç åˆ é™¤</span></span><br><span class="line">    ws = zeros((n,<span class="number">1</span>)); wsTest = ws.copy(); wsMax = ws.copy()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(numIt):</span><br><span class="line">        <span class="built_in">print</span> (ws.T)</span><br><span class="line">        lowestError = inf; </span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="keyword">for</span> sign <span class="keyword">in</span> [-<span class="number">1</span>,<span class="number">1</span>]:</span><br><span class="line">                wsTest = ws.copy()</span><br><span class="line">                wsTest[j] += eps*sign</span><br><span class="line">                yTest = xMat*wsTest</span><br><span class="line">                rssE = rssError(yMat.A,yTest.A)</span><br><span class="line">                <span class="keyword">if</span> rssE &lt; lowestError:</span><br><span class="line">                    lowestError = rssE</span><br><span class="line">                    wsMax = wsTest</span><br><span class="line">        ws = wsMax.copy()</span><br><span class="line">        returnMat[i,:]=ws.T</span><br><span class="line">    <span class="keyword">return</span> returnMat</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">regression4</span>():</span><br><span class="line">    xArr, yArr = loadDataSet(<span class="string">&quot;8.Regression/abalone.txt&quot;</span>)</span><br><span class="line">    stageWise(xArr, yArr, <span class="number">0.01</span>, <span class="number">200</span>)</span><br><span class="line">    xMat = mat(xArr)</span><br><span class="line">    yMat = mat(yArr).T</span><br><span class="line">    xMat = regularize(xMat)</span><br><span class="line">    yM = mean(yMat, <span class="number">0</span>)</span><br><span class="line">    yMat = yMat - yM</span><br><span class="line">    weights = standRegres(xMat, yMat.T)</span><br><span class="line">    <span class="built_in">print</span>(weights.T)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    regression4()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> Regression </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ç®€è¿°</title>
      <link href="/2023/08/02/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E4%B9%98%E5%AD%90%E6%B3%95%E7%AE%80%E8%BF%B0/"/>
      <url>/2023/08/02/%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E4%B9%98%E5%AD%90%E6%B3%95%E7%AE%80%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•"><a href="#æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•" class="headerlink" title="æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•"></a>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ï¼ˆLagrange Multiplier Methodï¼‰æ˜¯ä¸€ç§æ•°å­¦å·¥å…·ï¼Œç”¨äºåœ¨çº¦æŸæ¡ä»¶ä¸‹ä¼˜åŒ–å¤šå…ƒå‡½æ•°ã€‚å®ƒç”±æ„å¤§åˆ©æ•°å­¦å®¶çº¦ç‘Ÿå¤«Â·è·¯æ˜“Â·æ‹‰æ ¼æœ—æ—¥ï¼ˆJoseph Louis Lagrangeï¼‰åœ¨18ä¸–çºªæå‡ºï¼Œç”¨äºè§£å†³å…·æœ‰çº¦æŸæ¡ä»¶çš„æå€¼é—®é¢˜ã€‚è¯¥æ–¹æ³•åœ¨ç»æµå­¦ã€å·¥ç¨‹å­¦ã€ç‰©ç†å­¦ç­‰é¢†åŸŸä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚</p><p>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ä¸»è¦ç”¨äºæ±‚è§£è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ä¸€ä¸ªå¤šå…ƒå‡½æ•°çš„å®šä¹‰åŸŸå†…ï¼Œå¯»æ‰¾å‡½æ•°å–å¾—æœ€å¤§å€¼æˆ–æœ€å°å€¼çš„ç‚¹ï¼ŒåŒæ—¶æ»¡è¶³ä¸€ç»„çº¦æŸæ¡ä»¶ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹çš„ä¼˜åŒ–é—®é¢˜ï¼š</p><p>æœ€å¤§åŒ–ï¼ˆæˆ–æœ€å°åŒ–ï¼‰å‡½æ•° $f(x1, x2, â€¦, xn)$<br>åœ¨çº¦æŸæ¡ä»¶ä¸‹ï¼š$g1(x1, x2, â€¦, xn) &#x3D; 0, g2(x1, x2, â€¦, xn) &#x3D; 0, â€¦, gm(x1, x2, â€¦, xn) &#x3D; 0$</p><p>å…¶ä¸­ï¼Œ$f$æ˜¯ç›®æ ‡å‡½æ•°ï¼Œ$g1, g2, â€¦, gm$æ˜¯çº¦æŸæ¡ä»¶å‡½æ•°ã€‚</p><p>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œä¸ºäº†åœ¨æ»¡è¶³çº¦æŸæ¡ä»¶çš„æƒ…å†µä¸‹ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼Œå¼•å…¥ä¸€ç»„ç§°ä¸ºæ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼ˆLagrange multipliersï¼‰çš„å˜é‡ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç§°ä¸ºæ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼ˆLagrange functionï¼‰ï¼Œé€šè¿‡å¯¹è¿™ä¸ªå‡½æ•°è¿›è¡Œæ±‚å¯¼ï¼Œå¯ä»¥å¾—åˆ°ä¸€ç»„å…³äºåŸå‡½æ•°å’Œçº¦æŸæ¡ä»¶çš„æ–¹ç¨‹ï¼Œé€šè¿‡æ±‚è§£è¿™äº›æ–¹ç¨‹ï¼Œå¯ä»¥æ‰¾åˆ°æ»¡è¶³çº¦æŸæ¡ä»¶çš„æå€¼ç‚¹ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ä»…é€‚ç”¨äºæ»¡è¶³ä¸€å®šæ¡ä»¶çš„æƒ…å†µï¼Œå¦‚å¯å¾®åˆ†æ€§å’Œçº¦æŸæ¡ä»¶çš„çº¿æ€§ç‹¬ç«‹æ€§ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½å­˜åœ¨å±€éƒ¨æœ€ä¼˜è§£æˆ–æ— è§£çš„æƒ…å†µã€‚</p><p>æ€»ä¹‹ï¼Œæ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•æ˜¯ä¸€ç§å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºå¤„ç†å¸¦æœ‰çº¦æŸæ¡ä»¶çš„ä¼˜åŒ–é—®é¢˜ï¼Œå®ƒé€šè¿‡å¼•å…¥æ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼Œå°†çº¦æŸæ¡ä»¶ä¸ç›®æ ‡å‡½æ•°ç»“åˆèµ·æ¥ï¼Œä½¿å¾—æ±‚è§£å¤æ‚çš„ä¼˜åŒ–é—®é¢˜å˜å¾—æ›´åŠ å¯è¡Œã€‚</p><h2 id="æ±‚è§£è¿‡ç¨‹"><a href="#æ±‚è§£è¿‡ç¨‹" class="headerlink" title="æ±‚è§£è¿‡ç¨‹"></a>æ±‚è§£è¿‡ç¨‹</h2><ol><li><p><strong>å»ºç«‹æ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼š</strong> é¦–å…ˆï¼Œæ„å»ºæ‹‰æ ¼æœ—æ—¥å‡½æ•°$$L(x_1, â€¦ , x_n, \lambda_1, â€¦ , \lambda_m) &#x3D; f(x_1, â€¦ , x_n) + \lambda_1 g_1(x_1, â€¦ , x_n) + â€¦ + \lambda_m g_m(x_1, â€¦ , x_n)$$ï¼Œå…¶ä¸­ï¼Œ$f$æ˜¯ç›®æ ‡å‡½æ•°ï¼Œ$g_1, g_2, \ldots, g_m$æ˜¯çº¦æŸæ¡ä»¶å‡½æ•°ï¼Œ$\lambda_1, \lambda_2, \ldots, \lambda_m$æ˜¯æ‹‰æ ¼æœ—æ—¥ä¹˜å­ã€‚</p></li><li><p><strong>å¯¹æ‹‰æ ¼æœ—æ—¥å‡½æ•°æ±‚åå¯¼æ•°ï¼š</strong> å¯¹æ‹‰æ ¼æœ—æ—¥å‡½æ•°åˆ†åˆ«å¯¹å˜é‡ $x_i$ å’Œ $\lambda_j$ è¿›è¡Œæ±‚åå¯¼æ•°ï¼Œå¾—åˆ°ä¸€ç»„æ–¹ç¨‹ï¼š</p><p>$\frac{\partial L}{\partial x_i} &#x3D; 0$ï¼Œå…¶ä¸­ $i &#x3D; 1, 2, \ldots, n$<br>$\frac{\partial L}{\partial \lambda_j} &#x3D; 0$ï¼Œå…¶ä¸­ $j &#x3D; 1, 2, \ldots, m$</p><p>è¿™äº›æ–¹ç¨‹çš„è§£ä»£è¡¨äº†åœ¨æ»¡è¶³çº¦æŸæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡å‡½æ•°çš„æå€¼ç‚¹ä»¥åŠå¯¹åº”çš„æ‹‰æ ¼æœ—æ—¥ä¹˜å­å€¼ã€‚</p></li><li><p><strong>è§£æ–¹ç¨‹ç»„ï¼š</strong> è§£ä¸Šè¿°æ–¹ç¨‹ç»„ï¼Œå¾—åˆ°å˜é‡ $x_i$ å’Œ $\lambda_j$ çš„å€¼ã€‚è¿™äº›å€¼å¯ä»¥ç”¨æ¥ç¡®å®šåŸé—®é¢˜çš„æå€¼ç‚¹ï¼Œä»¥åŠæ»¡è¶³çº¦æŸæ¡ä»¶çš„æœ€ä¼˜è§£ã€‚</p></li><li><p><strong>æ£€éªŒç»“æœï¼š</strong> å°†æ±‚å¾—çš„æå€¼ç‚¹ä»£å…¥åŸç›®æ ‡å‡½æ•°å’Œçº¦æŸæ¡ä»¶ä¸­ï¼ŒéªŒè¯æ˜¯å¦æ»¡è¶³çº¦æŸæ¡ä»¶å¹¶æ‰¾åˆ°äº†ç›®æ ‡å‡½æ•°çš„æœ€ä¼˜è§£ã€‚</p></li></ol><h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>æ‰¾åˆ°å‡½æ•° $f(x, y) &#x3D; x^2 + y^2$ åœ¨çº¦æŸæ¡ä»¶ $g(x, y) &#x3D; x + y - 1 &#x3D; 0$ ä¸‹çš„æœ€å¤§å€¼ã€‚</p><h3 id="è§£å†³æ­¥éª¤"><a href="#è§£å†³æ­¥éª¤" class="headerlink" title="è§£å†³æ­¥éª¤"></a>è§£å†³æ­¥éª¤</h3><ol><li><p><strong>å»ºç«‹æ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼š</strong> æ„å»ºæ‹‰æ ¼æœ—æ—¥å‡½æ•° $L(x, y, \lambda) &#x3D; f(x, y) + \lambda g(x, y) &#x3D; x^2 + y^2 + \lambda(x + y - 1)$ï¼Œå…¶ä¸­ $\lambda$ æ˜¯æ‹‰æ ¼æœ—æ—¥ä¹˜å­ã€‚</p></li><li><p><strong>å¯¹æ‹‰æ ¼æœ—æ—¥å‡½æ•°æ±‚åå¯¼æ•°ï¼š</strong> å¯¹æ‹‰æ ¼æœ—æ—¥å‡½æ•° $L$ åˆ†åˆ«å¯¹ $x, y$ å’Œ $\lambda$ æ±‚åå¯¼æ•°å¹¶ä»¤å…¶ä¸ºé›¶ï¼š</p><p>$\frac{\partial L}{\partial x} &#x3D; 2x + \lambda &#x3D; 0$<br>$\frac{\partial L}{\partial y} &#x3D; 2y + \lambda &#x3D; 0$<br>$\frac{\partial L}{\partial \lambda} &#x3D; x + y - 1 &#x3D; 0$</p><p>ä»ç¬¬ä¸€å’Œç¬¬äºŒä¸ªæ–¹ç¨‹å¯å¾—å‡º $x &#x3D; -\lambda&#x2F;2$ å’Œ $y &#x3D; -\lambda&#x2F;2$ã€‚å°†è¿™äº›å€¼ä»£å…¥ç¬¬ä¸‰ä¸ªæ–¹ç¨‹å¯ä»¥è§£å‡º $\lambda &#x3D; -2$ã€‚</p></li><li><p><strong>è§£æ–¹ç¨‹ç»„ï¼š</strong> å°† $\lambda &#x3D; -2$ ä»£å…¥ $x &#x3D; -\lambda&#x2F;2$ å’Œ $y &#x3D; -\lambda&#x2F;2$ ä¸­ï¼Œå¾—åˆ° $x &#x3D; 1$ å’Œ $y &#x3D; 1$ã€‚</p></li><li><p><strong>æ£€éªŒç»“æœï¼š</strong> æ£€éªŒæ±‚å¾—çš„æå€¼ç‚¹ $(x, y) &#x3D; (1, 1)$ æ˜¯å¦æ»¡è¶³çº¦æŸæ¡ä»¶ $g(x, y) &#x3D; x + y - 1 &#x3D; 0$ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ»¡è¶³æ¡ä»¶ã€‚ç„¶åå°† $(1, 1)$ ä»£å…¥ç›®æ ‡å‡½æ•° $f(x, y) &#x3D; x^2 + y^2$ ä¸­ï¼Œå¾—åˆ°æœ€å¤§å€¼ $f(1, 1) &#x3D; 2$ã€‚</p></li></ol><p>å› æ­¤ï¼Œåœ¨ç»™å®šçº¦æŸæ¡ä»¶ $g(x, y) &#x3D; x + y - 1 &#x3D; 0$ ä¸‹ï¼Œå‡½æ•° $f(x, y) &#x3D; x^2 + y^2$ çš„æœ€å¤§å€¼ä¸º $2$ï¼Œåœ¨ç‚¹ $(1, 1)$ å¤„å–å¾—ã€‚</p><h3 id="é—®é¢˜-1"><a href="#é—®é¢˜-1" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>è€ƒè™‘ä¸€ä¸ªäºŒåˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬æœ‰ä¸€ç»„æ•°æ®ç‚¹ ${ (x_1, y_1), (x_2, y_2), \ldots, (x_n, y_n) }$ï¼Œå…¶ä¸­ $x_i$ æ˜¯æ•°æ®ç‰¹å¾ï¼Œ$y_i \in {-1, 1}$ æ˜¯å¯¹åº”çš„æ ‡ç­¾ã€‚æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢ $w \cdot x + b &#x3D; 0$ï¼Œä½¿å¾—é—´éš”æœ€å¤§åŒ–ï¼ŒåŒæ—¶å…è®¸ä¸€äº›æ•°æ®ç‚¹å‡ºç°åœ¨è¶…å¹³é¢é”™è¯¯çš„ä¸€ä¾§ã€‚è¿™å¯ä»¥è¡¨ç¤ºä¸ºä»¥ä¸‹ä¼˜åŒ–é—®é¢˜ï¼š</p><p>æœ€å¤§åŒ– $\frac{2}{|w|}$<br>åœ¨çº¦æŸæ¡ä»¶ä¸‹ï¼š$y_i (w \cdot x_i + b) \geq 1$ï¼Œå¯¹æ‰€æœ‰çš„ $i$</p><p>è¿™é‡Œï¼Œ$w$ æ˜¯è¶…å¹³é¢çš„æ³•å‘é‡ï¼Œ$b$ æ˜¯åç§»é‡ï¼Œ$y_i$ æ˜¯æ ‡ç­¾ï¼Œ$x_i$ æ˜¯æ•°æ®ç‰¹å¾ã€‚</p><h3 id="è§£å†³æ­¥éª¤-1"><a href="#è§£å†³æ­¥éª¤-1" class="headerlink" title="è§£å†³æ­¥éª¤"></a>è§£å†³æ­¥éª¤</h3><ol><li><p><strong>å»ºç«‹æ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼š</strong> æ„å»ºæ‹‰æ ¼æœ—æ—¥å‡½æ•° $L(w, b, \alpha) &#x3D; \frac{1}{2}|w|^2 - \sum_{i&#x3D;1}^{n} \alpha_i [y_i (w \cdot x_i + b) - 1]$ï¼Œå…¶ä¸­ $\alpha_i$ æ˜¯æ‹‰æ ¼æœ—æ—¥ä¹˜å­ã€‚</p></li><li><p><strong>å¯¹æ‹‰æ ¼æœ—æ—¥å‡½æ•°æ±‚åå¯¼æ•°ï¼š</strong> å¯¹æ‹‰æ ¼æœ—æ—¥å‡½æ•° $L$ åˆ†åˆ«å¯¹ $w, b$ å’Œ $\alpha_i$ æ±‚åå¯¼æ•°å¹¶ä»¤å…¶ä¸ºé›¶ï¼š</p><p>$\frac{\partial L}{\partial w} &#x3D; w - \sum_{i&#x3D;1}^{n} \alpha_i y_i x_i &#x3D; 0$<br>$\frac{\partial L}{\partial b} &#x3D; -\sum_{i&#x3D;1}^{n} \alpha_i y_i &#x3D; 0$<br>$\frac{\partial L}{\partial \alpha_i} &#x3D; y_i (w \cdot x_i + b) - 1 &#x3D; 0$</p></li><li><p><strong>è§£æ–¹ç¨‹ç»„ï¼š</strong> å°†ä¸Šè¿°æ–¹ç¨‹ç»„ä»£å…¥æ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼Œè§£å‡º $\alpha_i$ã€‚ç„¶åï¼Œä½¿ç”¨æ±‚å¾—çš„ $\alpha_i$ è®¡ç®— $w$ å’Œ $b$ã€‚</p></li><li><p><strong>å¾—åˆ°æœ€ç»ˆè¶…å¹³é¢ï¼š</strong> è®¡ç®—å¾—åˆ°çš„ $w$ å’Œ $b$ æè¿°äº†æœ€ç»ˆçš„è¶…å¹³é¢ï¼Œå¯ä»¥ç”¨äºåˆ†ç±»ã€‚</p></li></ol><p>è¿™ä¸ªä¾‹å­æ¶‰åŠäº†SVMä¸­çš„è½¯é—´éš”æœ€å¤§åŒ–é—®é¢˜ï¼Œé€šè¿‡æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•å¯ä»¥æ±‚è§£å¾—åˆ°æ”¯æŒå‘é‡æœºçš„æ¨¡å‹å‚æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªåœ¨æœºå™¨å­¦ä¹ ä¸­éå¸¸æœ‰ç”¨çš„ä¾‹å­ï¼Œå±•ç¤ºäº†æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•åœ¨ä¼˜åŒ–é—®é¢˜ä¸­çš„åº”ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Math </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Lagrange Multiplier Method </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AdaBoostç®—æ³•ç®€æ</title>
      <link href="/2023/08/02/AdaBoost%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/"/>
      <url>/2023/08/02/AdaBoost%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="AdaBoostç®—æ³•ç®€æ"><a href="#AdaBoostç®—æ³•ç®€æ" class="headerlink" title="AdaBoostç®—æ³•ç®€æ"></a>AdaBoostç®—æ³•ç®€æ</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>AdaBoostï¼ˆAdaptive Boostingï¼‰æ˜¯ä¸€ç§é›†æˆå­¦ä¹ ï¼ˆEnsemble Learningï¼‰ç®—æ³•ï¼Œæ—¨åœ¨æé«˜åˆ†ç±»ç®—æ³•çš„æ€§èƒ½ã€‚å®ƒé€šè¿‡å°†å¤šä¸ªå¼±åˆ†ç±»å™¨ï¼ˆé€šå¸¸æ˜¯ç®€å•çš„ã€æ€§èƒ½ç•¥ä¼˜äºéšæœºçŒœæµ‹çš„åˆ†ç±»å™¨ï¼‰ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå¼ºåˆ†ç±»å™¨ï¼Œä»è€Œå®ç°æ›´å‡†ç¡®çš„åˆ†ç±»ã€‚</p><p>ä»¥ä¸‹æ˜¯AdaBoostç®—æ³•çš„æ¦‚è¿°ï¼š</p><ol><li><p><strong>æ•°æ®å‡†å¤‡ï¼š</strong> é¦–å…ˆï¼Œéœ€è¦å‡†å¤‡å¸¦æœ‰æ ‡ç­¾çš„è®­ç»ƒæ•°æ®é›†ï¼Œå…¶ä¸­æ¯ä¸ªæ ·æœ¬éƒ½æœ‰ä¸€ä¸ªå·²çŸ¥çš„ç±»åˆ«æ ‡ç­¾ã€‚</p></li><li><p><strong>åˆå§‹åŒ–æƒé‡ï¼š</strong> å¯¹æ¯ä¸ªæ ·æœ¬èµ‹äºˆä¸€ä¸ªåˆå§‹æƒé‡ï¼Œè¿™äº›æƒé‡è¡¨ç¤ºæ ·æœ¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„é‡è¦æ€§ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåˆå§‹æƒé‡ç›¸ç­‰ã€‚</p></li><li><p><strong>è¿­ä»£è®­ç»ƒï¼š</strong> AdaBoosté€šè¿‡ä¸€ç³»åˆ—è¿­ä»£æ¥æ„å»ºå¼ºåˆ†ç±»å™¨ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œå®ƒæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><p>a. <strong>é€‰æ‹©å¼±åˆ†ç±»å™¨ï¼š</strong> ä»ä¸€ç»„å¯èƒ½çš„å¼±åˆ†ç±»å™¨ä¸­é€‰æ‹©ä¸€ä¸ªï¼Œè¯¥é€‰æ‹©æ˜¯åŸºäºå½“å‰æ ·æœ¬æƒé‡å’Œåˆ†ç±»å™¨çš„æ€§èƒ½æ¥åšå‡ºçš„ã€‚</p><p>b. <strong>è®­ç»ƒå¼±åˆ†ç±»å™¨ï¼š</strong> ä½¿ç”¨å½“å‰æ ·æœ¬æƒé‡å¯¹é€‰æ‹©çš„å¼±åˆ†ç±»å™¨è¿›è¡Œè®­ç»ƒï¼Œä½¿å…¶åœ¨å½“å‰æ•°æ®åˆ†å¸ƒä¸‹å°½å¯èƒ½å‡†ç¡®åœ°åˆ†ç±»ã€‚</p><p>c. <strong>è®¡ç®—é”™è¯¯ç‡ï¼š</strong> è®¡ç®—å¼±åˆ†ç±»å™¨åœ¨å½“å‰æ•°æ®åˆ†å¸ƒä¸‹çš„é”™è¯¯ç‡ï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€æ­¥ä¸­è¿›è¡Œæƒé‡è°ƒæ•´ã€‚</p><p>d. <strong>æ›´æ–°æ ·æœ¬æƒé‡ï¼š</strong> æ ¹æ®å¼±åˆ†ç±»å™¨çš„é”™è¯¯ç‡è°ƒæ•´æ ·æœ¬æƒé‡ï¼Œå¢åŠ è¢«é”™è¯¯åˆ†ç±»çš„æ ·æœ¬çš„æƒé‡ï¼Œé™ä½è¢«æ­£ç¡®åˆ†ç±»çš„æ ·æœ¬çš„æƒé‡ã€‚</p></li><li><p><strong>ç»„åˆå¼±åˆ†ç±»å™¨ï¼š</strong> å¯¹äºæ¯ä¸ªè¿­ä»£æ­¥éª¤ï¼Œéƒ½ä¼šä¸ºå¼±åˆ†ç±»å™¨åˆ†é…ä¸€ä¸ªæƒé‡ï¼Œè¯¥æƒé‡åŸºäºå…¶æ€§èƒ½ã€‚ç„¶åï¼Œå°†æ‰€æœ‰å¼±åˆ†ç±»å™¨çš„ç»“æœæŒ‰ç…§æƒé‡åŠ æƒç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå¼ºåˆ†ç±»å™¨ã€‚</p></li><li><p><strong>åˆ†ç±»é¢„æµ‹ï¼š</strong> ä½¿ç”¨æ„å»ºçš„å¼ºåˆ†ç±»å™¨æ¥è¿›è¡Œæ–°æ ·æœ¬çš„åˆ†ç±»é¢„æµ‹ã€‚å¼ºåˆ†ç±»å™¨å°†æ ¹æ®æ¯ä¸ªå¼±åˆ†ç±»å™¨çš„æƒé‡å¯¹æ ·æœ¬è¿›è¡Œåˆ†ç±»ï¼Œæœ€ç»ˆè¾“å‡ºæœ€å¯èƒ½çš„ç±»åˆ«æ ‡ç­¾ã€‚</p></li></ol><p>AdaBoostçš„å…³é”®æ€æƒ³åœ¨äºæ¯ä¸€æ¬¡è¿­ä»£éƒ½ä¼šè°ƒæ•´æ ·æœ¬çš„æƒé‡ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­åœ¨è¢«é”™è¯¯åˆ†ç±»çš„æ ·æœ¬ä¸Šï¼Œä»è€Œé€æ­¥æ”¹å–„åˆ†ç±»æ€§èƒ½ã€‚æœ€ç»ˆï¼Œé€šè¿‡ç»„åˆå¤šä¸ªå¼±åˆ†ç±»å™¨ï¼ŒAdaBoostèƒ½å¤Ÿäº§ç”Ÿä¸€ä¸ªåœ¨åˆ†ç±»ä»»åŠ¡ä¸­è¡¨ç°è‰¯å¥½çš„å¼ºåˆ†ç±»å™¨ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒAdaBoostå¯¹å¼‚å¸¸å€¼æ¯”è¾ƒæ•æ„Ÿï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶éœ€è¦è°¨æ…å¤„ç†æ•°æ®å¼‚å¸¸æƒ…å†µã€‚å¦å¤–ï¼ŒAdaBooståœ¨ä¸€äº›ç‰¹å®šæƒ…å†µä¸‹å¯èƒ½ä¼šè¿‡æ‹Ÿåˆï¼Œå› æ­¤å¯èƒ½éœ€è¦è¿›è¡Œé€‚å½“çš„è°ƒå‚æˆ–è€…å°è¯•å…¶ä»–é›†æˆå­¦ä¹ æ–¹æ³•ã€‚</p><h2 id="AdaBoostä¸RandomForest"><a href="#AdaBoostä¸RandomForest" class="headerlink" title="AdaBoostä¸RandomForest"></a>AdaBoostä¸RandomForest</h2><p>AdaBoostï¼ˆAdaptive Boostingï¼‰å’ŒRandom Forestéƒ½æ˜¯é›†æˆå­¦ä¹ ç®—æ³•ï¼Œç”¨äºæé«˜åˆ†ç±»ç®—æ³•çš„æ€§èƒ½ã€‚å®ƒä»¬æœ‰ä¸€äº›å…±åŒä¹‹å¤„ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›æ˜¾è‘—çš„åŒºåˆ«ã€‚ä¸‹é¢æ˜¯å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«ä¸è”ç³»ï¼š</p><p><strong>åŒºåˆ«ï¼š</strong></p><ol><li><p><strong>åŸºæœ¬åˆ†ç±»å™¨çš„é€‰æ‹©ï¼š</strong></p><ul><li>AdaBoostï¼šAdaBoostçš„åŸºæœ¬åˆ†ç±»å™¨æ˜¯å¼±åˆ†ç±»å™¨ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªç®€å•çš„åˆ†ç±»å™¨ï¼Œå¦‚å†³ç­–æ ‘çš„æ·±åº¦å¾ˆå°ã€‚</li><li>Random Forestï¼šRandom Forestçš„åŸºæœ¬åˆ†ç±»å™¨æ˜¯å†³ç­–æ ‘ï¼Œé€šå¸¸æ˜¯æ·±åº¦è¾ƒå¤§çš„å†³ç­–æ ‘ã€‚</li></ul></li><li><p><strong>æ ·æœ¬æƒé‡ï¼š</strong></p><ul><li>AdaBoostï¼šAdaBooståœ¨æ¯æ¬¡è¿­ä»£ä¸­è°ƒæ•´æ ·æœ¬çš„æƒé‡ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­åœ¨è¢«é”™è¯¯åˆ†ç±»çš„æ ·æœ¬ä¸Šã€‚</li><li>Random Forestï¼šRandom Forestä¸è°ƒæ•´æ ·æœ¬æƒé‡ï¼Œæ¯æ£µå†³ç­–æ ‘éƒ½åŸºäºåŸå§‹æ•°æ®è¿›è¡Œè®­ç»ƒã€‚</li></ul></li><li><p><strong>è®­ç»ƒæ–¹å¼ï¼š</strong></p><ul><li>AdaBoostï¼šAdaBoostæ˜¯é€šè¿‡é¡ºåºè¿­ä»£çš„æ–¹å¼æ„å»ºå¼±åˆ†ç±»å™¨ï¼Œå¹¶é€æ­¥æé«˜å…¶æ€§èƒ½ã€‚</li><li>Random Forestï¼šRandom Forestæ˜¯é€šè¿‡å¹¶è¡Œè®­ç»ƒå¤šæ£µå†³ç­–æ ‘ï¼Œæ¯æ£µæ ‘éƒ½åœ¨éšæœºæŠ½å–çš„å­æ ·æœ¬ä¸Šè¿›è¡Œè®­ç»ƒï¼Œç„¶åå¯¹å®ƒä»¬çš„é¢„æµ‹ç»“æœè¿›è¡ŒæŠ•ç¥¨æˆ–å¹³å‡ã€‚</li></ul></li><li><p><strong>æƒé‡åˆ†é…ï¼š</strong></p><ul><li>AdaBoostï¼šAdaBooståœ¨æ„å»ºæœ€ç»ˆåˆ†ç±»å™¨æ—¶ï¼Œå¯¹æ¯ä¸ªå¼±åˆ†ç±»å™¨åˆ†é…ä¸€ä¸ªæƒé‡ï¼Œç”¨äºç»„åˆå®ƒä»¬çš„é¢„æµ‹ç»“æœã€‚</li><li>Random Forestï¼šRandom Forestå¯¹æ‰€æœ‰å†³ç­–æ ‘çš„é¢„æµ‹ç»“æœè¿›è¡ŒæŠ•ç¥¨ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰æˆ–å¹³å‡ï¼ˆå›å½’é—®é¢˜ï¼‰ï¼Œæœ€ç»ˆç¡®å®šæœ€ç»ˆç»“æœã€‚</li></ul></li></ol><p><strong>è”ç³»ï¼š</strong></p><ol><li><p><strong>é›†æˆæ€æƒ³ï¼š</strong> AdaBoostå’ŒRandom Forestéƒ½é‡‡ç”¨äº†é›†æˆå­¦ä¹ çš„æ€æƒ³ï¼Œé€šè¿‡ç»„åˆå¤šä¸ªåŸºæœ¬åˆ†ç±»å™¨æ¥æé«˜æ•´ä½“æ€§èƒ½ã€‚</p></li><li><p><strong>å‡å°‘è¿‡æ‹Ÿåˆï¼š</strong> ä¸¤ç§ç®—æ³•éƒ½èƒ½æœ‰æ•ˆå‡å°‘è¿‡æ‹Ÿåˆçš„é£é™©ã€‚AdaBoosté€šè¿‡è°ƒæ•´æ ·æœ¬æƒé‡æ¥å…³æ³¨éš¾ä»¥åˆ†ç±»çš„æ ·æœ¬ï¼Œè€ŒRandom Foresté€šè¿‡éšæœºå­æ ·æœ¬å’Œç‰¹å¾é€‰æ‹©æ¥å¢åŠ æ¨¡å‹çš„å¤šæ ·æ€§ï¼Œä»è€Œå‡å°‘è¿‡æ‹Ÿåˆã€‚</p></li><li><p><strong>åº”ç”¨é¢†åŸŸï¼š</strong> ä¸¤ç§ç®—æ³•åœ¨å„ç§åº”ç”¨é¢†åŸŸéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼ŒåŒ…æ‹¬åˆ†ç±»å’Œå›å½’é—®é¢˜ã€‚</p></li><li><p><strong>æ¨¡å‹è§£é‡Šï¼š</strong> é€šå¸¸æƒ…å†µä¸‹ï¼ŒRandom Forestçš„æ¨¡å‹æ¯”è¾ƒå®¹æ˜“è§£é‡Šï¼Œå› ä¸ºå®ƒç”±å¤šä¸ªå†³ç­–æ ‘ç»„æˆã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç”±äºAdaBoostä½¿ç”¨åŠ æƒæŠ•ç¥¨ç»„åˆå¤šä¸ªå¼±åˆ†ç±»å™¨ï¼Œè§£é‡Šèµ·æ¥å¯èƒ½ç¨å¾®å¤æ‚ä¸€äº›ã€‚</p></li></ol><p>åœ¨é€‰æ‹©ä½¿ç”¨AdaBoostè¿˜æ˜¯Random Forestæ—¶ï¼Œä½ éœ€è¦è€ƒè™‘æ•°æ®ç‰¹ç‚¹ã€é—®é¢˜å¤æ‚åº¦ä»¥åŠæ¨¡å‹æ€§èƒ½ç­‰å› ç´ ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ç§ç®—æ³•å¹¶ä¸æ˜¯é€‚ç”¨äºæ‰€æœ‰é—®é¢˜çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼Œæœ‰æ—¶å€™å…¶ä»–çš„é›†æˆå­¦ä¹ æ–¹æ³•æˆ–å•ä¸€æ¨¡å‹å¯èƒ½æ›´åŠ é€‚åˆã€‚</p><h2 id="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"><a href="#æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼" class="headerlink" title="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"></a>æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼</h2><ol><li><p><strong>åˆå§‹åŒ–æ ·æœ¬æƒé‡ï¼š</strong><br>$$w_i^{(1)} &#x3D; \frac{1}{N} \quad \text{for} \quad i &#x3D; 1, 2, \ldots, N$$</p></li><li><p><strong>å¼±åˆ†ç±»å™¨çš„æƒé‡è®¡ç®—ï¼š</strong><br>$$\epsilon_t &#x3D; \sum_{i&#x3D;1}^{N} w_i^{(t)} \cdot \mathbb{1}\left(h_t(x_i) \neq y_i\right)$$</p><p>$$\alpha_t &#x3D; \frac{1}{2} \ln\left(\frac{1 - \epsilon_t}{\epsilon_t}\right)$$</p></li><li><p><strong>æ ·æœ¬æƒé‡æ›´æ–°ï¼š</strong><br>$$w_i^{(t+1)} &#x3D; \frac{w_i^{(t)} \cdot \exp(-\alpha_t \cdot y_i \cdot h_t(x_i))}{Z_t} \quad \text{for} \quad i &#x3D; 1, 2, \ldots, N$$</p><p>å…¶ä¸­ï¼Œ<br>$$Z_t &#x3D; \sum_{i&#x3D;1}^{N} w_i^{(t)} \cdot \exp(-\alpha_t \cdot y_i \cdot h_t(x_i))$$</p></li><li><p><strong>æœ€ç»ˆåˆ†ç±»å™¨çš„ç»„åˆï¼š</strong><br>$$H(x) &#x3D; \text{sign}\left(\sum_{t&#x3D;1}^{T} \alpha_t \cdot h_t(x)\right)$$</p></li></ol><p>è¿™äº›å…¬å¼æ¶µç›–äº†AdaBoostç®—æ³•çš„æ ¸å¿ƒæ•°å­¦åŸç†ã€‚åœ¨è¿™é‡Œï¼Œ$N$ è¡¨ç¤ºæ ·æœ¬æ•°é‡ï¼Œ$x_i$ æ˜¯ç¬¬ $i$ ä¸ªæ ·æœ¬çš„ç‰¹å¾ï¼Œ$y_i$ æ˜¯ç¬¬ $i$ ä¸ªæ ·æœ¬çš„æ ‡ç­¾ï¼Œ$h_t(x_i)$ æ˜¯ç¬¬ $t$ ä¸ªå¼±åˆ†ç±»å™¨å¯¹æ ·æœ¬ $x_i$ çš„é¢„æµ‹ç»“æœï¼Œ$\alpha_t$ æ˜¯ç¬¬ $t$ ä¸ªå¼±åˆ†ç±»å™¨çš„æƒé‡ï¼Œ$w_i^{(t)}$ æ˜¯ç¬¬ $t$ è½®è¿­ä»£ä¸­æ ·æœ¬ $x_i$ çš„æƒé‡ï¼Œ$T$ æ˜¯è¿­ä»£è½®æ•°ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å…¬å¼åªæ˜¯ä¸€ä¸ªæ¦‚è§ˆï¼Œå®é™…çš„æ¨å¯¼å’Œè®¡ç®—è¿‡ç¨‹å¯èƒ½ä¼šæ›´åŠ è¯¦ç»†å’Œå¤æ‚ã€‚å¦‚æœä½ å¸Œæœ›æ›´æ·±å…¥åœ°äº†è§£AdaBoostç®—æ³•çš„æ•°å­¦åŸç†ï¼Œå»ºè®®å‚è€ƒç›¸å…³çš„æ•™æã€è®ºæ–‡æˆ–åœ¨çº¿èµ„æºã€‚</p><h2 id="æ¡ˆä¾‹ï¼šé©¬ç–ç—…çš„é¢„æµ‹"><a href="#æ¡ˆä¾‹ï¼šé©¬ç–ç—…çš„é¢„æµ‹" class="headerlink" title="æ¡ˆä¾‹ï¼šé©¬ç–ç—…çš„é¢„æµ‹"></a>æ¡ˆä¾‹ï¼šé©¬ç–ç—…çš„é¢„æµ‹</h2><h3 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="horseColicTest2.txt" href="/citation/AdaBoost/horseColicTest2.txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">horseColicTest2.txt</p><p class="url">/citation/AdaBoost/horseColicTest2.txt</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="horseColicTraining2.txt" href="/citation/AdaBoost/horseColicTraining2.txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">horseColicTraining2.txt</p><p class="url">/citation/AdaBoost/horseColicTraining2.txt</p></div></a></div></div><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_sim_data</span>():</span><br><span class="line">    data_mat = np.matrix([[<span class="number">1.0</span>, <span class="number">2.1</span>],</span><br><span class="line">                          [<span class="number">2.0</span>, <span class="number">1.1</span>],</span><br><span class="line">                          [<span class="number">1.3</span>, <span class="number">1.0</span>],</span><br><span class="line">                          [<span class="number">1.0</span>, <span class="number">1.0</span>],</span><br><span class="line">                          [<span class="number">2.0</span>, <span class="number">1.0</span>]])</span><br><span class="line">    class_labels = [<span class="number">1.0</span>, <span class="number">1.0</span>, -<span class="number">1.0</span>, -<span class="number">1.0</span>, <span class="number">1.0</span>]</span><br><span class="line">    <span class="keyword">return</span> data_mat, class_labels</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_data_set</span>(<span class="params">file_name</span>):</span><br><span class="line">    num_feat = <span class="built_in">len</span>(<span class="built_in">open</span>(file_name).readline().split(<span class="string">&#x27;\t&#x27;</span>))</span><br><span class="line">    data_arr = []</span><br><span class="line">    label_arr = []</span><br><span class="line">    fr = <span class="built_in">open</span>(file_name)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fr.readlines():</span><br><span class="line">        line_arr = []</span><br><span class="line">        cur_line = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_feat - <span class="number">1</span>):</span><br><span class="line">            line_arr.append(<span class="built_in">float</span>(cur_line[i]))</span><br><span class="line">        data_arr.append(line_arr)</span><br><span class="line">        label_arr.append(<span class="built_in">float</span>(cur_line[-<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">return</span> np.matrix(data_arr), label_arr</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">stump_classify</span>(<span class="params">data_mat, dimen, thresh_val, thresh_ineq</span>):</span><br><span class="line">    ret_array = np.ones((np.shape(data_mat)[<span class="number">0</span>], <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">if</span> thresh_ineq == <span class="string">&#x27;lt&#x27;</span>:</span><br><span class="line">        ret_array[data_mat[:, dimen] &lt;= thresh_val] = -<span class="number">1.0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ret_array[data_mat[:, dimen] &gt; thresh_val] = -<span class="number">1.0</span></span><br><span class="line">    <span class="keyword">return</span> ret_array</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_stump</span>(<span class="params">data_arr, class_labels, D</span>):</span><br><span class="line">    data_mat = np.mat(data_arr)</span><br><span class="line">    label_mat = np.mat(class_labels).T</span><br><span class="line">    m, n = np.shape(data_mat)</span><br><span class="line">    num_steps = <span class="number">10.0</span></span><br><span class="line">    best_stump = &#123;&#125;</span><br><span class="line">    best_class_est = np.mat(np.zeros((m, <span class="number">1</span>)))</span><br><span class="line">    min_err = np.inf</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        range_min = data_mat[:, i].<span class="built_in">min</span>()</span><br><span class="line">        range_max = data_mat[:, i].<span class="built_in">max</span>()</span><br><span class="line">        step_size = (range_max - range_min) / num_steps</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(-<span class="number">1</span>, <span class="built_in">int</span>(num_steps) + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> inequal <span class="keyword">in</span> [<span class="string">&#x27;lt&#x27;</span>, <span class="string">&#x27;gt&#x27;</span>]:</span><br><span class="line">                thresh_val = (range_min + <span class="built_in">float</span>(j) * step_size)</span><br><span class="line">                predicted_vals = stump_classify(data_mat, i, thresh_val, inequal)</span><br><span class="line">                err_arr = np.mat(np.ones((m, <span class="number">1</span>)))</span><br><span class="line">                err_arr[predicted_vals == label_mat] = <span class="number">0</span></span><br><span class="line">                weighted_err = D.T * err_arr</span><br><span class="line">                <span class="keyword">if</span> weighted_err &lt; min_err:</span><br><span class="line">                    min_err = weighted_err</span><br><span class="line">                    best_class_est = predicted_vals.copy()</span><br><span class="line">                    best_stump[<span class="string">&#x27;dim&#x27;</span>] = i</span><br><span class="line">                    best_stump[<span class="string">&#x27;thresh&#x27;</span>] = thresh_val</span><br><span class="line">                    best_stump[<span class="string">&#x27;ineq&#x27;</span>] = inequal</span><br><span class="line">    <span class="keyword">return</span> best_stump, min_err, best_class_est</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ada_boost_train_ds</span>(<span class="params">data_arr, class_labels, num_it=<span class="number">40</span></span>):</span><br><span class="line">    weak_class_arr = []</span><br><span class="line">    m = np.shape(data_arr)[<span class="number">0</span>]</span><br><span class="line">    D = np.mat(np.ones((m, <span class="number">1</span>)) / m)</span><br><span class="line">    agg_class_est = np.mat(np.zeros((m, <span class="number">1</span>)))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_it):</span><br><span class="line">        best_stump, error, class_est = build_stump(data_arr, class_labels, D)</span><br><span class="line">        alpha = <span class="built_in">float</span>(<span class="number">0.5</span> * np.log((<span class="number">1.0</span> - error) / <span class="built_in">max</span>(error, <span class="number">1e-16</span>)))</span><br><span class="line">        best_stump[<span class="string">&#x27;alpha&#x27;</span>] = alpha</span><br><span class="line">        weak_class_arr.append(best_stump)</span><br><span class="line">        expon = np.multiply(-<span class="number">1</span> * alpha * np.mat(class_labels).T, class_est)</span><br><span class="line">        D = np.multiply(D, np.exp(expon))</span><br><span class="line">        D = D / D.<span class="built_in">sum</span>()</span><br><span class="line">        agg_class_est += alpha * class_est</span><br><span class="line">        agg_errors = np.multiply(np.sign(agg_class_est) != np.mat(class_labels).T,</span><br><span class="line">                                 np.ones((m, <span class="number">1</span>)))</span><br><span class="line">        error_rate = agg_errors.<span class="built_in">sum</span>() / m</span><br><span class="line">        <span class="keyword">if</span> error_rate == <span class="number">0.0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> weak_class_arr, agg_class_est</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ada_classify</span>(<span class="params">data_to_class, classifier_arr</span>):</span><br><span class="line">    data_mat = np.mat(data_to_class)</span><br><span class="line">    m = np.shape(data_mat)[<span class="number">0</span>]</span><br><span class="line">    agg_class_est = np.mat(np.zeros((m, <span class="number">1</span>)))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(classifier_arr)):</span><br><span class="line">        class_est = stump_classify(</span><br><span class="line">            data_mat, classifier_arr[i][<span class="string">&#x27;dim&#x27;</span>],</span><br><span class="line">            classifier_arr[i][<span class="string">&#x27;thresh&#x27;</span>],</span><br><span class="line">            classifier_arr[i][<span class="string">&#x27;ineq&#x27;</span>]</span><br><span class="line">        )</span><br><span class="line">        agg_class_est += classifier_arr[i][<span class="string">&#x27;alpha&#x27;</span>] * class_est</span><br><span class="line">    <span class="keyword">return</span> np.sign(agg_class_est)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_roc</span>(<span class="params">pred_strengths, class_labels</span>):</span><br><span class="line">    <span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">    y_sum = <span class="number">0.0</span></span><br><span class="line">    num_pos_class = np.<span class="built_in">sum</span>(np.array(class_labels) == <span class="number">1.0</span>)</span><br><span class="line">    y_step = <span class="number">1</span> / <span class="built_in">float</span>(num_pos_class)</span><br><span class="line">    x_step = <span class="number">1</span> / <span class="built_in">float</span>(<span class="built_in">len</span>(class_labels) - num_pos_class)</span><br><span class="line">    sorted_indicies = pred_strengths.argsort()</span><br><span class="line">    fig = plt.figure()</span><br><span class="line">    fig.clf()</span><br><span class="line">    ax = plt.subplot(<span class="number">111</span>)</span><br><span class="line">    cur = (<span class="number">1.0</span>, <span class="number">1.0</span>)</span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> sorted_indicies.tolist()[<span class="number">0</span>]:</span><br><span class="line">        <span class="keyword">if</span> class_labels[index] == <span class="number">1.0</span>:</span><br><span class="line">            del_x = <span class="number">0</span></span><br><span class="line">            del_y = y_step</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            del_x = x_step</span><br><span class="line">            del_y = <span class="number">0</span></span><br><span class="line">            y_sum += cur[<span class="number">1</span>]</span><br><span class="line">        ax.plot([cur[<span class="number">0</span>], cur[<span class="number">0</span>] - del_x], [cur[<span class="number">1</span>], cur[<span class="number">1</span>] - del_y], c=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">        cur = (cur[<span class="number">0</span>] - del_x, cur[<span class="number">1</span>] - del_y)</span><br><span class="line">    ax.plot([<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], <span class="string">&#x27;b--&#x27;</span>)</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;False positive rate&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;True positive rate&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;ROC curve for AdaBoost horse colic detection system&#x27;</span>)</span><br><span class="line">    ax.axis([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">    plt.show()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;the Area Under the Curve is: &quot;</span>, y_sum * x_step)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>():</span><br><span class="line">    data_mat, class_labels = load_data_set(<span class="string">&#x27;7.AdaBoost/horseColicTraining2.txt&#x27;</span>)</span><br><span class="line">    weak_class_arr, agg_class_est = ada_boost_train_ds(data_mat, class_labels, <span class="number">40</span>)</span><br><span class="line">    plot_roc(agg_class_est, class_labels)</span><br><span class="line">    data_arr_test, label_arr_test = load_data_set(<span class="string">&quot;7.AdaBoost/horseColicTest2.txt&quot;</span>)</span><br><span class="line">    m = np.shape(data_arr_test)[<span class="number">0</span>]</span><br><span class="line">    predicting10 = ada_classify(data_arr_test, weak_class_arr)</span><br><span class="line">    err_arr = np.mat(np.ones((m, <span class="number">1</span>)))</span><br><span class="line">    <span class="built_in">print</span>(m,</span><br><span class="line">          err_arr[predicting10 != np.mat(label_arr_test).T].<span class="built_in">sum</span>(),</span><br><span class="line">          err_arr[predicting10 != np.mat(label_arr_test).T].<span class="built_in">sum</span>() / m</span><br><span class="line">          )</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    test()</span><br></pre></td></tr></table></figure><div class="note info"><p>æ¥æºäº <a href="https://www.apachecn.org/">ApacheCN</a></p></div><h2 id="DTä¸AdaBoost"><a href="#DTä¸AdaBoost" class="headerlink" title="DTä¸AdaBoost"></a>DTä¸AdaBoost</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> AdaBoostRegressor</span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeRegressor</span><br><span class="line"></span><br><span class="line">rng = np.random.RandomState(<span class="number">1</span>)</span><br><span class="line">X = np.linspace(<span class="number">0</span>, <span class="number">6</span>, <span class="number">100</span>)[:, np.newaxis]</span><br><span class="line">y = np.sin(X).ravel() + np.sin(<span class="number">6</span> * X).ravel() + rng.normal(<span class="number">0</span>, <span class="number">0.1</span>, X.shape[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">regr_1 = DecisionTreeRegressor(max_depth=<span class="number">4</span>)</span><br><span class="line">regr_2 = AdaBoostRegressor(DecisionTreeRegressor(max_depth=<span class="number">4</span>), n_estimators=<span class="number">300</span>, random_state=rng)</span><br><span class="line"></span><br><span class="line">regr_1.fit(X, y)</span><br><span class="line">regr_2.fit(X, y)</span><br><span class="line"></span><br><span class="line">y_1 = regr_1.predict(X)</span><br><span class="line">y_2 = regr_2.predict(X)</span><br><span class="line"></span><br><span class="line">plt.figure()</span><br><span class="line">plt.scatter(X, y, c=<span class="string">&quot;k&quot;</span>, label=<span class="string">&quot;training samples&quot;</span>)</span><br><span class="line">plt.plot(X, y_1, c=<span class="string">&quot;g&quot;</span>, label=<span class="string">&quot;n_estimators=1&quot;</span>, linewidth=<span class="number">2</span>)</span><br><span class="line">plt.plot(X, y_2, c=<span class="string">&quot;r&quot;</span>, label=<span class="string">&quot;n_estimators=300&quot;</span>, linewidth=<span class="number">2</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;data&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;target&quot;</span>)</span><br><span class="line">plt.title(<span class="string">&quot;Boosted Decision Tree Regression&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;y---&#x27;</span>, <span class="built_in">type</span>(y[<span class="number">0</span>]), <span class="built_in">len</span>(y), y[:<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;y_1---&#x27;</span>, <span class="built_in">type</span>(y_1[<span class="number">0</span>]), <span class="built_in">len</span>(y_1), y_1[:<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;y_2---&#x27;</span>, <span class="built_in">type</span>(y_2[<span class="number">0</span>]), <span class="built_in">len</span>(y_2), y_2[:<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">y_true = np.array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">y_scores = np.array([<span class="number">0.1</span>, <span class="number">0.4</span>, <span class="number">0.35</span>, <span class="number">0.8</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;y_scores---&#x27;</span>, <span class="built_in">type</span>(y_scores[<span class="number">0</span>]), <span class="built_in">len</span>(y_scores), y_scores)</span><br><span class="line"><span class="built_in">print</span>(metrics.roc_auc_score(y_true, y_scores))</span><br></pre></td></tr></table></figure><img src="/citation/AdaBoost/img.png" class="lazyload placeholder" data-srcset="/citation/AdaBoost/img.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="">]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> AdaBoost </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RandomForestç®—æ³•ç®€æ</title>
      <link href="/2023/08/02/RandomForest%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/"/>
      <url>/2023/08/02/RandomForest%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="RandomForestç®—æ³•ç®€æ"><a href="#RandomForestç®—æ³•ç®€æ" class="headerlink" title="RandomForestç®—æ³•ç®€æ"></a>RandomForestç®—æ³•ç®€æ</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰æ˜¯ä¸€ç§å¼ºå¤§ä¸”æµè¡Œçš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œç”¨äºè§£å†³åˆ†ç±»å’Œå›å½’é—®é¢˜ã€‚å®ƒæ˜¯é›†æˆå­¦ä¹ ï¼ˆEnsemble Learningï¼‰æ–¹æ³•çš„ä¸€ç§ï¼Œé€šè¿‡ç»„åˆå¤šä¸ªå†³ç­–æ ‘æ¥å½¢æˆä¸€ä¸ªæ›´å¼ºå¤§çš„æ¨¡å‹ã€‚éšæœºæ£®æ—ç”±è´å¶æ–¯å­¦è€…Leo Breimanäº2001å¹´æå‡ºï¼Œå¹¶åœ¨å®è·µä¸­è¢«å¹¿æ³›åº”ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯éšæœºæ£®æ—çš„æ¦‚è¿°ï¼š</p><ol><li><p>å†³ç­–æ ‘åŸºæœ¬åŸç†ï¼šé¦–å…ˆéœ€è¦äº†è§£å†³ç­–æ ‘çš„åŸºæœ¬åŸç†ã€‚å†³ç­–æ ‘æ˜¯ä¸€ç§éå‚æ•°åŒ–çš„ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡åœ¨è¾“å…¥ç‰¹å¾ä¸Šé€æ­¥è¿›è¡ŒäºŒåˆ†åˆ’åˆ†ï¼Œå°†æ•°æ®é›†åˆ†å‰²æˆä¸åŒçš„åŒºåŸŸï¼Œä»è€Œæ„å»ºä¸€ä¸ªæ ‘å½¢çš„åˆ†ç±»æ¨¡å‹ã€‚</p></li><li><p>éšæœºæ£®æ—ç»„æˆï¼šéšæœºæ£®æ—ç”±å¤šä¸ªå†³ç­–æ ‘ç»„æˆã€‚åœ¨æ„å»ºæ¯ä¸ªå†³ç­–æ ‘æ—¶ï¼Œé‡‡ç”¨çš„æ•°æ®æ˜¯ä»åŸå§‹è®­ç»ƒé›†ä¸­æœ‰æ”¾å›åœ°éšæœºæŠ½å–çš„ï¼ˆæœ‰æ”¾å›é‡‡æ ·ï¼Œå³Bootstrapé‡‡æ ·ï¼‰ï¼ŒåŒæ—¶æ¯ä¸ªå†³ç­–æ ‘ä½¿ç”¨çš„ç‰¹å¾å­é›†ä¹Ÿæ˜¯éšæœºé€‰æ‹©çš„ã€‚</p></li><li><p>éšæœºæ€§ï¼šéšæœºæ£®æ—çš„éšæœºæ€§ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼šé¦–å…ˆï¼Œé€šè¿‡éšæœºæŠ½å–æ•°æ®å’Œç‰¹å¾å­é›†ï¼Œä½¿å¾—æ¯ä¸ªå†³ç­–æ ‘éƒ½æœ‰æ‰€ä¸åŒï¼›å…¶æ¬¡ï¼Œå½“è¿›è¡Œæ ‘èŠ‚ç‚¹åˆ’åˆ†æ—¶ï¼Œä¸å†æœç´¢æ‰€æœ‰å¯èƒ½çš„ç‰¹å¾ï¼Œè€Œæ˜¯éšæœºé€‰æ‹©ç‰¹å¾å­é›†ä¸­çš„ä¸€ä¸ªç‰¹å¾è¿›è¡Œåˆ’åˆ†ã€‚è¿™ç§éšæœºæ€§æœ‰åŠ©äºé™ä½æ¨¡å‹çš„æ–¹å·®ï¼Œæé«˜æ³›åŒ–æ€§èƒ½ã€‚</p></li><li><p>æŠ•ç¥¨é›†æˆï¼šåœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œæ¯ä¸ªå†³ç­–æ ‘ä¼šç»™å‡ºä¸€ä¸ªé¢„æµ‹ç»“æœï¼Œæœ€ç»ˆçš„åˆ†ç±»ç»“æœæ˜¯é€šè¿‡æŠ•ç¥¨æœºåˆ¶æ¥ç¡®å®šï¼Œå³é‡‡ç”¨å¤šæ•°æŠ•ç¥¨çš„ç»“æœä½œä¸ºæœ€ç»ˆè¾“å‡ºã€‚åœ¨å›å½’é—®é¢˜ä¸­ï¼Œéšæœºæ£®æ—çš„é¢„æµ‹ç»“æœæ˜¯å¤šä¸ªå†³ç­–æ ‘é¢„æµ‹ç»“æœçš„å¹³å‡å€¼ã€‚</p></li><li><p>éšæœºæ£®æ—çš„ä¼˜ç‚¹ï¼šéšæœºæ£®æ—åœ¨å¤„ç†é«˜ç»´æ•°æ®å’Œå¤§è§„æ¨¡æ•°æ®æ—¶è¡¨ç°å‡ºè‰²ï¼Œå…·æœ‰å¾ˆå¼ºçš„æ³›åŒ–èƒ½åŠ›ï¼Œä¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä¸”å¯¹äºå¼‚å¸¸å€¼å’Œå™ªå£°ç›¸å¯¹ç¨³å¥ã€‚æ­¤å¤–ï¼Œéšæœºæ£®æ—èƒ½å¤Ÿè¯„ä¼°ç‰¹å¾çš„é‡è¦æ€§ï¼Œå¯¹äºç‰¹å¾é€‰æ‹©å’Œå¯è§†åŒ–æ•°æ®å…·æœ‰ä¸€å®šå¸®åŠ©ã€‚</p></li><li><p>å‚æ•°è°ƒèŠ‚ï¼šéšæœºæ£®æ—ä¸­çš„ä¸»è¦å‚æ•°åŒ…æ‹¬å†³ç­–æ ‘çš„æ•°é‡ã€æ¯ä¸ªå†³ç­–æ ‘çš„æœ€å¤§æ·±åº¦ã€ç‰¹å¾å­é›†å¤§å°ç­‰ã€‚åœ¨å®è·µä¸­ï¼Œå¯ä»¥é€šè¿‡äº¤å‰éªŒè¯ç­‰æŠ€æœ¯æ¥é€‰æ‹©åˆé€‚çš„å‚æ•°å€¼ï¼Œä»è€Œä¼˜åŒ–æ¨¡å‹çš„æ€§èƒ½ã€‚</p></li></ol><p>æ€»ç»“æ¥è¯´ï¼Œéšæœºæ£®æ—æ˜¯ä¸€ç§å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œé€‚ç”¨äºåˆ†ç±»å’Œå›å½’é—®é¢˜ï¼Œå¹¶åœ¨è®¸å¤šç°å®ä¸–ç•Œçš„åº”ç”¨ä¸­å–å¾—äº†å¾ˆå¥½çš„æ•ˆæœã€‚</p><h2 id="é›†æˆæ–¹æ³•"><a href="#é›†æˆæ–¹æ³•" class="headerlink" title="é›†æˆæ–¹æ³•"></a>é›†æˆæ–¹æ³•</h2><p>é›†æˆæ–¹æ³•ï¼ˆEnsemble Methodsï¼‰æ˜¯ä¸€ç§æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œé€šè¿‡ç»„åˆå¤šä¸ªåŸºæœ¬æ¨¡å‹æ¥æ„å»ºä¸€ä¸ªæ›´å¼ºå¤§ã€æ›´ç¨³å¥çš„é¢„æµ‹æ¨¡å‹ã€‚è¿™äº›åŸºæœ¬æ¨¡å‹å¯ä»¥æ˜¯åŒè´¨çš„ï¼ˆç›¸åŒç±»å‹çš„ç®—æ³•ï¼‰æˆ–å¼‚è´¨çš„ï¼ˆä¸åŒç±»å‹çš„ç®—æ³•ï¼‰ï¼Œå®ƒä»¬é€šå¸¸è¢«ç§°ä¸ºâ€å¼±å­¦ä¹ å™¨â€ï¼ˆWeak Learnersï¼‰æˆ–â€åŸºå­¦ä¹ å™¨â€ï¼ˆBase Learnersï¼‰ã€‚</p><p>é›†æˆæ–¹æ³•é€šè¿‡å°†å¤šä¸ªå¼±å­¦ä¹ å™¨çš„é¢„æµ‹ç»“æœè¿›è¡ŒåŠ æƒå¹³å‡æˆ–æŠ•ç¥¨ç­‰æ–¹å¼ï¼Œä»è€Œå¾—åˆ°æ›´å‡†ç¡®ã€æ³›åŒ–èƒ½åŠ›æ›´å¼ºçš„ç»¼åˆé¢„æµ‹ç»“æœã€‚ç›¸æ¯”å•ä¸€çš„åŸºæœ¬æ¨¡å‹ï¼Œé›†æˆæ–¹æ³•èƒ½å¤Ÿé™ä½è¿‡æ‹Ÿåˆé£é™©ï¼Œæé«˜æ¨¡å‹çš„é²æ£’æ€§å’Œç¨³å®šæ€§ã€‚</p><p>é›†æˆæ–¹æ³•çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå®ƒèƒ½å¤Ÿåœ¨ä¸åŒçš„æ•°æ®é›†å’Œé—®é¢˜ä¸Šäº§ç”Ÿå‡ºè‰²çš„è¡¨ç°ã€‚è¿™æ˜¯å› ä¸ºé›†æˆæ–¹æ³•åˆ©ç”¨äº†å¤šä¸ªæ¨¡å‹çš„ä¼˜åŠ¿ï¼Œè€Œä¸å—å•ä¸ªæ¨¡å‹çš„å±€é™æ€§ã€‚åœ¨å®è·µä¸­ï¼Œé›†æˆæ–¹æ³•é€šå¸¸æ¯”å•ä¸ªæ¨¡å‹æ›´å®¹æ˜“è°ƒæ•´å’Œä¼˜åŒ–ï¼Œå°¤å…¶åœ¨å¤„ç†å¤æ‚ä»»åŠ¡å’Œå¤§è§„æ¨¡æ•°æ®æ—¶å…·æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ã€‚</p><p>å¸¸è§çš„é›†æˆæ–¹æ³•åŒ…æ‹¬ï¼š</p><ol><li><p><strong>Baggingï¼ˆBootstrap Aggregatingï¼‰</strong>: Baggingä½¿ç”¨æœ‰æ”¾å›æŠ½æ ·ï¼ˆBootstrapé‡‡æ ·ï¼‰ä»åŸå§‹è®­ç»ƒæ•°æ®ä¸­ç”Ÿæˆå¤šä¸ªä¸åŒçš„è®­ç»ƒé›†ï¼Œç„¶ååœ¨æ¯ä¸ªè®­ç»ƒé›†ä¸Šæ„å»ºç‹¬ç«‹çš„å¼±å­¦ä¹ å™¨ã€‚æœ€ç»ˆçš„é¢„æµ‹ç»“æœæ˜¯è¿™äº›å¼±å­¦ä¹ å™¨é¢„æµ‹ç»“æœçš„å¹³å‡å€¼ï¼ˆå›å½’é—®é¢˜ï¼‰æˆ–å¤šæ•°æŠ•ç¥¨ç»“æœï¼ˆåˆ†ç±»é—®é¢˜ï¼‰ã€‚</p></li><li><p><strong>Boosting</strong>: Boostingæ˜¯ä¸€ç§è¿­ä»£çš„é›†æˆæ–¹æ³•ï¼Œé€šè¿‡é¡ºåºæ„å»ºå¤šä¸ªå¼±å­¦ä¹ å™¨ï¼Œæ¯ä¸ªå­¦ä¹ å™¨éƒ½è¯•å›¾çº æ­£å‰ä¸€ä¸ªå­¦ä¹ å™¨çš„é”™è¯¯ã€‚Boostingæ–¹æ³•æ ¹æ®é¢„æµ‹é”™è¯¯çš„æ ·æœ¬ç»™äºˆå…¶æ›´é«˜çš„æƒé‡ï¼Œä»¥ä¾¿ä¸‹ä¸€ä¸ªå­¦ä¹ å™¨æ›´å…³æ³¨è¿™äº›éš¾ä»¥åˆ†ç±»çš„æ ·æœ¬ã€‚å¸¸è§çš„Boostingç®—æ³•æœ‰AdaBoostå’ŒGradient Boosting Machine (GBM)ã€‚</p></li><li><p><strong>Stacking</strong>: Stackingæ˜¯ä¸€ç§æ›´å¤æ‚çš„é›†æˆæ–¹æ³•ï¼Œå®ƒä¸ä»…ä»…ç®€å•åœ°å°†å¤šä¸ªæ¨¡å‹çš„ç»“æœè¿›è¡ŒåŠ æƒå¹³å‡ï¼Œè€Œæ˜¯å°†ä¸åŒæ¨¡å‹çš„é¢„æµ‹ç»“æœä½œä¸ºæ–°çš„ç‰¹å¾ï¼Œç„¶åå†è®­ç»ƒä¸€ä¸ªå…ƒå­¦ä¹ å™¨æ¥äº§ç”Ÿæœ€ç»ˆçš„é¢„æµ‹ç»“æœã€‚</p></li><li><p><strong>Random Forest</strong>: æ­¤å‰å·²ç»æåˆ°è¿‡ï¼Œéšæœºæ£®æ—æ˜¯ä¸€ç§åŸºäºBaggingæ€æƒ³çš„é›†æˆå­¦ä¹ æ–¹æ³•ï¼Œç”±å¤šä¸ªå†³ç­–æ ‘ç»„æˆã€‚</p></li></ol><p>é›†æˆæ–¹æ³•åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸå¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®æŒ–æ˜ã€åˆ†ç±»å’Œå›å½’ä»»åŠ¡ä¸­ã€‚é€šè¿‡å°†å¤šä¸ªæ¨¡å‹çš„ä¼˜åŠ¿ç›¸ç»“åˆï¼Œé›†æˆæ–¹æ³•èƒ½å¤Ÿæ˜¾è‘—æé«˜é¢„æµ‹æ€§èƒ½ï¼Œæˆä¸ºäº†è®¸å¤šæœºå™¨å­¦ä¹ ç«èµ›å’Œå®é™…åº”ç”¨ä¸­çš„é‡è¦æŠ€æœ¯ã€‚</p><h2 id="æ„å»ºæ­¥éª¤"><a href="#æ„å»ºæ­¥éª¤" class="headerlink" title="æ„å»ºæ­¥éª¤"></a>æ„å»ºæ­¥éª¤</h2><p>éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰ç®—æ³•çš„æ„å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>æ•°æ®å‡†å¤‡ï¼šé¦–å…ˆï¼Œå°†åŸå§‹æ•°æ®é›†æ‹†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚è®­ç»ƒé›†ç”¨äºæ„å»ºéšæœºæ£®æ—æ¨¡å‹ï¼Œæµ‹è¯•é›†ç”¨äºè¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚</p></li><li><p>éšæœºæŠ½æ ·ï¼šå¯¹äºæ¯æ£µå†³ç­–æ ‘ï¼Œä»è®­ç»ƒé›†ä¸­è¿›è¡Œæœ‰æ”¾å›åœ°éšæœºæŠ½æ ·ï¼ˆBootstrapé‡‡æ ·ï¼‰ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„è®­ç»ƒå­é›†ã€‚è¿™æ„å‘³ç€æ¯ä¸ªå­é›†å¯èƒ½åŒ…å«ä¸€éƒ¨åˆ†é‡å¤æ ·æœ¬ï¼Œè€Œå…¶ä»–æ ·æœ¬å¯èƒ½ä¼šè¢«çœç•¥ã€‚è¿™ç§éšæœºæŠ½æ ·å¯ä»¥ç¡®ä¿æ¯æ£µå†³ç­–æ ‘ä¹‹é—´æœ‰å·®å¼‚ï¼Œå¢åŠ æ¨¡å‹çš„å¤šæ ·æ€§ã€‚</p></li><li><p>ç‰¹å¾éšæœºé€‰æ‹©ï¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹å¤„ï¼Œå†³ç­–æ ‘çš„æ„å»ºä¸ä¼šè€ƒè™‘æ‰€æœ‰çš„ç‰¹å¾ï¼Œè€Œæ˜¯éšæœºé€‰æ‹©ä¸€ä¸ªç‰¹å¾å­é›†æ¥è¿›è¡ŒèŠ‚ç‚¹åˆ’åˆ†ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯å¢åŠ æ¨¡å‹çš„éšæœºæ€§ï¼Œé˜²æ­¢è¿‡åº¦æ‹Ÿåˆï¼Œå¹¶é¼“åŠ±ä¸åŒå†³ç­–æ ‘ä½¿ç”¨ä¸åŒçš„ç‰¹å¾æ¥æ„å»ºæ ‘ã€‚</p></li><li><p>æ„å»ºå†³ç­–æ ‘ï¼šæ ¹æ®ä¸Šè¿°éšæœºæŠ½æ ·å’Œç‰¹å¾é€‰æ‹©çš„è®­ç»ƒå­é›†ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šä½¿ç”¨æŸç§å†³ç­–æ ‘ç®—æ³•ï¼ˆé€šå¸¸æ˜¯CARTç®—æ³•ï¼Œå³åˆ†ç±»ä¸å›å½’æ ‘ï¼‰æ¥åˆ’åˆ†æ•°æ®ã€‚å†³ç­–æ ‘ä¼šæ ¹æ®é€‰æ‹©çš„ç‰¹å¾å’Œåˆ’åˆ†å‡†åˆ™å°†æ•°æ®é›†åˆ’åˆ†ä¸ºæ›´å°çš„å­é›†ï¼Œç›´åˆ°æ»¡è¶³æŸä¸ªåœæ­¢æ¡ä»¶ï¼ˆä¾‹å¦‚ï¼šèŠ‚ç‚¹æ ·æœ¬æ•°å°äºæŸä¸ªé˜ˆå€¼ã€æ ‘çš„æ·±åº¦è¾¾åˆ°ä¸€å®šå€¼ç­‰ï¼‰ä¸ºæ­¢ã€‚</p></li><li><p>é›†æˆå†³ç­–ï¼šå¯¹äºåˆ†ç±»é—®é¢˜ï¼Œæ¯æ£µå†³ç­–æ ‘æŠ•ç¥¨é€‰æ‹©å®ƒä»¬è®¤ä¸ºçš„æœ€ç»ˆç±»åˆ«ï¼Œå¹¶ä»¥å¤šæ•°ç¥¨å†³å®šæœ€ç»ˆçš„åˆ†ç±»ç»“æœã€‚å¯¹äºå›å½’é—®é¢˜ï¼Œæ¯æ£µå†³ç­–æ ‘ç»™å‡ºä¸€ä¸ªé¢„æµ‹å€¼ï¼Œæœ€ç»ˆçš„é¢„æµ‹ç»“æœæ˜¯è¿™äº›é¢„æµ‹å€¼çš„å¹³å‡å€¼ã€‚</p></li><li><p>æ¨¡å‹è¯„ä¼°ï¼šä½¿ç”¨æµ‹è¯•é›†è¯„ä¼°éšæœºæ£®æ—çš„æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨å„ç§æŒ‡æ ‡å¦‚å‡†ç¡®ç‡ã€ç²¾ç¡®åº¦ã€å¬å›ç‡ã€F1åˆ†æ•°ç­‰ã€‚</p></li><li><p>ç‰¹å¾é‡è¦æ€§è¯„ä¼°ï¼šéšæœºæ£®æ—å¯ä»¥è¾“å‡ºæ¯ä¸ªç‰¹å¾çš„é‡è¦æ€§åˆ†æ•°ï¼Œç”¨äºè¡¡é‡æ¯ä¸ªç‰¹å¾å¯¹æ¨¡å‹é¢„æµ‹æ€§èƒ½çš„è´¡çŒ®ç¨‹åº¦ã€‚</p></li></ol><h2 id="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"><a href="#æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼" class="headerlink" title="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"></a>æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼</h2><ol><li><p>åŸºå°¼ä¸çº¯åº¦ï¼ˆGini Impurityï¼‰ï¼šç”¨äºè¡¡é‡èŠ‚ç‚¹çš„ä¸çº¯åº¦ï¼Œå¯¹äºåˆ†ç±»é—®é¢˜ï¼ŒåŸºå°¼ä¸çº¯åº¦å®šä¹‰å¦‚ä¸‹ï¼š<br>$$ \text{Gini}(p) &#x3D; 1 - \sum_{i&#x3D;1}^{K} p_i^2 $$<br>å…¶ä¸­ï¼Œ$K$ æ˜¯ç±»åˆ«çš„æ•°é‡ï¼Œ$p_i$ æ˜¯ç±»åˆ«$i$åœ¨èŠ‚ç‚¹ä¸­çš„æ ·æœ¬æ¯”ä¾‹ã€‚</p></li><li><p>ä¿¡æ¯å¢ç›Šï¼ˆInformation Gainï¼‰ï¼šç”¨äºåœ¨å†³ç­–æ ‘èŠ‚ç‚¹åˆ’åˆ†æ—¶é€‰æ‹©æœ€ä¼˜ç‰¹å¾ã€‚å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œä¿¡æ¯å¢ç›Šå®šä¹‰å¦‚ä¸‹ï¼š<br>$$ \text{IG}(D, f) &#x3D; \text{Gini}(D) - \sum_{v \in \text{Values}(f)} \frac{|D_v|}{|D|} \text{Gini}(D_v) $$<br>å…¶ä¸­ï¼Œ$D$ æ˜¯å½“å‰èŠ‚ç‚¹çš„æ•°æ®é›†ï¼Œ$f$ æ˜¯ç‰¹å¾ï¼Œ$\text{Values}(f)$ æ˜¯ç‰¹å¾$f$çš„å–å€¼é›†åˆï¼Œ$D_v$ æ˜¯ç‰¹å¾$f$å–å€¼ä¸º$v$æ—¶å¯¹åº”çš„æ•°æ®å­é›†ã€‚</p></li><li><p>å‡æ–¹è¯¯å·®ï¼ˆMean Squared Errorï¼ŒMSEï¼‰ï¼šç”¨äºå›å½’é—®é¢˜ä¸­è¡¡é‡èŠ‚ç‚¹çš„çº¯åº¦ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š<br>$$ \text{MSE}(D) &#x3D; \frac{1}{|D|} \sum_{i&#x3D;1}^{|D|} (y_i - \bar{y})^2 $$<br>å…¶ä¸­ï¼Œ$D$ æ˜¯å½“å‰èŠ‚ç‚¹çš„æ•°æ®é›†ï¼Œ$y_i$ æ˜¯æ ·æœ¬$i$çš„çœŸå®è¾“å‡ºå€¼ï¼Œ$\bar{y}$ æ˜¯èŠ‚ç‚¹ä¸­æ‰€æœ‰æ ·æœ¬è¾“å‡ºå€¼çš„å‡å€¼ã€‚</p></li><li><p>éšæœºæ£®æ—ä¸­çš„æŠ•ç¥¨æˆ–å¹³å‡ï¼šå¯¹äºåˆ†ç±»é—®é¢˜ï¼Œéšæœºæ£®æ—ä½¿ç”¨æŠ•ç¥¨æœºåˆ¶ï¼Œå³å¤šä¸ªå†³ç­–æ ‘çš„é¢„æµ‹ç»“æœä¸­å–å¤šæ•°ç¥¨ä½œä¸ºæœ€ç»ˆç»“æœã€‚å¯¹äºå›å½’é—®é¢˜ï¼Œéšæœºæ£®æ—ä½¿ç”¨å¹³å‡å€¼ï¼Œå³å¤šä¸ªå†³ç­–æ ‘çš„é¢„æµ‹å€¼å–å¹³å‡ä½œä¸ºæœ€ç»ˆç»“æœã€‚</p></li></ol><h2 id="æ¡ˆä¾‹ï¼šå£°çº³ä¿¡å·åˆ†ç±»"><a href="#æ¡ˆä¾‹ï¼šå£°çº³ä¿¡å·åˆ†ç±»" class="headerlink" title="æ¡ˆä¾‹ï¼šå£°çº³ä¿¡å·åˆ†ç±»"></a>æ¡ˆä¾‹ï¼šå£°çº³ä¿¡å·åˆ†ç±»</h2><h3 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="sonar-all-data.txt" href="/citation/RandomForest/sonar-all-data.txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">sonar-all-data.txt</p><p class="url">/citation/RandomForest/sonar-all-data.txt</p></div></a></div></div><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> seed, randrange, random</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">loadDataSet</span>(<span class="params">filename</span>):</span><br><span class="line">    dataset = []</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> fr:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> fr.readlines():</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            lineArr = []</span><br><span class="line">            <span class="keyword">for</span> featrue <span class="keyword">in</span> line.split(<span class="string">&#x27;,&#x27;</span>):</span><br><span class="line">                str_f = featrue.strip()</span><br><span class="line">                <span class="keyword">if</span> str_f.isdigit():</span><br><span class="line">                    lineArr.append(<span class="built_in">float</span>(str_f))</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    lineArr.append(str_f)</span><br><span class="line">            dataset.append(lineArr)</span><br><span class="line">    <span class="keyword">return</span> dataset</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cross_validation_split</span>(<span class="params">dataset, n_folds</span>):</span><br><span class="line">    dataset_split = <span class="built_in">list</span>()</span><br><span class="line">    dataset_copy = <span class="built_in">list</span>(dataset)</span><br><span class="line">    fold_size = <span class="built_in">len</span>(dataset) / n_folds</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n_folds):</span><br><span class="line">        fold = <span class="built_in">list</span>()</span><br><span class="line">        <span class="keyword">while</span> <span class="built_in">len</span>(fold) &lt; fold_size:</span><br><span class="line">            index = randrange(<span class="built_in">len</span>(dataset_copy))</span><br><span class="line">            fold.append(dataset_copy[index])</span><br><span class="line">        dataset_split.append(fold)</span><br><span class="line">    <span class="keyword">return</span> dataset_split</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_split</span>(<span class="params">index, value, dataset</span>):</span><br><span class="line">    left, right = <span class="built_in">list</span>(), <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> dataset:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">str</span>(row[index]) &lt; <span class="built_in">str</span>(value):</span><br><span class="line">            left.append(row)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right.append(row)</span><br><span class="line">    <span class="keyword">return</span> left, right</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gini_index</span>(<span class="params">groups, class_values</span>):</span><br><span class="line">    gini = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> class_value <span class="keyword">in</span> class_values:</span><br><span class="line">        <span class="keyword">for</span> group <span class="keyword">in</span> groups:</span><br><span class="line">            size = <span class="built_in">len</span>(group)</span><br><span class="line">            <span class="keyword">if</span> size == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            proportion = [row[-<span class="number">1</span>] <span class="keyword">for</span> row <span class="keyword">in</span> group].count(class_value) / <span class="built_in">float</span>(size)</span><br><span class="line">            gini += (proportion * (<span class="number">1.0</span> - proportion))</span><br><span class="line">    <span class="keyword">return</span> gini</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_split</span>(<span class="params">dataset, n_features</span>):</span><br><span class="line">    class_values = <span class="built_in">list</span>(<span class="built_in">set</span>(row[-<span class="number">1</span>] <span class="keyword">for</span> row <span class="keyword">in</span> dataset))</span><br><span class="line">    b_index, b_value, b_score, b_groups = <span class="number">999</span>, <span class="number">999</span>, <span class="number">999</span>, <span class="literal">None</span></span><br><span class="line">    features = <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(features) &lt; n_features:</span><br><span class="line">        index = randrange(<span class="built_in">len</span>(dataset[<span class="number">0</span>]) - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> index <span class="keyword">not</span> <span class="keyword">in</span> features:</span><br><span class="line">            features.append(index)</span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> features:</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> dataset:</span><br><span class="line">            groups = test_split(index, row[index], dataset)</span><br><span class="line">            gini = gini_index(groups, class_values)</span><br><span class="line">            <span class="keyword">if</span> gini &lt; b_score:</span><br><span class="line">                b_index, b_value, b_score, b_groups = index, row[index], gini, groups</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;index&#x27;</span>: b_index, <span class="string">&#x27;value&#x27;</span>: b_value, <span class="string">&#x27;groups&#x27;</span>: b_groups&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">to_terminal</span>(<span class="params">group</span>):</span><br><span class="line">    outcomes = [row[-<span class="number">1</span>] <span class="keyword">for</span> row <span class="keyword">in</span> group]</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">set</span>(outcomes), key=outcomes.count)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">split</span>(<span class="params">node, max_depth, min_size, n_features, depth</span>):</span><br><span class="line">    left, right = node[<span class="string">&#x27;groups&#x27;</span>]</span><br><span class="line">    <span class="keyword">del</span> (node[<span class="string">&#x27;groups&#x27;</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> left <span class="keyword">or</span> <span class="keyword">not</span> right:</span><br><span class="line">        node[<span class="string">&#x27;left&#x27;</span>] = node[<span class="string">&#x27;right&#x27;</span>] = to_terminal(left + right)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> depth &gt;= max_depth:</span><br><span class="line">        node[<span class="string">&#x27;left&#x27;</span>], node[<span class="string">&#x27;right&#x27;</span>] = to_terminal(left), to_terminal(right)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(left) &lt;= min_size:</span><br><span class="line">        node[<span class="string">&#x27;left&#x27;</span>] = to_terminal(left)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        node[<span class="string">&#x27;left&#x27;</span>] = get_split(left, n_features)</span><br><span class="line">        split(node[<span class="string">&#x27;left&#x27;</span>], max_depth, min_size, n_features, depth + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(right) &lt;= min_size:</span><br><span class="line">        node[<span class="string">&#x27;right&#x27;</span>] = to_terminal(right)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        node[<span class="string">&#x27;right&#x27;</span>] = get_split(right, n_features)</span><br><span class="line">        split(node[<span class="string">&#x27;right&#x27;</span>], max_depth, min_size, n_features, depth + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">build_tree</span>(<span class="params">train, max_depth, min_size, n_features</span>):</span><br><span class="line">    root = get_split(train, n_features)</span><br><span class="line">    split(root, max_depth, min_size, n_features, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">predict</span>(<span class="params">node, row</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">str</span>(row[node[<span class="string">&#x27;index&#x27;</span>]]) &lt; <span class="built_in">str</span>(node[<span class="string">&#x27;value&#x27;</span>]):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(node[<span class="string">&#x27;left&#x27;</span>], <span class="built_in">dict</span>):</span><br><span class="line">            <span class="keyword">return</span> predict(node[<span class="string">&#x27;left&#x27;</span>], row)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> node[<span class="string">&#x27;left&#x27;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(node[<span class="string">&#x27;right&#x27;</span>], <span class="built_in">dict</span>):</span><br><span class="line">            <span class="keyword">return</span> predict(node[<span class="string">&#x27;right&#x27;</span>], row)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> node[<span class="string">&#x27;right&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bagging_predict</span>(<span class="params">trees, row</span>):</span><br><span class="line">    predictions = [predict(tree, row) <span class="keyword">for</span> tree <span class="keyword">in</span> trees]</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">set</span>(predictions), key=predictions.count)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">subsample</span>(<span class="params">dataset, ratio</span>):</span><br><span class="line">    sample = <span class="built_in">list</span>()</span><br><span class="line">    n_sample = <span class="built_in">round</span>(<span class="built_in">len</span>(dataset) * ratio)</span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(sample) &lt; n_sample:</span><br><span class="line">        index = randrange(<span class="built_in">len</span>(dataset))</span><br><span class="line">        sample.append(dataset[index])</span><br><span class="line">    <span class="keyword">return</span> sample</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_forest</span>(<span class="params">train, test, max_depth, min_size, sample_size, n_trees, n_features</span>):</span><br><span class="line">    trees = <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n_trees):</span><br><span class="line">        sample = subsample(train, sample_size)</span><br><span class="line">        tree = build_tree(sample, max_depth, min_size, n_features)</span><br><span class="line">        trees.append(tree)</span><br><span class="line">    predictions = [bagging_predict(trees, row) <span class="keyword">for</span> row <span class="keyword">in</span> test]</span><br><span class="line">    <span class="keyword">return</span> predictions</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">accuracy_metric</span>(<span class="params">actual, predicted</span>):</span><br><span class="line">    correct = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(actual)):</span><br><span class="line">        <span class="keyword">if</span> actual[i] == predicted[i]:</span><br><span class="line">            correct += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> correct / <span class="built_in">float</span>(<span class="built_in">len</span>(actual)) * <span class="number">100.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">evaluate_algorithm</span>(<span class="params">dataset, algorithm, n_folds, *args</span>):</span><br><span class="line">    folds = cross_validation_split(dataset, n_folds)</span><br><span class="line">    scores = <span class="built_in">list</span>()</span><br><span class="line">    <span class="keyword">for</span> fold <span class="keyword">in</span> folds:</span><br><span class="line">        train_set = <span class="built_in">list</span>(folds)</span><br><span class="line">        train_set.remove(fold)</span><br><span class="line">        train_set = <span class="built_in">sum</span>(train_set, [])</span><br><span class="line">        test_set = <span class="built_in">list</span>()</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> fold:</span><br><span class="line">            row_copy = <span class="built_in">list</span>(row)</span><br><span class="line">            row_copy[-<span class="number">1</span>] = <span class="literal">None</span></span><br><span class="line">            test_set.append(row_copy)</span><br><span class="line">        predicted = algorithm(train_set, test_set, *args)</span><br><span class="line">        actual = [row[-<span class="number">1</span>] <span class="keyword">for</span> row <span class="keyword">in</span> fold]</span><br><span class="line">        accuracy = accuracy_metric(actual, predicted)</span><br><span class="line">        scores.append(accuracy)</span><br><span class="line">    <span class="keyword">return</span> scores</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    dataset = loadDataSet(<span class="string">&#x27;7.RandomForest/sonar-all-data.txt&#x27;</span>)</span><br><span class="line">    n_folds = <span class="number">5</span></span><br><span class="line">    max_depth = <span class="number">20</span></span><br><span class="line">    min_size = <span class="number">1</span></span><br><span class="line">    sample_size = <span class="number">1.0</span></span><br><span class="line">    n_features = <span class="number">15</span></span><br><span class="line">    <span class="keyword">for</span> n_trees <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">10</span>, <span class="number">20</span>]:</span><br><span class="line">        scores = evaluate_algorithm(dataset, random_forest, n_folds, max_depth, min_size, sample_size, n_trees, n_features)</span><br><span class="line">        seed(<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;random=&#x27;</span>, random())</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Trees: %d&#x27;</span> % n_trees)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Scores: %s&#x27;</span> % scores)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Mean Accuracy: %.3f%%&#x27;</span> % (<span class="built_in">sum</span>(scores) / <span class="built_in">float</span>(<span class="built_in">len</span>(scores))))</span><br></pre></td></tr></table></figure><div class="note info"><p>æ¥æºäº <a href="https://www.apachecn.org/">ApacheCN</a></p></div>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> Random Forest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SVMç®€æ</title>
      <link href="/2023/08/01/SVM%E7%AE%80%E6%9E%90/"/>
      <url>/2023/08/01/SVM%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="SVMæ”¯æŒå‘é‡æœº"><a href="#SVMæ”¯æŒå‘é‡æœº" class="headerlink" title="SVMæ”¯æŒå‘é‡æœº"></a>SVMæ”¯æŒå‘é‡æœº</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>SVMï¼ˆæ”¯æŒå‘é‡æœºï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„ç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œç”¨äºåˆ†ç±»å’Œå›å½’ä»»åŠ¡ã€‚å…¶ä¸»è¦ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢ï¼Œå°†ä¸åŒç±»åˆ«çš„æ•°æ®ç‚¹æœ‰æ•ˆåœ°åˆ†éš”å¼€ï¼Œå¹¶ä½¿å¾—è¾¹è·æœ€å¤§åŒ–ã€‚åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼ŒSVMå°†æ•°æ®ç‚¹æ˜ å°„åˆ°ç‰¹å¾ç©ºé—´ï¼Œå¹¶é€šè¿‡æ”¯æŒå‘é‡å¯»æ‰¾æœ€ä¼˜è¶…å¹³é¢ï¼Œä»¥åœ¨æœªçŸ¥æ•°æ®ä¸Šå–å¾—è‰¯å¥½çš„æ³›åŒ–æ€§èƒ½ã€‚</p><p>SVMçš„æ ¸å¿ƒåŸç†åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><p>æ”¯æŒå‘é‡ï¼šåœ¨æ•°æ®ç‚¹ä¸­ï¼Œè·ç¦»è¶…å¹³é¢æœ€è¿‘çš„ä¸€äº›æ•°æ®ç‚¹è¢«ç§°ä¸ºæ”¯æŒå‘é‡ï¼Œå®ƒä»¬å¯¹è¶…å¹³é¢çš„ä½ç½®å’Œé—´éš”èµ·ç€å…³é”®ä½œç”¨ã€‚</p></li><li><p>æœ€å¤§è¾¹è·ï¼šSVMé€šè¿‡æœ€å¤§åŒ–è¶…å¹³é¢ä¸æ”¯æŒå‘é‡ä¹‹é—´çš„è¾¹è·æ¥å¯»æ‰¾æœ€ä¼˜è§£ã€‚æœ€å¤§è¾¹è·å¯ä»¥æé«˜æ¨¡å‹çš„é²æ£’æ€§ï¼Œä½¿å…¶å¯¹æ–°æ•°æ®æ›´å…·é¢„æµ‹èƒ½åŠ›ã€‚</p></li><li><p>åˆ†ç±»å™¨æ„å»ºï¼šSVMçš„ç›®æ ‡æ˜¯è§£å†³ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œé€šè¿‡æ•°å­¦æ–¹æ³•æ‰¾åˆ°æœ€ä¼˜çš„è¶…å¹³é¢ã€‚è¿™ä¸ªä¼˜åŒ–é—®é¢˜æ˜¯ä¸€ä¸ªå‡¸äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œåœ¨çº¿æ€§å¯åˆ†çš„æƒ…å†µä¸‹æœ‰è§£ã€‚</p></li><li><p>æ ¸å‡½æ•°ï¼šå¯¹äºçº¿æ€§ä¸å¯åˆ†çš„æ•°æ®ï¼ŒSVMå¯ä»¥é€šè¿‡æ ¸å‡½æ•°å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´ï¼Œåœ¨é«˜ç»´ç©ºé—´ä¸­æ‰¾åˆ°è¶…å¹³é¢ï¼Œä»è€Œå®ç°çº¿æ€§åˆ†ç±»ã€‚å¸¸ç”¨çš„æ ¸å‡½æ•°æœ‰çº¿æ€§æ ¸ã€å¤šé¡¹å¼æ ¸å’Œé«˜æ–¯æ ¸ç­‰ã€‚</p></li><li><p>æ­£åˆ™åŒ–å‚æ•°ï¼šSVMå¼•å…¥ä¸€ä¸ªæ­£åˆ™åŒ–å‚æ•°Cï¼Œç”¨äºå¹³è¡¡æœ€å¤§åŒ–è¾¹è·å’Œåˆ†ç±»é”™è¯¯ä¹‹é—´çš„æƒè¡¡ã€‚è¾ƒå°çš„Cå€¼å…è®¸ä¸€äº›åˆ†ç±»é”™è¯¯ï¼Œè€Œè¾ƒå¤§çš„Cå€¼å¯¹åˆ†ç±»é”™è¯¯æ–½åŠ æ›´ä¸¥æ ¼çš„æƒ©ç½šã€‚</p></li></ol><p>SVMå…·æœ‰è‰¯å¥½çš„æ³›åŒ–èƒ½åŠ›ï¼Œå¯¹äºå°æ ·æœ¬æ•°æ®å’Œé«˜ç»´ç‰¹å¾ç©ºé—´éƒ½è¡¨ç°å‡ºè¾ƒå¥½çš„æ€§èƒ½ã€‚å®ƒåœ¨å›¾åƒåˆ†ç±»ã€æ–‡æœ¬åˆ†ç±»ã€ç”Ÿç‰©ä¿¡æ¯å­¦ç­‰é¢†åŸŸå–å¾—äº†å¹¿æ³›çš„åº”ç”¨ã€‚è™½ç„¶SVMåœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶å­˜åœ¨ä¸€å®šçš„æŒ‘æˆ˜ï¼Œä½†åœ¨è®¸å¤šå®é™…é—®é¢˜ä¸­ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆä¸”å¼ºå¤§çš„åˆ†ç±»å™¨å’Œå›å½’å™¨ã€‚</p><h2 id="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"><a href="#æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼" class="headerlink" title="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"></a>æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼</h2><ol><li><p>SVMåˆ†ç±»å™¨ï¼š</p><ul><li>å‡è®¾è¶…å¹³é¢çš„æ–¹ç¨‹ä¸ºï¼š$$f(x) &#x3D; w^T x + b$$</li><li>å…¶ä¸­ï¼Œ$f(x)$ æ˜¯è¾“å…¥æ ·æœ¬ $x$ çš„é¢„æµ‹è¾“å‡ºï¼Œ$w$ æ˜¯è¶…å¹³é¢çš„æ³•å‘é‡ï¼ˆæƒé‡ï¼‰ï¼Œ$b$ æ˜¯è¶…å¹³é¢çš„åç½®é¡¹ã€‚</li></ul></li><li><p>è¶…å¹³é¢åˆ°æ•°æ®ç‚¹çš„è·ç¦»ï¼š</p><ul><li>æ•°æ®ç‚¹ $x$ åˆ°è¶…å¹³é¢ $f(x)$ çš„å¸¦ç¬¦å·è·ç¦»ä¸ºï¼š$$d &#x3D; \frac{w^T x + b}{|w|}$$ï¼Œå…¶ä¸­ $|w|$ æ˜¯ $w$ çš„L2èŒƒæ•°ã€‚</li></ul></li><li><p>åˆ†ç±»å†³ç­–è§„åˆ™ï¼š</p><ul><li>å¦‚æœ $f(x) \geq 0$ï¼Œåˆ™é¢„æµ‹ $x$ å±äºæ­£ç±»åˆ«ã€‚</li><li>å¦‚æœ $f(x) &lt; 0$ï¼Œåˆ™é¢„æµ‹ $x$ å±äºè´Ÿç±»åˆ«ã€‚</li></ul></li><li><p>é—´éš”ï¼ˆè¾¹è·ï¼‰ï¼š</p><ul><li>å¯¹äºè¶…å¹³é¢ $(w^T x + b) &#x3D; 0$ï¼Œå®ƒåˆ°æœ€è¿‘çš„æ­£ç±»åˆ«æ”¯æŒå‘é‡å’Œæœ€è¿‘çš„è´Ÿç±»åˆ«æ”¯æŒå‘é‡ä¹‹é—´çš„è·ç¦»ä¸º $\frac{2}{|w|}$ã€‚</li><li>SVM çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–è¾¹è·ï¼Œå³æœ€å°åŒ– $|w|$ã€‚</li></ul></li><li><p>ä¼˜åŒ–é—®é¢˜ï¼š<br>   SVMçš„ä¼˜åŒ–é—®é¢˜æ˜¯ä¸€ä¸ªå‡¸äºŒæ¬¡è§„åˆ’ï¼ˆQuadratic Programmingï¼ŒQPï¼‰é—®é¢˜ã€‚å¯¹äºçº¿æ€§å¯åˆ†å’Œçº¿æ€§ä¸å¯åˆ†çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥è§£å†³SVMçš„ä¼˜åŒ–é—®é¢˜ã€‚</p><ol><li><p>çº¿æ€§å¯åˆ†æƒ…å†µä¸‹çš„ä¼˜åŒ–é—®é¢˜ï¼š<br>å¯¹äºçº¿æ€§å¯åˆ†çš„SVMï¼Œä¼˜åŒ–é—®é¢˜å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$\text{Minimize:} \quad \frac{1}{2} |w|^2$$<br>$$\text{Subject to:} \quad y_i (w^T x_i + b) \geq 1, \text{for all} \ i$$<br>å…¶ä¸­ï¼Œ$x_i$ æ˜¯è®­ç»ƒæ ·æœ¬ï¼Œ$y_i$ æ˜¯æ ·æœ¬ $x_i$ çš„æ ‡ç­¾ï¼ˆ+1 æˆ– -1ï¼‰ï¼Œ$w$ æ˜¯è¶…å¹³é¢çš„æ³•å‘é‡ï¼Œ$b$ æ˜¯è¶…å¹³é¢çš„åç½®é¡¹ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå‡¸äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç°æœ‰çš„å‡¸ä¼˜åŒ–æ±‚è§£å™¨æ¥æ±‚è§£ã€‚å¸¸ç”¨çš„å‡¸ä¼˜åŒ–æ±‚è§£å™¨åŒ…æ‹¬ï¼š</p><ul><li><a href="/2023/08/01/SVM%E7%AE%80%E6%9E%90/#%E5%BA%8F%E5%88%97%E6%9C%80%E5%B0%8F%E4%BC%98%E5%8C%96SMO">åºåˆ—æœ€å°ä¼˜åŒ–ç®—æ³•</a>ï¼ˆSequential Minimal Optimizationï¼ŒSMOï¼‰</li><li>å†…ç‚¹æ³•ï¼ˆInterior Point Methodï¼‰</li><li>æ¢¯åº¦ä¸‹é™æ³•ï¼ˆGradient Descentï¼‰</li><li>åæ ‡ä¸‹é™æ³•ï¼ˆCoordinate Descentï¼‰ç­‰</li></ul><p>è¿™äº›æ–¹æ³•å¯ä»¥æ‰¾åˆ°æ‹‰æ ¼æœ—æ—¥ä¹˜å­ $\alpha$ çš„æœ€ä¼˜è§£ï¼Œè¿›è€Œæ±‚è§£å‡ºè¶…å¹³é¢çš„å‚æ•° $w$ å’Œ $b$ã€‚</p></li><li><p>çº¿æ€§ä¸å¯åˆ†æƒ…å†µä¸‹çš„ä¼˜åŒ–é—®é¢˜ï¼š<br>å½“æ•°æ®çº¿æ€§ä¸å¯åˆ†æ—¶ï¼ŒSVMå¼•å…¥æ¾å¼›å˜é‡ $\xi_i$ï¼Œä½¿å¾—éƒ¨åˆ†æ•°æ®ç‚¹å¯ä»¥ä½äºè¾¹ç•ŒåŒºåŸŸå†…ã€‚ä¼˜åŒ–é—®é¢˜å˜ä¸ºï¼š<br>$$\text{Minimize:} \quad \frac{1}{2} |w|^2 + C \sum \xi_i$$<br>$$\text{Subject to:} \quad y_i (w^T x_i + b) \geq 1 - \xi_i, \text{for all} \ i$$<br>$$\xi_i \geq 0, \text{for all} \ i$$<br>å…¶ä¸­ï¼Œ$C$ æ˜¯ä¸€ä¸ªæ­£åˆ™åŒ–å‚æ•°ï¼Œæ§åˆ¶äº†åˆ†ç±»é”™è¯¯çš„æƒ©ç½šã€‚</p><p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå‡¸äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„å‡¸ä¼˜åŒ–æ±‚è§£å™¨æ¥æ±‚è§£ã€‚é€šè¿‡æ±‚è§£ä¼˜åŒ–é—®é¢˜ï¼Œå¯ä»¥å¾—åˆ°æ‹‰æ ¼æœ—æ—¥ä¹˜å­ $\alpha$ å’Œæ¾å¼›å˜é‡ $\xi_i$ çš„æœ€ä¼˜è§£ï¼Œè¿›è€Œæ±‚è§£å‡ºè¶…å¹³é¢çš„å‚æ•° $w$ å’Œ $b$ã€‚</p></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“é‡åˆ°éçº¿æ€§é—®é¢˜æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ ¸å‡½æ•°æ¥å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´ï¼Œç„¶åå†åº”ç”¨ä¸Šè¿°æ–¹æ³•æ¥æ±‚è§£å¯¹å¶é—®é¢˜ã€‚è¿™æ ·ï¼Œå¯ä»¥å°†éçº¿æ€§SVMè½¬åŒ–ä¸ºä¸€ä¸ªçº¿æ€§SVMé—®é¢˜æ¥æ±‚è§£ã€‚</p></li><li><p>æ ¸å‡½æ•°ï¼š</p><ul><li>SVMé€šè¿‡æ ¸å‡½æ•°å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´ï¼Œä»¥å®ç°éçº¿æ€§åˆ†ç±»ã€‚å¸¸ç”¨çš„æ ¸å‡½æ•°æœ‰çº¿æ€§æ ¸ã€å¤šé¡¹å¼æ ¸å’Œé«˜æ–¯æ ¸ã€‚</li><li>çº¿æ€§æ ¸ï¼š$$K(x_i, x_j) &#x3D; x_i^T x_j$$</li><li>å¤šé¡¹å¼æ ¸ï¼š$$K(x_i, x_j) &#x3D; (\gamma x_i^T x_j + r)^d$$</li><li>é«˜æ–¯æ ¸ï¼ˆå¾„å‘åŸºæ ¸ï¼‰ï¼š$$K(x_i, x_j) &#x3D; \exp(-\gamma |x_i - x_j|^2)$$</li></ul></li></ol><h2 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h2><ol><li><p>æ•°æ®é¢„å¤„ç†ï¼š</p><ul><li>æ”¶é›†å’Œå‡†å¤‡è®­ç»ƒæ•°æ®é›†ï¼Œç¡®ä¿æ•°æ®æ˜¯æœ‰æ ‡ç­¾çš„ï¼Œå¹¶ä¸”ç‰¹å¾å€¼å’Œæ ‡ç­¾å€¼å·²ç»è½¬æ¢ä¸ºæ•°å€¼å½¢å¼ã€‚</li><li>å¦‚æœæ•°æ®é›†ä¸­å­˜åœ¨ç¼ºå¤±å€¼æˆ–å¼‚å¸¸å€¼ï¼Œè¿›è¡Œæ•°æ®æ¸…æ´—å’Œå¤„ç†ã€‚</li></ul></li><li><p>ç‰¹å¾ç¼©æ”¾ï¼š</p><ul><li>å¯¹ç‰¹å¾å€¼è¿›è¡Œç¼©æ”¾ï¼Œç¡®ä¿æ‰€æœ‰ç‰¹å¾åœ¨ç›¸åŒçš„å°ºåº¦èŒƒå›´å†…ã€‚å¸¸è§çš„ç¼©æ”¾æ–¹æ³•åŒ…æ‹¬æ ‡å‡†åŒ–ï¼ˆå‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1ï¼‰æˆ–è€…å½’ä¸€åŒ–ï¼ˆå°†ç‰¹å¾ç¼©æ”¾åˆ°0åˆ°1çš„èŒƒå›´å†…ï¼‰ã€‚</li></ul></li><li><p>è®­ç»ƒé›†å’Œæµ‹è¯•é›†åˆ’åˆ†ï¼š</p><ul><li>å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œç”¨äºæ¨¡å‹çš„è®­ç»ƒå’Œè¯„ä¼°ã€‚</li></ul></li><li><p>æ ¸å‡½æ•°é€‰æ‹©ï¼ˆå¯é€‰ï¼‰ï¼š</p><ul><li>å¦‚æœæ•°æ®é›†æ˜¯çº¿æ€§ä¸å¯åˆ†çš„ï¼Œéœ€è¦é€‰æ‹©åˆé€‚çš„æ ¸å‡½æ•°å¯¹æ•°æ®è¿›è¡Œæ˜ å°„ã€‚å¸¸è§çš„æ ¸å‡½æ•°æœ‰çº¿æ€§æ ¸ã€å¤šé¡¹å¼æ ¸å’Œé«˜æ–¯æ ¸ç­‰ã€‚</li></ul></li><li><p>ä¼˜åŒ–é—®é¢˜è§£å†³ï¼š</p><ul><li>ä½¿ç”¨ä¼˜åŒ–ç®—æ³•ï¼ˆä¾‹å¦‚å‡¸äºŒæ¬¡è§„åˆ’é—®é¢˜çš„æ±‚è§£å™¨ï¼‰æ¥æ‰¾åˆ°SVMçš„æœ€ä¼˜è¶…å¹³é¢ã€‚</li><li>çº¿æ€§å¯åˆ†çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç¡¬é—´éš”SVMï¼›çº¿æ€§ä¸å¯åˆ†çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è½¯é—´éš”SVMã€‚</li></ul></li><li><p>æ­£åˆ™åŒ–å‚æ•°é€‰æ‹©ï¼ˆå¯é€‰ï¼‰ï¼š</p><ul><li>å¯¹äºè½¯é—´éš”SVMï¼Œéœ€è¦é€‰æ‹©åˆé€‚çš„æ­£åˆ™åŒ–å‚æ•°Cï¼Œè¯¥å‚æ•°æ§åˆ¶äº†åˆ†ç±»é”™è¯¯çš„æƒ©ç½šç¨‹åº¦ã€‚Cå€¼è¾ƒå¤§å°†æ›´ä¸¥æ ¼æƒ©ç½šåˆ†ç±»é”™è¯¯ï¼ŒCå€¼è¾ƒå°åˆ™æ›´å®¹å¿åˆ†ç±»é”™è¯¯ã€‚</li></ul></li><li><p>è®­ç»ƒæ¨¡å‹ï¼š</p><ul><li>ä½¿ç”¨è®­ç»ƒé›†æ¥è®­ç»ƒSVMæ¨¡å‹ã€‚æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹å°±æ˜¯ä¼˜åŒ–é—®é¢˜æ±‚è§£çš„è¿‡ç¨‹ï¼Œæ‰¾åˆ°æœ€ä¼˜çš„è¶…å¹³é¢å’Œå‚æ•°ã€‚</li></ul></li><li><p>é¢„æµ‹ï¼š</p><ul><li>ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹å¯¹æ–°çš„æ ·æœ¬è¿›è¡Œé¢„æµ‹ï¼Œè®¡ç®—é¢„æµ‹è¾“å‡ºçš„å€¼ $f(x)$ã€‚</li></ul></li><li><p>è¯„ä¼°æ¨¡å‹æ€§èƒ½ï¼š</p><ul><li>ä½¿ç”¨æµ‹è¯•é›†æ¥è¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚å¸¸è§çš„è¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬å‡†ç¡®ç‡ã€ç²¾ç¡®ç‡ã€å¬å›ç‡ã€F1-scoreç­‰ã€‚</li></ul></li><li><p>è°ƒä¼˜ï¼ˆå¯é€‰ï¼‰ï¼š</p><ul><li>å¯ä»¥æ ¹æ®æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°è¿›è¡Œè°ƒä¼˜ï¼Œä¾‹å¦‚å°è¯•ä¸åŒçš„æ ¸å‡½æ•°ã€è°ƒæ•´æ­£åˆ™åŒ–å‚æ•°Cç­‰ã€‚</li></ul></li><li><p>åº”ç”¨æ¨¡å‹ï¼š</p><ul><li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½¿ç”¨è®­ç»ƒå¥½çš„SVMæ¨¡å‹æ¥è¿›è¡Œåˆ†ç±»ä»»åŠ¡ï¼Œå¯¹æ–°çš„æœªçŸ¥æ ·æœ¬è¿›è¡Œåˆ†ç±»é¢„æµ‹ã€‚</li></ul></li></ol><h2 id="SVMä¸Logistic-Regression"><a href="#SVMä¸Logistic-Regression" class="headerlink" title="SVMä¸Logistic Regression"></a>SVMä¸Logistic Regression</h2><p>SVMï¼ˆæ”¯æŒå‘é‡æœºï¼‰å’Œé€»è¾‘å›å½’åœ¨ä¸€äº›æ–¹é¢çš„æ•°å­¦å…¬å¼å’Œç®—æ³•ç¡®å®æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†å®ƒä»¬åœ¨ç›®æ ‡å‡½æ•°ã€å†³ç­–è¾¹ç•Œå’Œä¼˜åŒ–ç®—æ³•ç­‰æ–¹é¢å­˜åœ¨æ˜æ˜¾çš„åŒºåˆ«ã€‚ä¸‹é¢åˆ—å‡ºå®ƒä»¬çš„ç›¸ä¼¼ä¹‹å¤„å’ŒåŒºåˆ«ï¼š</p><p>ç›¸ä¼¼ä¹‹å¤„ï¼š</p><ol><li><p>éƒ½æ˜¯ç›‘ç£å­¦ä¹ ç®—æ³•ï¼šSVMå’Œé€»è¾‘å›å½’éƒ½å±äºç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œéƒ½æ˜¯ç”¨äºè§£å†³åˆ†ç±»é—®é¢˜ã€‚</p></li><li><p>éƒ½ä½¿ç”¨çº¿æ€§æ¨¡å‹ï¼šSVMå’Œé€»è¾‘å›å½’åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½ä½¿ç”¨çº¿æ€§æ¨¡å‹è¿›è¡Œåˆ†ç±»ã€‚çº¿æ€§æ¨¡å‹æ˜¯é€šè¿‡ç‰¹å¾çš„çº¿æ€§ç»„åˆæ¥è¿›è¡Œåˆ†ç±»çš„ã€‚</p></li><li><p>éƒ½åŸºäºæ¦‚ç‡ï¼šé€»è¾‘å›å½’å¯ä»¥è¾“å‡ºæ ·æœ¬å±äºæŸä¸€ç±»åˆ«çš„æ¦‚ç‡ï¼Œè€ŒSVMé€šè¿‡å†³ç­–å‡½æ•°çš„ç¬¦å·æ¥åˆ¤æ–­æ ·æœ¬çš„ç±»åˆ«ã€‚</p></li></ol><p>åŒºåˆ«ï¼š</p><ol><li><p>ç›®æ ‡å‡½æ•°å’Œå†³ç­–è¾¹ç•Œï¼š</p><ul><li>é€»è¾‘å›å½’çš„ç›®æ ‡æ˜¯æœ€å°åŒ–LogisticæŸå¤±å‡½æ•°ï¼Œå¹¶ä½¿ç”¨sigmoidå‡½æ•°å°†çº¿æ€§æ¨¡å‹çš„è¾“å‡ºæ˜ å°„åˆ°[0, 1]çš„æ¦‚ç‡å€¼ã€‚å†³ç­–è¾¹ç•Œæ˜¯çº¿æ€§çš„ã€‚</li><li>SVMçš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªèƒ½å¤Ÿå°†ä¸åŒç±»åˆ«çš„æ•°æ®ç‚¹æœ‰æ•ˆåˆ†éš”å¼€çš„è¶…å¹³é¢ï¼Œå¹¶æœ€å¤§åŒ–è¾¹è·ã€‚å†³ç­–è¾¹ç•Œæ˜¯è·ç¦»æ”¯æŒå‘é‡æœ€è¿‘çš„è¶…å¹³é¢ã€‚</li></ul></li><li><p>æŸå¤±å‡½æ•°ï¼š</p><ul><li>é€»è¾‘å›å½’ä½¿ç”¨LogisticæŸå¤±å‡½æ•°ï¼ˆä¹Ÿç§°ä¸ºäº¤å‰ç†µæŸå¤±å‡½æ•°ï¼‰ï¼Œç”¨äºè¡¡é‡æ¨¡å‹é¢„æµ‹ä¸å®é™…æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ã€‚</li><li>SVMä½¿ç”¨HingeæŸå¤±å‡½æ•°ï¼Œå®ƒå¯¹æ­£ç¡®åˆ†ç±»çš„æ ·æœ¬æ–½åŠ è¾ƒå°çš„æŸå¤±ï¼Œå¯¹äºé”™è¯¯åˆ†ç±»çš„æ ·æœ¬æ–½åŠ è¾ƒå¤§çš„æŸå¤±ã€‚</li></ul></li><li><p>ä¼˜åŒ–ç®—æ³•ï¼š</p><ul><li>é€»è¾‘å›å½’é€šå¸¸ä½¿ç”¨æ¢¯åº¦ä¸‹é™ç­‰ä¼˜åŒ–ç®—æ³•æ¥æœ€å°åŒ–æŸå¤±å‡½æ•°ã€‚</li><li>SVMä½¿ç”¨å‡¸äºŒæ¬¡è§„åˆ’ç­‰ä¼˜åŒ–ç®—æ³•æ¥æ‰¾åˆ°æœ€ä¼˜çš„è¶…å¹³é¢ã€‚</li></ul></li><li><p>å¤„ç†çº¿æ€§ä¸å¯åˆ†æ•°æ®ï¼š</p><ul><li>é€»è¾‘å›å½’å¯ä»¥å¤„ç†çº¿æ€§ä¸å¯åˆ†çš„æ•°æ®ï¼Œä½†åœ¨å¤„ç†éçº¿æ€§é—®é¢˜æ—¶å¯èƒ½éœ€è¦å¼•å…¥ç‰¹å¾å·¥ç¨‹æˆ–ä½¿ç”¨å¤šé¡¹å¼ç‰¹å¾ã€‚</li><li>SVMé€šè¿‡ä½¿ç”¨æ ¸å‡½æ•°å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´ï¼Œä»è€Œå®ç°å¤„ç†éçº¿æ€§åˆ†ç±»é—®é¢˜ã€‚</li></ul></li></ol><h2 id="åˆ¤æ–­çº¿æ€§å¯åˆ†"><a href="#åˆ¤æ–­çº¿æ€§å¯åˆ†" class="headerlink" title="åˆ¤æ–­çº¿æ€§å¯åˆ†"></a>åˆ¤æ–­çº¿æ€§å¯åˆ†</h2><p>åœ¨SVMä¸­ï¼Œçº¿æ€§å¯åˆ†æ˜¯æŒ‡æ•°æ®é›†åœ¨ç‰¹å¾ç©ºé—´ä¸­å­˜åœ¨ä¸€ä¸ªè¶…å¹³é¢ï¼Œèƒ½å¤Ÿå°†ä¸åŒç±»åˆ«çš„æ•°æ®ç‚¹å®Œå…¨æ­£ç¡®åœ°åˆ†éš”å¼€ï¼Œè€Œä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯åˆ†ç±»ã€‚åˆ¤æ–­æ•°æ®æ˜¯å¦çº¿æ€§å¯åˆ†å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•ï¼š</p><ol><li><p>å¯è§†åŒ–æ•°æ®ï¼šå°†æ•°æ®ç»˜åˆ¶åœ¨äºŒç»´æˆ–ä¸‰ç»´ç©ºé—´ä¸­ï¼Œè§‚å¯Ÿæ•°æ®ç‚¹çš„åˆ†å¸ƒæƒ…å†µã€‚å¦‚æœæ•°æ®ç‚¹å¯ä»¥è¢«ä¸€ä¸ªç›´çº¿ï¼ˆåœ¨äºŒç»´ç©ºé—´ï¼‰æˆ–ä¸€ä¸ªå¹³é¢ï¼ˆåœ¨ä¸‰ç»´ç©ºé—´ï¼‰å®Œå…¨åˆ†å¼€ï¼Œé‚£ä¹ˆæ•°æ®é›†å¾ˆå¯èƒ½æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚</p></li><li><p>çº¿æ€§SVMçš„ç»“æœï¼šä½¿ç”¨çº¿æ€§SVMå¯¹æ•°æ®è¿›è¡Œè®­ç»ƒå¹¶ç»˜åˆ¶å†³ç­–è¾¹ç•Œã€‚å¦‚æœçº¿æ€§SVMèƒ½å¤Ÿæ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢ï¼Œä½¿å¾—æ‰€æœ‰æ•°æ®ç‚¹éƒ½è¢«æ­£ç¡®åˆ†ç±»ï¼Œé‚£ä¹ˆæ•°æ®é›†æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚</p></li><li><p>æ£€æŸ¥çº¿æ€§çº¦æŸæ¡ä»¶ï¼šå¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œåœ¨SVMä¸­ï¼Œçº¿æ€§å¯åˆ†çš„æ¡ä»¶æ˜¯æ‰€æœ‰æ•°æ®ç‚¹æ»¡è¶³ä»¥ä¸‹çº¿æ€§çº¦æŸæ¡ä»¶ï¼š<br>$$y_i (w^T x_i + b) \geq 1, \text{for all} \ i$$<br>å…¶ä¸­ï¼Œ$x_i$ æ˜¯æ•°æ®ç‚¹ï¼Œ$y_i$ æ˜¯æ•°æ®ç‚¹çš„æ ‡ç­¾ï¼ˆ+1 æˆ– -1ï¼‰ï¼Œ$w$ æ˜¯è¶…å¹³é¢çš„æ³•å‘é‡ï¼Œ$b$ æ˜¯è¶…å¹³é¢çš„åç½®é¡¹ã€‚</p></li><li><p>ä¼˜åŒ–é—®é¢˜çš„ç»“æœï¼šå¦‚æœä½¿ç”¨çº¿æ€§SVMè§£å†³ä¼˜åŒ–é—®é¢˜ï¼Œå¾—åˆ°äº†ä¸€ç»„æ»¡è¶³ä¸Šè¿°çº¦æŸæ¡ä»¶çš„æœ€ä¼˜æƒé‡$w$å’Œåç½®é¡¹$b$ï¼Œè€Œä¸”ç›®æ ‡å‡½æ•°å€¼ä¸º0ï¼ˆå³æœ€å¤§åŒ–è¾¹è·çš„ç»“æœï¼‰ï¼Œåˆ™è¯´æ˜æ•°æ®æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚</p></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ•°æ®å¯èƒ½å¹¶ä¸æ˜¯å®Œå…¨çº¿æ€§å¯åˆ†çš„ï¼Œè€Œæ˜¯å­˜åœ¨ä¸€äº›å™ªå£°æˆ–é‡å æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨è½¯é—´éš”SVMæ¥å¤„ç†éƒ¨åˆ†åˆ†ç±»é”™è¯¯ï¼Œæˆ–è€…ä½¿ç”¨æ ¸å‡½æ•°å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´æ¥å¤„ç†éçº¿æ€§å¯åˆ†é—®é¢˜ã€‚</p><h2 id="åºåˆ—æœ€å°ä¼˜åŒ–SMO"><a href="#åºåˆ—æœ€å°ä¼˜åŒ–SMO" class="headerlink" title="åºåˆ—æœ€å°ä¼˜åŒ–SMO"></a>åºåˆ—æœ€å°ä¼˜åŒ–SMO</h2><p>åºåˆ—æœ€å°ä¼˜åŒ–ï¼ˆSequential Minimal Optimizationï¼Œç®€ç§°SMOï¼‰æ˜¯ä¸€ç§ç”¨äºæ±‚è§£æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰çš„ä¼˜åŒ–ç®—æ³•ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„æƒ…å†µã€‚SMOç®—æ³•ç”±John Plattäº1998å¹´æå‡ºï¼Œæ˜¯ä¸€ç§è¿­ä»£ç®—æ³•ï¼Œé€šè¿‡ä¸æ–­é€‰æ‹©ä¸¤ä¸ªå˜é‡è¿›è¡Œä¼˜åŒ–ï¼Œä»¥é€æ­¥æ”¶æ•›åˆ°SVMçš„æœ€ä¼˜è§£ã€‚</p><p>SMOç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯å°†SVMçš„å¯¹å¶é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªäºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œå¹¶é‡‡ç”¨å¯å‘å¼çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªäºŒæ¬¡è§„åˆ’é—®é¢˜ã€‚SMOç®—æ³•çš„ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åˆå§‹åŒ–ï¼šåˆå§‹åŒ–æ‹‰æ ¼æœ—æ—¥ä¹˜å­ $\alpha$ å’Œåç½®é¡¹ $b$ ä¸º0ï¼Œé€‰æ‹©ä¸€ä¸ªè¿­ä»£æ¬¡æ•°çš„é˜ˆå€¼æˆ–è®¾ç½®æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚</p></li><li><p>é€‰æ‹©ä¸¤ä¸ªå˜é‡ï¼šåœ¨æ¯ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œé€‰æ‹©ä¸¤ä¸ªéœ€è¦æ›´æ–°çš„æ‹‰æ ¼æœ—æ—¥ä¹˜å­ $\alpha_i$ å’Œ $\alpha_j$ã€‚é€‰æ‹©çš„æ–¹æ³•å¯ä»¥é‡‡ç”¨å¯å‘å¼çš„æ–¹å¼ï¼Œä¾‹å¦‚é€šè¿‡æœ€å¤§æ­¥é•¿æ¥é€‰æ‹© $\alpha_i$ å’Œ $\alpha_j$ã€‚</p></li><li><p>ä¼˜åŒ–ä¸¤ä¸ªå˜é‡ï¼šå›ºå®šå…¶ä»–æ‹‰æ ¼æœ—æ—¥ä¹˜å­ $\alpha$ï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªåªæœ‰ä¸¤ä¸ªå˜é‡çš„äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œå¹¶é€šè¿‡è§£ææ±‚è§£æˆ–ä¼˜åŒ–ç®—æ³•ï¼ˆå¦‚SMOå†…å¾ªç¯ï¼‰æ¥æ‰¾åˆ° $\alpha_i$ å’Œ $\alpha_j$ çš„æœ€ä¼˜è§£ã€‚</p></li><li><p>æ›´æ–°å‚æ•°ï¼šæ ¹æ®å¾—åˆ°çš„ $\alpha_i$ å’Œ $\alpha_j$ çš„æœ€ä¼˜è§£ï¼Œæ›´æ–°æ‹‰æ ¼æœ—æ—¥ä¹˜å­ $\alpha$ å’Œåç½®é¡¹ $b$ã€‚</p></li><li><p>ç»ˆæ­¢æ¡ä»¶ï¼šæ£€æŸ¥è¿­ä»£æ¬¡æ•°æ˜¯å¦è¾¾åˆ°è®¾å®šçš„é˜ˆå€¼ï¼Œæˆ–è€…æ‹‰æ ¼æœ—æ—¥ä¹˜å­çš„å˜åŒ–æ˜¯å¦å°äºè®¾å®šçš„å®¹å·®ã€‚å¦‚æœæ»¡è¶³ç»ˆæ­¢æ¡ä»¶ï¼Œåˆ™ç®—æ³•ç»“æŸï¼›å¦åˆ™ï¼Œè¿”å›æ­¥éª¤2ï¼Œç»§ç»­ä¸‹ä¸€è½®è¿­ä»£ã€‚</p></li></ol><p>SMOç®—æ³•çš„ä¼˜ç‚¹åœ¨äºï¼Œå®ƒæ¯æ¬¡åªæ›´æ–°ä¸¤ä¸ªæ‹‰æ ¼æœ—æ—¥ä¹˜å­ï¼Œå› æ­¤åœ¨æ¯ä¸€æ­¥çš„è®¡ç®—é‡ç›¸å¯¹è¾ƒå°ã€‚åŒæ—¶ï¼ŒSMOç®—æ³•è¿˜ä½¿ç”¨äº†ä¸€äº›å¯å‘å¼çš„ç­–ç•¥ï¼Œå¸®åŠ©åœ¨é«˜ç»´ç©ºé—´ä¸­æœç´¢æ›´å¿«åœ°æ”¶æ•›åˆ°SVMçš„æœ€ä¼˜è§£ã€‚è¿™ä½¿å¾—SMOç®—æ³•åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸‹è¡¨ç°å‡ºäº†è¾ƒå¥½çš„è®¡ç®—æ•ˆç‡ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒSMOç®—æ³•ç”¨äºæ±‚è§£çº¿æ€§SVMï¼Œå½“é‡åˆ°éçº¿æ€§é—®é¢˜æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ ¸å‡½æ•°æ¥å°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´ï¼Œç„¶åå†åº”ç”¨SMOç®—æ³•æ¥æ±‚è§£å¯¹å¶é—®é¢˜ã€‚è¿™æ ·ï¼ŒSMOç®—æ³•ä¹Ÿå¯ä»¥ç”¨äºæ±‚è§£éçº¿æ€§SVMã€‚</p><h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2><h3 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="testSet.txt" href="/citation/svm/testSet.txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">testSet.txt</p><p class="url">/citation/svm/testSet.txt</p></div></a></div></div><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">loadDataSet</span>(<span class="params">fileName</span>):</span><br><span class="line">    dataMat = []</span><br><span class="line">    labelMat = []</span><br><span class="line">    fr = <span class="built_in">open</span>(fileName)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fr.readlines():</span><br><span class="line">        lineArr = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        dataMat.append([<span class="built_in">float</span>(lineArr[<span class="number">0</span>]), <span class="built_in">float</span>(lineArr[<span class="number">1</span>])])</span><br><span class="line">        labelMat.append(<span class="built_in">float</span>(lineArr[<span class="number">2</span>]))</span><br><span class="line">    <span class="keyword">return</span> dataMat, labelMat</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">selectJrand</span>(<span class="params">i, m</span>):</span><br><span class="line">    j = i</span><br><span class="line">    <span class="keyword">while</span> j == i:</span><br><span class="line">        j = <span class="built_in">int</span>(random.uniform(<span class="number">0</span>, m))</span><br><span class="line">    <span class="keyword">return</span> j</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">clipAlpha</span>(<span class="params">aj, H, L</span>):</span><br><span class="line">    <span class="keyword">if</span> aj &gt; H:</span><br><span class="line">        aj = H</span><br><span class="line">    <span class="keyword">if</span> L &gt; aj:</span><br><span class="line">        aj = L</span><br><span class="line">    <span class="keyword">return</span> aj</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">smoSimple</span>(<span class="params">dataMatIn, classLabels, C, toler, maxIter</span>):</span><br><span class="line">    dataMatrix = mat(dataMatIn)</span><br><span class="line">    labelMat = mat(classLabels).transpose()</span><br><span class="line">    m, n = shape(dataMatrix)</span><br><span class="line">    b = <span class="number">0</span></span><br><span class="line">    alphas = mat(zeros((m, <span class="number">1</span>)))</span><br><span class="line">    <span class="built_in">iter</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">iter</span> &lt; maxIter):</span><br><span class="line">        alphaPairsChanged = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">            fXi = <span class="built_in">float</span>(multiply(alphas, labelMat).T * (dataMatrix * dataMatrix[i, :].T)) + b</span><br><span class="line">            Ei = fXi - <span class="built_in">float</span>(labelMat[i])</span><br><span class="line">            <span class="keyword">if</span> ((labelMat[i] * Ei &lt; -toler) <span class="keyword">and</span> (alphas[i] &lt; C)) <span class="keyword">or</span> ((labelMat[i] * Ei &gt; toler) <span class="keyword">and</span> (alphas[i] &gt; <span class="number">0</span>)):</span><br><span class="line">                j = selectJrand(i, m)</span><br><span class="line">                fXj = <span class="built_in">float</span>(multiply(alphas, labelMat).T * (dataMatrix * dataMatrix[j, :].T)) + b</span><br><span class="line">                Ej = fXj - <span class="built_in">float</span>(labelMat[j])</span><br><span class="line">                alphaIold = alphas[i].copy()</span><br><span class="line">                alphaJold = alphas[j].copy()</span><br><span class="line">                <span class="keyword">if</span> (labelMat[i] != labelMat[j]):</span><br><span class="line">                    L = <span class="built_in">max</span>(<span class="number">0</span>, alphas[j] - alphas[i])</span><br><span class="line">                    H = <span class="built_in">min</span>(C, C + alphas[j] - alphas[i])</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    L = <span class="built_in">max</span>(<span class="number">0</span>, alphas[j] + alphas[i] - C)</span><br><span class="line">                    H = <span class="built_in">min</span>(C, alphas[j] + alphas[i])</span><br><span class="line">                <span class="keyword">if</span> L == H:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                eta = <span class="number">2.0</span> * dataMatrix[i, :] * dataMatrix[j, :].T - dataMatrix[i, :] * dataMatrix[i, :].T - dataMatrix[j, :] * dataMatrix[j, :].T</span><br><span class="line">                <span class="keyword">if</span> eta &gt;= <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                alphas[j] -= labelMat[j] * (Ei - Ej) / eta</span><br><span class="line">                alphas[j] = clipAlpha(alphas[j], H, L)</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">abs</span>(alphas[j] - alphaJold) &lt; <span class="number">0.00001</span>):</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                alphas[i] += labelMat[j] * labelMat[i] * (alphaJold - alphas[j])</span><br><span class="line">                b1 = b - Ei - labelMat[i] * (alphas[i] - alphaIold) * dataMatrix[i, :] * dataMatrix[i, :].T - labelMat[j] * (alphas[j] - alphaJold) * dataMatrix[i, :] * dataMatrix[j, :].T</span><br><span class="line">                b2 = b - Ej - labelMat[i] * (alphas[i] - alphaIold) * dataMatrix[i, :] * dataMatrix[j, :].T - labelMat[j] * (alphas[j] - alphaJold) * dataMatrix[j, :] * dataMatrix[j, :].T</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">0</span> &lt; alphas[i]) <span class="keyword">and</span> (C &gt; alphas[i]):</span><br><span class="line">                    b = b1</span><br><span class="line">                <span class="keyword">elif</span> (<span class="number">0</span> &lt; alphas[j]) <span class="keyword">and</span> (C &gt; alphas[j]):</span><br><span class="line">                    b = b2</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    b = (b1 + b2) / <span class="number">2.0</span></span><br><span class="line">                alphaPairsChanged += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (alphaPairsChanged == <span class="number">0</span>):</span><br><span class="line">            <span class="built_in">iter</span> += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">iter</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> b, alphas</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calcWs</span>(<span class="params">alphas, dataArr, classLabels</span>):</span><br><span class="line">    X = mat(dataArr)</span><br><span class="line">    labelMat = mat(classLabels).transpose()</span><br><span class="line">    m, n = shape(X)</span><br><span class="line">    w = zeros((n, <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">        w += multiply(alphas[i] * labelMat[i], X[i, :].T)</span><br><span class="line">    <span class="keyword">return</span> w</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plotfig_SVM</span>(<span class="params">xMat, yMat, ws, b, alphas</span>):</span><br><span class="line">    xMat = mat(xMat)</span><br><span class="line">    yMat = mat(yMat)</span><br><span class="line">    b = array(b)[<span class="number">0</span>]</span><br><span class="line">    fig = plt.figure()</span><br><span class="line">    ax = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">    ax.scatter(xMat[:, <span class="number">0</span>].flatten().A[<span class="number">0</span>], xMat[:, <span class="number">1</span>].flatten().A[<span class="number">0</span>])</span><br><span class="line">    x = arange(-<span class="number">1.0</span>, <span class="number">10.0</span>, <span class="number">0.1</span>)</span><br><span class="line">    y = (-b - ws[<span class="number">0</span>, <span class="number">0</span>] * x) / ws[<span class="number">1</span>, <span class="number">0</span>]</span><br><span class="line">    ax.plot(x, y)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(shape(yMat[<span class="number">0</span>, :])[<span class="number">1</span>]):</span><br><span class="line">        <span class="keyword">if</span> yMat[<span class="number">0</span>, i] &gt; <span class="number">0</span>:</span><br><span class="line">            ax.plot(xMat[i, <span class="number">0</span>], xMat[i, <span class="number">1</span>], <span class="string">&#x27;cx&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ax.plot(xMat[i, <span class="number">0</span>], xMat[i, <span class="number">1</span>], <span class="string">&#x27;kp&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        <span class="keyword">if</span> alphas[i] &gt; <span class="number">0.0</span>:</span><br><span class="line">            ax.plot(xMat[i, <span class="number">0</span>], xMat[i, <span class="number">1</span>], <span class="string">&#x27;ro&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    dataArr, labelArr = loadDataSet(<span class="string">&#x27;6.SVM/testSet.txt&#x27;</span>)</span><br><span class="line">    b, alphas = smoSimple(dataArr, labelArr, <span class="number">0.6</span>, <span class="number">0.001</span>, <span class="number">40</span>)</span><br><span class="line">    ws = calcWs(alphas, dataArr, labelArr)</span><br><span class="line">    plotfig_SVM(dataArr, labelArr, ws, b, alphas)</span><br></pre></td></tr></table></figure><div class="note info"><p>æ¥æºäº <a href="https://www.apachecn.org/">ApacheCN</a></p></div>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> SVM </tag>
            
            <tag> Lagrange Multiplier Method </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Logistic Regressionç®—æ³•ç®€æ</title>
      <link href="/2023/07/31/Logistic%E5%9B%9E%E5%BD%92%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/"/>
      <url>/2023/07/31/Logistic%E5%9B%9E%E5%BD%92%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="Logistic-Regressionç®—æ³•ç®€æ"><a href="#Logistic-Regressionç®—æ³•ç®€æ" class="headerlink" title="Logistic Regressionç®—æ³•ç®€æ"></a>Logistic Regressionç®—æ³•ç®€æ</h1><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>Logistic Regressionæ˜¯ä¸€ç§å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼Œç”¨äºå¤„ç†äºŒåˆ†ç±»é—®é¢˜ã€‚å®ƒé€šè¿‡å»ºç«‹ä¸€ä¸ªçº¿æ€§æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨é€»è¾‘å‡½æ•°ï¼ˆsigmoidå‡½æ•°ï¼‰å°†çº¿æ€§è¾“å‡ºè½¬æ¢ä¸ºæ¦‚ç‡å€¼ï¼Œä»è€Œå¯¹è¾“å…¥æ•°æ®è¿›è¡Œåˆ†ç±»ã€‚</p><p>æ¨¡å‹å‡è®¾ï¼š</p><ul><li>å‡è®¾è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºç±»åˆ«ä¹‹é—´å­˜åœ¨çº¿æ€§å…³ç³»ã€‚</li><li>ç”¨sigmoidå‡½æ•°å°†çº¿æ€§è¾“å‡ºæ˜ å°„åˆ°0å’Œ1ä¹‹é—´çš„æ¦‚ç‡å€¼ã€‚</li></ul><p><strong>sigmoidå‡½æ•°ï¼š</strong><br>sigmoidå‡½æ•°ï¼ˆä¹Ÿç§°ä¸ºLogisticå‡½æ•°ï¼‰å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sigmoid(z) = 1 / (1 + exp(-z))</span><br></pre></td></tr></table></figure><p>å…¶ä¸­zæ˜¯è¾“å…¥çš„çº¿æ€§è¾“å‡ºã€‚</p><p><strong>æ¢¯åº¦æå‡ä¸æ¢¯åº¦ä¸‹é™</strong></p><p>æ¢¯åº¦æå‡ï¼ˆGradient Boostingï¼‰å’Œæ¢¯åº¦ä¸‹é™ï¼ˆGradient Descentï¼‰æ˜¯ä¸¤ä¸ªä¸åŒçš„æœºå™¨å­¦ä¹ æ¦‚å¿µï¼Œè™½ç„¶å®ƒä»¬éƒ½æ¶‰åŠæ¢¯åº¦ï¼ˆGradientï¼‰è¿™ä¸€æœ¯è¯­ï¼Œä½†åœ¨æ–¹æ³•å’Œåº”ç”¨ä¸Šæœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</p><p><strong>æ¢¯åº¦æå‡ï¼ˆGradient Boostingï¼‰ï¼š</strong><br>æ¢¯åº¦æå‡æ˜¯ä¸€ç§é›†æˆå­¦ä¹ æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å°†å¤šä¸ªå¼±å­¦ä¹ å™¨ï¼ˆé€šå¸¸æ˜¯å†³ç­–æ ‘ï¼‰è¿›è¡Œä¸²è¡Œè®­ç»ƒï¼Œæ¯æ¬¡è®­ç»ƒéƒ½å°è¯•çº æ­£å‰ä¸€è½®è®­ç»ƒä¸­æ¨¡å‹çš„é”™è¯¯ï¼Œä»è€Œé€æ­¥æé«˜æ•´ä½“æ¨¡å‹çš„æ€§èƒ½ã€‚è¿™ç§æŠ€æœ¯é€šè¿‡è¿­ä»£çš„æ–¹å¼æ„å»ºä¸€ä¸ªå¼ºå¤§çš„é›†æˆæ¨¡å‹ï¼Œæ¯ä¸€æ­¥éƒ½å…³æ³¨å…ˆå‰æ¨¡å‹çš„æ®‹å·®ï¼ˆé¢„æµ‹å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ï¼‰ï¼Œç„¶åè®­ç»ƒä¸€ä¸ªæ–°çš„æ¨¡å‹æ¥çº æ­£è¿™äº›æ®‹å·®ã€‚æ¢¯åº¦æå‡çš„ä¸»è¦ä»£è¡¨ç®—æ³•æ˜¯Gradient Boosting Machineï¼ˆGBMï¼‰å’ŒXGBoostã€‚</p><p><strong>æ¢¯åº¦ä¸‹é™ï¼ˆGradient Descentï¼‰ï¼š</strong><br>æ¢¯åº¦ä¸‹é™æ˜¯ä¸€ç§ç”¨äºä¼˜åŒ–ç›®æ ‡å‡½æ•°çš„è¿­ä»£ä¼˜åŒ–ç®—æ³•ã€‚å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨å‚æ•°ç©ºé—´ä¸­æ‰¾åˆ°ç›®æ ‡å‡½æ•°çš„æœ€å°å€¼ç‚¹ï¼ˆæˆ–æœ€å¤§å€¼ç‚¹ï¼‰ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œè¿™é€šå¸¸æ¶‰åŠåˆ°æœ€å°åŒ–æŸå¤±å‡½æ•°ï¼Œä¾‹å¦‚å¹³æ–¹è¯¯å·®æŸå¤±æˆ–äº¤å‰ç†µæŸå¤±ç­‰ã€‚æ¢¯åº¦ä¸‹é™çš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡è®¡ç®—ç›®æ ‡å‡½æ•°å…³äºå‚æ•°çš„æ¢¯åº¦ï¼ˆå¯¼æ•°ï¼‰ï¼Œæœç€æ¢¯åº¦çš„åæ–¹å‘è°ƒæ•´å‚æ•°ï¼Œä»¥ä½¿ç›®æ ‡å‡½æ•°å€¼é€æ­¥å‡å°ã€‚æ¢¯åº¦ä¸‹é™æœ‰å¤šç§å˜ç§ï¼Œå¦‚æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆBatch Gradient Descentï¼‰ã€éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic Gradient Descentï¼‰å’Œå°æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆMini-batch Gradient Descentï¼‰ç­‰ã€‚</p><p><strong>ä¸»è¦åŒºåˆ«ï¼š</strong></p><ul><li>æ¢¯åº¦æå‡æ˜¯ä¸€ç§é›†æˆå­¦ä¹ ç®—æ³•ï¼Œç”¨äºæ„å»ºå¼ºå¤§çš„é¢„æµ‹æ¨¡å‹ï¼Œé€šè¿‡ä¸²è¡Œè®­ç»ƒå¤šä¸ªå¼±å­¦ä¹ å™¨æ¥é€æ­¥æé«˜æ•´ä½“æ¨¡å‹çš„æ€§èƒ½ã€‚</li><li>æ¢¯åº¦ä¸‹é™æ˜¯ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œç”¨äºæ‰¾åˆ°ç›®æ ‡å‡½æ•°çš„æœ€å°å€¼ç‚¹ï¼Œé€šè¿‡è®¡ç®—æ¢¯åº¦å¹¶æœç€æ¢¯åº¦çš„åæ–¹å‘è°ƒæ•´å‚æ•°æ¥å®ç°ä¼˜åŒ–ã€‚</li></ul><p>å°½ç®¡å®ƒä»¬æ¶‰åŠåˆ°æ¢¯åº¦è¿™ä¸ªå…±åŒç‚¹ï¼Œä½†æ˜¯æ¢¯åº¦æå‡å’Œæ¢¯åº¦ä¸‹é™æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œåˆ†åˆ«ç”¨äºè§£å†³é›†æˆå­¦ä¹ å’Œä¼˜åŒ–é—®é¢˜ã€‚</p><h2 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h2><p><em>ä¼˜ç‚¹</em>ï¼š</p><ul><li>å®ç°ç®€å•ï¼Œè®¡ç®—æ•ˆç‡é«˜ã€‚</li><li>å¯è§£é‡Šæ€§å¼ºï¼Œèƒ½å¤Ÿçœ‹åˆ°æ¯ä¸ªç‰¹å¾çš„æƒé‡å¯¹é¢„æµ‹çš„å½±å“ã€‚</li><li>åœ¨ç‰¹å¾ç©ºé—´è¾ƒç®€å•çš„é—®é¢˜ä¸Šè¡¨ç°è‰¯å¥½ã€‚</li></ul><p><em>ç¼ºç‚¹</em>ï¼š</p><ul><li>ä¸èƒ½å¤„ç†å¤æ‚çš„æ•°æ®å…³ç³»ï¼Œå¯¹äºéçº¿æ€§é—®é¢˜è¡¨ç°ä¸ä½³ã€‚</li><li>å¯¹å¼‚å¸¸å€¼æ¯”è¾ƒæ•æ„Ÿï¼Œå®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“ã€‚</li><li>ä¸èƒ½ç›´æ¥å¤„ç†å¤šåˆ†ç±»é—®é¢˜ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ä¸€å¯¹å¤šï¼ˆOne-vs-Restï¼‰æˆ–Softmaxç­‰ç­–ç•¥æ¥æ‰©å±•åˆ°å¤šåˆ†ç±»ã€‚</li></ul><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p>Logistic Regressionåœ¨è®¸å¤šé¢†åŸŸæœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå°¤å…¶åœ¨äºŒåˆ†ç±»é—®é¢˜ä¸­å¸¸è§ï¼Œå¦‚ï¼š</p><ul><li>åƒåœ¾é‚®ä»¶åˆ†ç±»ï¼šåˆ¤æ–­ä¸€å°é‚®ä»¶æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶ã€‚</li><li>é‡‘èé£é™©é¢„æµ‹ï¼šé¢„æµ‹å®¢æˆ·æ˜¯å¦æœ‰è¿çº¦é£é™©ã€‚</li><li>åŒ»å­¦è¯Šæ–­ï¼šåˆ¤æ–­æ‚£è€…æ˜¯å¦æ‚£æœ‰æŸç§ç–¾ç—…ã€‚</li><li>è‡ªç„¶è¯­è¨€å¤„ç†ï¼šæƒ…æ„Ÿåˆ†æï¼Œåˆ¤æ–­æ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘ã€‚</li></ul><h2 id="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"><a href="#æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼" class="headerlink" title="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"></a>æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼</h2><ol><li><p>å‡è®¾å‡½æ•°ï¼š<br> é€»è¾‘å›å½’çš„å‡è®¾å‡½æ•°è¡¨ç¤ºä¸ºï¼š<br> $$ h_\theta(x) &#x3D; \frac{1}{1 + e^{-\theta^T x}} $$</p><p> å…¶ä¸­ï¼Œ</p><ul><li>$ h_\theta(x) $ æ˜¯æ ¹æ®è¾“å…¥ç‰¹å¾ $ x $ å’Œæ¨¡å‹å‚æ•° $ \theta $ å¾—åˆ°çš„é¢„æµ‹å€¼ï¼ˆç±»åˆ«ä¸º1çš„æ¦‚ç‡ï¼‰ã€‚</li><li>$ \theta $ æ˜¯æ¨¡å‹çš„å‚æ•°å‘é‡ã€‚</li><li>$ \theta^T $ è¡¨ç¤º $ \theta $ çš„è½¬ç½®ã€‚</li><li>$ e $ æ˜¯è‡ªç„¶å¯¹æ•°çš„åº•æ•°ã€‚</li></ul></li><li><p>æŸå¤±å‡½æ•°ï¼š<br>é€»è¾‘å›å½’ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°æ¥è¡¡é‡é¢„æµ‹å€¼ä¸çœŸå®ç±»åˆ«ä¹‹é—´çš„å·®å¼‚ã€‚å¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œäº¤å‰ç†µæŸå¤±å‡½æ•°è¡¨ç¤ºä¸ºï¼š<br>$$ J(\theta) &#x3D; -\frac{1}{m} \sum_{i&#x3D;1}^{m} \left[ y^{(i)} \log(h_\theta(x^{(i)})) + (1 - y^{(i)}) \log(1 - h_\theta(x^{(i)})) \right] $$</p><p> å…¶ä¸­ï¼Œ</p><ul><li>$ J(\theta) $ æ˜¯æŸå¤±å‡½æ•°ã€‚</li><li>$ m $ æ˜¯è®­ç»ƒæ ·æœ¬çš„æ•°é‡ã€‚</li><li>$ x^{(i)} $ è¡¨ç¤ºç¬¬ $ i $ ä¸ªè®­ç»ƒæ ·æœ¬çš„ç‰¹å¾å‘é‡ã€‚</li><li>$ y^{(i)} $ æ˜¯ç¬¬ $ i $ ä¸ªè®­ç»ƒæ ·æœ¬çš„çœŸå®ç±»åˆ«ï¼ˆ0æˆ–1ï¼‰ã€‚</li><li>$ h_\theta(x^{(i)}) $ æ˜¯æ ¹æ®å‡è®¾å‡½æ•°é¢„æµ‹çš„ç±»åˆ«ä¸º1çš„æ¦‚ç‡ã€‚</li></ul></li><li><p>æ¢¯åº¦ä¸‹é™æ›´æ–°è§„åˆ™ï¼š<br>æ¢¯åº¦ä¸‹é™çš„ç›®æ ‡æ˜¯æœ€å°åŒ–æŸå¤±å‡½æ•° $ J(\theta) $ã€‚ä¸ºäº†æ›´æ–°æ¨¡å‹å‚æ•° $ \theta $ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æŸå¤±å‡½æ•°å¯¹äºæ¯ä¸ªå‚æ•°çš„åå¯¼æ•°ï¼Œç„¶åæ ¹æ®æ¢¯åº¦çš„æ–¹å‘å’Œå­¦ä¹ ç‡æ¥æ›´æ–°å‚æ•°ã€‚æ›´æ–°è§„åˆ™å¦‚ä¸‹ï¼š<br>$$ \theta_j :&#x3D; \theta_j - \alpha \frac{\partial J(\theta)}{\partial \theta_j} $$</p><p> å…¶ä¸­ï¼Œ</p><ul><li>$ \alpha $ æ˜¯å­¦ä¹ ç‡ï¼ˆæ§åˆ¶å‚æ•°æ›´æ–°çš„æ­¥é•¿ï¼‰ã€‚</li><li>$ \frac{\partial J(\theta)}{\partial \theta_j} $ æ˜¯æŸå¤±å‡½æ•°å¯¹äºå‚æ•° $ \theta_j $ çš„åå¯¼æ•°ã€‚</li></ul><p> å¯¹äºé€»è¾‘å›å½’ï¼Œæ¢¯åº¦ä¸‹é™çš„å…·ä½“æ›´æ–°è§„åˆ™æ˜¯ï¼š<br> $$ \theta_j :&#x3D; \theta_j - \alpha \frac{1}{m} \sum_{i&#x3D;1}^{m} \left( h_\theta(x^{(i)}) - y^{(i)} \right) x_j^{(i)} $$</p><p> å…¶ä¸­ï¼Œ$ x_j^{(i)} $ æ˜¯ç¬¬ $ i $ ä¸ªè®­ç»ƒæ ·æœ¬çš„ç¬¬ $ j $ ä¸ªç‰¹å¾å€¼ã€‚</p></li></ol><p>é€šè¿‡ä¸æ–­è¿­ä»£æ›´æ–°å‚æ•°ï¼Œæ¢¯åº¦ä¸‹é™ä¼šä½¿æŸå¤±å‡½æ•°é€æ¸å‡å°ï¼Œä»è€Œæ‰¾åˆ°æœ€ä¼˜çš„æ¨¡å‹å‚æ•°ï¼Œä½¿å¾—é€»è¾‘å›å½’æ¨¡å‹èƒ½å¤Ÿè¾ƒå¥½åœ°æ‹Ÿåˆè®­ç»ƒæ•°æ®å¹¶ä½œå‡ºå‡†ç¡®çš„é¢„æµ‹ã€‚</p><h2 id="æ¡ˆä¾‹ï¼šä»ç–æ°”ç—…ç—‡é¢„æµ‹ç—…é©¬çš„æ­»äº¡ç‡"><a href="#æ¡ˆä¾‹ï¼šä»ç–æ°”ç—…ç—‡é¢„æµ‹ç—…é©¬çš„æ­»äº¡ç‡" class="headerlink" title="æ¡ˆä¾‹ï¼šä»ç–æ°”ç—…ç—‡é¢„æµ‹ç—…é©¬çš„æ­»äº¡ç‡"></a>æ¡ˆä¾‹ï¼šä»ç–æ°”ç—…ç—‡é¢„æµ‹ç—…é©¬çš„æ­»äº¡ç‡</h2><h3 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h3><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="HorseColicTest.txt" href="/citation/HorseColic/HorseColicTest.txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">HorseColicTest.txt</p><p class="url">/citation/HorseColic/HorseColicTest.txt</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="HorseColicTraining.txt" href="/citation/HorseColic/HorseColicTraining.txt"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">HorseColicTraining.txt</p><p class="url">/citation/HorseColic/HorseColicTraining.txt</p></div></a></div></div><h3 id="Pythonå®ç°"><a href="#Pythonå®ç°" class="headerlink" title="Pythonå®ç°"></a>Pythonå®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -------ä»ç–æ°”ç—…ç—‡é¢„æµ‹ç—…é©¬çš„æ­»äº¡ç‡------</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">colic_test</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ‰“å¼€æµ‹è¯•é›†å’Œè®­ç»ƒé›†ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–å¤„ç†,å…¶å®æœ€ä¸»è¦çš„çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ç¼ºå¤±å€¼çš„è¡¥å……ï¼ˆçœŸçš„éœ€è¦å­¦ä¼šçš„ï¼‰ï¼Œäººå®¶å·²ç»åšäº†</span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    f_train = <span class="built_in">open</span>(<span class="string">&#x27;5.Logistic/HorseColicTraining.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    f_test = <span class="built_in">open</span>(<span class="string">&#x27;5.Logistic/HorseColicTest.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    training_set = []</span><br><span class="line">    training_labels = []</span><br><span class="line">    <span class="comment"># è§£æè®­ç»ƒæ•°æ®é›†ä¸­çš„æ•°æ®ç‰¹å¾å’ŒLabels</span></span><br><span class="line">    <span class="comment"># trainingSet ä¸­å­˜å‚¨è®­ç»ƒæ•°æ®é›†çš„ç‰¹å¾ï¼ŒtrainingLabels å­˜å‚¨è®­ç»ƒæ•°æ®é›†çš„æ ·æœ¬å¯¹åº”çš„åˆ†ç±»æ ‡ç­¾</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f_train.readlines():</span><br><span class="line">        curr_line = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(curr_line) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">continue</span>    <span class="comment"># è¿™é‡Œå¦‚æœå°±ä¸€ä¸ªç©ºçš„å…ƒç´ ï¼Œåˆ™è·³è¿‡æœ¬æ¬¡å¾ªç¯</span></span><br><span class="line">        line_arr = [<span class="built_in">float</span>(curr_line[i]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">21</span>)]</span><br><span class="line">        training_set.append(line_arr)</span><br><span class="line">        training_labels.append(<span class="built_in">float</span>(curr_line[<span class="number">21</span>]))</span><br><span class="line">    <span class="comment"># ä½¿ç”¨ æ”¹è¿›åçš„ éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³• æ±‚å¾—åœ¨æ­¤æ•°æ®é›†ä¸Šçš„æœ€ä½³å›å½’ç³»æ•° trainWeights</span></span><br><span class="line">    train_weights = stoc_grad_ascent1(np.array(training_set), training_labels, <span class="number">500</span>)</span><br><span class="line">    error_count = <span class="number">0</span></span><br><span class="line">    num_test_vec = <span class="number">0.0</span></span><br><span class="line">    <span class="comment"># è¯»å– æµ‹è¯•æ•°æ®é›† è¿›è¡Œæµ‹è¯•ï¼Œè®¡ç®—åˆ†ç±»é”™è¯¯çš„æ ·æœ¬æ¡æ•°å’Œæœ€ç»ˆçš„é”™è¯¯ç‡</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f_test.readlines():</span><br><span class="line">        num_test_vec += <span class="number">1</span></span><br><span class="line">        curr_line = line.strip().split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(curr_line) == <span class="number">1</span>: </span><br><span class="line">            <span class="keyword">continue</span>    <span class="comment"># è¿™é‡Œå¦‚æœå°±ä¸€ä¸ªç©ºçš„å…ƒç´ ï¼Œåˆ™è·³è¿‡æœ¬æ¬¡å¾ªç¯</span></span><br><span class="line">        line_arr = [<span class="built_in">float</span>(curr_line[i]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">21</span>)]</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(classify_vector(np.array(line_arr), train_weights)) != <span class="built_in">int</span>(curr_line[<span class="number">21</span>]):</span><br><span class="line">            error_count += <span class="number">1</span></span><br><span class="line">    error_rate = error_count / num_test_vec</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;the error rate is &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(error_rate))</span><br><span class="line">    <span class="keyword">return</span> error_rate</span><br><span class="line">   </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">stoc_grad_ascent1</span>(<span class="params">data_mat, class_labels, num_iter=<span class="number">150</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ”¹è¿›ç‰ˆçš„éšæœºæ¢¯åº¦ä¸Šå‡ï¼Œä½¿ç”¨éšæœºçš„ä¸€ä¸ªæ ·æœ¬æ¥æ›´æ–°å›å½’ç³»æ•°</span></span><br><span class="line"><span class="string">    :param data_mat: è¾“å…¥æ•°æ®çš„æ•°æ®ç‰¹å¾ï¼ˆé™¤å»æœ€åä¸€åˆ—ï¼‰,ndarray</span></span><br><span class="line"><span class="string">    :param class_labels: è¾“å…¥æ•°æ®çš„ç±»åˆ«æ ‡ç­¾ï¼ˆæœ€åä¸€åˆ—æ•°æ®</span></span><br><span class="line"><span class="string">    :param num_iter: è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"><span class="string">    :return: å¾—åˆ°çš„æœ€ä½³å›å½’ç³»æ•°</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    m, n = np.shape(data_mat)</span><br><span class="line">    weights = np.ones(n)</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(num_iter):</span><br><span class="line">        <span class="comment"># è¿™é‡Œå¿…é¡»è¦ç”¨listï¼Œä¸ç„¶åé¢çš„delæ²¡æ³•ä½¿ç”¨</span></span><br><span class="line">        data_index = <span class="built_in">list</span>(<span class="built_in">range</span>(m))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">            <span class="comment"># iå’Œjçš„ä¸æ–­å¢å¤§ï¼Œå¯¼è‡´alphaçš„å€¼ä¸æ–­å‡å°‘ï¼Œä½†æ˜¯ä¸ä¸º0</span></span><br><span class="line">            alpha = <span class="number">4</span> / (<span class="number">1.0</span> + j + i) + <span class="number">0.01</span></span><br><span class="line">            <span class="comment"># éšæœºäº§ç”Ÿä¸€ä¸ª 0ï½len()ä¹‹é—´çš„ä¸€ä¸ªå€¼</span></span><br><span class="line">            <span class="comment"># random.uniform(x, y) æ–¹æ³•å°†éšæœºç”Ÿæˆä¸‹ä¸€ä¸ªå®æ•°ï¼Œå®ƒåœ¨[x,y]èŒƒå›´å†…,xæ˜¯è¿™ä¸ªèŒƒå›´å†…çš„æœ€å°å€¼ï¼Œyæ˜¯è¿™ä¸ªèŒƒå›´å†…çš„æœ€å¤§å€¼ã€‚</span></span><br><span class="line">            rand_index = <span class="built_in">int</span>(np.random.uniform(<span class="number">0</span>, <span class="built_in">len</span>(data_index)))</span><br><span class="line">            h = sigmoid(np.<span class="built_in">sum</span>(data_mat[data_index[rand_index]] * weights))</span><br><span class="line">            error = class_labels[data_index[rand_index]] - h</span><br><span class="line">            weights = weights + alpha * error * data_mat[data_index[rand_index]]</span><br><span class="line">            <span class="keyword">del</span>(data_index[rand_index])</span><br><span class="line">    <span class="keyword">return</span> weights</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sigmoid</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="comment"># è¿™é‡Œå…¶å®éå¸¸æœ‰å¿…è¦è§£é‡Šä¸€ä¸‹ï¼Œä¼šå‡ºç°çš„é”™è¯¯ RuntimeWarning: overflow encountered in exp</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œæ˜¯å› ä¸ºæˆ‘ä»¬è¾“å…¥çš„æœ‰çš„ x å®åœ¨æ˜¯å¤ªå°äº†ï¼Œæ¯”å¦‚ -6000ä¹‹ç±»çš„ï¼Œé‚£ä¹ˆè®¡ç®—ä¸€ä¸ªæ•°å­— np.exp(6000)è¿™ä¸ªç»“æœå¤ªå¤§äº†ï¼Œæ²¡æ³•è¡¨ç¤ºï¼Œæ‰€ä»¥å°±æº¢å‡ºäº†</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.0</span> / (<span class="number">1</span> + np.exp(-x))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">classify_vector</span>(<span class="params">in_x, weights</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æœ€ç»ˆçš„åˆ†ç±»å‡½æ•°ï¼Œæ ¹æ®å›å½’ç³»æ•°å’Œç‰¹å¾å‘é‡æ¥è®¡ç®— Sigmoid çš„å€¼ï¼Œå¤§äº0.5å‡½æ•°è¿”å›1ï¼Œå¦åˆ™è¿”å›0</span></span><br><span class="line"><span class="string">    :param in_x: ç‰¹å¾å‘é‡ï¼Œfeatures</span></span><br><span class="line"><span class="string">    :param weights: æ ¹æ®æ¢¯åº¦ä¸‹é™/éšæœºæ¢¯åº¦ä¸‹é™ è®¡ç®—å¾—åˆ°çš„å›å½’ç³»æ•°</span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># print(np.sum(in_x * weights))</span></span><br><span class="line">    prob = sigmoid(np.<span class="built_in">sum</span>(in_x * weights))</span><br><span class="line">    <span class="keyword">if</span> prob &gt; <span class="number">0.5</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1.0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    colic_test()</span><br></pre></td></tr></table></figure><div class="note info"><p>æ¥æºäº <a href="https://www.apachecn.org/">ApacheCN</a></p></div>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> Logistic Regression </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ´ç´ è´å¶æ–¯ç®—æ³•ç®€æ</title>
      <link href="/2023/07/30/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/"/>
      <url>/2023/07/30/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ´ç´ è´å¶æ–¯ç®—æ³•ç®€æ"><a href="#æœ´ç´ è´å¶æ–¯ç®—æ³•ç®€æ" class="headerlink" title="æœ´ç´ è´å¶æ–¯ç®—æ³•ç®€æ"></a>æœ´ç´ è´å¶æ–¯ç®—æ³•ç®€æ</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æœ´ç´ è´å¶æ–¯ç®—æ³•æ˜¯ä¸€ç§å¸¸è§çš„åˆ†ç±»ç®—æ³•ï¼Œå®ƒåŸºäºè´å¶æ–¯å®šç†å’Œç‰¹å¾é—´çš„â€œæœ´ç´ â€ç‹¬ç«‹æ€§å‡è®¾ã€‚è¯¥ç®—æ³•å¸¸è¢«ç”¨äºæ–‡æœ¬åˆ†ç±»ã€åƒåœ¾é‚®ä»¶è¿‡æ»¤ã€æƒ…æ„Ÿåˆ†æç­‰è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ï¼Œä»¥åŠå…¶ä»–è®¸å¤šæœºå™¨å­¦ä¹ é—®é¢˜ã€‚</p><p>è¿™é‡Œç®€è¦è§£é‡Šä¸€ä¸‹æœ´ç´ è´å¶æ–¯ç®—æ³•çš„åŸºæœ¬åŸç†ï¼š</p><ol><li><p>è´å¶æ–¯å®šç†ï¼š<br>è´å¶æ–¯å®šç†æ˜¯æ¦‚ç‡è®ºä¸­çš„ä¸€ä¸ªé‡è¦ç†è®ºï¼Œç”¨äºè®¡ç®—åœ¨å·²çŸ¥ä¸€äº›æ¡ä»¶çš„æƒ…å†µä¸‹ï¼ŒæŸäº‹ä»¶çš„æ¦‚ç‡ã€‚å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œè´å¶æ–¯å®šç†å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$ P(y|x) &#x3D; \frac{P(x|y) \cdot P(y)}{P(x)} $$</p><blockquote><ul><li>$P(y|x)$ï¼šè¿™æ˜¯åœ¨ç»™å®šç‰¹å¾ $x$ çš„æ¡ä»¶ä¸‹ï¼Œç±»åˆ« $y$ çš„æ¦‚ç‡ã€‚åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä½¿å¾— $P(y|x)$ æœ€å¤§åŒ–çš„ç±»åˆ« $y$ï¼Œå³ä¸ºé¢„æµ‹çš„ç±»åˆ«ã€‚</li><li>$P(x|y)$ï¼šè¿™æ˜¯åœ¨ç±»åˆ« $y$ å·²çŸ¥çš„æƒ…å†µä¸‹ï¼Œç‰¹å¾ $x$ å‡ºç°çš„æ¦‚ç‡ã€‚åœ¨æœ´ç´ è´å¶æ–¯ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è®­ç»ƒæ•°æ®æ¥ä¼°è®¡è¿™äº›æ¦‚ç‡ã€‚</li><li>$P(y)$ï¼šè¿™æ˜¯ç±»åˆ« $y$ çš„å…ˆéªŒæ¦‚ç‡ï¼Œå³åœ¨ä¸è€ƒè™‘ç‰¹å¾ $x$ çš„æƒ…å†µä¸‹ï¼Œç±»åˆ« $y$ å‡ºç°çš„æ¦‚ç‡ã€‚åœ¨è®­ç»ƒé˜¶æ®µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è®­ç»ƒæ•°æ®æ¥ä¼°è®¡è¿™äº›å…ˆéªŒæ¦‚ç‡ã€‚</li><li>$P(x)$ï¼šè¿™æ˜¯ç‰¹å¾ $x$ çš„å…ˆéªŒæ¦‚ç‡ï¼Œå³åœ¨ä¸è€ƒè™‘ç±»åˆ« $y$ çš„æƒ…å†µä¸‹ï¼Œç‰¹å¾ $x$ å‡ºç°çš„æ¦‚ç‡ã€‚åœ¨é¢„æµ‹é˜¶æ®µï¼Œè¿™ä¸ªå€¼é€šå¸¸å¯ä»¥å¿½ç•¥ï¼Œå› ä¸ºå®ƒåœ¨æ¯ä¸ªç±»åˆ«çš„è®¡ç®—ä¸­éƒ½æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”å¯¹äºæœ€å¤§åŒ–åéªŒæ¦‚ç‡å¹¶ä¸å½±å“ç»“æœã€‚<br>åœ¨æœ´ç´ è´å¶æ–¯ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯é¢„æµ‹ä¸€ä¸ªæ–°çš„æ ·æœ¬çš„ç±»åˆ« $y_{\text{pred}}$ï¼Œå®ƒçš„è®¡ç®—å¯ä»¥é€šè¿‡æ‰¾åˆ°ä½¿å¾— $P(y|x)$ æœ€å¤§åŒ–çš„ç±»åˆ« $y$ æ¥å®ç°ï¼Œå³ï¼š<br>$$ y_{\text{pred}} &#x3D; \underset{y}{\text{argmax}} : P(y|x) $$<br>æ ¹æ®è´å¶æ–¯å®šç†çš„å…¬å¼ï¼Œå¯ä»¥å°† $P(y|x)$ è¡¨ç¤ºä¸ºï¼š<br>$$ P(y|x) &#x3D; \frac{P(x|y) \cdot P(y)}{P(x)} $$<br>ç„¶åé€šè¿‡è®¡ç®—æ¯ä¸ªç±»åˆ« $y$ çš„åéªŒæ¦‚ç‡ $P(y|x)$ å¹¶é€‰æ‹©æœ€å¤§æ¦‚ç‡çš„ç±»åˆ«ä½œä¸ºé¢„æµ‹ç»“æœã€‚</li></ul></blockquote></li><li><p>æœ´ç´ ç‹¬ç«‹æ€§å‡è®¾ï¼š<br>ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œæœ´ç´ è´å¶æ–¯ç®—æ³•å‡è®¾ç‰¹å¾ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå³ç»™å®šç±»åˆ« $y$ çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç‰¹å¾ $x_i$ çš„å‡ºç°ä¸å…¶ä»–ç‰¹å¾æ— å…³ã€‚è™½ç„¶è¿™ä¸ªå‡è®¾åœ¨ç°å®ä¸­å¹¶ä¸æ€»æ˜¯æˆç«‹ï¼Œä½†åœ¨è®¸å¤šå®é™…é—®é¢˜ä¸­ï¼Œæœ´ç´ è´å¶æ–¯ä»ç„¶è¡¨ç°å‡ºè‰²ã€‚</p></li><li><p>è®­ç»ƒé˜¶æ®µï¼š<br>åœ¨è®­ç»ƒé˜¶æ®µï¼Œæœ´ç´ è´å¶æ–¯ç®—æ³•ä»å·²æ ‡è®°çš„è®­ç»ƒæ•°æ®ä¸­å­¦ä¹ ç±»åˆ«å’Œç‰¹å¾ä¹‹é—´çš„æ¡ä»¶æ¦‚ç‡ã€‚å¯¹äºæ¯ä¸ªç±»åˆ« $y$ï¼Œç®—æ³•è®¡ç®—æ¯ä¸ªç‰¹å¾ $x_i$ åœ¨è¯¥ç±»åˆ«ä¸‹å‡ºç°çš„æ¦‚ç‡ $P(x_i|y)$ã€‚</p></li><li><p>é¢„æµ‹é˜¶æ®µï¼š<br>åœ¨é¢„æµ‹é˜¶æ®µï¼Œç»™å®šä¸€ä¸ªæ–°çš„æ ·æœ¬æ•°æ®çš„ç‰¹å¾ $x_{\text{new}}$ï¼Œæœ´ç´ è´å¶æ–¯ç®—æ³•é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥é¢„æµ‹å®ƒçš„ç±»åˆ« $y_{\text{pred}}$ï¼š<br>$$ y_{\text{pred}} &#x3D; \underset{y}{\text{argmax}} : P(y) \cdot \prod_{i} P(x_{\text{new},i}|y) $$<br>å…¶ä¸­ï¼Œ$P(y)$ æ˜¯ç±»åˆ«çš„å…ˆéªŒæ¦‚ç‡ï¼Œ$\prod_{i} P(x_{\text{new},i}|y)$ æ˜¯æ ¹æ®æœ´ç´ ç‹¬ç«‹æ€§å‡è®¾è®¡ç®—çš„ç»™å®šç±»åˆ«ä¸‹æ‰€æœ‰ç‰¹å¾æ¦‚ç‡çš„ä¹˜ç§¯ã€‚</p></li></ol><p>æ€»ç»“æ¥è¯´ï¼Œæœ´ç´ è´å¶æ–¯ç®—æ³•æ˜¯ä¸€ç§ç®€å•ä¸”é«˜æ•ˆçš„åˆ†ç±»ç®—æ³•ï¼Œå°¤å…¶é€‚ç”¨äºç‰¹å¾ç»´åº¦è¾ƒé«˜çš„é—®é¢˜ã€‚è™½ç„¶å®ƒåœ¨æŸäº›å¤æ‚ä»»åŠ¡ä¸Šå¯èƒ½è¡¨ç°ä¸å¦‚å…¶ä»–æ›´å¤æ‚çš„ç®—æ³•ï¼Œä½†åœ¨è®¸å¤šå®é™…åº”ç”¨ä¸­ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„é€‰æ‹©ã€‚</p><h2 id="æ¡ˆä¾‹ï¼šå±è”½ç¤¾åŒºç•™è¨€æ¿çš„ä¾®è¾±æ€§è¨€è®º"><a href="#æ¡ˆä¾‹ï¼šå±è”½ç¤¾åŒºç•™è¨€æ¿çš„ä¾®è¾±æ€§è¨€è®º" class="headerlink" title="æ¡ˆä¾‹ï¼šå±è”½ç¤¾åŒºç•™è¨€æ¿çš„ä¾®è¾±æ€§è¨€è®º"></a>æ¡ˆä¾‹ï¼šå±è”½ç¤¾åŒºç•™è¨€æ¿çš„ä¾®è¾±æ€§è¨€è®º</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ------é¡¹ç›®æ¡ˆä¾‹1: å±è”½ç¤¾åŒºç•™è¨€æ¿çš„ä¾®è¾±æ€§è¨€è®º------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_data_set</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åˆ›å»ºæ•°æ®é›†,éƒ½æ˜¯å‡çš„ fake data set </span></span><br><span class="line"><span class="string">    :return: å•è¯åˆ—è¡¨posting_list, æ‰€å±ç±»åˆ«class_vec</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    posting_list = [</span><br><span class="line">        [<span class="string">&#x27;my&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;has&#x27;</span>, <span class="string">&#x27;flea&#x27;</span>, <span class="string">&#x27;problems&#x27;</span>, <span class="string">&#x27;help&#x27;</span>, <span class="string">&#x27;please&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;maybe&#x27;</span>, <span class="string">&#x27;not&#x27;</span>, <span class="string">&#x27;take&#x27;</span>, <span class="string">&#x27;him&#x27;</span>, <span class="string">&#x27;to&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;park&#x27;</span>, <span class="string">&#x27;stupid&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;my&#x27;</span>, <span class="string">&#x27;dalmation&#x27;</span>, <span class="string">&#x27;is&#x27;</span>, <span class="string">&#x27;so&#x27;</span>, <span class="string">&#x27;cute&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;love&#x27;</span>, <span class="string">&#x27;him&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;stop&#x27;</span>, <span class="string">&#x27;posting&#x27;</span>, <span class="string">&#x27;stupid&#x27;</span>, <span class="string">&#x27;worthless&#x27;</span>, <span class="string">&#x27;gar e&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;mr&#x27;</span>, <span class="string">&#x27;licks&#x27;</span>, <span class="string">&#x27;ate&#x27;</span>, <span class="string">&#x27;my&#x27;</span>, <span class="string">&#x27;steak&#x27;</span>, <span class="string">&#x27;how&#x27;</span>, <span class="string">&#x27;to&#x27;</span>, <span class="string">&#x27;stop&#x27;</span>, <span class="string">&#x27;him&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;quit&#x27;</span>, <span class="string">&#x27;buying&#x27;</span>, <span class="string">&#x27;worthless&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;food&#x27;</span>, <span class="string">&#x27;stupid&#x27;</span>]]</span><br><span class="line">    class_vec = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]  <span class="comment"># 1 is ä¾®è¾±æ€§çš„æ–‡å­—, 0 is not</span></span><br><span class="line">    <span class="keyword">return</span> posting_list, class_vec</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_vocab_list</span>(<span class="params">data_set</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è·å–æ‰€æœ‰å•è¯çš„é›†åˆ</span></span><br><span class="line"><span class="string">    :param data_set: æ•°æ®é›†</span></span><br><span class="line"><span class="string">    :return: æ‰€æœ‰å•è¯çš„é›†åˆ(å³ä¸å«é‡å¤å…ƒç´ çš„å•è¯åˆ—è¡¨)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    vocab_set = <span class="built_in">set</span>()  <span class="comment"># create empty set</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data_set:</span><br><span class="line">        <span class="comment"># | æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</span></span><br><span class="line">        vocab_set = vocab_set | <span class="built_in">set</span>(item)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span>(vocab_set)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">set_of_words2vec</span>(<span class="params">vocab_list, input_set</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    éå†æŸ¥çœ‹è¯¥å•è¯æ˜¯å¦å‡ºç°ï¼Œå‡ºç°è¯¥å•è¯åˆ™å°†è¯¥å•è¯ç½®1</span></span><br><span class="line"><span class="string">    :param vocab_list: æ‰€æœ‰å•è¯é›†åˆåˆ—è¡¨</span></span><br><span class="line"><span class="string">    :param input_set: è¾“å…¥æ•°æ®é›†</span></span><br><span class="line"><span class="string">    :return: åŒ¹é…åˆ—è¡¨[0,1,0,1...]ï¼Œå…¶ä¸­ 1ä¸0 è¡¨ç¤ºè¯æ±‡è¡¨ä¸­çš„å•è¯æ˜¯å¦å‡ºç°åœ¨è¾“å…¥çš„æ•°æ®é›†ä¸­</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªå’Œè¯æ±‡è¡¨ç­‰é•¿çš„å‘é‡ï¼Œå¹¶å°†å…¶å…ƒç´ éƒ½è®¾ç½®ä¸º0</span></span><br><span class="line">    result = [<span class="number">0</span>] * <span class="built_in">len</span>(vocab_list)</span><br><span class="line">    <span class="comment"># éå†æ–‡æ¡£ä¸­çš„æ‰€æœ‰å•è¯ï¼Œå¦‚æœå‡ºç°äº†è¯æ±‡è¡¨ä¸­çš„å•è¯ï¼Œåˆ™å°†è¾“å‡ºçš„æ–‡æ¡£å‘é‡ä¸­çš„å¯¹åº”å€¼è®¾ä¸º1</span></span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> input_set:</span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">in</span> vocab_list:</span><br><span class="line">            result[vocab_list.index(word)] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># è¿™ä¸ªåé¢åº”è¯¥æ³¨é‡Šæ‰ï¼Œå› ä¸ºå¯¹ä½ æ²¡ä»€ä¹ˆç”¨ï¼Œè¿™åªæ˜¯ä¸ºäº†è¾…åŠ©è°ƒè¯•çš„</span></span><br><span class="line">            <span class="comment"># print(&#x27;the word: &#123;&#125; is not in my vocabulary&#x27;.format(word))</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_train_naive_bayes</span>(<span class="params">train_mat, train_category</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æœ´ç´ è´å¶æ–¯åˆ†ç±»åŸç‰ˆ</span></span><br><span class="line"><span class="string">    :param train_mat:  type is ndarray</span></span><br><span class="line"><span class="string">                    æ€»çš„è¾“å…¥æ–‡æœ¬ï¼Œå¤§è‡´æ˜¯ [[0,1,0,1], [], []]</span></span><br><span class="line"><span class="string">    :param train_category: æ–‡ä»¶å¯¹åº”çš„ç±»åˆ«åˆ†ç±»ï¼Œ [0, 1, 0],</span></span><br><span class="line"><span class="string">                            åˆ—è¡¨çš„é•¿åº¦åº”è¯¥ç­‰äºä¸Šé¢é‚£ä¸ªè¾“å…¥æ–‡æœ¬çš„é•¿åº¦</span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    train_doc_num = <span class="built_in">len</span>(train_mat)</span><br><span class="line">    words_num = <span class="built_in">len</span>(train_mat[<span class="number">0</span>])</span><br><span class="line">    <span class="comment"># å› ä¸ºä¾®è¾±æ€§çš„è¢«æ ‡è®°ä¸ºäº†1ï¼Œ æ‰€ä»¥åªè¦æŠŠä»–ä»¬ç›¸åŠ å°±å¯ä»¥å¾—åˆ°ä¾®è¾±æ€§çš„æœ‰å¤šå°‘</span></span><br><span class="line">    <span class="comment"># ä¾®è¾±æ€§æ–‡ä»¶çš„å‡ºç°æ¦‚ç‡ï¼Œå³train_categoryä¸­æ‰€æœ‰çš„1çš„ä¸ªæ•°ï¼Œ</span></span><br><span class="line">    <span class="comment"># ä»£è¡¨çš„å°±æ˜¯å¤šå°‘ä¸ªä¾®è¾±æ€§æ–‡ä»¶ï¼Œä¸æ–‡ä»¶çš„æ€»æ•°ç›¸é™¤å°±å¾—åˆ°äº†ä¾®è¾±æ€§æ–‡ä»¶çš„å‡ºç°æ¦‚ç‡</span></span><br><span class="line">    pos_abusive = np.<span class="built_in">sum</span>(train_category) / train_doc_num</span><br><span class="line">    <span class="comment"># å•è¯å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="comment"># åŸç‰ˆ</span></span><br><span class="line">    p0num = np.zeros(words_num)</span><br><span class="line">    p1num = np.zeros(words_num)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ•´ä¸ªæ•°æ®é›†å•è¯å‡ºç°çš„æ¬¡æ•°ï¼ˆåŸæ¥æ˜¯0ï¼Œåé¢æ”¹æˆ2äº†ï¼‰</span></span><br><span class="line">    p0num_all = <span class="number">0</span></span><br><span class="line">    p1num_all = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(train_doc_num):</span><br><span class="line">        <span class="comment"># éå†æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ä¾®è¾±æ€§æ–‡ä»¶ï¼Œå°±è®¡ç®—æ­¤ä¾®è¾±æ€§æ–‡ä»¶ä¸­å‡ºç°çš„ä¾®è¾±æ€§å•è¯çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">if</span> train_category[i] == <span class="number">1</span>:</span><br><span class="line">            p1num += train_mat[i]</span><br><span class="line">            p1num_all += np.<span class="built_in">sum</span>(train_mat[i])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            p0num += train_mat[i]</span><br><span class="line">            p0num_all += np.<span class="built_in">sum</span>(train_mat[i])</span><br><span class="line">    <span class="comment"># åé¢éœ€è¦æ”¹æˆæ”¹æˆå– log å‡½æ•°</span></span><br><span class="line">    p1vec = p1num / p1num_all</span><br><span class="line">    p0vec = p0num / p0num_all</span><br><span class="line">    <span class="keyword">return</span> p0vec, p1vec, pos_abusive</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_naive_bayes</span>(<span class="params">train_mat, train_category</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æœ´ç´ è´å¶æ–¯åˆ†ç±»ä¿®æ­£ç‰ˆï¼Œã€€æ³¨æ„å’ŒåŸæ¥çš„å¯¹æ¯”ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆåšå¯ä»¥æŸ¥çœ‹ä¹¦</span></span><br><span class="line"><span class="string">    :param train_mat:  type is ndarray</span></span><br><span class="line"><span class="string">                    æ€»çš„è¾“å…¥æ–‡æœ¬ï¼Œå¤§è‡´æ˜¯ [[0,1,0,1], [], []]</span></span><br><span class="line"><span class="string">    :param train_category: æ–‡ä»¶å¯¹åº”çš„ç±»åˆ«åˆ†ç±»ï¼Œ [0, 1, 0],</span></span><br><span class="line"><span class="string">                            åˆ—è¡¨çš„é•¿åº¦åº”è¯¥ç­‰äºä¸Šé¢é‚£ä¸ªè¾“å…¥æ–‡æœ¬çš„é•¿åº¦</span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    train_doc_num = <span class="built_in">len</span>(train_mat)</span><br><span class="line">    words_num = <span class="built_in">len</span>(train_mat[<span class="number">0</span>])</span><br><span class="line">    <span class="comment"># å› ä¸ºä¾®è¾±æ€§çš„è¢«æ ‡è®°ä¸ºäº†1ï¼Œ æ‰€ä»¥åªè¦æŠŠä»–ä»¬ç›¸åŠ å°±å¯ä»¥å¾—åˆ°ä¾®è¾±æ€§çš„æœ‰å¤šå°‘</span></span><br><span class="line">    <span class="comment"># ä¾®è¾±æ€§æ–‡ä»¶çš„å‡ºç°æ¦‚ç‡ï¼Œå³train_categoryä¸­æ‰€æœ‰çš„1çš„ä¸ªæ•°ï¼Œ</span></span><br><span class="line">    <span class="comment"># ä»£è¡¨çš„å°±æ˜¯å¤šå°‘ä¸ªä¾®è¾±æ€§æ–‡ä»¶ï¼Œä¸æ–‡ä»¶çš„æ€»æ•°ç›¸é™¤å°±å¾—åˆ°äº†ä¾®è¾±æ€§æ–‡ä»¶çš„å‡ºç°æ¦‚ç‡</span></span><br><span class="line">    pos_abusive = np.<span class="built_in">sum</span>(train_category) / train_doc_num</span><br><span class="line">    <span class="comment"># å•è¯å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="comment"># åŸç‰ˆï¼Œå˜æˆonesæ˜¯ä¿®æ”¹ç‰ˆï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢æ•°å­—è¿‡å°æº¢å‡º</span></span><br><span class="line">    <span class="comment"># p0num = np.zeros(words_num)</span></span><br><span class="line">    <span class="comment"># p1num = np.zeros(words_num)</span></span><br><span class="line">    p0num = np.ones(words_num)</span><br><span class="line">    p1num = np.ones(words_num)</span><br><span class="line">    <span class="comment"># æ•´ä¸ªæ•°æ®é›†å•è¯å‡ºç°çš„æ¬¡æ•°ï¼ˆåŸæ¥æ˜¯0ï¼Œåé¢æ”¹æˆ2äº†ï¼‰</span></span><br><span class="line">    p0num_all = <span class="number">2.0</span></span><br><span class="line">    p1num_all = <span class="number">2.0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(train_doc_num):</span><br><span class="line">        <span class="comment"># éå†æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ä¾®è¾±æ€§æ–‡ä»¶ï¼Œå°±è®¡ç®—æ­¤ä¾®è¾±æ€§æ–‡ä»¶ä¸­å‡ºç°çš„ä¾®è¾±æ€§å•è¯çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">if</span> train_category[i] == <span class="number">1</span>:</span><br><span class="line">            p1num += train_mat[i]</span><br><span class="line">            p1num_all += np.<span class="built_in">sum</span>(train_mat[i])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            p0num += train_mat[i]</span><br><span class="line">            p0num_all += np.<span class="built_in">sum</span>(train_mat[i])</span><br><span class="line">    <span class="comment"># åé¢æ”¹æˆå– log å‡½æ•°</span></span><br><span class="line">    p1vec = np.log(p1num / p1num_all)</span><br><span class="line">    p0vec = np.log(p0num / p0num_all)</span><br><span class="line">    <span class="keyword">return</span> p0vec, p1vec, pos_abusive</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">classify_naive_bayes</span>(<span class="params">vec2classify, p0vec, p1vec, p_class1</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ä½¿ç”¨ç®—æ³•: </span></span><br><span class="line"><span class="string">        # å°†ä¹˜æ³•è½¬æ¢ä¸ºåŠ æ³•</span></span><br><span class="line"><span class="string">        ä¹˜æ³•: P(C|F1F2...Fn) = P(F1F2...Fn|C)P(C)/P(F1F2...Fn)</span></span><br><span class="line"><span class="string">        åŠ æ³•: P(F1|C)*P(F2|C)....P(Fn|C)P(C) -&gt; log(P(F1|C))+log(P(F2|C))+....+log(P(Fn|C))+log(P(C))</span></span><br><span class="line"><span class="string">    :param vec2classify: å¾…æµ‹æ•°æ®[0,1,1,1,1...]ï¼Œå³è¦åˆ†ç±»çš„å‘é‡</span></span><br><span class="line"><span class="string">    :param p0vec: ç±»åˆ«0ï¼Œå³æ­£å¸¸æ–‡æ¡£çš„[log(P(F1|C0)),log(P(F2|C0)),log(P(F3|C0)),log(P(F4|C0)),log(P(F5|C0))....]åˆ—è¡¨</span></span><br><span class="line"><span class="string">    :param p1vec: ç±»åˆ«1ï¼Œå³ä¾®è¾±æ€§æ–‡æ¡£çš„[log(P(F1|C1)),log(P(F2|C1)),log(P(F3|C1)),log(P(F4|C1)),log(P(F5|C1))....]åˆ—è¡¨</span></span><br><span class="line"><span class="string">    :param p_class1: ç±»åˆ«1ï¼Œä¾®è¾±æ€§æ–‡ä»¶çš„å‡ºç°æ¦‚ç‡</span></span><br><span class="line"><span class="string">    :return: ç±»åˆ«1 or 0</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># è®¡ç®—å…¬å¼  log(P(F1|C))+log(P(F2|C))+....+log(P(Fn|C))+log(P(C))</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨ NumPy æ•°ç»„æ¥è®¡ç®—ä¸¤ä¸ªå‘é‡ç›¸ä¹˜çš„ç»“æœï¼Œè¿™é‡Œçš„ç›¸ä¹˜æ˜¯æŒ‡å¯¹åº”å…ƒç´ ç›¸ä¹˜ï¼Œå³å…ˆå°†ä¸¤ä¸ªå‘é‡ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸ä¹˜ï¼Œç„¶åå°†ç¬¬2ä¸ªå…ƒç´ ç›¸ä¹˜ï¼Œä»¥æ­¤ç±»æ¨ã€‚</span></span><br><span class="line">    <span class="comment"># æˆ‘çš„ç†è§£æ˜¯: è¿™é‡Œçš„ vec2Classify * p1Vec çš„æ„æ€å°±æ˜¯å°†æ¯ä¸ªè¯ä¸å…¶å¯¹åº”çš„æ¦‚ç‡ç›¸å…³è”èµ·æ¥</span></span><br><span class="line">    <span class="comment"># å¯ä»¥ç†è§£ä¸º 1.å•è¯åœ¨è¯æ±‡è¡¨ä¸­çš„æ¡ä»¶ä¸‹ï¼Œæ–‡ä»¶æ˜¯good ç±»åˆ«çš„æ¦‚ç‡ ä¹Ÿå¯ä»¥ç†è§£ä¸º 2.åœ¨æ•´ä¸ªç©ºé—´ä¸‹ï¼Œæ–‡ä»¶æ—¢åœ¨è¯æ±‡è¡¨ä¸­åˆæ˜¯goodç±»åˆ«çš„æ¦‚ç‡</span></span><br><span class="line">    p1 = np.<span class="built_in">sum</span>(vec2classify * p1vec) + np.log(p_class1)</span><br><span class="line">    p0 = np.<span class="built_in">sum</span>(vec2classify * p0vec) + np.log(<span class="number">1</span> - p_class1)</span><br><span class="line">    <span class="keyword">if</span> p1 &gt; p0:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bag_words2vec</span>(<span class="params">vocab_list, input_set</span>):</span><br><span class="line">    <span class="comment"># æ³¨æ„å’ŒåŸæ¥çš„åšå¯¹æ¯”</span></span><br><span class="line">    result = [<span class="number">0</span>] * <span class="built_in">len</span>(vocab_list)</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> input_set:</span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">in</span> vocab_list:</span><br><span class="line">            result[vocab_list.index(word)] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;the word: &#123;&#125; is not in my vocabulary&#x27;</span>.<span class="built_in">format</span>(word))</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testing_naive_bayes</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æµ‹è¯•æœ´ç´ è´å¶æ–¯ç®—æ³•</span></span><br><span class="line"><span class="string">    :return: no return </span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 1. åŠ è½½æ•°æ®é›†</span></span><br><span class="line">    list_post, list_classes = load_data_set()</span><br><span class="line">    <span class="comment"># 2. åˆ›å»ºå•è¯é›†åˆ</span></span><br><span class="line">    vocab_list = create_vocab_list(list_post)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. è®¡ç®—å•è¯æ˜¯å¦å‡ºç°å¹¶åˆ›å»ºæ•°æ®çŸ©é˜µ</span></span><br><span class="line">    train_mat = []</span><br><span class="line">    <span class="keyword">for</span> post_in <span class="keyword">in</span> list_post:</span><br><span class="line">        train_mat.append(</span><br><span class="line">            <span class="comment"># è¿”å›m*len(vocab_list)çš„çŸ©é˜µï¼Œ è®°å½•çš„éƒ½æ˜¯0ï¼Œ1ä¿¡æ¯</span></span><br><span class="line">            <span class="comment"># å…¶å®å°±æ˜¯é‚£ä¸ªä¸œè¥¿çš„å¥å­å‘é‡ï¼ˆå°±æ˜¯data_seté‡Œé¢æ¯ä¸€è¡Œ,ä¹Ÿä¸ç®—å¥å­å§)</span></span><br><span class="line">            set_of_words2vec(vocab_list, post_in)</span><br><span class="line">        )</span><br><span class="line">    <span class="comment"># 4. è®­ç»ƒæ•°æ®</span></span><br><span class="line">    p0v, p1v, p_abusive = train_naive_bayes(np.array(train_mat), np.array(list_classes))</span><br><span class="line">    <span class="comment"># 5. æµ‹è¯•æ•°æ®</span></span><br><span class="line">    test_one = [<span class="string">&#x27;love&#x27;</span>, <span class="string">&#x27;my&#x27;</span>, <span class="string">&#x27;dalmation&#x27;</span>]</span><br><span class="line">    test_one_doc = np.array(set_of_words2vec(vocab_list, test_one))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;the result is: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(classify_naive_bayes(test_one_doc, p0v, p1v, p_abusive)))</span><br><span class="line">    test_two = [<span class="string">&#x27;stupid&#x27;</span>, <span class="string">&#x27;garbage&#x27;</span>]</span><br><span class="line">    test_two_doc = np.array(set_of_words2vec(vocab_list, test_two))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;the result is: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(classify_naive_bayes(test_two_doc, p0v, p1v, p_abusive)))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    testing_naive_bayes()</span><br></pre></td></tr></table></figure><div class="note info"><p>æ¥æºäº <a href="https://www.apachecn.org/">ApacheCN</a></p></div>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> Naive Bayes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DecisionTreeç®—æ³•ç®€æ</title>
      <link href="/2023/07/29/DecisionTree%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/"/>
      <url>/2023/07/29/DecisionTree%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="DecisionTreeç®—æ³•ç®€æ"><a href="#DecisionTreeç®—æ³•ç®€æ" class="headerlink" title="DecisionTreeç®—æ³•ç®€æ"></a>DecisionTreeç®—æ³•ç®€æ</h1><p>å†³ç­–æ ‘ï¼ˆDecision Treeï¼‰æ˜¯ä¸€ç§å¸¸è§çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå®ƒå¯ç”¨äºåˆ†ç±»å’Œå›å½’ä»»åŠ¡ã€‚å†³ç­–æ ‘é€šè¿‡å¯¹æ•°æ®è¿›è¡Œä¸€ç³»åˆ—é€»è¾‘åˆ¤æ–­ï¼Œæ„å»ºä¸€ä¸ªæ ‘çŠ¶ç»“æ„æ¥è¿›è¡Œå†³ç­–ã€‚åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œå†³ç­–æ ‘ç”¨äºé¢„æµ‹è¾“å…¥æ•°æ®æ‰€å±çš„ç±»åˆ«ï¼›åœ¨å›å½’é—®é¢˜ä¸­ï¼Œå®ƒç”¨äºé¢„æµ‹è¿ç»­å‹çš„è¾“å‡ºå€¼ã€‚</p><p>å†³ç­–æ ‘çš„æ„å»ºè¿‡ç¨‹åŸºäºè®­ç»ƒæ•°æ®ï¼Œé€šè¿‡é€‰æ‹©æœ€ä½³çš„ç‰¹å¾æ¥è¿›è¡ŒèŠ‚ç‚¹åˆ†è£‚ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªåœæ­¢æ¡ä»¶ã€‚æ„å»ºå¥½çš„å†³ç­–æ ‘èƒ½å¤Ÿæä¾›æ¸…æ™°çš„å†³ç­–è·¯å¾„ï¼Œæ˜“äºè§£é‡Šï¼Œå¹¶ä¸”å¯ä»¥å¾ˆå¥½åœ°å¤„ç†éçº¿æ€§å…³ç³»ã€‚</p><p>ä»¥ä¸‹æ˜¯å†³ç­–æ ‘ç®—æ³•çš„ç®€è¦åˆ†æï¼š</p><ol><li><p>ç‰¹å¾é€‰æ‹©ï¼šå†³ç­–æ ‘çš„æ ¸å¿ƒæ˜¯é€‰æ‹©æœ€ä½³çš„ç‰¹å¾æ¥è¿›è¡ŒèŠ‚ç‚¹çš„åˆ†è£‚ã€‚é€šå¸¸é‡‡ç”¨ä¿¡æ¯å¢ç›Šã€ä¿¡æ¯å¢ç›Šæ¯”ã€åŸºå°¼ä¸çº¯åº¦ç­‰æŒ‡æ ‡æ¥è¯„ä¼°ç‰¹å¾çš„é‡è¦æ€§ï¼Œé€‰æ‹©èƒ½å¤Ÿæœ€å¥½åœ°åˆ†éš”æ•°æ®çš„ç‰¹å¾ã€‚</p></li><li><p>èŠ‚ç‚¹åˆ†è£‚ï¼šå†³ç­–æ ‘æ ¹æ®ç‰¹å¾çš„å–å€¼å°†æ•°æ®åˆ’åˆ†ä¸ºä¸åŒçš„å­é›†ã€‚åˆ†è£‚è¿‡ç¨‹æŒç»­è¿›è¡Œï¼Œç›´åˆ°è¾¾åˆ°åœæ­¢æ¡ä»¶ï¼Œä¾‹å¦‚è¾¾åˆ°æœ€å¤§æ ‘æ·±åº¦ã€å­é›†ä¸­çš„æ ·æœ¬æ•°é‡è¿‡å°‘ç­‰ã€‚</p></li><li><p>æ ‘çš„æ„å»ºï¼šå†³ç­–æ ‘çš„æ„å»ºæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®ç‰¹å¾é€‰æ‹©å’ŒèŠ‚ç‚¹åˆ†è£‚çš„åŸåˆ™é€æ­¥æ„å»ºåˆ†æ”¯ï¼Œç›´åˆ°ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å†³ç­–æ ‘ã€‚</p></li><li><p>å‰ªæï¼šæ„å»ºå¥½çš„å†³ç­–æ ‘å¯èƒ½å­˜åœ¨è¿‡æ‹Ÿåˆé—®é¢˜ï¼ˆå¯¹è®­ç»ƒæ•°æ®è¿‡åº¦æ‹Ÿåˆï¼‰ã€‚å‰ªææ˜¯ä¸€ç§é€šè¿‡å»é™¤ä¸€äº›ä¸é‡è¦çš„èŠ‚ç‚¹æ¥å‡å°‘å¤æ‚åº¦ã€æé«˜æ³›åŒ–èƒ½åŠ›çš„æŠ€æœ¯ã€‚</p></li><li><p>é¢„æµ‹ï¼šç”¨æ–°çš„æ•°æ®æ ·æœ¬åœ¨å†³ç­–æ ‘ä¸Šè¿›è¡Œéå†ï¼Œæ ¹æ®å¶èŠ‚ç‚¹çš„ç±»åˆ«ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰æˆ–é¢„æµ‹å€¼ï¼ˆå›å½’é—®é¢˜ï¼‰è¿›è¡Œé¢„æµ‹ã€‚</p></li></ol><p>å†³ç­–æ ‘ç®—æ³•çš„ä¼˜ç‚¹åŒ…æ‹¬æ˜“äºè§£é‡Šã€å¤„ç†éçº¿æ€§å…³ç³»å’Œå¯¹ç¼ºå¤±å€¼ä¸æ•æ„Ÿã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œå¦‚å®¹æ˜“è¿‡æ‹Ÿåˆã€å¯¹å™ªå£°æ•æ„Ÿç­‰ã€‚ä¸ºäº†æ”¹è¿›å†³ç­–æ ‘ç®—æ³•ï¼Œäººä»¬å‘å±•äº†ä¸€äº›å˜ç§ï¼Œå¦‚éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰å’Œæ¢¯åº¦æå‡å†³ç­–æ ‘ï¼ˆGradient Boosting Decision Treeï¼‰ï¼Œä»¥æé«˜æ¨¡å‹çš„æ€§èƒ½å’Œé²æ£’æ€§ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œå†³ç­–æ ‘æ˜¯ä¸€ç§å¼ºå¤§çš„ç®—æ³•ï¼Œç‰¹åˆ«é€‚ç”¨äºè§£å†³åˆ†ç±»å’Œå›å½’é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å­¦ä¹ æœºå™¨å­¦ä¹ ç®—æ³•åŸºç¡€çš„é‡è¦å†…å®¹ä¹‹ä¸€ã€‚</p><h3 id="è®¾è®¡åˆ°çš„æ•°å­¦å…¬å¼"><a href="#è®¾è®¡åˆ°çš„æ•°å­¦å…¬å¼" class="headerlink" title="è®¾è®¡åˆ°çš„æ•°å­¦å…¬å¼"></a>è®¾è®¡åˆ°çš„æ•°å­¦å…¬å¼</h3><p>å½“æ¶‰åŠåˆ°å†³ç­–æ ‘åŠå…¶ç›¸å…³ç®—æ³•æ—¶ï¼Œå¯èƒ½ä¼šä½¿ç”¨ä»¥ä¸‹å…¬å¼ã€‚ä¸‹é¢æ˜¯è¿™äº›å…¬å¼çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œä½¿ç”¨MathJaxè¿›è¡Œè¡¨ç¤ºï¼š</p><ol><li><p><strong>ä¿¡æ¯ç†µï¼ˆEntropyï¼‰</strong>ï¼šè¡¡é‡æ•°æ®é›†çš„æ··ä¹±ç¨‹åº¦ï¼Œå¯¹äºåˆ†ç±»é—®é¢˜çš„ç‰¹å¾é€‰æ‹©å¾ˆé‡è¦ã€‚</p><p> $$<br> H(X) &#x3D; -\sum_{i&#x3D;1}^{n} p(x_i) \log(p(x_i))<br> $$</p><p> å…¶ä¸­ï¼Œ$H(X)$è¡¨ç¤ºæ•°æ®é›†$X$çš„ä¿¡æ¯ç†µï¼Œ$p(x_i)$æ˜¯æ•°æ®é›†$X$ä¸­ç±»åˆ«ä¸º$x_i$çš„æ ·æœ¬å æ¯”ã€‚</p></li><li><p><strong>ä¿¡æ¯å¢ç›Šï¼ˆInformation Gainï¼‰</strong>ï¼šè¡¨ç¤ºä½¿ç”¨æŸä¸ªç‰¹å¾å¯¹æ•°æ®é›†è¿›è¡Œåˆ’åˆ†æ‰€è·å¾—çš„ä¿¡æ¯ç†µå‡å°‘çš„ç¨‹åº¦ï¼Œç”¨äºç‰¹å¾é€‰æ‹©ã€‚</p><p> $$<br> \text{Information Gain}(X, \text{feature}) &#x3D; H(X) - \sum_{v \in \text{values}(\text{feature})} \frac{|X_v|}{|X|} H(X_v)<br> $$</p><p> å…¶ä¸­ï¼Œ$H(X)$è¡¨ç¤ºæ•°æ®é›†$X$çš„ä¿¡æ¯ç†µï¼Œ$X_v$è¡¨ç¤ºä½¿ç”¨ç‰¹å¾$\text{feature}$ä¸­å–å€¼ä¸º$v$çš„æ ·æœ¬å­é›†ï¼Œ$\text{values}(\text{feature})$è¡¨ç¤ºç‰¹å¾$\text{feature}$çš„æ‰€æœ‰å–å€¼ã€‚</p></li><li><p><strong>åŸºå°¼ä¸çº¯åº¦ï¼ˆGini Impurityï¼‰</strong>ï¼šå¦ä¸€ç§è¡¡é‡æ•°æ®é›†æ··ä¹±ç¨‹åº¦çš„æ–¹æ³•ï¼Œç”¨äºç‰¹å¾é€‰æ‹©ã€‚</p><p> $$<br> \text{Gini}(X) &#x3D; 1 - \sum_{i&#x3D;1}^{n} p(x_i)^2<br> $$</p><p> å…¶ä¸­ï¼Œ$\text{Gini}(X)$è¡¨ç¤ºæ•°æ®é›†$X$çš„åŸºå°¼ä¸çº¯åº¦ï¼Œ$p(x_i)$æ˜¯æ•°æ®é›†$X$ä¸­ç±»åˆ«ä¸º$x_i$çš„æ ·æœ¬å æ¯”ã€‚</p></li><li><p><strong>å›å½’æ ‘çš„å‡æ–¹è¯¯å·®ï¼ˆMean Squared Errorï¼ŒMSEï¼‰</strong>ï¼šå›å½’æ ‘ä½¿ç”¨çš„æŸå¤±å‡½æ•°ï¼Œç”¨äºè¡¡é‡é¢„æµ‹å€¼ä¸å®é™…å€¼ä¹‹é—´çš„å·®å¼‚ã€‚<br> $$<br> \text{MSE}(X) &#x3D; \frac{1}{n} \sum_{i&#x3D;1}^{n} (y_i - \bar{y})^2<br> $$</p><p> å…¶ä¸­ï¼Œ$\text{MSE}(X)$è¡¨ç¤ºæ•°æ®é›†$X$çš„å‡æ–¹è¯¯å·®ï¼Œ$n$æ˜¯æ ·æœ¬æ•°é‡ï¼Œ$y_i$æ˜¯ç¬¬$i$ä¸ªæ ·æœ¬çš„å®é™…è¾“å‡ºå€¼ï¼Œ$\bar{y}$æ˜¯æ ·æœ¬è¾“å‡ºå€¼çš„å‡å€¼ã€‚</p></li><li><p><strong>å†³ç­–æ ‘çš„é¢„æµ‹</strong>ï¼šå¯¹äºå›å½’æ ‘ï¼Œé¢„æµ‹å€¼ä¸ºå¶èŠ‚ç‚¹ä¸Šè®­ç»ƒæ ·æœ¬è¾“å‡ºå€¼çš„å¹³å‡å€¼ï¼›å¯¹äºåˆ†ç±»æ ‘ï¼Œé¢„æµ‹å€¼ä¸ºå¶èŠ‚ç‚¹ä¸Šå‡ºç°æœ€é¢‘ç¹çš„ç±»åˆ«ã€‚</p></li></ol><h3 id="æ„å»ºæ­¥éª¤"><a href="#æ„å»ºæ­¥éª¤" class="headerlink" title="æ„å»ºæ­¥éª¤"></a>æ„å»ºæ­¥éª¤</h3><ol><li><p><strong>æ•°æ®å‡†å¤‡</strong>ï¼š</p><ul><li>æ”¶é›†æ•°æ®é›†ï¼šè·å–ç”¨äºè®­ç»ƒå’Œæµ‹è¯•çš„æ•°æ®é›†ã€‚</li><li>æ•°æ®æ¸…æ´—ï¼šå¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ç­‰æ•°æ®é—®é¢˜ï¼Œç¡®ä¿æ•°æ®è´¨é‡ã€‚</li><li>æ•°æ®åˆ’åˆ†ï¼šå°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œç”¨äºæ¨¡å‹çš„è®­ç»ƒå’Œè¯„ä¼°ã€‚</li></ul></li><li><p><strong>ç‰¹å¾é€‰æ‹©</strong>ï¼š</p><ul><li>æ ¹æ®å…·ä½“ä»»åŠ¡å’Œç‰¹å¾çš„æ€§è´¨ï¼Œé€‰æ‹©åˆé€‚çš„ç‰¹å¾ç”¨äºæ„å»ºå†³ç­–æ ‘ã€‚</li><li>ä½¿ç”¨ä¿¡æ¯å¢ç›Šã€åŸºå°¼ä¸çº¯åº¦ç­‰æŒ‡æ ‡è¯„ä¼°ç‰¹å¾çš„é‡è¦æ€§ï¼Œé€‰æ‹©æœ€ä½³çš„åˆ’åˆ†ç‰¹å¾ã€‚</li></ul></li><li><p><strong>æ„å»ºå†³ç­–æ ‘</strong>ï¼š</p><ul><li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®é€‰å®šçš„ç‰¹å¾é€‰æ‹©æ ‡å‡†è¿›è¡ŒèŠ‚ç‚¹åˆ†è£‚ï¼Œç”Ÿæˆå­èŠ‚ç‚¹ã€‚</li><li>é€’å½’åœ°å¯¹å­èŠ‚ç‚¹è¿›è¡Œåˆ†è£‚ï¼Œç›´åˆ°æ»¡è¶³åœæ­¢æ¡ä»¶ï¼Œä¾‹å¦‚è¾¾åˆ°æœ€å¤§æ·±åº¦æˆ–èŠ‚ç‚¹æ ·æœ¬æ•°é‡è¿‡å°‘ã€‚</li></ul></li><li><p><strong>å‰ªæ</strong>ï¼ˆå¯é€‰ï¼‰ï¼š</p><ul><li>æ„å»ºå¥½çš„å†³ç­–æ ‘å¯èƒ½å¯¹è®­ç»ƒæ•°æ®è¿‡æ‹Ÿåˆï¼Œå‰ªææ˜¯ä¸€ç§é™ä½è¿‡æ‹Ÿåˆé£é™©çš„æŠ€æœ¯ã€‚</li><li>å¯ä»¥é‡‡ç”¨é¢„å‰ªæï¼ˆåœ¨æ„å»ºæ ‘çš„è¿‡ç¨‹ä¸­è¿›è¡Œå‰ªæï¼‰æˆ–åå‰ªæï¼ˆæ„å»ºå®Œæ•´æ ‘åå†è¿›è¡Œå‰ªæï¼‰ã€‚</li></ul></li><li><p><strong>é¢„æµ‹</strong>ï¼š</p><ul><li>ä½¿ç”¨è®­ç»ƒå¥½çš„å†³ç­–æ ‘å¯¹æ–°æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚</li><li>å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œæ ¹æ®å†³ç­–æ ‘çš„åˆ†æ”¯å’Œå¶èŠ‚ç‚¹çš„ç±»åˆ«è¿›è¡Œåˆ†ç±»é¢„æµ‹ã€‚</li><li>å¯¹äºå›å½’é—®é¢˜ï¼Œæ ¹æ®å†³ç­–æ ‘çš„å¶èŠ‚ç‚¹ä¸Šè®­ç»ƒæ ·æœ¬è¾“å‡ºå€¼çš„å¹³å‡å€¼è¿›è¡Œå›å½’é¢„æµ‹ã€‚</li></ul></li><li><p><strong>æ¨¡å‹è¯„ä¼°</strong>ï¼š</p><ul><li>ä½¿ç”¨æµ‹è¯•é›†å¯¹è®­ç»ƒå¥½çš„å†³ç­–æ ‘è¿›è¡Œæ€§èƒ½è¯„ä¼°ï¼Œå¯ä»¥ä½¿ç”¨å‡†ç¡®ç‡ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰æˆ–å‡æ–¹è¯¯å·®ï¼ˆå›å½’é—®é¢˜ï¼‰ç­‰æŒ‡æ ‡ã€‚</li></ul></li><li><p><strong>ä¼˜åŒ–</strong>ï¼š</p><ul><li>æ ¹æ®æ¨¡å‹è¯„ä¼°ç»“æœï¼Œå¯ä»¥è°ƒæ•´å†³ç­–æ ‘çš„å‚æ•°ï¼Œé€‰æ‹©ä¸åŒçš„ç‰¹å¾ï¼Œæˆ–å°è¯•å…¶ä»–ä¼˜åŒ–æ–¹æ³•ï¼Œä»¥æé«˜æ¨¡å‹æ€§èƒ½ã€‚</li></ul></li><li><p><strong>åº”ç”¨</strong>ï¼š</p><ul><li>å°†è®­ç»ƒå¥½çš„å†³ç­–æ ‘åº”ç”¨äºå®é™…é—®é¢˜ä¸­ï¼Œè¿›è¡Œåˆ†ç±»ã€å›å½’ç­‰é¢„æµ‹ä»»åŠ¡ã€‚</li></ul></li></ol><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> operator</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> log</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> decisionTreePlot <span class="keyword">as</span> dtPlot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DecisionTree</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.myTree = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">calcShannonEnt</span>(<span class="params">self, dataSet</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è®¡ç®—ç»™å®šæ•°æ®é›†çš„é¦™å†œç†µ</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        numEntries = <span class="built_in">len</span>(dataSet)</span><br><span class="line">        labelCounts = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> featVec <span class="keyword">in</span> dataSet:</span><br><span class="line">            currentLabel = featVec[-<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> currentLabel <span class="keyword">not</span> <span class="keyword">in</span> labelCounts.keys():</span><br><span class="line">                labelCounts[currentLabel] = <span class="number">0</span></span><br><span class="line">            labelCounts[currentLabel] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        shannonEnt = <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">for</span> key <span class="keyword">in</span> labelCounts:</span><br><span class="line">            prob = <span class="built_in">float</span>(labelCounts[key]) / numEntries</span><br><span class="line">            shannonEnt -= prob * log(prob, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> shannonEnt</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">splitDataSet</span>(<span class="params">self, dataSet, index, value</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆ’åˆ†æ•°æ®é›†</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        retDataSet = []</span><br><span class="line">        <span class="keyword">for</span> featVec <span class="keyword">in</span> dataSet:</span><br><span class="line">            <span class="keyword">if</span> featVec[index] == value:</span><br><span class="line">                reducedFeatVec = featVec[:index]</span><br><span class="line">                reducedFeatVec.extend(featVec[index + <span class="number">1</span>:])</span><br><span class="line">                retDataSet.append(reducedFeatVec)</span><br><span class="line">        <span class="keyword">return</span> retDataSet</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">chooseBestFeatureToSplit</span>(<span class="params">self, dataSet</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        é€‰æ‹©åˆ‡åˆ†æ•°æ®é›†çš„æœ€ä½³ç‰¹å¾</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        numFeatures = <span class="built_in">len</span>(dataSet[<span class="number">0</span>]) - <span class="number">1</span></span><br><span class="line">        baseEntropy = self.calcShannonEnt(dataSet)</span><br><span class="line">        bestInfoGain, bestFeature = <span class="number">0.0</span>, -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(numFeatures):</span><br><span class="line">            featList = [example[i] <span class="keyword">for</span> example <span class="keyword">in</span> dataSet]</span><br><span class="line">            uniqueVals = <span class="built_in">set</span>(featList)</span><br><span class="line">            newEntropy = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> value <span class="keyword">in</span> uniqueVals:</span><br><span class="line">                subDataSet = self.splitDataSet(dataSet, i, value)</span><br><span class="line">                prob = <span class="built_in">len</span>(subDataSet) / <span class="built_in">float</span>(<span class="built_in">len</span>(dataSet))</span><br><span class="line">                newEntropy += prob * self.calcShannonEnt(subDataSet)</span><br><span class="line"></span><br><span class="line">            infoGain = baseEntropy - newEntropy</span><br><span class="line">            <span class="keyword">if</span> infoGain &gt; bestInfoGain:</span><br><span class="line">                bestInfoGain = infoGain</span><br><span class="line">                bestFeature = i</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> bestFeature</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">majorityCnt</span>(<span class="params">self, classList</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        é€‰æ‹©å‡ºç°æ¬¡æ•°æœ€å¤šçš„ä¸€ä¸ªç»“æœ</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        classCount = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> vote <span class="keyword">in</span> classList:</span><br><span class="line">            <span class="keyword">if</span> vote <span class="keyword">not</span> <span class="keyword">in</span> classCount.keys():</span><br><span class="line">                classCount[vote] = <span class="number">0</span></span><br><span class="line">            classCount[vote] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        sortedClassCount = <span class="built_in">sorted</span>(classCount.items(), key=operator.itemgetter(<span class="number">1</span>), reverse=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> sortedClassCount[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">createTree</span>(<span class="params">self, dataSet, labels</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆ›å»ºå†³ç­–æ ‘</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        classList = [example[-<span class="number">1</span>] <span class="keyword">for</span> example <span class="keyword">in</span> dataSet]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> classList.count(classList[<span class="number">0</span>]) == <span class="built_in">len</span>(classList):</span><br><span class="line">            <span class="keyword">return</span> classList[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(dataSet[<span class="number">0</span>]) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> self.majorityCnt(classList)</span><br><span class="line"></span><br><span class="line">        bestFeat = self.chooseBestFeatureToSplit(dataSet)</span><br><span class="line">        bestFeatLabel = labels[bestFeat]</span><br><span class="line">        myTree = &#123;bestFeatLabel: &#123;&#125;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">del</span> (labels[bestFeat])</span><br><span class="line"></span><br><span class="line">        featValues = [example[bestFeat] <span class="keyword">for</span> example <span class="keyword">in</span> dataSet]</span><br><span class="line">        uniqueVals = <span class="built_in">set</span>(featValues)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> value <span class="keyword">in</span> uniqueVals:</span><br><span class="line">            subLabels = labels[:]</span><br><span class="line">            myTree[bestFeatLabel][value] = self.createTree(self.splitDataSet(dataSet, bestFeat, value), subLabels)</span><br><span class="line"></span><br><span class="line">        self.myTree = myTree</span><br><span class="line">        <span class="keyword">return</span> self.myTree</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">classify</span>(<span class="params">self, inputTree, featLabels, testVec</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å¯¹æ–°æ•°æ®è¿›è¡Œåˆ†ç±»</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        firstStr = <span class="built_in">list</span>(inputTree.keys())[<span class="number">0</span>]</span><br><span class="line">        secondDict = inputTree[firstStr]</span><br><span class="line">        featIndex = featLabels.index(firstStr)</span><br><span class="line">        key = testVec[featIndex]</span><br><span class="line">        valueOfFeat = secondDict[key]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(valueOfFeat, <span class="built_in">dict</span>):</span><br><span class="line">            classLabel = self.classify(valueOfFeat, featLabels, testVec)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            classLabel = valueOfFeat</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> classLabel</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">storeTree</span>(<span class="params">self, inputTree, filename</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å°†è®­ç»ƒå¥½çš„å†³ç­–æ ‘æ¨¡å‹å­˜å‚¨èµ·æ¥ï¼Œä½¿ç”¨ pickle æ¨¡å—</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">import</span> pickle</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fw:</span><br><span class="line">            pickle.dump(inputTree, fw)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">grabTree</span>(<span class="params">self, filename</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å°†ä¹‹å‰å­˜å‚¨çš„å†³ç­–æ ‘æ¨¡å‹ä½¿ç”¨ pickle æ¨¡å—è¿˜åŸå‡ºæ¥</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">import</span> pickle</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fr:</span><br><span class="line">            <span class="keyword">return</span> pickle.load(fr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ContactLensesTest</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        é¢„æµ‹éšå½¢çœ¼é•œçš„æµ‹è¯•ä»£ç ï¼Œå¹¶å°†ç»“æœç”»å‡ºæ¥</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(self.myTree)</span><br><span class="line">        self.createPlot()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">createPlot</span>(<span class="params">self</span>):</span><br><span class="line">        fig = plt.figure(<span class="number">1</span>, facecolor=<span class="string">&#x27;green&#x27;</span>)</span><br><span class="line">        fig.clf()</span><br><span class="line"></span><br><span class="line">        axprops = <span class="built_in">dict</span>(xticks=[], yticks=[])</span><br><span class="line">        dtPlot.createPlot.ax1 = plt.subplot(<span class="number">111</span>, frameon=<span class="literal">False</span>, **axprops)</span><br><span class="line"></span><br><span class="line">        dtPlot.plotTree.totalW = <span class="built_in">float</span>(dtPlot.getNumLeafs(self.myTree))</span><br><span class="line">        dtPlot.plotTree.totalD = <span class="built_in">float</span>(dtPlot.getTreeDepth(self.myTree))</span><br><span class="line">        dtPlot.plotTree.xOff = -<span class="number">0.5</span> / dtPlot.plotTree.totalW</span><br><span class="line">        dtPlot.plotTree.yOff = <span class="number">1.0</span></span><br><span class="line">        dtPlot.plotTree(self.myTree, (<span class="number">0.5</span>, <span class="number">1.0</span>), <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    fr = <span class="built_in">open</span>(<span class="string">&#x27;3.DecisionTree/lenses.txt&#x27;</span>)</span><br><span class="line">    lenses = [inst.strip().split(<span class="string">&#x27;\t&#x27;</span>) <span class="keyword">for</span> inst <span class="keyword">in</span> fr.readlines()]</span><br><span class="line">    lensesLabels = [<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;prescript&#x27;</span>, <span class="string">&#x27;astigmatic&#x27;</span>, <span class="string">&#x27;tearRate&#x27;</span>]</span><br><span class="line">    dt = DecisionTree()</span><br><span class="line">    dt.createTree(lenses, lensesLabels)</span><br><span class="line">    <span class="built_in">print</span>(dt.myTree)</span><br><span class="line">    dt.createPlot()</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ•°æ®</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">youngmyopenoreducedno lenses</span><br><span class="line">youngmyopenonormalsoft</span><br><span class="line">youngmyopeyesreducedno lenses</span><br><span class="line">youngmyopeyesnormalhard</span><br><span class="line">younghypernoreducedno lenses</span><br><span class="line">younghypernonormalsoft</span><br><span class="line">younghyperyesreducedno lenses</span><br><span class="line">younghyperyesnormalhard</span><br><span class="line">premyopenoreducedno lenses</span><br><span class="line">premyopenonormalsoft</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> Decision Tree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>matplotlibç®€æ</title>
      <link href="/2023/07/27/matplotlib%E7%AE%80%E6%9E%90/"/>
      <url>/2023/07/27/matplotlib%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="matplotlibç®€æ"><a href="#matplotlibç®€æ" class="headerlink" title="matplotlibç®€æ"></a>matplotlibç®€æ</h1><p>Matplotlibæ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºé™æ€ã€åŠ¨æ€å’Œäº¤äº’å¼å›¾è¡¨çš„Pythonç»˜å›¾åº“ã€‚å®ƒæä¾›äº†å¹¿æ³›çš„åŠŸèƒ½ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå¯è§†åŒ–æ•°æ®å’Œç»“æœï¼Œä»ç®€å•çš„çº¿æ¡å›¾å’Œæ•£ç‚¹å›¾åˆ°å¤æ‚çš„å›¾å½¢ï¼Œå¦‚æ¡å½¢å›¾ã€ç›´æ–¹å›¾ã€é¥¼å›¾ã€3Då›¾å½¢ç­‰ã€‚</p><p>Matplotlibæ˜¯Pythonæ•°æ®ç§‘å­¦ç”Ÿæ€ç³»ç»Ÿä¸­æœ€æµè¡Œçš„ç»˜å›¾åº“ä¹‹ä¸€ï¼Œå®ƒæ”¯æŒå‡ ä¹æ‰€æœ‰æ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”å¯ä»¥ä¸å¤šä¸ªå›¾å½¢å·¥å…·åŒ…å’Œç•Œé¢ç»“åˆä½¿ç”¨ï¼Œå¦‚NumPyã€Pandasã€SciPyç­‰ã€‚æ­¤å¤–ï¼ŒMatplotlibè¿˜å¯ä»¥åµŒå…¥åˆ°å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰å·¥å…·åŒ…ä¸­ï¼Œå¦‚Tkinterã€PyQtç­‰ï¼Œä»è€Œå®ç°äº¤äº’å¼å›¾å½¢åº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚</p><p>Matplotlibçš„ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬æ˜“äºä½¿ç”¨ã€çµæ´»æ€§å’ŒåŠŸèƒ½å¼ºå¤§ã€‚ä½¿ç”¨Matplotlibï¼Œæ‚¨å¯ä»¥ä»¥é«˜è´¨é‡å’Œä¸“ä¸šçš„æ–¹å¼å±•ç¤ºæ•°æ®ï¼Œè¿™å¯¹äºæ•°æ®åˆ†æã€ç§‘å­¦ç ”ç©¶ã€å·¥ç¨‹å’Œå…¶ä»–é¢†åŸŸéƒ½æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><div class="tagLink"><a class="link-card" title="Matplotlibå®˜ç½‘" href="https://matplotlib.org/"><span class="link-card-backdrop" style="background-image: url(https://matplotlib.org/_static/logo_light.svg)"></span><div class="left"><img src="https://matplotlib.org/_static/logo_light.svg" class="lazyload placeholder" data-srcset="https://matplotlib.org/_static/logo_light.svg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">Matplotlibå®˜ç½‘</p><p class="url">https://matplotlib.org/</p></div></a></div><h2 id="ç»˜å›¾ç±»å‹"><a href="#ç»˜å›¾ç±»å‹" class="headerlink" title="ç»˜å›¾ç±»å‹"></a>ç»˜å›¾ç±»å‹</h2><h3 id="ç»˜å›¾"><a href="#ç»˜å›¾" class="headerlink" title="ç»˜å›¾"></a>ç»˜å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">100</span>)</span><br><span class="line">y = <span class="number">4</span> + <span class="number">2</span> * np.sin(<span class="number">2</span> * x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.plot(x, y, linewidth=<span class="number">2.0</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x = np.linspace(0, 10, 100)</code>: ä½¿ç”¨NumPyçš„<code>linspace</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªåŒ…å«100ä¸ªç‚¹çš„ç­‰é—´éš”æ•°ç»„ï¼Œä»0åˆ°10ã€‚è¿™ä¸ªæ•°ç»„å°†ä½œä¸ºxè½´çš„å€¼ã€‚</p></li><li><p><code>y = 4 + 2 * np.sin(2 * x)</code>: ä½¿ç”¨NumPyçš„<code>sin</code>å‡½æ•°å¯¹<code>2 * x</code>è¿›è¡Œæ­£å¼¦è¿ç®—ï¼Œå¹¶ä¹˜ä»¥2ï¼Œç„¶åå†åŠ ä¸Š4ï¼Œå¾—åˆ°yè½´çš„å€¼ã€‚è¿™ä¸ªè®¡ç®—çš„ç»“æœæ˜¯ä½¿yå€¼éšç€xè½´çš„å¢åŠ è€Œå‘¨æœŸæ€§åœ°ä¸Šä¸‹æ³¢åŠ¨çš„ä¸€ç»„æ•°æ®ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.plot(x, y, linewidth=2.0)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šç»˜åˆ¶æŠ˜çº¿å›¾ï¼Œä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„xå’Œyæ•°ç»„ä½œä¸ºæ•°æ®ï¼Œå¹¶è®¾ç½®çº¿å®½ä¸º2.0ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: è®¾ç½®åæ ‡è½´çš„èŒƒå›´å’Œåˆ»åº¦ã€‚xè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚yè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><img src="https://matplotlib.org/stable/_images/sphx_glr_plot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_plot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="plot"><h3 id="æ•£ç‚¹å›¾"><a href="#æ•£ç‚¹å›¾" class="headerlink" title="æ•£ç‚¹å›¾"></a>æ•£ç‚¹å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make the data</span></span><br><span class="line">np.random.seed(<span class="number">3</span>)</span><br><span class="line">x = <span class="number">4</span> + np.random.normal(<span class="number">0</span>, <span class="number">2</span>, <span class="number">24</span>)</span><br><span class="line">y = <span class="number">4</span> + np.random.normal(<span class="number">0</span>, <span class="number">2</span>, <span class="built_in">len</span>(x))</span><br><span class="line"><span class="comment"># size and color:</span></span><br><span class="line">sizes = np.random.uniform(<span class="number">15</span>, <span class="number">80</span>, <span class="built_in">len</span>(x))</span><br><span class="line">colors = np.random.uniform(<span class="number">15</span>, <span class="number">80</span>, <span class="built_in">len</span>(x))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.scatter(x, y, s=sizes, c=colors, vmin=<span class="number">0</span>, vmax=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(3)</code>: è®¾ç½®éšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ï¼Œè¿™æ ·æ¯æ¬¡è¿è¡Œä»£ç éƒ½èƒ½å¾—åˆ°ç›¸åŒçš„éšæœºæ•°æ®ã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯ç»“æœçš„å¯å¤ç°æ€§ã€‚</p></li><li><p><code>x = 4 + np.random.normal(0, 2, 24)</code>: ä½¿ç”¨NumPyçš„<code>random.normal</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªåŒ…å«24ä¸ªéšæœºæ•°çš„æ•°ç»„ï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»å‡å€¼ä¸º0ã€æ ‡å‡†å·®ä¸º2çš„æ­£æ€åˆ†å¸ƒä¸­æŠ½å–çš„ï¼Œå¹¶å°†æ¯ä¸ªæ•°å€¼éƒ½åŠ ä¸Š4ã€‚è¿™æ ·ç”Ÿæˆäº†ä¸€ç»„å¸¦æœ‰åç§»çš„éšæœºæ•°æ®ï¼Œç”¨ä½œxè½´çš„å€¼ã€‚</p></li><li><p><code>y = 4 + np.random.normal(0, 2, len(x))</code>: åŒæ ·ï¼Œä½¿ç”¨NumPyçš„<code>random.normal</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä¸xè½´æ•°æ®é•¿åº¦ç›¸åŒçš„éšæœºæ•°æ•°ç»„ï¼Œå¹¶è¿›è¡Œåç§»ã€‚è¿™æ ·ç”Ÿæˆäº†ä¸€ç»„å¸¦æœ‰åç§»çš„éšæœºæ•°æ®ï¼Œç”¨ä½œyè½´çš„å€¼ã€‚</p></li><li><p><code>sizes = np.random.uniform(15, 80, len(x))</code>: ä½¿ç”¨NumPyçš„<code>random.uniform</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä¸xè½´æ•°æ®é•¿åº¦ç›¸åŒçš„æ•°ç»„ï¼Œå…¶ä¸­çš„æ•°å€¼åœ¨15åˆ°80ä¹‹é—´ï¼Œç”¨ä½œæ•£ç‚¹çš„å¤§å°ã€‚</p></li><li><p><code>colors = np.random.uniform(15, 80, len(x))</code>: ä½¿ç”¨NumPyçš„<code>random.uniform</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä¸xè½´æ•°æ®é•¿åº¦ç›¸åŒçš„æ•°ç»„ï¼Œå…¶ä¸­çš„æ•°å€¼åœ¨15åˆ°80ä¹‹é—´ï¼Œç”¨ä½œæ•£ç‚¹çš„é¢œè‰²ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.scatter(x, y, s=sizes, c=colors, vmin=0, vmax=100)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šç»˜åˆ¶æ•£ç‚¹å›¾ã€‚ä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„xå’Œyæ•°ç»„ä½œä¸ºæ•°æ®ï¼Œå¹¶ä½¿ç”¨<code>sizes</code>æ•°ç»„è®¾ç½®æ•£ç‚¹çš„å¤§å°ï¼Œä½¿ç”¨<code>colors</code>æ•°ç»„è®¾ç½®æ•£ç‚¹çš„é¢œè‰²ã€‚<code>vmin</code>å’Œ<code>vmax</code>å‚æ•°ç”¨äºè®¾ç½®é¢œè‰²æ˜ å°„èŒƒå›´ï¼Œè¿™é‡Œè®¾ç½®ä¸º0å’Œ100ï¼Œå³é¢œè‰²èŒƒå›´åœ¨15åˆ°80ä¹‹é—´ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: è®¾ç½®åæ ‡è½´çš„èŒƒå›´å’Œåˆ»åº¦ã€‚xè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚yè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><img src="https://matplotlib.org/stable/_images/sphx_glr_scatter_plot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_scatter_plot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="scatter"><h3 id="æ¡å½¢å›¾"><a href="#æ¡å½¢å›¾" class="headerlink" title="æ¡å½¢å›¾"></a>æ¡å½¢å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">x = <span class="number">0.5</span> + np.arange(<span class="number">8</span>)</span><br><span class="line">y = [<span class="number">4.8</span>, <span class="number">5.5</span>, <span class="number">3.5</span>, <span class="number">4.6</span>, <span class="number">6.5</span>, <span class="number">6.6</span>, <span class="number">2.6</span>, <span class="number">3.0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.bar(x, y, width=<span class="number">1</span>, edgecolor=<span class="string">&quot;white&quot;</span>, linewidth=<span class="number">0.7</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x = 0.5 + np.arange(8)</code>: ä½¿ç”¨NumPyçš„<code>arange</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä»0.5å¼€å§‹ã€é—´éš”ä¸º1çš„é•¿åº¦ä¸º8çš„æ•°ç»„ã€‚è¿™å°†ä½œä¸ºxè½´çš„æ•°æ®ã€‚</p></li><li><p><code>y = [4.8, 5.5, 3.5, 4.6, 6.5, 6.6, 2.6, 3.0]</code>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«8ä¸ªæ•°å€¼çš„åˆ—è¡¨ï¼Œè¿™äº›æ•°å€¼å°†ä½œä¸ºyè½´çš„æ•°æ®ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.bar(x, y, width=1, edgecolor=&quot;white&quot;, linewidth=0.7)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šç»˜åˆ¶æ¡å½¢å›¾ã€‚ä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„xå’Œyæ•°ç»„ä½œä¸ºæ•°æ®ï¼Œ<code>width=1</code>è®¾ç½®æ¡å½¢çš„å®½åº¦ä¸º1ï¼Œ<code>edgecolor=&quot;white&quot;</code>è®¾ç½®æ¡å½¢çš„è¾¹ç¼˜é¢œè‰²ä¸ºç™½è‰²ï¼Œ<code>linewidth=0.7</code>è®¾ç½®æ¡å½¢çš„è¾¹ç¼˜çº¿å®½ä¸º0.7ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: è®¾ç½®åæ ‡è½´çš„èŒƒå›´å’Œåˆ»åº¦ã€‚xè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚yè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><img src="https://matplotlib.org/stable/_images/sphx_glr_bar_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_bar_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="bar"><h3 id="æ£‰æ£’å›¾"><a href="#æ£‰æ£’å›¾" class="headerlink" title="æ£‰æ£’å›¾"></a>æ£‰æ£’å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">x = <span class="number">0.5</span> + np.arange(<span class="number">8</span>)</span><br><span class="line">y = [<span class="number">4.8</span>, <span class="number">5.5</span>, <span class="number">3.5</span>, <span class="number">4.6</span>, <span class="number">6.5</span>, <span class="number">6.6</span>, <span class="number">2.6</span>, <span class="number">3.0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.stem(x, y)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x = 0.5 + np.arange(8)</code>: ä½¿ç”¨NumPyçš„<code>arange</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä»0.5å¼€å§‹ã€é—´éš”ä¸º1çš„é•¿åº¦ä¸º8çš„æ•°ç»„ã€‚è¿™å°†ä½œä¸ºxè½´çš„æ•°æ®ã€‚</p></li><li><p><code>y = [4.8, 5.5, 3.5, 4.6, 6.5, 6.6, 2.6, 3.0]</code>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«8ä¸ªæ•°å€¼çš„åˆ—è¡¨ï¼Œè¿™äº›æ•°å€¼å°†ä½œä¸ºyè½´çš„æ•°æ®ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.stem(x, y)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šç»˜åˆ¶æ£‰æ£’å›¾ï¼ˆstem plotï¼‰ã€‚ä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„xå’Œyæ•°ç»„ä½œä¸ºæ•°æ®ï¼Œæ£‰æ£’å›¾å±•ç¤ºäº†æ¯ä¸ªxåæ ‡å¯¹åº”çš„yå€¼ï¼Œå¹¶é€šè¿‡å‚ç›´çº¿è¿æ¥æ¯ä¸ªç‚¹åˆ°xè½´ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: è®¾ç½®åæ ‡è½´çš„èŒƒå›´å’Œåˆ»åº¦ã€‚xè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚yè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><img src="https://matplotlib.org/stable/_images/sphx_glr_stem_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_stem_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="stem"><h3 id="é˜¶æ¢¯å›¾"><a href="#é˜¶æ¢¯å›¾" class="headerlink" title="é˜¶æ¢¯å›¾"></a>é˜¶æ¢¯å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">x = <span class="number">0.5</span> + np.arange(<span class="number">8</span>)</span><br><span class="line">y = [<span class="number">4.8</span>, <span class="number">5.5</span>, <span class="number">3.5</span>, <span class="number">4.6</span>, <span class="number">6.5</span>, <span class="number">6.6</span>, <span class="number">2.6</span>, <span class="number">3.0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.step(x, y, linewidth=<span class="number">2.5</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x = 0.5 + np.arange(8)</code>: ä½¿ç”¨NumPyçš„<code>arange</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä»0.5å¼€å§‹ã€é—´éš”ä¸º1çš„é•¿åº¦ä¸º8çš„æ•°ç»„ã€‚è¿™å°†ä½œä¸ºxè½´çš„æ•°æ®ã€‚</p></li><li><p><code>y = [4.8, 5.5, 3.5, 4.6, 6.5, 6.6, 2.6, 3.0]</code>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«8ä¸ªæ•°å€¼çš„åˆ—è¡¨ï¼Œè¿™äº›æ•°å€¼å°†ä½œä¸ºyè½´çš„æ•°æ®ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.step(x, y, linewidth=2.5)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šç»˜åˆ¶é˜¶æ¢¯å›¾ï¼ˆstep plotï¼‰ã€‚ä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„xå’Œyæ•°ç»„ä½œä¸ºæ•°æ®ï¼Œé˜¶æ¢¯å›¾æ˜¯ä¸€ç§è¿ç»­çº¿æ®µè¿æ¥çš„å›¾å½¢ï¼Œæ¯ä¸ªç‚¹ä»¥å‚ç›´çº¿æ®µè¿æ¥åˆ°ä¸‹ä¸€ä¸ªç‚¹ï¼Œå½¢æˆé˜¶æ¢¯çŠ¶çš„çº¿æ¡ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: è®¾ç½®åæ ‡è½´çš„èŒƒå›´å’Œåˆ»åº¦ã€‚xè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚yè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><img src="https://matplotlib.org/stable/_images/sphx_glr_step_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_step_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="step"><h3 id="å¡«å……åŒºåŸŸå›¾"><a href="#å¡«å……åŒºåŸŸå›¾" class="headerlink" title="å¡«å……åŒºåŸŸå›¾"></a>å¡«å……åŒºåŸŸå›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">8</span>, <span class="number">16</span>)</span><br><span class="line">y1 = <span class="number">3</span> + <span class="number">4</span>*x/<span class="number">8</span> + np.random.uniform(<span class="number">0.0</span>, <span class="number">0.5</span>, <span class="built_in">len</span>(x))</span><br><span class="line">y2 = <span class="number">1</span> + <span class="number">2</span>*x/<span class="number">8</span> + np.random.uniform(<span class="number">0.0</span>, <span class="number">0.5</span>, <span class="built_in">len</span>(x))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.fill_between(x, y1, y2, alpha=<span class="number">.5</span>, linewidth=<span class="number">0</span>)</span><br><span class="line">ax.plot(x, (y1 + y2)/<span class="number">2</span>, linewidth=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ï¼Œè¿™æ ·æ¯æ¬¡è¿è¡Œä»£ç éƒ½èƒ½å¾—åˆ°ç›¸åŒçš„éšæœºæ•°æ®ã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯ç»“æœçš„å¯å¤ç°æ€§ã€‚</p></li><li><p><code>x = np.linspace(0, 8, 16)</code>: ä½¿ç”¨NumPyçš„<code>linspace</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä»0åˆ°8çš„ç­‰é—´éš”æ•°ç»„ï¼Œé•¿åº¦ä¸º16ã€‚è¿™å°†ä½œä¸ºxè½´çš„æ•°æ®ã€‚</p></li><li><p><code>y1 = 3 + 4*x/8 + np.random.uniform(0.0, 0.5, len(x))</code>: ä½¿ç”¨NumPyçš„<code>random.uniform</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä¸xè½´æ•°æ®é•¿åº¦ç›¸åŒçš„éšæœºæ•°æ•°ç»„ï¼Œå…¶ä¸­çš„æ•°å€¼åœ¨0.0åˆ°0.5ä¹‹é—´ï¼Œå¹¶å°†å…¶åŠ åˆ°3 + 4*x&#x2F;8çš„ç»“æœä¸­ã€‚è¿™å°†ç”Ÿæˆä¸€ç»„y1è½´çš„éšæœºæ•°æ®ã€‚</p></li><li><p><code>y2 = 1 + 2*x/8 + np.random.uniform(0.0, 0.5, len(x))</code>: åŒæ ·ï¼Œä½¿ç”¨NumPyçš„<code>random.uniform</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä¸xè½´æ•°æ®é•¿åº¦ç›¸åŒçš„éšæœºæ•°æ•°ç»„ï¼Œå…¶ä¸­çš„æ•°å€¼åœ¨0.0åˆ°0.5ä¹‹é—´ï¼Œå¹¶å°†å…¶åŠ åˆ°1 + 2*x&#x2F;8çš„ç»“æœä¸­ã€‚è¿™å°†ç”Ÿæˆä¸€ç»„y2è½´çš„éšæœºæ•°æ®ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.fill_between(x, y1, y2, alpha=.5, linewidth=0)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šç»˜åˆ¶ä¸¤æ¡æ›²çº¿<code>y1</code>å’Œ<code>y2</code>ä¹‹é—´çš„å¡«å……åŒºåŸŸã€‚<code>alpha=.5</code>è®¾ç½®å¡«å……åŒºåŸŸçš„é€æ˜åº¦ä¸º0.5ï¼Œ<code>linewidth=0</code>è®¾ç½®å¡«å……åŒºåŸŸçš„è¾¹ç•Œçº¿å®½ä¸º0ï¼Œä½¿å¾—å¡«å……åŒºåŸŸæ²¡æœ‰æ˜æ˜¾çš„è¾¹ç•Œçº¿ã€‚</p></li><li><p><code>ax.plot(x, (y1 + y2)/2, linewidth=2)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šç»˜åˆ¶ä¸€æ¡çº¿ï¼Œçº¿çš„yå€¼æ˜¯<code>y1</code>å’Œ<code>y2</code>çš„å¹³å‡å€¼ï¼Œå³<code>(y1 + y2)/2</code>ã€‚è¿™æ¡çº¿å°†è¿æ¥<code>y1</code>å’Œ<code>y2</code>ä¸¤æ¡æ›²çº¿ä¹‹é—´å¡«å……åŒºåŸŸçš„ä¸­å¿ƒã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: è®¾ç½®åæ ‡è½´çš„èŒƒå›´å’Œåˆ»åº¦ã€‚xè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚yè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªå¡«å……åŒºåŸŸå›¾ï¼Œå…¶ä¸­xè½´çš„æ•°æ®æ˜¯ä»0åˆ°8çš„é•¿åº¦ä¸º16çš„ç­‰é—´éš”æ•°ç»„ï¼Œyè½´çš„æ•°æ®æ˜¯é€šè¿‡åœ¨ä¸¤ä¸ªæ›²çº¿<code>y1</code>å’Œ<code>y2</code>ä¹‹é—´å¡«å……ä¸€ä¸ªéšæœºç”Ÿæˆçš„å°èŒƒå›´æ¥å¾—åˆ°çš„ã€‚å¡«å……åŒºåŸŸç”±é€æ˜åº¦ä¸º0.5çš„é¢œè‰²å¡«å……ï¼Œè€Œä¸­å¿ƒçº¿ç”±y1å’Œy2çš„å¹³å‡å€¼ç»„æˆã€‚xè½´èŒƒå›´æ˜¯0åˆ°8ï¼Œyè½´èŒƒå›´æ˜¯0åˆ°8ï¼Œå¹¶ä¸”xå’Œyè½´éƒ½æœ‰é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_fill_between_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_fill_between_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="fill_between"><h3 id="å †å åŒºåŸŸå›¾"><a href="#å †å åŒºåŸŸå›¾" class="headerlink" title="å †å åŒºåŸŸå›¾"></a>å †å åŒºåŸŸå›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">ay = [<span class="number">1</span>, <span class="number">1.25</span>, <span class="number">2</span>, <span class="number">2.75</span>, <span class="number">3</span>]</span><br><span class="line">by = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]</span><br><span class="line">cy = [<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">y = np.vstack([ay, by, cy])</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.stackplot(x, y)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x = np.arange(0, 10, 2)</code>: ä½¿ç”¨NumPyçš„<code>arange</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªä»0å¼€å§‹ã€é—´éš”ä¸º2çš„é•¿åº¦ä¸º5çš„æ•°ç»„ã€‚è¿™å°†ä½œä¸ºxè½´çš„æ•°æ®ã€‚</p></li><li><p><code>ay = [1, 1.25, 2, 2.75, 3]</code>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«5ä¸ªæ•°å€¼çš„åˆ—è¡¨ï¼Œè¿™äº›æ•°å€¼å°†ä½œä¸ºç¬¬ä¸€ç»„yè½´çš„æ•°æ®ã€‚</p></li><li><p><code>by = [1, 1, 1, 1, 1]</code>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«5ä¸ªæ•°å€¼çš„åˆ—è¡¨ï¼Œè¿™äº›æ•°å€¼å°†ä½œä¸ºç¬¬äºŒç»„yè½´çš„æ•°æ®ã€‚</p></li><li><p><code>cy = [2, 1, 2, 1, 2]</code>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«5ä¸ªæ•°å€¼çš„åˆ—è¡¨ï¼Œè¿™äº›æ•°å€¼å°†ä½œä¸ºç¬¬ä¸‰ç»„yè½´çš„æ•°æ®ã€‚</p></li><li><p><code>y = np.vstack([ay, by, cy])</code>: ä½¿ç”¨NumPyçš„<code>vstack</code>å‡½æ•°å°†ä¸‰ç»„yè½´æ•°æ®å †å åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ª2ç»´æ•°ç»„ã€‚è¿™æ ·ï¼Œ<code>y</code>å°†æˆä¸ºä¸€ä¸ªåŒ…å«3ä¸ªå­æ•°ç»„çš„æ•°ç»„ï¼Œæ¯ä¸ªå­æ•°ç»„ä»£è¡¨ä¸€ç»„yè½´æ•°æ®ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.stackplot(x, y)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šç»˜åˆ¶å †å åŒºåŸŸå›¾ï¼ˆstacked plotï¼‰ã€‚ä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„xå’Œyæ•°ç»„ä½œä¸ºæ•°æ®ï¼Œå †å åŒºåŸŸå›¾å±•ç¤ºäº†æ¯ä¸ªxåæ ‡å¯¹åº”çš„ä¸‰ç»„yå€¼çš„å †å åŒºåŸŸã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: è®¾ç½®åæ ‡è½´çš„èŒƒå›´å’Œåˆ»åº¦ã€‚xè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚yè½´èŒƒå›´è®¾ç½®ä¸º0åˆ°8ï¼ŒåŒæ—¶è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªå †å åŒºåŸŸå›¾ï¼Œå…¶ä¸­xè½´çš„æ•°æ®æ˜¯ä»0å¼€å§‹çš„é•¿åº¦ä¸º5çš„ç­‰é—´éš”æ•°ç»„ï¼Œyè½´çš„æ•°æ®æœ‰ä¸‰ç»„ï¼Œåˆ†åˆ«æ˜¯<code>ay</code>ã€<code>by</code>å’Œ<code>cy</code>ã€‚å †å åŒºåŸŸå›¾å°†æ˜¾ç¤ºä¸‰ç»„yè½´æ•°æ®åœ¨æ¯ä¸ªxåæ ‡å¤„çš„å †å åŒºåŸŸï¼Œå½¢æˆäº†å¤šä¸ªä¸åŒé¢œè‰²çš„å †å åŒºåŸŸã€‚xè½´èŒƒå›´æ˜¯0åˆ°8ï¼Œyè½´èŒƒå›´æ˜¯0åˆ°8ï¼Œå¹¶ä¸”xå’Œyè½´éƒ½æœ‰é—´éš”ä¸º1çš„åˆ»åº¦ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_stackplot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_stackplot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="stackplot"><h3 id="çƒ­å›¾"><a href="#çƒ­å›¾" class="headerlink" title="çƒ­å›¾"></a>çƒ­å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">X, Y = np.meshgrid(np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">16</span>), np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">16</span>))</span><br><span class="line">Z = (<span class="number">1</span> - X/<span class="number">2</span> + X**<span class="number">5</span> + Y**<span class="number">3</span>) * np.exp(-X**<span class="number">2</span> - Y**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.imshow(Z)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>X, Y = np.meshgrid(np.linspace(-3, 3, 16), np.linspace(-3, 3, 16))</code>: ä½¿ç”¨NumPyçš„<code>meshgrid</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªç½‘æ ¼ï¼Œå…¶ä¸­Xå’ŒYåˆ†åˆ«æ˜¯ä»-3åˆ°3çš„ç­‰é—´éš”æ•°ç»„ï¼Œé•¿åº¦ä¸º16ã€‚è¿™å°†ç”¨äºåˆ›å»ºä¸€ä¸ªäºŒç»´åæ ‡ç³»ï¼Œå…¶ä¸­Xå’ŒYåˆ†åˆ«è¡¨ç¤ºxè½´å’Œyè½´ä¸Šçš„ç‚¹ã€‚</p></li><li><p><code>Z = (1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>: ä½¿ç”¨Xå’ŒYæ•°ç»„è®¡ç®—å‡ºä¸€ä¸ªäºŒç»´æ•°ç»„Zï¼Œå…¶ä¸­çš„æ•°å€¼æ˜¯æ ¹æ®ç»™å®šçš„å‡½æ•°è®¡ç®—å¾—åˆ°çš„ã€‚è¿™ä¸ªå‡½æ•°æ˜¯ <code>(1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.imshow(Z)</code>: åœ¨åæ ‡è½´<code>ax</code>ä¸Šæ˜¾ç¤ºäºŒç»´æ•°ç»„Zï¼Œè¿™å°†ä»¥å›¾åƒçš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ã€‚imshowå‡½æ•°ä¼šæ ¹æ®æ•°ç»„ä¸­çš„æ•°å€¼æ¥ç€è‰²ï¼Œè¾ƒå¤§çš„æ•°å€¼å°†æ˜¾ç¤ºä¸ºè¾ƒäº®çš„é¢œè‰²ï¼Œè¾ƒå°çš„æ•°å€¼å°†æ˜¾ç¤ºä¸ºè¾ƒæš—çš„é¢œè‰²ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªåŸºäºäºŒç»´æ•°ç»„Zçš„å›¾åƒã€‚Zçš„æ•°å€¼æ˜¯æ ¹æ®ç»™å®šçš„å‡½æ•°è®¡ç®—å¾—åˆ°çš„ï¼Œç„¶åä½¿ç”¨imshowå‡½æ•°å°†äºŒç»´æ•°ç»„Zä»¥å›¾åƒçš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ã€‚imshowå‡½æ•°å°†æ ¹æ®æ•°ç»„ä¸­çš„æ•°å€¼è‡ªåŠ¨ç€è‰²ï¼Œå½¢æˆä¸€ä¸ªå…·æœ‰æ˜æš—å˜åŒ–çš„å›¾åƒã€‚åœ¨è¿™é‡Œï¼ŒZçš„å€¼ç”±Xå’ŒYçš„åæ ‡è®¡ç®—å¾—åˆ°ï¼Œå› æ­¤å›¾åƒä¼šæ˜¾ç¤ºä¸€ç§å‘ˆç°å¤æ‚å›¾æ¡ˆçš„åˆ†å¸ƒæƒ…å†µã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_imshow_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_imshow_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="imshow"><h3 id="ä¼ªå½©è‰²å›¾"><a href="#ä¼ªå½©è‰²å›¾" class="headerlink" title="ä¼ªå½©è‰²å›¾"></a>ä¼ªå½©è‰²å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data with uneven sampling in x</span></span><br><span class="line">x = [-<span class="number">3</span>, -<span class="number">2</span>, -<span class="number">1.6</span>, -<span class="number">1.2</span>, -<span class="number">.8</span>, -<span class="number">.5</span>, -<span class="number">.2</span>, <span class="number">.1</span>, <span class="number">.3</span>, <span class="number">.5</span>, <span class="number">.8</span>, <span class="number">1.1</span>, <span class="number">1.5</span>, <span class="number">1.9</span>, <span class="number">2.3</span>, <span class="number">3</span>]</span><br><span class="line">X, Y = np.meshgrid(x, np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">128</span>))</span><br><span class="line">Z = (<span class="number">1</span> - X/<span class="number">2</span> + X**<span class="number">5</span> + Y**<span class="number">3</span>) * np.exp(-X**<span class="number">2</span> - Y**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.pcolormesh(X, Y, Z, vmin=-<span class="number">0.5</span>, vmax=<span class="number">1.0</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x = [-3, -2, -1.6, -1.2, -.8, -.5, -.2, .1, .3, .5, .8, 1.1, 1.5, 1.9, 2.3, 3]</code>: å®šä¹‰äº†ä¸€ä¸ªä¸è§„åˆ™çš„ä¸€ç»´æ•°ç»„<code>x</code>ï¼Œç”¨äºè¡¨ç¤ºç½‘æ ¼ä¸­çš„xåæ ‡ã€‚è¿™äº›xåæ ‡æ˜¯ä¸å‡åŒ€é—´éš”çš„ã€‚</p></li><li><p><code>X, Y = np.meshgrid(x, np.linspace(-3, 3, 128))</code>: ä½¿ç”¨<code>np.meshgrid</code>å‡½æ•°ç”Ÿæˆä¸¤ä¸ªäºŒç»´æ•°ç»„<code>X</code>å’Œ<code>Y</code>ï¼Œå…¶ä¸­<code>X</code>ç”±ä¸è§„åˆ™é—´éš”çš„ä¸€ç»´æ•°ç»„<code>x</code>å’Œå‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 128)</code>ç»„æˆã€‚<code>Y</code>ç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 128)</code>ç»„æˆã€‚ç”Ÿæˆçš„<code>X</code>å’Œ<code>Y</code>æ•°ç»„éƒ½æ˜¯(16, 128)çš„å½¢çŠ¶ï¼Œè¡¨ç¤ºä¸€ä¸ª16è¡Œã€128åˆ—çš„ç½‘æ ¼ã€‚</p></li><li><p><code>Z = (1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>: è¿™è¡Œä»£ç è®¡ç®—ä¸€ä¸ªäºŒç»´æ•°ç»„<code>Z</code>ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯é€šè¿‡å¯¹åº”ä½ç½®çš„<code>X</code>å’Œ<code>Y</code>åæ ‡å€¼ä»£å…¥ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°è¡¨è¾¾å¼å¾—åˆ°çš„ã€‚è¿™ä¸ªå‡½æ•°è¡¨è¾¾å¼æ˜¯ <code>(1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†NumPyçš„å¹¿æ’­åŠŸèƒ½ï¼Œ<code>X</code>å’Œ<code>Y</code>æ˜¯åŒæ ·å¤§å°çš„æ•°ç»„ï¼Œæ‰€ä»¥å®ƒä»¬è¿›è¡Œå…ƒç´ çº§åˆ«çš„è¿ç®—ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªæ–°çš„äºŒç»´æ•°ç»„<code>Z</code>ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.pcolormesh(X, Y, Z, vmin=-0.5, vmax=1.0)</code>: ä½¿ç”¨<code>ax.pcolormesh</code>å‡½æ•°ç»˜åˆ¶ä¼ªå½©è‰²å›¾ã€‚è¿™ä¸ªå‡½æ•°ä»¥<code>X</code>å’Œ<code>Y</code>ä½œä¸ºç½‘æ ¼åæ ‡ï¼Œå°†<code>Z</code>æ•°ç»„ä¸­çš„å€¼ä½œä¸ºé¢œè‰²ç¼–ç æ¥å¡«å……ç½‘æ ¼ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªä¼ªå½©è‰²å›¾ã€‚<code>vmin=-0.5</code>å’Œ<code>vmax=1.0</code>åˆ†åˆ«è®¾ç½®äº†é¢œè‰²ç¼–ç çš„èŒƒå›´ï¼Œè¿™æ ·å¯ä»¥å°†<code>Z</code>ä¸­å°äº-0.5çš„å€¼æ˜ å°„ä¸ºä½å€¼é¢œè‰²ï¼Œå¤§äº1.0çš„å€¼æ˜ å°„ä¸ºé«˜å€¼é¢œè‰²ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªä¼ªå½©è‰²å›¾ï¼Œå…¶ä¸­ç½‘æ ¼çš„xåæ ‡ç”±ä¸è§„åˆ™é—´éš”çš„ä¸€ç»´æ•°ç»„<code>x</code>è¡¨ç¤ºï¼Œyåæ ‡ç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 128)</code>è¡¨ç¤ºã€‚åœ¨ä¼ªå½©è‰²å›¾ä¸­ï¼Œé¢œè‰²ç¼–ç ç”¨äºè¡¨ç¤º<code>Z</code>æ•°ç»„ä¸­çš„å€¼ï¼Œè€Œ<code>Z</code>æ•°ç»„çš„å€¼æ˜¯æ ¹æ®ç‰¹å®šçš„å‡½æ•°è®¡ç®—å¾—åˆ°çš„ã€‚é€šè¿‡é¢œè‰²çš„å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°<code>Z</code>éšç€<code>X</code>å’Œ<code>Y</code>çš„å˜åŒ–è€Œå‘ç”Ÿçš„å˜åŒ–ã€‚</p><p>è¿™ä¸ªæ•°å­¦å…¬å¼å¯ä»¥å†™ä¸ºï¼š</p><p>$$ Z &#x3D; (1 - \frac{X}{2} + X^5 + Y^3) \times e^{-X^2 - Y^2} $$</p><p>å…¶ä¸­ï¼Œ$ X $ å’Œ $ Y $ æ˜¯ç½‘æ ¼åæ ‡ï¼Œ$ Z $ æ˜¯æ ¹æ® $ X $ å’Œ $ Y $ è®¡ç®—çš„å‡½æ•°å€¼ã€‚å…¬å¼ä¸­åŒ…å«äº†å¤šé¡¹å¼å’ŒæŒ‡æ•°å‡½æ•°çš„è¿ç®—ã€‚è¿™ä¸ªå‡½æ•°è¡¨è¾¾å¼ç”¨äºç”Ÿæˆä¸€ä¸ªäºŒç»´æ•°ç»„ $ Z $ï¼Œå¹¶åœ¨åç»­çš„ä»£ç ä¸­è¢«ç”¨äºç»˜åˆ¶ä¼ªå½©è‰²å›¾ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_pcolormesh_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_pcolormesh_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="pcolormesh"><blockquote><p>çƒ­å›¾ï¼ˆHeatmapï¼‰å’Œä¼ªå½©è‰²å›¾ï¼ˆPseudocolor Plotï¼‰éƒ½æ˜¯ç”¨æ¥å¯è§†åŒ–äºŒç»´æ•°æ®çš„å›¾åƒè¡¨ç¤ºæ–¹æ³•ï¼Œä½†å®ƒä»¬åœ¨å‘ˆç°æ•°æ®çš„æ–¹å¼å’Œç›®çš„ä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚<br>    çƒ­å›¾ï¼ˆHeatmapï¼‰ï¼š<br>    - çƒ­å›¾æ˜¯ä¸€ç§å¸¸è§çš„äºŒç»´æ•°æ®å¯è§†åŒ–æ–¹æ³•ï¼Œé€šå¸¸ç”¨äºæ˜¾ç¤ºæ•°æ®çš„åˆ†å¸ƒã€å…³è”æ€§æˆ–è€…å¯†åº¦ã€‚<br>      - çƒ­å›¾ä½¿ç”¨é¢œè‰²æ¥è¡¨ç¤ºæ•°æ®å€¼çš„å¤§å°ï¼Œå…¶ä¸­é¢œè‰²çš„æ˜æš—ç¨‹åº¦ä»£è¡¨æ•°æ®çš„ç›¸å¯¹å¤§å°ã€‚<br>      - é€šå¸¸ï¼Œè¾ƒå¤§çš„æ•°å€¼ç”¨è¾ƒæ·±çš„é¢œè‰²è¡¨ç¤ºï¼Œè¾ƒå°çš„æ•°å€¼ç”¨è¾ƒæµ…çš„é¢œè‰²è¡¨ç¤ºï¼Œä»è€Œå½¢æˆä¸€ä¸ªæ˜æš—å˜åŒ–çš„è‰²é˜¶ã€‚<br>      - çƒ­å›¾é€šå¸¸ç”¨äºå±•ç¤ºæ•°æ®çš„æ•´ä½“ç»“æ„å’Œè¶‹åŠ¿ï¼Œä»¥åŠåœ¨ä¸åŒä½ç½®çš„æ•°æ®å€¼ä¹‹é—´çš„ç›¸å¯¹å¤§å°å…³ç³»ã€‚<br>      - ä¾‹å­ï¼šåœ¨åŸºå› è¡¨è¾¾æ•°æ®åˆ†æä¸­ï¼Œçƒ­å›¾å¯ä»¥ç”¨æ¥æ˜¾ç¤ºä¸åŒåŸºå› åœ¨ä¸åŒæ ·æœ¬ä¸­çš„è¡¨è¾¾é‡ï¼Œå¸®åŠ©ç ”ç©¶åŸºå› çš„è¡¨è¾¾æ¨¡å¼ã€‚<br>    ä¼ªå½©è‰²å›¾ï¼ˆPseudocolor Plotï¼‰ï¼š<br>    - ä¼ªå½©è‰²å›¾ä¹Ÿæ˜¯ä¸€ç§äºŒç»´æ•°æ®å¯è§†åŒ–æ–¹æ³•ï¼Œç”¨äºè¡¨ç¤ºæ•°æ®çš„å˜åŒ–å’Œåˆ†å¸ƒæƒ…å†µã€‚<br>      - ä¼ªå½©è‰²å›¾ä½¿ç”¨é¢œè‰²æ¥ç¼–ç æ•°æ®çš„æ•°å€¼ï¼Œä¸åŒé¢œè‰²ä»£è¡¨ä¸åŒæ•°å€¼ï¼Œè€Œä¸ä»…ä»…æ˜¯æ•°æ®çš„å¤§å°ã€‚<br>      - ä¼ªå½©è‰²å›¾é€šå¸¸ç”¨äºå±•ç¤ºæ•°æ®çš„ç»†èŠ‚å’Œå˜åŒ–ï¼Œä»¥åŠåœ¨ä¸åŒä½ç½®çš„å…·ä½“æ•°å€¼ã€‚<br>      - é€šå¸¸ï¼Œå¯ä»¥é€šè¿‡è®¾å®šé¢œè‰²æ˜ å°„èŒƒå›´æ¥æ§åˆ¶é¢œè‰²çš„åˆ†é…ï¼Œä»è€Œçªå‡ºæ•°æ®çš„ç‰¹å®šèŒƒå›´æˆ–å˜åŒ–ã€‚<br>      - ä¾‹å­ï¼šåœ¨ç‰©ç†æ¨¡æ‹Ÿä¸­ï¼Œä¼ªå½©è‰²å›¾å¯ä»¥ç”¨æ¥æ˜¾ç¤ºæ¨¡æ‹Ÿç»“æœçš„æ•°å€¼ï¼Œä¾‹å¦‚æ¸©åº¦åˆ†å¸ƒã€æµé€Ÿç­‰ã€‚<br>    æ€»ä½“è€Œè¨€ï¼Œçƒ­å›¾æ›´é€‚åˆå‘ˆç°æ•°æ®çš„æ€»ä½“ç»“æ„å’Œç›¸å¯¹å…³ç³»ï¼Œè€Œä¼ªå½©è‰²å›¾æ›´é€‚åˆå‘ˆç°æ•°æ®çš„å…·ä½“æ•°å€¼å’Œç»†èŠ‚å˜åŒ–ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ç§å›¾å½¢æ–¹æ³•å¯ä»¥ç›¸äº’è½¬æ¢æˆ–æ··ç”¨ï¼Œå…·ä½“è¦æ ¹æ®æ•°æ®çš„ç‰¹æ€§å’Œå¯è§†åŒ–çš„ç›®çš„æ¥é€‰æ‹©é€‚åˆçš„æ–¹æ³•ã€‚</p></blockquote><h3 id="ç­‰é«˜çº¿å›¾"><a href="#ç­‰é«˜çº¿å›¾" class="headerlink" title="ç­‰é«˜çº¿å›¾"></a>ç­‰é«˜çº¿å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">X, Y = np.meshgrid(np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>), np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>))</span><br><span class="line">Z = (<span class="number">1</span> - X/<span class="number">2</span> + X**<span class="number">5</span> + Y**<span class="number">3</span>) * np.exp(-X**<span class="number">2</span> - Y**<span class="number">2</span>)</span><br><span class="line">levels = np.linspace(np.<span class="built_in">min</span>(Z), np.<span class="built_in">max</span>(Z), <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.contour(X, Y, Z, levels=levels)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>X, Y = np.meshgrid(np.linspace(-3, 3, 256), np.linspace(-3, 3, 256))</code>: ä½¿ç”¨<code>np.meshgrid</code>å‡½æ•°ç”Ÿæˆä¸¤ä¸ªäºŒç»´æ•°ç»„<code>X</code>å’Œ<code>Y</code>ï¼Œå…¶ä¸­<code>X</code>ç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 256)</code>ç»„æˆï¼Œ<code>Y</code>ä¹Ÿæ˜¯ç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 256)</code>ç»„æˆã€‚ç”Ÿæˆçš„<code>X</code>å’Œ<code>Y</code>æ•°ç»„éƒ½æ˜¯(256, 256)çš„å½¢çŠ¶ï¼Œè¡¨ç¤ºä¸€ä¸ª256x256çš„ç½‘æ ¼ã€‚</p></li><li><p><code>Z = (1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>: è¿™è¡Œä»£ç è®¡ç®—ä¸€ä¸ªäºŒç»´æ•°ç»„<code>Z</code>ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯é€šè¿‡å¯¹åº”ä½ç½®çš„<code>X</code>å’Œ<code>Y</code>åæ ‡å€¼ä»£å…¥ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°è¡¨è¾¾å¼å¾—åˆ°çš„ã€‚è¿™ä¸ªå‡½æ•°è¡¨è¾¾å¼æ˜¯ <code>(1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†NumPyçš„å¹¿æ’­åŠŸèƒ½ï¼Œ<code>X</code>å’Œ<code>Y</code>æ˜¯åŒæ ·å¤§å°çš„æ•°ç»„ï¼Œæ‰€ä»¥å®ƒä»¬è¿›è¡Œå…ƒç´ çº§åˆ«çš„è¿ç®—ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªæ–°çš„äºŒç»´æ•°ç»„<code>Z</code>ã€‚</p></li><li><p><code>levels = np.linspace(np.min(Z), np.max(Z), 7)</code>: åˆ›å»ºä¸€ä¸ªåŒ…å«7ä¸ªå…ƒç´ çš„ä¸€ç»´æ•°ç»„<code>levels</code>ï¼Œå…¶ä¸­çš„æ•°å€¼æ˜¯é€šè¿‡ç­‰é—´éš”æ–¹å¼ä»<code>Z</code>æ•°ç»„çš„æœ€å°å€¼åˆ°æœ€å¤§å€¼ç”Ÿæˆçš„ã€‚è¿™äº›æ•°å€¼å°†ç”¨äºè®¾ç½®ç­‰é«˜çº¿å›¾ä¸­çš„è½®å»“çº¿çš„é«˜åº¦å€¼ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.contour(X, Y, Z, levels=levels)</code>: ä½¿ç”¨<code>ax.contour</code>å‡½æ•°ç»˜åˆ¶ç­‰é«˜çº¿å›¾ã€‚è¿™ä¸ªå‡½æ•°ä»¥<code>X</code>å’Œ<code>Y</code>ä½œä¸ºç½‘æ ¼åæ ‡ï¼Œå°†<code>Z</code>æ•°ç»„ä¸­çš„å€¼ä½œä¸ºé«˜åº¦å€¼æ¥ç»˜åˆ¶ç­‰é«˜çº¿ã€‚é€šè¿‡è®¾ç½®<code>levels</code>å‚æ•°ï¼Œç­‰é«˜çº¿å›¾å°†åœ¨æŒ‡å®šçš„é«˜åº¦å€¼å¤„ç»˜åˆ¶è½®å»“çº¿ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªç­‰é«˜çº¿å›¾ï¼Œå…¶ä¸­ç½‘æ ¼çš„xåæ ‡ç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 256)</code>è¡¨ç¤ºï¼Œyåæ ‡ä¹Ÿç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 256)</code>è¡¨ç¤ºã€‚åœ¨ç­‰é«˜çº¿å›¾ä¸­ï¼Œä¸åŒé«˜åº¦å€¼å¯¹åº”çš„è½®å»“çº¿å°†å‘ˆç°å‡ºæ•°æ®çš„å˜åŒ–å’Œåˆ†å¸ƒæƒ…å†µã€‚é€šè¿‡è§‚å¯Ÿè½®å»“çº¿çš„åˆ†å¸ƒå’Œå½¢çŠ¶ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£å‡½æ•°åœ¨äºŒç»´ç©ºé—´ä¸­çš„å˜åŒ–å’Œç‰¹æ€§ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_contour_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_contour_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="contour"><h3 id="å¡«å……ç­‰é«˜çº¿å›¾"><a href="#å¡«å……ç­‰é«˜çº¿å›¾" class="headerlink" title="å¡«å……ç­‰é«˜çº¿å›¾"></a>å¡«å……ç­‰é«˜çº¿å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">X, Y = np.meshgrid(np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>), np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>))</span><br><span class="line">Z = (<span class="number">1</span> - X/<span class="number">2</span> + X**<span class="number">5</span> + Y**<span class="number">3</span>) * np.exp(-X**<span class="number">2</span> - Y**<span class="number">2</span>)</span><br><span class="line">levels = np.linspace(Z.<span class="built_in">min</span>(), Z.<span class="built_in">max</span>(), <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.contourf(X, Y, Z, levels=levels)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>X, Y = np.meshgrid(np.linspace(-3, 3, 256), np.linspace(-3, 3, 256))</code>: ä½¿ç”¨<code>np.meshgrid</code>å‡½æ•°ç”Ÿæˆä¸¤ä¸ªäºŒç»´æ•°ç»„<code>X</code>å’Œ<code>Y</code>ï¼Œå…¶ä¸­<code>X</code>ç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 256)</code>ç»„æˆï¼Œ<code>Y</code>ä¹Ÿæ˜¯ç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 256)</code>ç»„æˆã€‚ç”Ÿæˆçš„<code>X</code>å’Œ<code>Y</code>æ•°ç»„éƒ½æ˜¯(256, 256)çš„å½¢çŠ¶ï¼Œè¡¨ç¤ºä¸€ä¸ª256x256çš„ç½‘æ ¼ã€‚</p></li><li><p><code>Z = (1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>: è¿™è¡Œä»£ç è®¡ç®—ä¸€ä¸ªäºŒç»´æ•°ç»„<code>Z</code>ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯é€šè¿‡å¯¹åº”ä½ç½®çš„<code>X</code>å’Œ<code>Y</code>åæ ‡å€¼ä»£å…¥ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°è¡¨è¾¾å¼å¾—åˆ°çš„ã€‚è¿™ä¸ªå‡½æ•°è¡¨è¾¾å¼æ˜¯ <code>(1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†NumPyçš„å¹¿æ’­åŠŸèƒ½ï¼Œ<code>X</code>å’Œ<code>Y</code>æ˜¯åŒæ ·å¤§å°çš„æ•°ç»„ï¼Œæ‰€ä»¥å®ƒä»¬è¿›è¡Œå…ƒç´ çº§åˆ«çš„è¿ç®—ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªæ–°çš„äºŒç»´æ•°ç»„<code>Z</code>ã€‚</p></li><li><p><code>levels = np.linspace(Z.min(), Z.max(), 7)</code>: åˆ›å»ºä¸€ä¸ªåŒ…å«7ä¸ªå…ƒç´ çš„ä¸€ç»´æ•°ç»„<code>levels</code>ï¼Œå…¶ä¸­çš„æ•°å€¼æ˜¯é€šè¿‡ç­‰é—´éš”æ–¹å¼ä»<code>Z</code>æ•°ç»„çš„æœ€å°å€¼åˆ°æœ€å¤§å€¼ç”Ÿæˆçš„ã€‚è¿™äº›æ•°å€¼å°†ç”¨äºè®¾ç½®å¡«å……ç­‰é«˜çº¿å›¾ä¸­çš„è‰²å—çš„é«˜åº¦å€¼ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.contourf(X, Y, Z, levels=levels)</code>: ä½¿ç”¨<code>ax.contourf</code>å‡½æ•°ç»˜åˆ¶å¡«å……ç­‰é«˜çº¿å›¾ã€‚è¿™ä¸ªå‡½æ•°ä»¥<code>X</code>å’Œ<code>Y</code>ä½œä¸ºç½‘æ ¼åæ ‡ï¼Œå°†<code>Z</code>æ•°ç»„ä¸­çš„å€¼ä½œä¸ºé«˜åº¦å€¼æ¥ç»˜åˆ¶å¡«å……ç­‰é«˜çº¿å›¾ã€‚é€šè¿‡è®¾ç½®<code>levels</code>å‚æ•°ï¼Œå¡«å……ç­‰é«˜çº¿å›¾å°†åœ¨æŒ‡å®šçš„é«˜åº¦å€¼å¤„ç»˜åˆ¶è‰²å—ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªå¡«å……ç­‰é«˜çº¿å›¾ï¼Œå…¶ä¸­ç½‘æ ¼çš„xåæ ‡ç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 256)</code>è¡¨ç¤ºï¼Œyåæ ‡ä¹Ÿç”±å‡åŒ€é—´éš”çš„ä¸€ç»´æ•°ç»„<code>np.linspace(-3, 3, 256)</code>è¡¨ç¤ºã€‚åœ¨å¡«å……ç­‰é«˜çº¿å›¾ä¸­ï¼Œä¸åŒé«˜åº¦å€¼å¯¹åº”çš„è‰²å—å°†å‘ˆç°å‡ºæ•°æ®çš„å˜åŒ–å’Œåˆ†å¸ƒæƒ…å†µï¼Œå¡«å……ç­‰é«˜çº¿å›¾æ¯”æ™®é€šçš„ç­‰é«˜çº¿å›¾æ›´çªå‡ºæ•°æ®çš„æ•´ä½“ç»“æ„å’Œè¶‹åŠ¿ã€‚é€šè¿‡è§‚å¯Ÿè‰²å—çš„åˆ†å¸ƒå’Œå½¢çŠ¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°äº†è§£å‡½æ•°åœ¨äºŒç»´ç©ºé—´ä¸­çš„å˜åŒ–å’Œç‰¹æ€§ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_contourf_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_contourf_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="contourf"><h3 id="é£ç¾½å›¾"><a href="#é£ç¾½å›¾" class="headerlink" title="é£ç¾½å›¾"></a>é£ç¾½å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">X, Y = np.meshgrid([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">angle = np.pi / <span class="number">180</span> * np.array([[<span class="number">15.</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">45</span>],</span><br><span class="line">                                [<span class="number">25.</span>, <span class="number">40</span>, <span class="number">55</span>, <span class="number">60</span>],</span><br><span class="line">                                [<span class="number">35.</span>, <span class="number">50</span>, <span class="number">65</span>, <span class="number">75</span>],</span><br><span class="line">                                [<span class="number">45.</span>, <span class="number">60</span>, <span class="number">75</span>, <span class="number">90</span>]])</span><br><span class="line">amplitude = np.array([[<span class="number">5</span>, <span class="number">10</span>, <span class="number">25</span>, <span class="number">50</span>],</span><br><span class="line">                      [<span class="number">10</span>, <span class="number">15</span>, <span class="number">30</span>, <span class="number">60</span>],</span><br><span class="line">                      [<span class="number">15</span>, <span class="number">26</span>, <span class="number">50</span>, <span class="number">70</span>],</span><br><span class="line">                      [<span class="number">20</span>, <span class="number">45</span>, <span class="number">80</span>, <span class="number">100</span>]])</span><br><span class="line">U = amplitude * np.sin(angle)</span><br><span class="line">V = amplitude * np.cos(angle)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.barbs(X, Y, U, V, barbcolor=<span class="string">&#x27;C0&#x27;</span>, flagcolor=<span class="string">&#x27;C0&#x27;</span>, length=<span class="number">7</span>, linewidth=<span class="number">1.5</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">4.5</span>), ylim=(<span class="number">0</span>, <span class="number">4.5</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>X, Y = np.meshgrid([1, 2, 3, 4], [1, 2, 3, 4])</code>: ä½¿ç”¨<code>np.meshgrid</code>å‡½æ•°ç”Ÿæˆä¸¤ä¸ªäºŒç»´æ•°ç»„<code>X</code>å’Œ<code>Y</code>ï¼Œå…¶ä¸­<code>X</code>ç”±ä¸€ç»´æ•°ç»„<code>[1, 2, 3, 4]</code>ç»„æˆï¼Œ<code>Y</code>ä¹Ÿç”±ä¸€ç»´æ•°ç»„<code>[1, 2, 3, 4]</code>ç»„æˆã€‚ç”Ÿæˆçš„<code>X</code>å’Œ<code>Y</code>æ•°ç»„éƒ½æ˜¯(4, 4)çš„å½¢çŠ¶ï¼Œè¡¨ç¤ºä¸€ä¸ª4x4çš„ç½‘æ ¼ï¼Œç”¨äºè¡¨ç¤ºé£ç¾½å›¾ä¸­çš„ä½ç½®ã€‚</p></li><li><p><code>angle</code>å’Œ<code>amplitude</code>åˆ†åˆ«æ˜¯ä¸¤ä¸ª(4, 4)çš„äºŒç»´æ•°ç»„ï¼Œåˆ†åˆ«è¡¨ç¤ºé£çš„è§’åº¦ï¼ˆæ–¹å‘ï¼‰å’Œé£é€Ÿçš„å¤§å°ã€‚è¿™äº›æ•°æ®ç”¨äºè®¡ç®—é£çš„é€Ÿåº¦åœ¨xå’Œyæ–¹å‘çš„åˆ†é‡ï¼Œåˆ†åˆ«ä¿å­˜åœ¨<code>U</code>å’Œ<code>V</code>æ•°ç»„ä¸­ã€‚</p></li><li><p><code>U = amplitude * np.sin(angle)</code>: è¿™è¡Œä»£ç è®¡ç®—é£é€Ÿåœ¨xæ–¹å‘çš„åˆ†é‡ã€‚</p></li><li><p><code>V = amplitude * np.cos(angle)</code>: è¿™è¡Œä»£ç è®¡ç®—é£é€Ÿåœ¨yæ–¹å‘çš„åˆ†é‡ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.barbs(X, Y, U, V, barbcolor=&#39;C0&#39;, flagcolor=&#39;C0&#39;, length=7, linewidth=1.5)</code>: ä½¿ç”¨<code>ax.barbs</code>å‡½æ•°ç»˜åˆ¶é£ç¾½å›¾ã€‚è¿™ä¸ªå‡½æ•°ä»¥<code>X</code>å’Œ<code>Y</code>ä½œä¸ºç½‘æ ¼åæ ‡ï¼Œ<code>U</code>å’Œ<code>V</code>åˆ†åˆ«ä½œä¸ºé£é€Ÿåœ¨xå’Œyæ–¹å‘çš„åˆ†é‡ã€‚<code>barbcolor</code>å‚æ•°è®¾ç½®é£ç¾½çš„é¢œè‰²ï¼Œ<code>flagcolor</code>å‚æ•°è®¾ç½®é£ç¾½æ——å¸œçš„é¢œè‰²ï¼Œ<code>length</code>å‚æ•°è®¾ç½®é£ç¾½çš„é•¿åº¦ï¼Œ<code>linewidth</code>å‚æ•°è®¾ç½®é£ç¾½çš„çº¿å®½ã€‚</p></li><li><p><code>ax.set(xlim=(0, 4.5), ylim=(0, 4.5))</code>: è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´ï¼Œä»¥ä¾¿é£ç¾½å›¾å®Œæ•´æ˜¾ç¤ºåœ¨å›¾å½¢ä¸­ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªé£ç¾½å›¾ï¼Œå…¶ä¸­é£çš„æ–¹å‘å’Œé£é€Ÿç”±<code>angle</code>å’Œ<code>amplitude</code>æ•°ç»„è¡¨ç¤ºã€‚é£ç¾½å›¾ä¸­çš„æ¯ä¸ªé£ç¾½è¡¨ç¤ºäº†é£çš„æ–¹å‘å’Œå¤§å°ã€‚é£é€Ÿè¶Šå¤§ï¼Œé£ç¾½çš„é•¿åº¦è¶Šé•¿ï¼›é£çš„æ–¹å‘ç”±é£ç¾½çš„æ–¹å‘è¡¨ç¤ºã€‚é€šè¿‡è§‚å¯Ÿé£ç¾½å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°äº†è§£é£çš„åˆ†å¸ƒå’Œé£å‘çš„å˜åŒ–ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_barbs_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_barbs_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="barbs"><h3 id="çŸ¢é‡åœºå›¾"><a href="#çŸ¢é‡åœºå›¾" class="headerlink" title="çŸ¢é‡åœºå›¾"></a>çŸ¢é‡åœºå›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">x = np.linspace(-<span class="number">4</span>, <span class="number">4</span>, <span class="number">6</span>)</span><br><span class="line">y = np.linspace(-<span class="number">4</span>, <span class="number">4</span>, <span class="number">6</span>)</span><br><span class="line">X, Y = np.meshgrid(x, y)</span><br><span class="line">U = X + Y</span><br><span class="line">V = Y - X</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.quiver(X, Y, U, V, color=<span class="string">&quot;C0&quot;</span>, angles=<span class="string">&#x27;xy&#x27;</span>,</span><br><span class="line">          scale_units=<span class="string">&#x27;xy&#x27;</span>, scale=<span class="number">5</span>, width=<span class="number">.015</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(-<span class="number">5</span>, <span class="number">5</span>), ylim=(-<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x = np.linspace(-4, 4, 6)</code>: ä½¿ç”¨<code>np.linspace</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªåŒ…å«6ä¸ªå‡åŒ€åˆ†å¸ƒçš„ç‚¹çš„æ•°ç»„ï¼ŒèŒƒå›´ä»-4åˆ°4ã€‚è¿™ä¸ªæ•°ç»„ç”¨äºè¡¨ç¤ºxè½´ä¸Šçš„åæ ‡ç‚¹ã€‚</p></li><li><p><code>y = np.linspace(-4, 4, 6)</code>: ä½¿ç”¨<code>np.linspace</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªåŒ…å«6ä¸ªå‡åŒ€åˆ†å¸ƒçš„ç‚¹çš„æ•°ç»„ï¼ŒèŒƒå›´ä»-4åˆ°4ã€‚è¿™ä¸ªæ•°ç»„ç”¨äºè¡¨ç¤ºyè½´ä¸Šçš„åæ ‡ç‚¹ã€‚</p></li><li><p><code>X, Y = np.meshgrid(x, y)</code>: ä½¿ç”¨<code>np.meshgrid</code>å‡½æ•°ç”Ÿæˆä¸¤ä¸ªäºŒç»´æ•°ç»„<code>X</code>å’Œ<code>Y</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºæ‰€æœ‰xè½´å’Œyè½´åæ ‡ç‚¹çš„ç»„åˆã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>X</code>å’Œ<code>Y</code>éƒ½æ˜¯(6, 6)çš„å½¢çŠ¶ï¼Œè¡¨ç¤ºä¸€ä¸ª6x6çš„ç½‘æ ¼ã€‚</p></li><li><p><code>U = X + Y</code>: è¿™è¡Œä»£ç è®¡ç®—çŸ¢é‡åœºä¸­æ¯ä¸ªç‚¹çš„xè½´åˆ†é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œxè½´åˆ†é‡ <code>U</code> æ˜¯<code>X</code>å’Œ<code>Y</code>çš„å’Œã€‚</p></li><li><p><code>V = Y - X</code>: è¿™è¡Œä»£ç è®¡ç®—çŸ¢é‡åœºä¸­æ¯ä¸ªç‚¹çš„yè½´åˆ†é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œyè½´åˆ†é‡ <code>V</code> æ˜¯<code>Y</code>å‡å»<code>X</code>ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.quiver(X, Y, U, V, color=&quot;C0&quot;, angles=&#39;xy&#39;, scale_units=&#39;xy&#39;, scale=5, width=.015)</code>: ä½¿ç”¨<code>ax.quiver</code>å‡½æ•°ç»˜åˆ¶çŸ¢é‡åœºå›¾ã€‚è¿™ä¸ªå‡½æ•°ä»¥<code>X</code>å’Œ<code>Y</code>ä½œä¸ºç½‘æ ¼åæ ‡ï¼Œ<code>U</code>å’Œ<code>V</code>åˆ†åˆ«ä½œä¸ºçŸ¢é‡åœºä¸­æ¯ä¸ªç‚¹çš„xè½´å’Œyè½´åˆ†é‡ã€‚<code>color=&quot;C0&quot;</code>è®¾ç½®ç®­å¤´çš„é¢œè‰²ä¸ºè“è‰²ï¼Œ<code>angles=&#39;xy&#39;</code>è¡¨ç¤ºç®­å¤´æ˜¯ä½¿ç”¨xå’Œyåæ ‡è½´æ¥è¡¨ç¤ºè§’åº¦ï¼Œ<code>scale_units=&#39;xy&#39;</code>è¡¨ç¤ºç®­å¤´çš„æ¯”ä¾‹å°ºæ˜¯ç›¸å¯¹äºxå’Œyåæ ‡è½´çš„å•ä½ï¼Œ<code>scale=5</code>è®¾ç½®ç®­å¤´çš„æ¯”ä¾‹å°ºä¸º5ï¼Œ<code>width=.015</code>è®¾ç½®ç®­å¤´çš„å®½åº¦ä¸º0.015ã€‚</p></li><li><p><code>ax.set(xlim=(-5, 5), ylim=(-5, 5))</code>: è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´ï¼Œä»¥ä¾¿çŸ¢é‡åœºå›¾å®Œæ•´æ˜¾ç¤ºåœ¨å›¾å½¢ä¸­ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªçŸ¢é‡åœºå›¾ï¼Œå…¶ä¸­æ¯ä¸ªç®­å¤´è¡¨ç¤ºçŸ¢é‡åœºä¸­çš„ä¸€ä¸ªç‚¹ã€‚ç®­å¤´çš„ä½ç½®ç”±<code>X</code>å’Œ<code>Y</code>æ•°ç»„ç¡®å®šï¼Œç®­å¤´çš„æ–¹å‘å’Œå¤§å°ç”±<code>U</code>å’Œ<code>V</code>æ•°ç»„å†³å®šã€‚ç®­å¤´çš„æ–¹å‘è¡¨ç¤ºåœ¨æ¯ä¸ªç‚¹çš„xå’Œyæ–¹å‘ä¸Šçš„åˆ†é‡ï¼Œç®­å¤´çš„é•¿åº¦å’Œå®½åº¦åˆ™å†³å®šäº†ç®­å¤´çš„å¤§å°ã€‚é€šè¿‡è§‚å¯ŸçŸ¢é‡åœºå›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚åœ°äº†è§£çŸ¢é‡åœºåœ¨ä¸åŒä½ç½®çš„æ–¹å‘å’Œå¤§å°ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_quiver_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_quiver_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="quiver"><h3 id="æµçº¿å›¾"><a href="#æµçº¿å›¾" class="headerlink" title="æµçº¿å›¾"></a>æµçº¿å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make a stream function:</span></span><br><span class="line">X, Y = np.meshgrid(np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>), np.linspace(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>))</span><br><span class="line">Z = (<span class="number">1</span> - X/<span class="number">2</span> + X**<span class="number">5</span> + Y**<span class="number">3</span>) * np.exp(-X**<span class="number">2</span> - Y**<span class="number">2</span>)</span><br><span class="line"><span class="comment"># make U and V out of the streamfunction:</span></span><br><span class="line">V = np.diff(Z[<span class="number">1</span>:, :], axis=<span class="number">1</span>)</span><br><span class="line">U = -np.diff(Z[:, <span class="number">1</span>:], axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.streamplot(X[<span class="number">1</span>:, <span class="number">1</span>:], Y[<span class="number">1</span>:, <span class="number">1</span>:], U, V)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>X, Y = np.meshgrid(np.linspace(-3, 3, 256), np.linspace(-3, 3, 256))</code>: ä½¿ç”¨<code>np.meshgrid</code>å‡½æ•°ç”Ÿæˆä¸¤ä¸ªäºŒç»´æ•°ç»„<code>X</code>å’Œ<code>Y</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºä»-3åˆ°3èŒƒå›´å†…å‡åŒ€åˆ†å¸ƒçš„256ä¸ªç‚¹çš„ç½‘æ ¼ã€‚è¿™äº›æ•°ç»„å°†ç”¨äºè¡¨ç¤ºæµåœºä¸­çš„åæ ‡ç‚¹ã€‚</p></li><li><p><code>Z = (1 - X/2 + X**5 + Y**3) * np.exp(-X**2 - Y**2)</code>: è¿™è¡Œä»£ç è®¡ç®—æµå‡½æ•° <code>Z</code>ã€‚æµå‡½æ•°æ˜¯ä¸€ä¸ªæ ‡é‡åœºå‡½æ•°ï¼Œå®ƒé€šå¸¸ç”¨äºæè¿°æµä½“æµåŠ¨çš„é€Ÿåº¦åˆ†å¸ƒã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>Z</code> æ˜¯æ ¹æ®ç»™å®šçš„å…¬å¼è®¡ç®—å¾—åˆ°çš„ï¼Œå®ƒæ˜¯å…³äº <code>X</code> å’Œ <code>Y</code> çš„å‡½æ•°ã€‚</p></li><li><p><code>V = np.diff(Z[1:, :], axis=1)</code>: è¿™è¡Œä»£ç è®¡ç®—é€Ÿåº¦åœºä¸­æ¯ä¸ªç‚¹çš„yè½´åˆ†é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œyè½´åˆ†é‡ <code>V</code> æ˜¯ <code>Z</code> æ•°ç»„åœ¨yæ–¹å‘ä¸Šçš„å·®åˆ†ã€‚</p></li><li><p><code>U = -np.diff(Z[:, 1:], axis=0)</code>: è¿™è¡Œä»£ç è®¡ç®—é€Ÿåº¦åœºä¸­æ¯ä¸ªç‚¹çš„xè½´åˆ†é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œxè½´åˆ†é‡ <code>U</code> æ˜¯ <code>Z</code> æ•°ç»„åœ¨xæ–¹å‘ä¸Šçš„å·®åˆ†ï¼Œæ³¨æ„å·®åˆ†å¾—åˆ°çš„ç»“æœè¦å–è´Ÿå·ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.streamplot(X[1:, 1:], Y[1:, 1:], U, V)</code>: ä½¿ç”¨<code>ax.streamplot</code>å‡½æ•°ç»˜åˆ¶æµçº¿å›¾ã€‚è¿™ä¸ªå‡½æ•°ä»¥ <code>X[1:, 1:]</code> å’Œ <code>Y[1:, 1:]</code> ä½œä¸ºç½‘æ ¼åæ ‡ï¼Œ<code>U</code> å’Œ <code>V</code> ä½œä¸ºé€Ÿåº¦åœºä¸­æ¯ä¸ªç‚¹çš„xè½´å’Œyè½´åˆ†é‡ã€‚<code>streamplot</code>å‡½æ•°ä¼šæ ¹æ®é€Ÿåº¦åœºçš„ä¿¡æ¯ç»˜åˆ¶å‡ºæµçº¿ï¼Œå¹¶å±•ç¤ºæµä½“åœ¨ç»™å®šæµåœºä¸­çš„è¿åŠ¨ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªæµçº¿å›¾ï¼Œå…¶ä¸­æµçº¿è¡¨ç¤ºåœ¨ç»™å®šçš„æµåœºä¸­æµä½“çš„è¿åŠ¨æƒ…å†µã€‚æµçº¿çš„åˆ†å¸ƒå’Œå½¢æ€å±•ç¤ºäº†æµä½“åœ¨è¯¥æµåœºä¸­çš„è¿åŠ¨è½¨è¿¹å’Œé€Ÿåº¦åˆ†å¸ƒã€‚é€šè¿‡è§‚å¯Ÿæµçº¿å›¾ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£æµä½“åœ¨ä¸åŒä½ç½®çš„è¿åŠ¨æ–¹å‘å’Œé€Ÿåº¦ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_streamplot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_streamplot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="streamplot"><h3 id="ç›´æ–¹å›¾"><a href="#ç›´æ–¹å›¾" class="headerlink" title="ç›´æ–¹å›¾"></a>ç›´æ–¹å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = <span class="number">4</span> + np.random.normal(<span class="number">0</span>, <span class="number">1.5</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.hist(x, bins=<span class="number">8</span>, linewidth=<span class="number">0.5</span>, edgecolor=<span class="string">&quot;white&quot;</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">56</span>), yticks=np.linspace(<span class="number">0</span>, <span class="number">56</span>, <span class="number">9</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = 4 + np.random.normal(0, 1.5, 200)</code>: ä½¿ç”¨<code>np.random.normal</code>ç”Ÿæˆä¸€ä¸ªåŒ…å«200ä¸ªéšæœºæ•°çš„æ•°æ®é›† <code>x</code>ã€‚è¿™äº›éšæœºæ•°æ˜¯ä»å‡å€¼ä¸º4ã€æ ‡å‡†å·®ä¸º1.5çš„æ­£æ€åˆ†å¸ƒä¸­éšæœºæŠ½å–çš„ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.hist(x, bins=8, linewidth=0.5, edgecolor=&quot;white&quot;)</code>: ä½¿ç”¨<code>ax.hist</code>å‡½æ•°ç»˜åˆ¶ç›´æ–¹å›¾ã€‚è¯¥å‡½æ•°ä»¥æ•°æ®é›† <code>x</code> ä¸ºè¾“å…¥ï¼Œ<code>bins=8</code>æŒ‡å®šäº†ç›´æ–¹å›¾çš„ç®±æ•°ä¸º8ï¼Œå³ç›´æ–¹å›¾å°†è¢«åˆ†æˆ8ä¸ªç®±å­ï¼Œ<code>linewidth=0.5</code>è®¾ç½®ç›´æ–¹å›¾è¾¹ç•Œçº¿çš„å®½åº¦ä¸º0.5ï¼Œ<code>edgecolor=&quot;white&quot;</code>è®¾ç½®ç›´æ–¹å›¾è¾¹ç•Œçº¿çš„é¢œè‰²ä¸ºç™½è‰²ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 56), yticks=np.linspace(0, 56, 9))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´å’Œåˆ»åº¦ã€‚<code>xlim=(0, 8)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>xticks=np.arange(1, 8)</code>è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ï¼Œ<code>ylim=(0, 56)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°56ï¼Œ<code>yticks=np.linspace(0, 56, 9)</code>è®¾ç½®yè½´åˆ»åº¦ä¸º0åˆ°56ä¹‹é—´ç­‰é—´è·çš„9ä¸ªåˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªç›´æ–¹å›¾ï¼Œå…¶ä¸­æ¯ä¸ªç®±å­è¡¨ç¤ºæ•°æ®é›† <code>x</code> åœ¨ç›¸åº”èŒƒå›´å†…çš„æ•°æ®ä¸ªæ•°ã€‚é€šè¿‡è§‚å¯Ÿç›´æ–¹å›¾ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£æ•°æ®é›† <code>x</code> çš„åˆ†å¸ƒæƒ…å†µï¼Œä»¥åŠæ•°æ®åœ¨ä¸åŒåŒºé—´çš„é¢‘æ¬¡åˆ†å¸ƒã€‚ç›´æ–¹å›¾æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®å¯è§†åŒ–æ–¹æ³•ï¼Œç”¨äºå¯¹æ•°æ®è¿›è¡Œåˆæ­¥çš„ç»Ÿè®¡å’Œåˆ†å¸ƒåˆ†æã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_hist_plot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_hist_plot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="hist"><h3 id="ç®±çº¿å›¾"><a href="#ç®±çº¿å›¾" class="headerlink" title="ç®±çº¿å›¾"></a>ç®±çº¿å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">np.random.seed(<span class="number">10</span>)</span><br><span class="line">D = np.random.normal((<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>), (<span class="number">1.25</span>, <span class="number">1.00</span>, <span class="number">1.25</span>), (<span class="number">100</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">VP = ax.boxplot(D, positions=[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>], widths=<span class="number">1.5</span>, patch_artist=<span class="literal">True</span>,</span><br><span class="line">                showmeans=<span class="literal">False</span>, showfliers=<span class="literal">False</span>,</span><br><span class="line">                medianprops=&#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;white&quot;</span>, <span class="string">&quot;linewidth&quot;</span>: <span class="number">0.5</span>&#125;,</span><br><span class="line">                boxprops=&#123;<span class="string">&quot;facecolor&quot;</span>: <span class="string">&quot;C0&quot;</span>, <span class="string">&quot;edgecolor&quot;</span>: <span class="string">&quot;white&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;linewidth&quot;</span>: <span class="number">0.5</span>&#125;,</span><br><span class="line">                whiskerprops=&#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;C0&quot;</span>, <span class="string">&quot;linewidth&quot;</span>: <span class="number">1.5</span>&#125;,</span><br><span class="line">                capprops=&#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;C0&quot;</span>, <span class="string">&quot;linewidth&quot;</span>: <span class="number">1.5</span>&#125;)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(10)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>D = np.random.normal((3, 5, 4), (1.25, 1.00, 1.25), (100, 3))</code>: ä½¿ç”¨<code>np.random.normal</code>ç”Ÿæˆä¸‰ä¸ªåŒ…å«100ä¸ªéšæœºæ•°çš„æ•°æ®é›†ï¼Œæ¯ä¸ªæ•°æ®é›†å¯¹åº”ä¸€ä¸ªæ­£æ€åˆ†å¸ƒã€‚å…¶ä¸­ <code>(3, 5, 4)</code> æ˜¯å‡å€¼ï¼Œ<code>(1.25, 1.00, 1.25)</code> æ˜¯æ ‡å‡†å·®ï¼Œ<code>(100, 3)</code> æ˜¯ç”Ÿæˆçš„æ•°æ®é›†çš„å½¢çŠ¶ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.boxplot(D, positions=[2, 4, 6], widths=1.5, patch_artist=True, ...)</code>ï¼šä½¿ç”¨<code>ax.boxplot</code>å‡½æ•°ç»˜åˆ¶ç®±çº¿å›¾ã€‚<code>D</code> æ˜¯è¦ç»˜åˆ¶çš„æ•°æ®é›†ï¼Œ<code>positions=[2, 4, 6]</code> è®¾ç½®äº†æ¯ä¸ªç®±çº¿å›¾çš„ä½ç½®ï¼Œå³å°†ä¸‰ä¸ªæ•°æ®é›†ç»˜åˆ¶åœ¨xè½´ä¸Šçš„ä½ç½®ä¸º2ã€4å’Œ6ã€‚<code>widths=1.5</code> è®¾ç½®äº†æ¯ä¸ªç®±çº¿å›¾çš„å®½åº¦ä¸º1.5ã€‚<code>patch_artist=True</code> è®¾ç½®ç®±ä½“ç”¨å¡«å……æ–¹å¼ç»˜åˆ¶ã€‚<code>showmeans=False</code> å’Œ <code>showfliers=False</code> åˆ†åˆ«è®¾ç½®ä¸æ˜¾ç¤ºå‡å€¼å’Œç¦»ç¾¤å€¼ã€‚<code>medianprops</code>ã€<code>boxprops</code>ã€<code>whiskerprops</code> å’Œ <code>capprops</code> å‚æ•°ç”¨äºè®¾ç½®ç®±çº¿å›¾ä¸­å„ä¸ªéƒ¨åˆ†çš„å±æ€§ï¼Œä¾‹å¦‚ç®±ä½“ã€ä¸­ä½æ•°çº¿ã€ç®±é¡»çº¿å’Œç®±é¡¶çº¿çš„é¢œè‰²å’Œå®½åº¦ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´å’Œåˆ»åº¦ã€‚<code>xlim=(0, 8)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>xticks=np.arange(1, 8)</code>è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ï¼Œ<code>ylim=(0, 8)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>yticks=np.arange(1, 8)</code>è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªç®±çº¿å›¾ï¼Œå…¶ä¸­æ¯ä¸ªç®±çº¿å›¾è¡¨ç¤ºä¸€ä¸ªæ•°æ®é›†çš„åˆ†å¸ƒæƒ…å†µã€‚ç®±çº¿å›¾å±•ç¤ºäº†æ•°æ®çš„ä¸­ä½æ•°ã€ä¸Šä¸‹å››åˆ†ä½æ•°å’Œç¦»ç¾¤å€¼ç­‰ç»Ÿè®¡ç‰¹å¾ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿäº†è§£æ•°æ®çš„åˆ†å¸ƒå’Œå¼‚å¸¸å€¼æƒ…å†µã€‚</p><p>ç®±çº¿å›¾æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºå±•ç¤ºæ•°æ®çš„åˆ†å¸ƒæƒ…å†µå’Œç¦»ç¾¤å€¼ã€‚é€šè¿‡è§‚å¯Ÿç®±çº¿å›¾ï¼Œä½ å¯ä»¥äº†è§£æ•°æ®çš„ä¸­ä½æ•°ã€å››åˆ†ä½æ•°ã€ç¦»ç¾¤å€¼ç­‰ç»Ÿè®¡ä¿¡æ¯ï¼Œä»è€Œæ›´å¥½åœ°ç†è§£æ•°æ®çš„æ•´ä½“åˆ†å¸ƒå’Œå¼‚å¸¸æƒ…å†µã€‚</p><p>ä»¥ä¸‹æ˜¯å¦‚ä½•çœ‹ç®±çº¿å›¾çš„ä¸€äº›æ–¹æ³•ï¼š</p><ol><li><p><strong>ç®±ä½“ï¼š</strong> ç®±çº¿å›¾çš„ä¸»è¦éƒ¨åˆ†æ˜¯ç®±ä½“ï¼Œå®ƒè¡¨ç¤ºæ•°æ®çš„å››åˆ†ä½æ•°èŒƒå›´ã€‚ç®±ä½“çš„åº•è¾¹ç•Œå’Œé¡¶è¾¹ç•Œåˆ†åˆ«å¯¹åº”ç¬¬ä¸€å››åˆ†ä½æ•°ï¼ˆQ1ï¼‰å’Œç¬¬ä¸‰å››åˆ†ä½æ•°ï¼ˆQ3ï¼‰ã€‚ç®±ä½“çš„ä¸­é—´çº¿è¡¨ç¤ºä¸­ä½æ•°ï¼ˆQ2ï¼‰ï¼Œå³æ•°æ®çš„ä¸­å€¼ã€‚ç®±ä½“çš„é«˜åº¦åæ˜ äº†æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ï¼Œè¶Šé«˜è¡¨ç¤ºæ•°æ®çš„å˜å¼‚æ€§è¶Šå¤§ã€‚</p></li><li><p><strong>ç®±é¡»çº¿ï¼š</strong> ç®±çº¿å›¾çš„ç®±é¡»çº¿å»¶ä¼¸å‡ºç®±ä½“ï¼Œè¡¨ç¤ºæ•°æ®çš„èŒƒå›´ã€‚ä¸Šè¾¹çš„ç®±é¡»çº¿é€šå¸¸è¡¨ç¤ºæ•°æ®ä¸­çš„æœ€å¤§å€¼ï¼ˆé™¤å»ç¦»ç¾¤å€¼ï¼‰ï¼Œä¸‹è¾¹çš„ç®±é¡»çº¿è¡¨ç¤ºæ•°æ®ä¸­çš„æœ€å°å€¼ï¼ˆé™¤å»ç¦»ç¾¤å€¼ï¼‰ã€‚ç®±é¡»çº¿å¯ä»¥å¸®åŠ©ä½ äº†è§£æ•°æ®çš„æ•´ä½“èŒƒå›´ã€‚</p></li><li><p><strong>ç¦»ç¾¤å€¼ï¼š</strong> ç¦»ç¾¤å€¼æ˜¯æŒ‡æ•°æ®ä¸­æ˜æ˜¾åç¦»å…¶ä»–æ•°æ®çš„å€¼ã€‚åœ¨ç®±çº¿å›¾ä¸­ï¼Œé€šå¸¸å°†ç¦»ç¾¤å€¼å•ç‹¬è¡¨ç¤ºä¸ºæ•£ç‚¹æˆ–å°åœ†åœˆã€‚ç¦»ç¾¤å€¼å¯èƒ½æ˜¯æ•°æ®ä¸­çš„å¼‚å¸¸å€¼ï¼Œä¹Ÿå¯èƒ½è¡¨ç¤ºäº†æ•°æ®çš„ç‰¹æ®Šæƒ…å†µã€‚é€šè¿‡è§‚å¯Ÿç¦»ç¾¤å€¼ï¼Œä½ å¯ä»¥åˆ¤æ–­æ•°æ®ä¸­æ˜¯å¦å­˜åœ¨å¼‚å¸¸æˆ–ç‰¹æ®Šçš„è§‚æµ‹å€¼ã€‚</p></li><li><p><strong>æ¯”è¾ƒç®±çº¿å›¾ï¼š</strong> å¦‚æœæœ‰å¤šä¸ªæ•°æ®é›†çš„ç®±çº¿å›¾åœ¨åŒä¸€å¼ å›¾ä¸­æ˜¾ç¤ºï¼Œä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒå®ƒä»¬æ¥è§‚å¯Ÿæ•°æ®çš„å·®å¼‚å’Œå…±æ€§ã€‚æ¯”è¾ƒä¸åŒç®±çº¿å›¾å¯ä»¥å¸®åŠ©ä½ å‘ç°æ•°æ®ä¹‹é—´çš„å¼‚åŒï¼Œä»¥åŠæ˜¯å¦å­˜åœ¨æŸç§è¶‹åŠ¿æˆ–æ¨¡å¼ã€‚</p></li><li><p><strong>åæ€å’Œå°¾é‡ï¼š</strong> ç®±çº¿å›¾ä¹Ÿå¯ä»¥ç”¨æ¥è§‚å¯Ÿæ•°æ®çš„åæ€ï¼ˆSkewnessï¼‰å’Œå°¾é‡ï¼ˆHeavy Tailsï¼‰ã€‚åæ€è¡¨ç¤ºæ•°æ®åˆ†å¸ƒçš„ä¸å¯¹ç§°ç¨‹åº¦ï¼Œæ­£åæ€è¡¨ç¤ºæ•°æ®å³ä¾§è¾ƒé•¿ï¼Œè´Ÿåæ€è¡¨ç¤ºæ•°æ®å·¦ä¾§è¾ƒé•¿ã€‚å°¾é‡è¡¨ç¤ºæ•°æ®åˆ†å¸ƒçš„å°¾éƒ¨æ¦‚ç‡å¯†åº¦è¾ƒå¤§ï¼Œå°¾éƒ¨çš„æ¦‚ç‡åˆ†å¸ƒæ¯”è¾ƒé‡ã€‚</p></li><li><p><strong>å¼‚å¸¸æ£€æµ‹ï¼š</strong> ç®±çº¿å›¾å¯ä»¥ç”¨äºè¯†åˆ«æ•°æ®ä¸­çš„å¼‚å¸¸å€¼ã€‚é€šå¸¸ï¼Œè¶…å‡ºç®±é¡»çº¿çš„æ•°æ®ç‚¹å¯èƒ½æ˜¯ç¦»ç¾¤å€¼æˆ–å¼‚å¸¸å€¼ï¼Œå€¼å¾—æ³¨æ„å’Œè¿›ä¸€æ­¥è°ƒæŸ¥ã€‚</p></li></ol><p>é€šè¿‡åˆç†è§‚å¯Ÿå’Œè§£é‡Šç®±çº¿å›¾çš„å„ä¸ªå…ƒç´ ï¼Œä½ å¯ä»¥å¾—åˆ°å…³äºæ•°æ®åˆ†å¸ƒã€åæ€ã€å¼‚å¸¸å€¼ç­‰æ–¹é¢çš„ç›´è§‚è®¤è¯†ï¼Œå¹¶ä»ä¸­è·å–å¯¹æ•°æ®çš„æ´å¯Ÿå’Œè§è§£ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_boxplot_plot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_boxplot_plot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="boxplot"><h3 id="è¯¯å·®çº¿å›¾"><a href="#è¯¯å·®çº¿å›¾" class="headerlink" title="è¯¯å·®çº¿å›¾"></a>è¯¯å·®çº¿å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line">y = [<span class="number">3.6</span>, <span class="number">5</span>, <span class="number">4.2</span>]</span><br><span class="line">yerr = [<span class="number">0.9</span>, <span class="number">1.2</span>, <span class="number">0.5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.errorbar(x, y, yerr, fmt=<span class="string">&#x27;o&#x27;</span>, linewidth=<span class="number">2</span>, capsize=<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = [2, 4, 6]</code>: å®šä¹‰ä¸€ä¸ªåŒ…å«3ä¸ªxåæ ‡çš„åˆ—è¡¨ã€‚</p></li><li><p><code>y = [3.6, 5, 4.2]</code>: å®šä¹‰ä¸€ä¸ªåŒ…å«3ä¸ªyåæ ‡çš„åˆ—è¡¨ï¼Œè¿™äº›yåæ ‡è¡¨ç¤ºåœ¨ç›¸åº”xä½ç½®ä¸Šçš„æµ‹é‡å€¼ã€‚</p></li><li><p><code>yerr = [0.9, 1.2, 0.5]</code>: å®šä¹‰ä¸€ä¸ªåŒ…å«3ä¸ªyè¯¯å·®çš„åˆ—è¡¨ï¼Œè¡¨ç¤ºåœ¨ç›¸åº”xä½ç½®ä¸Šçš„æµ‹é‡å€¼çš„è¯¯å·®èŒƒå›´ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.errorbar(x, y, yerr, fmt=&#39;o&#39;, linewidth=2, capsize=6)</code>: ä½¿ç”¨<code>ax.errorbar</code>å‡½æ•°ç»˜åˆ¶å¸¦æœ‰è¯¯å·®çº¿çš„æ•£ç‚¹å›¾ã€‚<code>x</code>å’Œ<code>y</code>æ˜¯æ•£ç‚¹çš„æ¨ªçºµåæ ‡æ•°æ®ï¼Œ<code>yerr</code>æ˜¯yæ–¹å‘çš„è¯¯å·®èŒƒå›´ã€‚<code>fmt=&#39;o&#39;</code>æŒ‡å®šæ•£ç‚¹çš„å½¢çŠ¶ä¸ºåœ†ç‚¹ï¼Œ<code>linewidth=2</code>è®¾ç½®è¯¯å·®çº¿çš„å®½åº¦ä¸º2ï¼Œ<code>capsize=6</code>è®¾ç½®è¯¯å·®çº¿ä¸¤ç«¯çš„æ¨ªçº¿é•¿åº¦ä¸º6ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´å’Œåˆ»åº¦ã€‚<code>xlim=(0, 8)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>xticks=np.arange(1, 8)</code>è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ï¼Œ<code>ylim=(0, 8)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>yticks=np.arange(1, 8)</code>è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªå¸¦æœ‰è¯¯å·®çº¿çš„æ•£ç‚¹å›¾ï¼Œå…¶ä¸­æ¯ä¸ªæ•£ç‚¹è¡¨ç¤ºåœ¨ç›¸åº”xä½ç½®ä¸Šçš„æµ‹é‡å€¼ï¼Œè¯¯å·®çº¿è¡¨ç¤ºäº†åœ¨ç›¸åº”xä½ç½®ä¸Šçš„æµ‹é‡å€¼çš„è¯¯å·®èŒƒå›´ã€‚å¸¦è¯¯å·®çº¿çš„æ•£ç‚¹å›¾å¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£æ•°æ®çš„å¯é æ€§å’Œæµ‹é‡è¯¯å·®ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_errorbar_plot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_errorbar_plot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="errorbar"><h3 id="å°æç´å›¾"><a href="#å°æç´å›¾" class="headerlink" title="å°æç´å›¾"></a>å°æç´å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">np.random.seed(<span class="number">10</span>)</span><br><span class="line">D = np.random.normal((<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>), (<span class="number">0.75</span>, <span class="number">1.00</span>, <span class="number">0.75</span>), (<span class="number">200</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">vp = ax.violinplot(D, [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>], widths=<span class="number">2</span>,</span><br><span class="line">                   showmeans=<span class="literal">False</span>, showmedians=<span class="literal">False</span>, showextrema=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># styling:</span></span><br><span class="line"><span class="keyword">for</span> body <span class="keyword">in</span> vp[<span class="string">&#x27;bodies&#x27;</span>]:</span><br><span class="line">    body.set_alpha(<span class="number">0.9</span>)</span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(10)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>D = np.random.normal((3, 5, 4), (0.75, 1.00, 0.75), (200, 3))</code>: ä½¿ç”¨<code>np.random.normal</code>ç”Ÿæˆä¸‰ç»„åŒ…å«200ä¸ªéšæœºæ•°çš„æ•°æ®é›†ï¼Œæ¯ç»„æ•°æ®é›†å¯¹åº”ä¸€ä¸ªæ­£æ€åˆ†å¸ƒã€‚å…¶ä¸­ <code>(3, 5, 4)</code> æ˜¯å‡å€¼ï¼Œ<code>(0.75, 1.00, 0.75)</code> æ˜¯æ ‡å‡†å·®ï¼Œ<code>(200, 3)</code> æ˜¯ç”Ÿæˆçš„æ•°æ®é›†çš„å½¢çŠ¶ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>vp = ax.violinplot(D, [2, 4, 6], widths=2, showmeans=False, showmedians=False, showextrema=False)</code>: ä½¿ç”¨<code>ax.violinplot</code>å‡½æ•°ç»˜åˆ¶å°æç´å›¾ã€‚<code>D</code> æ˜¯è¦ç»˜åˆ¶çš„æ•°æ®é›†ï¼Œ<code>[2, 4, 6]</code> è®¾ç½®äº†æ¯ä¸ªå°æç´å›¾çš„ä½ç½®ï¼Œå³å°†ä¸‰ä¸ªæ•°æ®é›†ç»˜åˆ¶åœ¨xè½´ä¸Šçš„ä½ç½®ä¸º2ã€4å’Œ6ã€‚<code>widths=2</code> è®¾ç½®äº†å°æç´å›¾çš„å®½åº¦ä¸º2ã€‚<code>showmeans=False</code>ã€<code>showmedians=False</code> å’Œ <code>showextrema=False</code> åˆ†åˆ«è®¾ç½®ä¸æ˜¾ç¤ºå‡å€¼ã€ä¸­ä½æ•°å’Œæå€¼çº¿ã€‚å°æç´å›¾é€šè¿‡æ ¸å¯†åº¦ä¼°è®¡å±•ç¤ºäº†æ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚</p></li><li><p><code>for body in vp[&#39;bodies&#39;]: body.set_alpha(0.9)</code>: å¯¹å°æç´å›¾çš„ä¸»ä½“è¿›è¡Œæ ·å¼è®¾ç½®ï¼Œå°†å…¶é€æ˜åº¦è®¾ç½®ä¸º0.9ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´å’Œåˆ»åº¦ã€‚<code>xlim=(0, 8)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>xticks=np.arange(1, 8)</code>è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ï¼Œ<code>ylim=(0, 8)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>yticks=np.arange(1, 8)</code>è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸‰ä¸ªå°æç´å›¾ï¼Œæ¯ä¸ªå°æç´å›¾ä»£è¡¨ä¸€ä¸ªæ•°æ®é›†çš„åˆ†å¸ƒæƒ…å†µã€‚å°æç´å›¾å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´è§‚åœ°äº†è§£æ•°æ®çš„åˆ†å¸ƒåŠå…¶å¯†åº¦ï¼Œä»è€Œæ›´å¥½åœ°ç†è§£æ•°æ®é›†çš„ç‰¹å¾å’Œç»Ÿè®¡å±æ€§ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_violin_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_violin_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="violinplot"><h3 id="äº‹ä»¶å›¾"><a href="#äº‹ä»¶å›¾" class="headerlink" title="äº‹ä»¶å›¾"></a>äº‹ä»¶å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line">D = np.random.gamma(<span class="number">4</span>, size=(<span class="number">3</span>, <span class="number">50</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.eventplot(D, orientation=<span class="string">&quot;vertical&quot;</span>, lineoffsets=x, linewidth=<span class="number">0.75</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = [2, 4, 6]</code>: å®šä¹‰ä¸€ä¸ªåŒ…å«3ä¸ªxåæ ‡çš„åˆ—è¡¨ã€‚</p></li><li><p><code>D = np.random.gamma(4, size=(3, 50))</code>: ä½¿ç”¨<code>np.random.gamma</code>ç”Ÿæˆä¸‰ä¸ªæ•°æ®é›†ï¼Œæ¯ä¸ªæ•°æ®é›†åŒ…å«50ä¸ªä»Gammaåˆ†å¸ƒä¸­éšæœºç”Ÿæˆçš„å€¼ã€‚Gammaåˆ†å¸ƒæ˜¯ä¸€ç§å¸¸è§çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå®ƒåœ¨è®¸å¤šé¢†åŸŸä¸­éƒ½æœ‰åº”ç”¨ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.eventplot(D, orientation=&quot;vertical&quot;, lineoffsets=x, linewidth=0.75)</code>: ä½¿ç”¨<code>ax.eventplot</code>å‡½æ•°ç»˜åˆ¶äº‹ä»¶å›¾ã€‚<code>D</code> æ˜¯è¦ç»˜åˆ¶çš„æ•°æ®é›†ï¼Œ<code>orientation=&quot;vertical&quot;</code> æŒ‡å®šäº‹ä»¶å›¾çš„æ–¹å‘ä¸ºå‚ç›´æ–¹å‘ã€‚<code>lineoffsets=x</code> è®¾ç½®äº†äº‹ä»¶å›¾çš„xåæ ‡ä½ç½®ï¼Œå³å°†ä¸‰ä¸ªæ•°æ®é›†ç»˜åˆ¶åœ¨xè½´ä¸Šçš„ä½ç½®ä¸º2ã€4å’Œ6ã€‚<code>linewidth=0.75</code> è®¾ç½®äº‹ä»¶å›¾çš„çº¿å®½ä¸º0.75ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´å’Œåˆ»åº¦ã€‚<code>xlim=(0, 8)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>xticks=np.arange(1, 8)</code>è®¾ç½®xè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ï¼Œ<code>ylim=(0, 8)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>yticks=np.arange(1, 8)</code>è®¾ç½®yè½´åˆ»åº¦ä¸ºä»1åˆ°7çš„æ•´æ•°åˆ»åº¦ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸‰ä¸ªäº‹ä»¶å›¾ï¼Œæ¯ä¸ªäº‹ä»¶å›¾ä»£è¡¨ä¸€ä¸ªæ•°æ®é›†çš„äº‹ä»¶å‘ç”Ÿæƒ…å†µã€‚äº‹ä»¶å›¾å¯ä»¥ç”¨äºå¯è§†åŒ–æ•°æ®ä¸­çš„äº‹ä»¶å‘ç”Ÿæ¬¡æ•°æˆ–å‘ç”Ÿæ—¶é—´ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£æ•°æ®çš„åˆ†å¸ƒå’Œäº‹ä»¶ä¹‹é—´çš„å…³è”æ€§ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_eventplot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_eventplot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="eventplot"><h3 id="äºŒç»´ç›´æ–¹å›¾"><a href="#äºŒç»´ç›´æ–¹å›¾" class="headerlink" title="äºŒç»´ç›´æ–¹å›¾"></a>äºŒç»´ç›´æ–¹å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data: correlated + noise</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = np.random.randn(<span class="number">5000</span>)</span><br><span class="line">y = <span class="number">1.2</span> * x + np.random.randn(<span class="number">5000</span>) / <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.hist2d(x, y, bins=(np.arange(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">0.1</span>), np.arange(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">0.1</span>)))</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(-<span class="number">2</span>, <span class="number">2</span>), ylim=(-<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = np.random.randn(5000)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«5000ä¸ªéšæœºæ•°çš„æ•°ç»„xï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼ˆå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼‰ä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>y = 1.2 * x + np.random.randn(5000) / 3</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«5000ä¸ªéšæœºæ•°çš„æ•°ç»„yï¼Œå…¶ä¸­yä¸xå…·æœ‰ä¸€å®šçš„çº¿æ€§ç›¸å…³æ€§ï¼Œå¹¶æ·»åŠ äº†ä¸€äº›å™ªå£°ã€‚å…·ä½“åœ°ï¼Œyæ˜¯ç”±xçº¿æ€§å˜æ¢å¾—åˆ°ï¼Œå¹¶åŠ ä¸Šäº†ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­éšæœºç”Ÿæˆçš„å™ªå£°ï¼Œå™ªå£°çš„æ ‡å‡†å·®ä¸º1&#x2F;3ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.hist2d(x, y, bins=(np.arange(-3, 3, 0.1), np.arange(-3, 3, 0.1)))</code>: ä½¿ç”¨<code>ax.hist2d</code>å‡½æ•°ç»˜åˆ¶äºŒç»´ç›´æ–¹å›¾ã€‚<code>x</code>å’Œ<code>y</code>æ˜¯è¦ç»˜åˆ¶çš„äºŒç»´æ•°æ®ï¼Œ<code>bins</code>è®¾ç½®äº†ç›´æ–¹å›¾çš„åŒºé—´èŒƒå›´å’Œåˆ†ç®±æ•°ç›®ã€‚åœ¨è¿™é‡Œï¼Œxå’Œyçš„åŒºé—´èŒƒå›´éƒ½æ˜¯ä»-3åˆ°3ï¼Œåˆ†ç®±æ•°ç›®ä¸º60ï¼ˆ(3-(-3)) &#x2F; 0.1 &#x3D; 60ï¼‰ã€‚</p></li><li><p><code>ax.set(xlim=(-2, 2), ylim=(-3, 3))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´ã€‚<code>xlim=(-2, 2)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º-2åˆ°2ï¼Œ<code>ylim=(-3, 3)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªäºŒç»´ç›´æ–¹å›¾ï¼Œç”¨äºå±•ç¤ºä¸¤ä¸ªå˜é‡xå’Œyä¹‹é—´çš„ç›¸å…³æ€§å’Œåˆ†å¸ƒæƒ…å†µã€‚äºŒç»´ç›´æ–¹å›¾å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›´è§‚åœ°äº†è§£ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»å’Œåˆ†å¸ƒç‰¹å¾ï¼Œå°¤å…¶é€‚ç”¨äºè§‚å¯Ÿå¤§é‡æ•°æ®ç‚¹çš„æƒ…å†µã€‚åœ¨ç›´æ–¹å›¾ä¸­ï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤ºæ•°æ®ç‚¹è¶Šå¯†é›†ï¼Œé¢œè‰²è¶Šæµ…è¡¨ç¤ºæ•°æ®ç‚¹è¾ƒå°‘ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_hist2d_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_hist2d_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="hist2d"><h3 id="å…­è¾¹å½¢å›¾"><a href="#å…­è¾¹å½¢å›¾" class="headerlink" title="å…­è¾¹å½¢å›¾"></a>å…­è¾¹å½¢å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data: correlated + noise</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = np.random.randn(<span class="number">5000</span>)</span><br><span class="line">y = <span class="number">1.2</span> * x + np.random.randn(<span class="number">5000</span>) / <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.hexbin(x, y, gridsize=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(-<span class="number">2</span>, <span class="number">2</span>), ylim=(-<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = np.random.randn(5000)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«5000ä¸ªéšæœºæ•°çš„æ•°ç»„xï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼ˆå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼‰ä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>y = 1.2 * x + np.random.randn(5000) / 3</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«5000ä¸ªéšæœºæ•°çš„æ•°ç»„yï¼Œå…¶ä¸­yä¸xå…·æœ‰ä¸€å®šçš„çº¿æ€§ç›¸å…³æ€§ï¼Œå¹¶æ·»åŠ äº†ä¸€äº›å™ªå£°ã€‚å…·ä½“åœ°ï¼Œyæ˜¯ç”±xçº¿æ€§å˜æ¢å¾—åˆ°ï¼Œå¹¶åŠ ä¸Šäº†ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­éšæœºç”Ÿæˆçš„å™ªå£°ï¼Œå™ªå£°çš„æ ‡å‡†å·®ä¸º1&#x2F;3ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.hexbin(x, y, gridsize=20)</code>: ä½¿ç”¨<code>ax.hexbin</code>å‡½æ•°ç»˜åˆ¶å…­è¾¹å½¢å›¾ã€‚<code>x</code>å’Œ<code>y</code>æ˜¯è¦ç»˜åˆ¶çš„äºŒç»´æ•°æ®ï¼Œ<code>gridsize=20</code>è®¾ç½®äº†å…­è¾¹å½¢çš„ç½‘æ ¼å¤§å°ã€‚è¯¥å‚æ•°æ§åˆ¶äº†å…­è¾¹å½¢çš„å¤§å°å’Œå¯†åº¦ï¼Œæ•°å€¼è¶Šå¤§ï¼Œè¡¨ç¤ºå…­è¾¹å½¢çš„å¤§å°è¶Šå°ã€å¯†åº¦è¶Šå¤§ã€‚</p></li><li><p><code>ax.set(xlim=(-2, 2), ylim=(-3, 3))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´ã€‚<code>xlim=(-2, 2)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º-2åˆ°2ï¼Œ<code>ylim=(-3, 3)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªå…­è¾¹å½¢å›¾ï¼Œç”¨äºå±•ç¤ºä¸¤ä¸ªå˜é‡xå’Œyä¹‹é—´çš„ç›¸å…³æ€§å’Œåˆ†å¸ƒæƒ…å†µã€‚å…­è¾¹å½¢å›¾åœ¨å¤„ç†å¤§é‡æ•°æ®ç‚¹æ—¶æœ‰ç€è¾ƒå¥½çš„å¯è§†åŒ–æ•ˆæœï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»å’Œåˆ†å¸ƒç‰¹å¾ã€‚åœ¨å›¾ä¸­ï¼Œå…­è¾¹å½¢çš„é¢œè‰²æ·±æµ…è¡¨ç¤ºæ•°æ®ç‚¹çš„å¯†é›†ç¨‹åº¦ï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤ºæ•°æ®ç‚¹è¶Šå¯†é›†ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_hexbin_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_hexbin_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="hexbin"><h3 id="é¥¼å›¾"><a href="#é¥¼å›¾" class="headerlink" title="é¥¼å›¾"></a>é¥¼å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># make data</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">colors = plt.get_cmap(<span class="string">&#x27;Blues&#x27;</span>)(np.linspace(<span class="number">0.2</span>, <span class="number">0.7</span>, <span class="built_in">len</span>(x)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.pie(x, colors=colors, radius=<span class="number">3</span>, center=(<span class="number">4</span>, <span class="number">4</span>),</span><br><span class="line">       wedgeprops=&#123;<span class="string">&quot;linewidth&quot;</span>: <span class="number">1</span>, <span class="string">&quot;edgecolor&quot;</span>: <span class="string">&quot;white&quot;</span>&#125;, frame=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(<span class="number">0</span>, <span class="number">8</span>), xticks=np.arange(<span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">       ylim=(<span class="number">0</span>, <span class="number">8</span>), yticks=np.arange(<span class="number">1</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x = [1, 2, 3, 4]</code>: å®šä¹‰äº†ä¸€ä¸ªåŒ…å«4ä¸ªæ•°æ®ç‚¹çš„åˆ—è¡¨xï¼Œæ¯ä¸ªæ•°æ®ç‚¹è¡¨ç¤ºé¥¼å›¾ä¸­çš„ä¸€ä¸ªæ‰‡åŒºã€‚</p></li><li><p><code>colors = plt.get_cmap(&#39;Blues&#39;)(np.linspace(0.2, 0.7, len(x)))</code>: ä½¿ç”¨<code>plt.get_cmap(&#39;Blues&#39;)</code>å‡½æ•°è·å–ä¸€ä¸ªè“è‰²è°ƒè‰²æ¿ï¼Œ<code>np.linspace(0.2, 0.7, len(x))</code>ç”¨äºç”Ÿæˆä¸€ä¸ª0.2åˆ°0.7çš„ç­‰å·®æ•°åˆ—ï¼Œé•¿åº¦ä¸æ•°æ®ç‚¹ä¸ªæ•°ç›¸åŒã€‚è¿™äº›æ•°å€¼ç”¨äºå®šä¹‰æ‰‡åŒºçš„é¢œè‰²ï¼Œé¢œè‰²é€æ¸ä»æµ…è“åˆ°æ·±è“ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.pie(x, colors=colors, radius=3, center=(4, 4), wedgeprops=&#123;&quot;linewidth&quot;: 1, &quot;edgecolor&quot;: &quot;white&quot;&#125;, frame=True)</code>: ä½¿ç”¨<code>ax.pie</code>å‡½æ•°ç»˜åˆ¶é¥¼å›¾ã€‚<code>x</code>æ˜¯è¦ç»˜åˆ¶çš„æ•°æ®ï¼Œ<code>colors=colors</code>ç”¨äºè®¾ç½®æ‰‡åŒºçš„é¢œè‰²ï¼Œ<code>radius=3</code>è®¾ç½®é¥¼å›¾çš„åŠå¾„ä¸º3ä¸ªå•ä½ï¼Œ<code>center=(4, 4)</code>è®¾ç½®é¥¼å›¾çš„ä¸­å¿ƒä½ç½®ä¸ºåæ ‡(4, 4)å¤„ï¼Œ<code>wedgeprops=&#123;&quot;linewidth&quot;: 1, &quot;edgecolor&quot;: &quot;white&quot;&#125;</code>ç”¨äºè®¾ç½®æ‰‡åŒºè¾¹ç•Œçš„çº¿å®½å’Œé¢œè‰²ï¼Œ<code>frame=True</code>è¡¨ç¤ºæ˜¾ç¤ºé¥¼å›¾çš„è¾¹æ¡†ã€‚</p></li><li><p><code>ax.set(xlim=(0, 8), xticks=np.arange(1, 8), ylim=(0, 8), yticks=np.arange(1, 8))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´å’Œåˆ»åº¦ä½ç½®ã€‚<code>xlim=(0, 8)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>xticks=np.arange(1, 8)</code>è®¾ç½®xè½´çš„åˆ»åº¦ä½ç½®ä¸º1åˆ°7ï¼Œ<code>ylim=(0, 8)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º0åˆ°8ï¼Œ<code>yticks=np.arange(1, 8)</code>è®¾ç½®yè½´çš„åˆ»åº¦ä½ç½®ä¸º1åˆ°7ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªé¥¼å›¾ï¼Œç”¨äºå±•ç¤ºä¸€ç»„æ•°æ®çš„å æ¯”æƒ…å†µã€‚æ¯ä¸ªæ•°æ®ç‚¹å¯¹åº”é¥¼å›¾ä¸­çš„ä¸€ä¸ªæ‰‡åŒºï¼Œæ‰‡åŒºçš„é¢ç§¯è¡¨ç¤ºè¯¥æ•°æ®ç‚¹åœ¨æ€»ä½“ä¸­çš„å æ¯”ã€‚é¢œè‰²ä»æµ…è“åˆ°æ·±è“é€æ¸å˜åŒ–ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æ•°æ®ç‚¹ã€‚é¥¼å›¾æ˜¯ä¸€ç§å¸¸ç”¨çš„å¯è§†åŒ–æ–¹å¼ï¼Œé€‚ç”¨äºå±•ç¤ºä¸åŒç±»åˆ«åœ¨æ€»ä½“ä¸­çš„æ¯”ä¾‹å…³ç³»ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_pie_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_pie_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="pie"><h3 id="ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾"><a href="#ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾" class="headerlink" title="ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾"></a>ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = np.random.uniform(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>)</span><br><span class="line">y = np.random.uniform(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>)</span><br><span class="line">z = (<span class="number">1</span> - x/<span class="number">2</span> + x**<span class="number">5</span> + y**<span class="number">3</span>) * np.exp(-x**<span class="number">2</span> - y**<span class="number">2</span>)</span><br><span class="line">levels = np.linspace(z.<span class="built_in">min</span>(), z.<span class="built_in">max</span>(), <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.plot(x, y, <span class="string">&#x27;o&#x27;</span>, markersize=<span class="number">2</span>, color=<span class="string">&#x27;lightgrey&#x27;</span>)</span><br><span class="line">ax.tricontour(x, y, z, levels=levels)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(-<span class="number">3</span>, <span class="number">3</span>), ylim=(-<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = np.random.uniform(-3, 3, 256)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„xï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-3åˆ°3çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>y = np.random.uniform(-3, 3, 256)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„yï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-3åˆ°3çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>z = (1 - x/2 + x**5 + y**3) * np.exp(-x**2 - y**2)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„zï¼Œå…¶ä¸­zæ˜¯é€šè¿‡å¯¹xã€yè¿›è¡Œä¸€ç³»åˆ—æ•°å­¦è¿ç®—å¾—åˆ°çš„ã€‚å…·ä½“åœ°ï¼Œzæ˜¯é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—å¾—åˆ°çš„ï¼šz &#x3D; (1 - x&#x2F;2 + x<strong>5 + y</strong>3) * np.exp(-x<strong>2 - y</strong>2)ã€‚</p></li><li><p><code>levels = np.linspace(z.min(), z.max(), 7)</code>: ä½¿ç”¨<code>np.linspace</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªåŒ…å«7ä¸ªæ•°å€¼çš„ç­‰å·®æ•°åˆ—ï¼Œè¿™äº›æ•°å€¼åœ¨zçš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.plot(x, y, &#39;o&#39;, markersize=2, color=&#39;lightgrey&#39;)</code>: ä½¿ç”¨<code>ax.plot</code>å‡½æ•°ç»˜åˆ¶åŸå§‹æ•°æ®ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œå°†xã€yä½œä¸ºæ•£ç‚¹å›¾ç»˜åˆ¶åœ¨å›¾ä¸­ï¼Œå¹¶ä½¿ç”¨<code>&#39;o&#39;</code>è¡¨ç¤ºæ•£ç‚¹å½¢çŠ¶ä¸ºåœ†åœˆï¼Œ<code>markersize=2</code>è®¾ç½®æ•£ç‚¹çš„å¤§å°ä¸º2ä¸ªå•ä½ï¼Œ<code>color=&#39;lightgrey&#39;</code>è®¾ç½®æ•£ç‚¹çš„é¢œè‰²ä¸ºæµ…ç°è‰²ã€‚</p></li><li><p><code>ax.tricontour(x, y, z, levels=levels)</code>: ä½¿ç”¨<code>ax.tricontour</code>å‡½æ•°ç»˜åˆ¶ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾ã€‚<code>x</code>ã€<code>y</code>æ˜¯åŸå§‹æ•°æ®ç‚¹çš„åæ ‡ï¼Œ<code>z</code>æ˜¯å¯¹åº”çš„é«˜åº¦å€¼ï¼Œ<code>levels=levels</code>ç”¨äºè®¾ç½®ç­‰é«˜çº¿çš„æ•°å€¼ã€‚</p></li><li><p><code>ax.set(xlim=(-3, 3), ylim=(-3, 3))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´ã€‚<code>xlim=(-3, 3)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ï¼Œ<code>ylim=(-3, 3)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾ï¼Œç”¨äºå±•ç¤ºäºŒç»´æ•°æ®åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„ç­‰é«˜çº¿åˆ†å¸ƒæƒ…å†µã€‚ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾é€‚ç”¨äºå¤„ç†åœ¨ä¸è§„åˆ™ç½‘æ ¼ä¸Šçš„æ•°æ®ç‚¹ï¼Œå¯ä»¥æ›´å‡†ç¡®åœ°è¡¨ç¤ºæ•°æ®çš„åˆ†å¸ƒæƒ…å†µï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬ç†è§£æ•°æ®çš„å˜åŒ–è¶‹åŠ¿ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_tricontour_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_tricontour_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="tricontour"><h3 id="å¡«å……ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾"><a href="#å¡«å……ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾" class="headerlink" title="å¡«å……ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾"></a>å¡«å……ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = np.random.uniform(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>)</span><br><span class="line">y = np.random.uniform(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>)</span><br><span class="line">z = (<span class="number">1</span> - x/<span class="number">2</span> + x**<span class="number">5</span> + y**<span class="number">3</span>) * np.exp(-x**<span class="number">2</span> - y**<span class="number">2</span>)</span><br><span class="line">levels = np.linspace(z.<span class="built_in">min</span>(), z.<span class="built_in">max</span>(), <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.plot(x, y, <span class="string">&#x27;o&#x27;</span>, markersize=<span class="number">2</span>, color=<span class="string">&#x27;grey&#x27;</span>)</span><br><span class="line">ax.tricontourf(x, y, z, levels=levels)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(-<span class="number">3</span>, <span class="number">3</span>), ylim=(-<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = np.random.uniform(-3, 3, 256)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„xï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-3åˆ°3çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>y = np.random.uniform(-3, 3, 256)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„yï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-3åˆ°3çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>z = (1 - x/2 + x**5 + y**3) * np.exp(-x**2 - y**2)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„zï¼Œå…¶ä¸­zæ˜¯é€šè¿‡å¯¹xã€yè¿›è¡Œä¸€ç³»åˆ—æ•°å­¦è¿ç®—å¾—åˆ°çš„ã€‚å…·ä½“åœ°ï¼Œzæ˜¯é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—å¾—åˆ°çš„ï¼šz &#x3D; (1 - x&#x2F;2 + x<strong>5 + y</strong>3) * np.exp(-x<strong>2 - y</strong>2)ã€‚</p></li><li><p><code>levels = np.linspace(z.min(), z.max(), 7)</code>: ä½¿ç”¨<code>np.linspace</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªåŒ…å«7ä¸ªæ•°å€¼çš„ç­‰å·®æ•°åˆ—ï¼Œè¿™äº›æ•°å€¼åœ¨zçš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.plot(x, y, &#39;o&#39;, markersize=2, color=&#39;grey&#39;)</code>: ä½¿ç”¨<code>ax.plot</code>å‡½æ•°ç»˜åˆ¶åŸå§‹æ•°æ®ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œå°†xã€yä½œä¸ºæ•£ç‚¹å›¾ç»˜åˆ¶åœ¨å›¾ä¸­ï¼Œå¹¶ä½¿ç”¨<code>&#39;o&#39;</code>è¡¨ç¤ºæ•£ç‚¹å½¢çŠ¶ä¸ºåœ†åœˆï¼Œ<code>markersize=2</code>è®¾ç½®æ•£ç‚¹çš„å¤§å°ä¸º2ä¸ªå•ä½ï¼Œ<code>color=&#39;grey&#39;</code>è®¾ç½®æ•£ç‚¹çš„é¢œè‰²ä¸ºç°è‰²ã€‚</p></li><li><p><code>ax.tricontourf(x, y, z, levels=levels)</code>: ä½¿ç”¨<code>ax.tricontourf</code>å‡½æ•°ç»˜åˆ¶å¡«å……ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾ã€‚<code>x</code>ã€<code>y</code>æ˜¯åŸå§‹æ•°æ®ç‚¹çš„åæ ‡ï¼Œ<code>z</code>æ˜¯å¯¹åº”çš„é«˜åº¦å€¼ï¼Œ<code>levels=levels</code>ç”¨äºè®¾ç½®ç­‰é«˜çº¿çš„æ•°å€¼ï¼Œå¹¶ä¸”ä½¿ç”¨å¡«å……é¢œè‰²è¡¨ç¤ºç­‰é«˜çº¿åŒºåŸŸã€‚</p></li><li><p><code>ax.set(xlim=(-3, 3), ylim=(-3, 3))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´ã€‚<code>xlim=(-3, 3)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ï¼Œ<code>ylim=(-3, 3)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªå¡«å……ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾ï¼Œç”¨äºå±•ç¤ºäºŒç»´æ•°æ®åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„ç­‰é«˜çº¿åˆ†å¸ƒæƒ…å†µï¼Œå¹¶é€šè¿‡å¡«å……é¢œè‰²æ¥å¼ºè°ƒä¸åŒé«˜åº¦åŒºåŸŸçš„å·®å¼‚ã€‚å¡«å……ä¸‰è§’å‰–åˆ†ç­‰é«˜çº¿å›¾é€‚ç”¨äºå¤„ç†åœ¨ä¸è§„åˆ™ç½‘æ ¼ä¸Šçš„æ•°æ®ç‚¹ï¼Œå¹¶ä¸”é€šè¿‡å¡«å……é¢œè‰²å¯ä»¥æ›´ç›´è§‚åœ°è¡¨ç¤ºæ•°æ®çš„å˜åŒ–è¶‹åŠ¿ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_tricontourf_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_tricontourf_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="tricontourf"><h3 id="ä¸‰è§’å‰–åˆ†å½©è‰²å›¾"><a href="#ä¸‰è§’å‰–åˆ†å½©è‰²å›¾" class="headerlink" title="ä¸‰è§’å‰–åˆ†å½©è‰²å›¾"></a>ä¸‰è§’å‰–åˆ†å½©è‰²å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = np.random.uniform(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>)</span><br><span class="line">y = np.random.uniform(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>)</span><br><span class="line">z = (<span class="number">1</span> - x/<span class="number">2</span> + x**<span class="number">5</span> + y**<span class="number">3</span>) * np.exp(-x**<span class="number">2</span> - y**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.plot(x, y, <span class="string">&#x27;o&#x27;</span>, markersize=<span class="number">2</span>, color=<span class="string">&#x27;grey&#x27;</span>)</span><br><span class="line">ax.tripcolor(x, y, z)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(-<span class="number">3</span>, <span class="number">3</span>), ylim=(-<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = np.random.uniform(-3, 3, 256)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„xï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-3åˆ°3çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>y = np.random.uniform(-3, 3, 256)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„yï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-3åˆ°3çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>z = (1 - x/2 + x**5 + y**3) * np.exp(-x**2 - y**2)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„zï¼Œå…¶ä¸­zæ˜¯é€šè¿‡å¯¹xã€yè¿›è¡Œä¸€ç³»åˆ—æ•°å­¦è¿ç®—å¾—åˆ°çš„ã€‚å…·ä½“åœ°ï¼Œzæ˜¯é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—å¾—åˆ°çš„ï¼šz &#x3D; (1 - x&#x2F;2 + x<strong>5 + y</strong>3) * np.exp(-x<strong>2 - y</strong>2)ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.plot(x, y, &#39;o&#39;, markersize=2, color=&#39;grey&#39;)</code>: ä½¿ç”¨<code>ax.plot</code>å‡½æ•°ç»˜åˆ¶åŸå§‹æ•°æ®ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œå°†xã€yä½œä¸ºæ•£ç‚¹å›¾ç»˜åˆ¶åœ¨å›¾ä¸­ï¼Œå¹¶ä½¿ç”¨<code>&#39;o&#39;</code>è¡¨ç¤ºæ•£ç‚¹å½¢çŠ¶ä¸ºåœ†åœˆï¼Œ<code>markersize=2</code>è®¾ç½®æ•£ç‚¹çš„å¤§å°ä¸º2ä¸ªå•ä½ï¼Œ<code>color=&#39;grey&#39;</code>è®¾ç½®æ•£ç‚¹çš„é¢œè‰²ä¸ºç°è‰²ã€‚</p></li><li><p><code>ax.tripcolor(x, y, z)</code>: ä½¿ç”¨<code>ax.tripcolor</code>å‡½æ•°ç»˜åˆ¶ä¸‰è§’å‰–åˆ†å½©è‰²å›¾ã€‚<code>x</code>ã€<code>y</code>æ˜¯åŸå§‹æ•°æ®ç‚¹çš„åæ ‡ï¼Œ<code>z</code>æ˜¯å¯¹åº”çš„é«˜åº¦å€¼ï¼Œå‡½æ•°å°†æ ¹æ®æ•°æ®ç‚¹çš„ä¸‰è§’å‰–åˆ†æƒ…å†µæ¥ç€è‰²ï¼Œå½¢æˆå½©è‰²çš„ä¸‰è§’åŒºåŸŸã€‚</p></li><li><p><code>ax.set(xlim=(-3, 3), ylim=(-3, 3))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´ã€‚<code>xlim=(-3, 3)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ï¼Œ<code>ylim=(-3, 3)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å‰–åˆ†å½©è‰²å›¾ï¼Œç”¨äºå±•ç¤ºäºŒç»´æ•°æ®åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„å˜åŒ–æƒ…å†µï¼Œå¹¶é€šè¿‡å½©è‰²è¡¨ç¤ºä¸åŒé«˜åº¦åŒºåŸŸçš„å·®å¼‚ã€‚ä¸‰è§’å‰–åˆ†å½©è‰²å›¾é€‚ç”¨äºå¤„ç†åœ¨ä¸è§„åˆ™ç½‘æ ¼ä¸Šçš„æ•°æ®ç‚¹ï¼Œå¹¶ä¸”é€šè¿‡å½©è‰²èƒ½å¤Ÿæ›´ç›´è§‚åœ°è¡¨ç¤ºæ•°æ®çš„å˜åŒ–è¶‹åŠ¿ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_tripcolor_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_tripcolor_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="tripcolor"><h3 id="ä¸‰è§’å‰–åˆ†å›¾"><a href="#ä¸‰è§’å‰–åˆ†å›¾" class="headerlink" title="ä¸‰è§’å‰–åˆ†å›¾"></a>ä¸‰è§’å‰–åˆ†å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery-nogrid&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make data:</span></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">x = np.random.uniform(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>)</span><br><span class="line">y = np.random.uniform(-<span class="number">3</span>, <span class="number">3</span>, <span class="number">256</span>)</span><br><span class="line">z = (<span class="number">1</span> - x/<span class="number">2</span> + x**<span class="number">5</span> + y**<span class="number">3</span>) * np.exp(-x**<span class="number">2</span> - y**<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot:</span></span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">ax.triplot(x, y)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xlim=(-<span class="number">3</span>, <span class="number">3</span>), ylim=(-<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery-nogrid&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery-nogrid&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(1)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>x = np.random.uniform(-3, 3, 256)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„xï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-3åˆ°3çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>y = np.random.uniform(-3, 3, 256)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„yï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-3åˆ°3çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>z = (1 - x/2 + x**5 + y**3) * np.exp(-x**2 - y**2)</code>: ç”Ÿæˆä¸€ä¸ªåŒ…å«256ä¸ªéšæœºæ•°çš„æ•°ç»„zï¼Œå…¶ä¸­zæ˜¯é€šè¿‡å¯¹xã€yè¿›è¡Œä¸€ç³»åˆ—æ•°å­¦è¿ç®—å¾—åˆ°çš„ã€‚å…·ä½“åœ°ï¼Œzæ˜¯é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—å¾—åˆ°çš„ï¼šz &#x3D; (1 - x&#x2F;2 + x<strong>5 + y</strong>3) * np.exp(-x<strong>2 - y</strong>2)ã€‚</p></li><li><p><code>fig, ax = plt.subplots()</code>: åˆ›å»ºä¸€ä¸ªå›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªåæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„åæ ‡è½´ã€‚</p></li><li><p><code>ax.triplot(x, y)</code>: ä½¿ç”¨<code>ax.triplot</code>å‡½æ•°ç»˜åˆ¶ä¸‰è§’å‰–åˆ†å›¾ã€‚<code>x</code>ã€<code>y</code>æ˜¯åŸå§‹æ•°æ®ç‚¹çš„åæ ‡ï¼Œå‡½æ•°ä¼šæ ¹æ®è¿™äº›æ•°æ®ç‚¹ä¹‹é—´çš„ä¸‰è§’å‰–åˆ†å…³ç³»ç»˜åˆ¶ä¸‰è§’ç½‘æ ¼ã€‚</p></li><li><p><code>ax.set(xlim=(-3, 3), ylim=(-3, 3))</code>: ä½¿ç”¨<code>ax.set</code>æ–¹æ³•è®¾ç½®åæ ‡è½´çš„æ˜¾ç¤ºèŒƒå›´ã€‚<code>xlim=(-3, 3)</code>è®¾ç½®xè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ï¼Œ<code>ylim=(-3, 3)</code>è®¾ç½®yè½´æ˜¾ç¤ºèŒƒå›´ä¸º-3åˆ°3ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç å°†ç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å‰–åˆ†å›¾ï¼Œç”¨äºå±•ç¤ºäºŒç»´æ•°æ®åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„æ•°æ®ç‚¹ä¹‹é—´çš„ä¸‰è§’å‰–åˆ†å…³ç³»ã€‚ä¸‰è§’å‰–åˆ†å›¾é€‚ç”¨äºå¤„ç†åœ¨ä¸è§„åˆ™ç½‘æ ¼ä¸Šçš„æ•°æ®ç‚¹ï¼Œå¹¶ä¸”é€šè¿‡ä¸‰è§’ç½‘æ ¼å¯ä»¥æ›´ç›´è§‚åœ°è¡¨ç¤ºæ•°æ®ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_triplot_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_triplot_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="triplot"><h3 id="ä¸‰ç»´æ•£ç‚¹å›¾"><a href="#ä¸‰ç»´æ•£ç‚¹å›¾" class="headerlink" title="ä¸‰ç»´æ•£ç‚¹å›¾"></a>ä¸‰ç»´æ•£ç‚¹å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make data</span></span><br><span class="line">np.random.seed(<span class="number">19680801</span>)</span><br><span class="line">n = <span class="number">100</span></span><br><span class="line">rng = np.random.default_rng()</span><br><span class="line">xs = rng.uniform(<span class="number">23</span>, <span class="number">32</span>, n)</span><br><span class="line">ys = rng.uniform(<span class="number">0</span>, <span class="number">100</span>, n)</span><br><span class="line">zs = rng.uniform(-<span class="number">50</span>, -<span class="number">25</span>, n)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line">fig, ax = plt.subplots(subplot_kw=&#123;<span class="string">&quot;projection&quot;</span>: <span class="string">&quot;3d&quot;</span>&#125;)</span><br><span class="line">ax.scatter(xs, ys, zs)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xticklabels=[],</span><br><span class="line">       yticklabels=[],</span><br><span class="line">       zticklabels=[])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>import numpy as np</code>: å¯¼å…¥NumPyåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>np</code>ï¼ŒNumPyæ˜¯ç”¨äºæ•°å€¼è®¡ç®—çš„Pythonåº“ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>np.random.seed(19680801)</code>: è®¾ç½®éšæœºæ•°ç§å­ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œä»£ç ç”Ÿæˆçš„éšæœºæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¾¿äºå¤ç°ç»“æœã€‚</p></li><li><p><code>n = 100</code>: å®šä¹‰æ•°æ®ç‚¹çš„æ•°é‡ã€‚</p></li><li><p><code>rng = np.random.default_rng()</code>: åˆ›å»ºä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨å¯¹è±¡ã€‚</p></li><li><p><code>xs = rng.uniform(23, 32, n)</code>: ç”¨éšæœºæ•°ç”Ÿæˆå™¨ç”ŸæˆåŒ…å«100ä¸ªéšæœºæ•°çš„æ•°ç»„<code>xs</code>ï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»23åˆ°32çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>ys = rng.uniform(0, 100, n)</code>: ç”¨éšæœºæ•°ç”Ÿæˆå™¨ç”ŸæˆåŒ…å«100ä¸ªéšæœºæ•°çš„æ•°ç»„<code>ys</code>ï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»0åˆ°100çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>zs = rng.uniform(-50, -25, n)</code>: ç”¨éšæœºæ•°ç”Ÿæˆå™¨ç”ŸæˆåŒ…å«100ä¸ªéšæœºæ•°çš„æ•°ç»„<code>zs</code>ï¼Œè¿™äº›éšæœºæ•°æ˜¯ä»-50åˆ°-25çš„å‡åŒ€åˆ†å¸ƒä¸­ç”Ÿæˆçš„ã€‚</p></li><li><p><code>fig, ax = plt.subplots(subplot_kw=&#123;&quot;projection&quot;: &quot;3d&quot;&#125;)</code>: åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸‰ç»´åæ ‡è½´çš„å›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªä¸‰ç»´åæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„ä¸‰ç»´åæ ‡è½´ã€‚</p></li><li><p><code>ax.scatter(xs, ys, zs)</code>: ä½¿ç”¨<code>ax.scatter</code>å‡½æ•°ç»˜åˆ¶ä¸‰ç»´æ•£ç‚¹å›¾ã€‚<code>xs</code>ã€<code>ys</code>ã€<code>zs</code>æ˜¯æ•°æ®ç‚¹çš„xã€yã€zåæ ‡ï¼Œå‡½æ•°ä¼šåœ¨ä¸‰ç»´åæ ‡è½´ä¸Šç»˜åˆ¶è¿™äº›æ•°æ®ç‚¹ã€‚</p></li><li><p><code>ax.set(xticklabels=[], yticklabels=[], zticklabels=[])</code>: è®¾ç½®ä¸‰ç»´åæ ‡è½´çš„åˆ»åº¦æ ‡ç­¾ä¸ºç©ºï¼Œè¿™æ ·å°±éšè—äº†xã€yã€zè½´çš„åˆ»åº¦æ ‡ç­¾ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç ç»˜åˆ¶äº†ä¸€ä¸ªç®€å•çš„ä¸‰ç»´æ•£ç‚¹å›¾ï¼Œå…¶ä¸­åŒ…å«äº†100ä¸ªéšæœºç”Ÿæˆçš„æ•°æ®ç‚¹ï¼Œç”¨äºå±•ç¤ºæ•°æ®åœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„åˆ†å¸ƒæƒ…å†µã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_scatter3d_simple_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_scatter3d_simple_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="scatter"><h3 id="ä¸‰ç»´æ›²é¢å›¾"><a href="#ä¸‰ç»´æ›²é¢å›¾" class="headerlink" title="ä¸‰ç»´æ›²é¢å›¾"></a>ä¸‰ç»´æ›²é¢å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> cm</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make data</span></span><br><span class="line">X = np.arange(-<span class="number">5</span>, <span class="number">5</span>, <span class="number">0.25</span>)</span><br><span class="line">Y = np.arange(-<span class="number">5</span>, <span class="number">5</span>, <span class="number">0.25</span>)</span><br><span class="line">X, Y = np.meshgrid(X, Y)</span><br><span class="line">R = np.sqrt(X**<span class="number">2</span> + Y**<span class="number">2</span>)</span><br><span class="line">Z = np.sin(R)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot the surface</span></span><br><span class="line">fig, ax = plt.subplots(subplot_kw=&#123;<span class="string">&quot;projection&quot;</span>: <span class="string">&quot;3d&quot;</span>&#125;)</span><br><span class="line">ax.plot_surface(X, Y, Z, vmin=Z.<span class="built_in">min</span>() * <span class="number">2</span>, cmap=cm.Blues)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xticklabels=[],</span><br><span class="line">       yticklabels=[],</span><br><span class="line">       zticklabels=[])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>from matplotlib import cm</code>: ä»Matplotlibåº“ä¸­å¯¼å…¥<code>cm</code>ï¼Œç”¨äºè·å–é¢œè‰²æ˜ å°„(colormap)ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>X = np.arange(-5, 5, 0.25)</code>: åˆ›å»ºä¸€ä¸ªåŒ…å«ä»-5åˆ°5çš„é—´éš”ä¸º0.25çš„ä¸€ç»´æ•°ç»„<code>X</code>ã€‚</p></li><li><p><code>Y = np.arange(-5, 5, 0.25)</code>: åˆ›å»ºä¸€ä¸ªåŒ…å«ä»-5åˆ°5çš„é—´éš”ä¸º0.25çš„ä¸€ç»´æ•°ç»„<code>Y</code>ã€‚</p></li><li><p><code>X, Y = np.meshgrid(X, Y)</code>: å°†<code>X</code>å’Œ<code>Y</code>ç»„åˆæˆä¸€ä¸ªäºŒç»´ç½‘æ ¼ï¼Œç”Ÿæˆ<code>X</code>å’Œ<code>Y</code>çš„äºŒç»´æ•°ç»„ï¼Œåˆ†åˆ«è¡¨ç¤ºXå’ŒYåæ ‡çš„ç½‘æ ¼ã€‚</p></li><li><p><code>R = np.sqrt(X**2 + Y**2)</code>: è®¡ç®—æ¯ä¸ªç‚¹åˆ°åŸç‚¹(0,0)çš„è·ç¦»ï¼Œå¾—åˆ°ä¸€ä¸ªäºŒç»´æ•°ç»„<code>R</code>ã€‚</p></li><li><p><code>Z = np.sin(R)</code>: è®¡ç®—æ¯ä¸ªç‚¹çš„æ­£å¼¦å€¼ï¼Œå¾—åˆ°ä¸€ä¸ªäºŒç»´æ•°ç»„<code>Z</code>ã€‚</p></li><li><p><code>fig, ax = plt.subplots(subplot_kw=&#123;&quot;projection&quot;: &quot;3d&quot;&#125;)</code>: åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸‰ç»´åæ ‡è½´çš„å›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªä¸‰ç»´åæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„ä¸‰ç»´åæ ‡è½´ã€‚</p></li><li><p><code>ax.plot_surface(X, Y, Z, vmin=Z.min() * 2, cmap=cm.Blues)</code>: ä½¿ç”¨<code>ax.plot_surface</code>å‡½æ•°ç»˜åˆ¶ä¸‰ç»´æ›²é¢å›¾ã€‚<code>X</code>ã€<code>Y</code>ã€<code>Z</code>åˆ†åˆ«è¡¨ç¤ºæ•°æ®ç‚¹çš„xã€yã€zåæ ‡ï¼Œå‡½æ•°ä¼šæ ¹æ®è¿™äº›åæ ‡åœ¨ä¸‰ç»´åæ ‡è½´ä¸Šç»˜åˆ¶æ›²é¢ã€‚<code>vmin</code>å‚æ•°è®¾ç½®é¢œè‰²æ˜ å°„çš„æœ€å°å€¼ï¼Œè¿™é‡Œå°†å…¶è®¾ç½®ä¸º<code>Z.min() * 2</code>ï¼Œå³zå€¼çš„æœ€å°å€¼çš„ä¸¤å€ã€‚<code>cmap=cm.Blues</code>è®¾ç½®é¢œè‰²æ˜ å°„ä¸ºè“è‰²è°ƒã€‚</p></li><li><p><code>ax.set(xticklabels=[], yticklabels=[], zticklabels=[])</code>: è®¾ç½®ä¸‰ç»´åæ ‡è½´çš„åˆ»åº¦æ ‡ç­¾ä¸ºç©ºï¼Œè¿™æ ·å°±éšè—äº†xã€yã€zè½´çš„åˆ»åº¦æ ‡ç­¾ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç ç»˜åˆ¶äº†ä¸€ä¸ªåŒ…å«æ­£å¼¦å‡½æ•°åœ¨äºŒç»´å¹³é¢ä¸Šçš„ä¸‰ç»´æ›²é¢å›¾ï¼Œé¢œè‰²éšç€zå€¼çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå‘ˆç°å‡ºè“è‰²è°ƒçš„æ•ˆæœã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_surface3d_simple_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_surface3d_simple_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="plot_surface"><h3 id="ä¸‰ç»´ä¸‰è§’ç½‘é¢å›¾"><a href="#ä¸‰ç»´ä¸‰è§’ç½‘é¢å›¾" class="headerlink" title="ä¸‰ç»´ä¸‰è§’ç½‘é¢å›¾"></a>ä¸‰ç»´ä¸‰è§’ç½‘é¢å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> cm</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line">n_radii = <span class="number">8</span></span><br><span class="line">n_angles = <span class="number">36</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Make radii and angles spaces</span></span><br><span class="line">radii = np.linspace(<span class="number">0.125</span>, <span class="number">1.0</span>, n_radii)</span><br><span class="line">angles = np.linspace(<span class="number">0</span>, <span class="number">2</span>*np.pi, n_angles, endpoint=<span class="literal">False</span>)[..., np.newaxis]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Convert polar (radii, angles) coords to cartesian (x, y) coords.</span></span><br><span class="line">x = np.append(<span class="number">0</span>, (radii*np.cos(angles)).flatten())</span><br><span class="line">y = np.append(<span class="number">0</span>, (radii*np.sin(angles)).flatten())</span><br><span class="line">z = np.sin(-x*y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line">fig, ax = plt.subplots(subplot_kw=&#123;<span class="string">&#x27;projection&#x27;</span>: <span class="string">&#x27;3d&#x27;</span>&#125;)</span><br><span class="line">ax.plot_trisurf(x, y, z, vmin=z.<span class="built_in">min</span>() * <span class="number">2</span>, cmap=cm.Blues)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xticklabels=[],</span><br><span class="line">       yticklabels=[],</span><br><span class="line">       zticklabels=[])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>from matplotlib import cm</code>: ä»Matplotlibåº“ä¸­å¯¼å…¥<code>cm</code>ï¼Œç”¨äºè·å–é¢œè‰²æ˜ å°„(colormap)ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>n_radii = 8</code>: å®šä¹‰åŠå¾„çš„æ•°é‡ã€‚</p></li><li><p><code>n_angles = 36</code>: å®šä¹‰è§’åº¦çš„æ•°é‡ã€‚</p></li><li><p><code>radii = np.linspace(0.125, 1.0, n_radii)</code>: åˆ›å»ºä¸€ä¸ªåŒ…å«8ä¸ªå‡åŒ€é—´éš”çš„åŠå¾„å€¼çš„ä¸€ç»´æ•°ç»„<code>radii</code>ï¼ŒèŒƒå›´ä»0.125åˆ°1.0ã€‚</p></li><li><p><code>angles = np.linspace(0, 2*np.pi, n_angles, endpoint=False)[..., np.newaxis]</code>: åˆ›å»ºä¸€ä¸ªåŒ…å«36ä¸ªå‡åŒ€é—´éš”çš„è§’åº¦å€¼çš„ä¸€ç»´æ•°ç»„<code>angles</code>ï¼ŒèŒƒå›´ä»0åˆ°2Ï€ï¼Œæ¯ä¸ªè§’åº¦å€¼éƒ½ç”¨ä¸€ä¸ªç»´åº¦è¡¨ç¤ºã€‚</p></li><li><p><code>x = np.append(0, (radii*np.cos(angles)).flatten())</code>: è®¡ç®—xåæ ‡å€¼ï¼Œ<code>radii*np.cos(angles)</code>å°†æåæ ‡è½¬æ¢ä¸ºç›´è§’åæ ‡ï¼Œå¹¶ä½¿ç”¨<code>flatten()</code>å°†äºŒç»´æ•°ç»„å±•å¹³æˆä¸€ç»´æ•°ç»„ã€‚ç„¶åé€šè¿‡<code>np.append()</code>å‡½æ•°åœ¨æ•°ç»„çš„å¼€å¤´æ’å…¥0ï¼Œä»¥ä½¿å¾—æ›²é¢å›¾åœ¨åŸç‚¹å¤„é—­åˆã€‚</p></li><li><p><code>y = np.append(0, (radii*np.sin(angles)).flatten())</code>: è®¡ç®—yåæ ‡å€¼ï¼Œ<code>radii*np.sin(angles)</code>å°†æåæ ‡è½¬æ¢ä¸ºç›´è§’åæ ‡ï¼Œå¹¶ä½¿ç”¨<code>flatten()</code>å°†äºŒç»´æ•°ç»„å±•å¹³æˆä¸€ç»´æ•°ç»„ã€‚ç„¶åé€šè¿‡<code>np.append()</code>å‡½æ•°åœ¨æ•°ç»„çš„å¼€å¤´æ’å…¥0ï¼Œä»¥ä½¿å¾—æ›²é¢å›¾åœ¨åŸç‚¹å¤„é—­åˆã€‚</p></li><li><p><code>z = np.sin(-x*y)</code>: è®¡ç®—zåæ ‡å€¼ï¼Œæ ¹æ®xå’Œyçš„å€¼è®¡ç®—zçš„å€¼ï¼Œè¿™é‡Œä½¿ç”¨äº†æ­£å¼¦å‡½æ•°ã€‚</p></li><li><p><code>fig, ax = plt.subplots(subplot_kw=&#123;&#39;projection&#39;: &#39;3d&#39;&#125;)</code>: åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸‰ç»´åæ ‡è½´çš„å›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªä¸‰ç»´åæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„ä¸‰ç»´åæ ‡è½´ã€‚</p></li><li><p><code>ax.plot_trisurf(x, y, z, vmin=z.min() * 2, cmap=cm.Blues)</code>: ä½¿ç”¨<code>ax.plot_trisurf</code>å‡½æ•°ç»˜åˆ¶ä¸‰ç»´ä¸‰è§’ç½‘é¢å›¾ã€‚<code>x</code>ã€<code>y</code>ã€<code>z</code>åˆ†åˆ«è¡¨ç¤ºæ•°æ®ç‚¹çš„xã€yã€zåæ ‡ï¼Œå‡½æ•°ä¼šæ ¹æ®è¿™äº›åæ ‡åœ¨ä¸‰ç»´åæ ‡è½´ä¸Šç»˜åˆ¶ä¸‰è§’ç½‘é¢å›¾ã€‚<code>vmin</code>å‚æ•°è®¾ç½®é¢œè‰²æ˜ å°„çš„æœ€å°å€¼ï¼Œè¿™é‡Œå°†å…¶è®¾ç½®ä¸º<code>z.min() * 2</code>ï¼Œå³zå€¼çš„æœ€å°å€¼çš„ä¸¤å€ã€‚<code>cmap=cm.Blues</code>è®¾ç½®é¢œè‰²æ˜ å°„ä¸ºè“è‰²è°ƒã€‚</p></li><li><p><code>ax.set(xticklabels=[], yticklabels=[], zticklabels=[])</code>: è®¾ç½®ä¸‰ç»´åæ ‡è½´çš„åˆ»åº¦æ ‡ç­¾ä¸ºç©ºï¼Œè¿™æ ·å°±éšè—äº†xã€yã€zè½´çš„åˆ»åº¦æ ‡ç­¾ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç ç»˜åˆ¶äº†ä¸€ä¸ªåœ¨æåæ ‡ç³»ä¸‹çš„ä¸‰ç»´ä¸‰è§’ç½‘é¢å›¾ï¼Œé¢œè‰²éšç€zå€¼çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå‘ˆç°å‡ºè“è‰²è°ƒçš„æ•ˆæœã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_trisurf3d_simple_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_trisurf3d_simple_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="plot_trisurf"><h3 id="ä¸‰ç»´ä½“ç´ å›¾"><a href="#ä¸‰ç»´ä½“ç´ å›¾" class="headerlink" title="ä¸‰ç»´ä½“ç´ å›¾"></a>ä¸‰ç»´ä½“ç´ å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Prepare some coordinates</span></span><br><span class="line">x, y, z = np.indices((<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Draw cuboids in the top left and bottom right corners</span></span><br><span class="line">cube1 = (x &lt; <span class="number">3</span>) &amp; (y &lt; <span class="number">3</span>) &amp; (z &lt; <span class="number">3</span>)</span><br><span class="line">cube2 = (x &gt;= <span class="number">5</span>) &amp; (y &gt;= <span class="number">5</span>) &amp; (z &gt;= <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Combine the objects into a single boolean array</span></span><br><span class="line">voxelarray = cube1 | cube2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line">fig, ax = plt.subplots(subplot_kw=&#123;<span class="string">&quot;projection&quot;</span>: <span class="string">&quot;3d&quot;</span>&#125;)</span><br><span class="line">ax.voxels(voxelarray, edgecolor=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xticklabels=[],</span><br><span class="line">       yticklabels=[],</span><br><span class="line">       zticklabels=[])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>x, y, z = np.indices((8, 8, 8))</code>: åˆ›å»ºäº†ä¸€ä¸ª3Dåæ ‡ç½‘æ ¼ï¼Œå…¶ä¸­xã€yå’Œzåæ ‡éƒ½å–å€¼èŒƒå›´ä¸º0åˆ°7ã€‚è¿™æ ·å¯ä»¥å¾—åˆ°ä¸€ä¸ª8x8x8çš„ä¸‰ç»´ç½‘æ ¼ã€‚</p></li><li><p><code>cube1 = (x &lt; 3) &amp; (y &lt; 3) &amp; (z &lt; 3)</code>: åˆ›å»ºäº†ä¸€ä¸ªç«‹æ–¹ä½“1ï¼Œå®ƒåŒ…å«äº†åæ ‡ç‚¹(x, y, z)æ»¡è¶³x &lt; 3ã€y &lt; 3å’Œz &lt; 3çš„æ‰€æœ‰ç‚¹ã€‚</p></li><li><p><code>cube2 = (x &gt;= 5) &amp; (y &gt;= 5) &amp; (z &gt;= 5)</code>: åˆ›å»ºäº†ä¸€ä¸ªç«‹æ–¹ä½“2ï¼Œå®ƒåŒ…å«äº†åæ ‡ç‚¹(x, y, z)æ»¡è¶³x &gt;&#x3D; 5ã€y &gt;&#x3D; 5å’Œz &gt;&#x3D; 5çš„æ‰€æœ‰ç‚¹ã€‚</p></li><li><p><code>voxelarray = cube1 | cube2</code>: å°†ç«‹æ–¹ä½“1å’Œç«‹æ–¹ä½“2ç»„åˆæˆä¸€ä¸ªå•ä¸€çš„å¸ƒå°”æ•°ç»„voxelarrayã€‚åœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼Œå€¼ä¸ºTrueçš„å…ƒç´ è¡¨ç¤ºåœ¨ç«‹æ–¹ä½“å†…ï¼Œå€¼ä¸ºFalseçš„å…ƒç´ è¡¨ç¤ºåœ¨ç«‹æ–¹ä½“å¤–ã€‚</p></li><li><p><code>fig, ax = plt.subplots(subplot_kw=&#123;&quot;projection&quot;: &quot;3d&quot;&#125;)</code>: åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸‰ç»´åæ ‡è½´çš„å›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªä¸‰ç»´åæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„ä¸‰ç»´åæ ‡è½´ã€‚</p></li><li><p><code>ax.voxels(voxelarray, edgecolor=&#39;k&#39;)</code>: ä½¿ç”¨<code>ax.voxels</code>å‡½æ•°ç»˜åˆ¶ä¸‰ç»´ä½“ç´ å›¾ã€‚<code>voxelarray</code>è¡¨ç¤ºè¦ç»˜åˆ¶çš„ä½“ç´ çš„å¸ƒå°”æ•°ç»„ï¼Œ<code>edgecolor=&#39;k&#39;</code>è®¾ç½®ä½“ç´ çš„è¾¹ç¼˜é¢œè‰²ä¸ºé»‘è‰²ã€‚</p></li><li><p><code>ax.set(xticklabels=[], yticklabels=[], zticklabels=[])</code>: è®¾ç½®ä¸‰ç»´åæ ‡è½´çš„åˆ»åº¦æ ‡ç­¾ä¸ºç©ºï¼Œè¿™æ ·å°±éšè—äº†xã€yã€zè½´çš„åˆ»åº¦æ ‡ç­¾ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç ç»˜åˆ¶äº†ä¸€ä¸ªç®€å•çš„ä¸‰ç»´ä½“ç´ å›¾ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªç«‹æ–¹ä½“ã€‚å…¶ä¸­ä¸€ä¸ªç«‹æ–¹ä½“ä½äºä¸‰ç»´ç©ºé—´çš„å·¦ä¸Šè§’ï¼Œå¦ä¸€ä¸ªç«‹æ–¹ä½“ä½äºå³ä¸‹è§’ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_voxels_simple_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_voxels_simple_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="voxels"><h3 id="ä¸‰ç»´çº¿æ¡†å›¾"><a href="#ä¸‰ç»´çº¿æ¡†å›¾" class="headerlink" title="ä¸‰ç»´çº¿æ¡†å›¾"></a>ä¸‰ç»´çº¿æ¡†å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> axes3d</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.style.use(<span class="string">&#x27;_mpl-gallery&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make data</span></span><br><span class="line">X, Y, Z = axes3d.get_test_data(<span class="number">0.05</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line">fig, ax = plt.subplots(subplot_kw=&#123;<span class="string">&quot;projection&quot;</span>: <span class="string">&quot;3d&quot;</span>&#125;)</span><br><span class="line">ax.plot_wireframe(X, Y, Z, rstride=<span class="number">10</span>, cstride=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">ax.<span class="built_in">set</span>(xticklabels=[],</span><br><span class="line">       yticklabels=[],</span><br><span class="line">       zticklabels=[])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ol><li><p><code>from mpl_toolkits.mplot3d import axes3d</code>: å¯¼å…¥Matplotlibä¸­çš„<code>axes3d</code>æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—åŒ…å«äº†ç”¨äºç»˜åˆ¶ä¸‰ç»´å›¾å½¢çš„å‡½æ•°å’Œå·¥å…·ã€‚</p></li><li><p><code>import matplotlib.pyplot as plt</code>: å¯¼å…¥Matplotlibåº“ï¼Œå¹¶å°†å…¶ç®€åŒ–ä¸º<code>plt</code>ï¼Œè¿™æ˜¯Matplotlibä¸­å¸¸ç”¨çš„æƒ¯ä¾‹ã€‚</p></li><li><p><code>plt.style.use(&#39;_mpl-gallery&#39;)</code>: è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„Matplotlibæ ·å¼<code>&#39;_mpl-gallery&#39;</code>ã€‚Matplotlibæ ·å¼ç”¨äºè®¾ç½®å›¾å½¢çš„å¤–è§‚å’Œé£æ ¼ã€‚åœ¨æ­¤ä¹‹å‰å¯èƒ½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ·å¼å®šä¹‰ï¼Œä½†ä»£ç ç‰‡æ®µä¸­æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p><code>X, Y, Z = axes3d.get_test_data(0.05)</code>: ä½¿ç”¨<code>axes3d.get_test_data()</code>å‡½æ•°è·å–æµ‹è¯•æ•°æ®ã€‚è¿™ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ªåŒ…å«Xã€Yã€Zåæ ‡æ•°æ®çš„ä¸‰ç»´ç½‘æ ¼ï¼Œç”¨äºç»˜åˆ¶ä¸€ä¸ªä¸‰ç»´æ›²é¢ã€‚<code>0.05</code>æ˜¯æ­¥é•¿å‚æ•°ï¼Œæ§åˆ¶æ•°æ®çš„ç¨ å¯†ç¨‹åº¦ã€‚</p></li><li><p><code>fig, ax = plt.subplots(subplot_kw=&#123;&quot;projection&quot;: &quot;3d&quot;&#125;)</code>: åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸‰ç»´åæ ‡è½´çš„å›¾å½¢å¯¹è±¡å’Œä¸€ä¸ªä¸‰ç»´åæ ‡è½´å¯¹è±¡ã€‚<code>fig</code>ä»£è¡¨æ•´ä¸ªå›¾å½¢çª—å£ï¼Œ<code>ax</code>ä»£è¡¨å›¾å½¢ä¸­çš„ä¸‰ç»´åæ ‡è½´ã€‚</p></li><li><p><code>ax.plot_wireframe(X, Y, Z, rstride=10, cstride=10)</code>: ä½¿ç”¨<code>ax.plot_wireframe()</code>å‡½æ•°ç»˜åˆ¶ä¸‰ç»´çº¿æ¡†å›¾ã€‚<code>X</code>ã€<code>Y</code>ã€<code>Z</code>æ˜¯ä¸‰ç»´æ›²é¢çš„åæ ‡æ•°æ®ï¼Œ<code>rstride</code>å’Œ<code>cstride</code>åˆ†åˆ«æ§åˆ¶è¡Œå’Œåˆ—çš„é‡‡æ ·æ­¥é•¿ï¼Œç”¨äºæ§åˆ¶æ›²é¢çš„ç¨ å¯†ç¨‹åº¦ã€‚</p></li><li><p><code>ax.set(xticklabels=[], yticklabels=[], zticklabels=[])</code>: è®¾ç½®ä¸‰ç»´åæ ‡è½´çš„åˆ»åº¦æ ‡ç­¾ä¸ºç©ºï¼Œè¿™æ ·å°±éšè—äº†xã€yã€zè½´çš„åˆ»åº¦æ ‡ç­¾ã€‚</p></li><li><p><code>plt.show()</code>: æ˜¾ç¤ºç»˜åˆ¶çš„å›¾å½¢ã€‚</p></li></ol><p>è¿™æ®µä»£ç ç»˜åˆ¶äº†ä¸€ä¸ªä¸‰ç»´çº¿æ¡†å›¾ï¼Œè¯¥å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªæ›²é¢çš„ç»“æ„ï¼Œæ›²é¢çš„å½¢çŠ¶åŸºäºè·å–çš„æµ‹è¯•æ•°æ®ã€‚ä¸‰ç»´çº¿æ¡†å›¾é€šè¿‡è¿æ¥æ•°æ®ç‚¹ä¹‹é—´çš„çº¿æ¡æ¥è¡¨ç¤ºæ›²é¢çš„å½¢çŠ¶ï¼Œä½¿å¾—å¯ä»¥æ›´å¥½åœ°äº†è§£æ›²é¢çš„ç»“æ„å’Œç‰¹å¾ã€‚</p><img src="https://matplotlib.org/stable/_images/sphx_glr_wire3d_simple_001_2_00x.png" class="lazyload placeholder" data-srcset="https://matplotlib.org/stable/_images/sphx_glr_wire3d_simple_001_2_00x.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="plot_wireframe">]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Matplotlib </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KNNç®—æ³•ç®€æ</title>
      <link href="/2023/07/27/KNN%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/"/>
      <url>/2023/07/27/KNN%E7%AE%97%E6%B3%95%E7%AE%80%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="KNNç®—æ³•ç®€æ"><a href="#KNNç®—æ³•ç®€æ" class="headerlink" title="KNNç®—æ³•ç®€æ"></a>KNNç®—æ³•ç®€æ</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Kæœ€è¿‘é‚»ç®—æ³•ï¼ˆK-Nearest Neighborsï¼ŒKNNï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„ç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œç”¨äºåˆ†ç±»å’Œå›å½’é—®é¢˜ã€‚å®ƒæ˜¯ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„ç®—æ³•ï¼Œåœ¨å®è·µä¸­å¹¿æ³›åº”ç”¨ã€‚KNNç®—æ³•åŸºäºå®ä¾‹ä¹‹é—´çš„ç›¸ä¼¼æ€§æ¥è¿›è¡Œåˆ†ç±»æˆ–å›å½’é¢„æµ‹ã€‚</p><p>ä»¥ä¸‹æ˜¯KNNç®—æ³•çš„æ¦‚è¿°ï¼š</p><ol><li><p>ç®—æ³•åŸç†ï¼š</p><ul><li>å¯¹äºåˆ†ç±»é—®é¢˜ï¼ŒKNNç®—æ³•é€šè¿‡æµ‹é‡æ–°æ ·æœ¬ç‚¹ä¸è®­ç»ƒæ•°æ®é›†ä¸­å·²æ ‡è®°æ ·æœ¬ç‚¹ä¹‹é—´çš„è·ç¦»æ¥è¿›è¡Œåˆ†ç±»ã€‚å®ƒé€‰æ‹©ä¸æ–°æ ·æœ¬ç‚¹è·ç¦»æœ€è¿‘çš„Kä¸ªå·²æ ‡è®°æ ·æœ¬ç‚¹ï¼Œå¹¶æ ¹æ®è¿™Kä¸ªç‚¹ä¸­å å¤šæ•°çš„ç±»åˆ«æ¥å¯¹æ–°æ ·æœ¬è¿›è¡Œåˆ†ç±»ã€‚</li><li>å¯¹äºå›å½’é—®é¢˜ï¼ŒKNNç®—æ³•è®¡ç®—æ–°æ ·æœ¬ç‚¹ä¸è®­ç»ƒæ•°æ®é›†ä¸­å·²æ ‡è®°æ ·æœ¬ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œç„¶åé€‰æ‹©è·ç¦»æœ€è¿‘çš„Kä¸ªæ ·æœ¬ç‚¹ï¼Œå¹¶ä½¿ç”¨è¿™Kä¸ªæ ·æœ¬ç‚¹çš„å¹³å‡å€¼ï¼ˆæˆ–åŠ æƒå¹³å‡å€¼ï¼‰ä½œä¸ºæ–°æ ·æœ¬ç‚¹çš„é¢„æµ‹å€¼ã€‚</li></ul></li><li><p>è·ç¦»åº¦é‡ï¼š</p><ul><li>åœ¨KNNç®—æ³•ä¸­ï¼Œå¸¸ç”¨çš„è·ç¦»åº¦é‡æ–¹æ³•åŒ…æ‹¬æ¬§æ°è·ç¦»ï¼ˆEuclidean distanceï¼‰ã€æ›¼å“ˆé¡¿è·ç¦»ï¼ˆManhattan distanceï¼‰å’Œé—µå¯å¤«æ–¯åŸºè·ç¦»ï¼ˆMinkowski distanceï¼‰ã€‚æ¬§æ°è·ç¦»åœ¨è¿ç»­ç‰¹å¾ç©ºé—´ä¸­å¹¿æ³›ä½¿ç”¨ï¼Œè€Œæ›¼å“ˆé¡¿è·ç¦»å¯¹äºå…·æœ‰ç¨€ç–ç‰¹å¾çš„æ•°æ®é›†æ›´ä¸ºé€‚ç”¨ã€‚</li></ul></li><li><p>ç¡®å®šKå€¼ï¼š</p><ul><li>Kå€¼æ˜¯KNNç®—æ³•ä¸­çš„ä¸€ä¸ªé‡è¦å‚æ•°ã€‚å®ƒè¡¨ç¤ºé€‰æ‹©å¤šå°‘ä¸ªæœ€è¿‘é‚»æ¥è¿›è¡Œåˆ†ç±»æˆ–å›å½’ã€‚è¾ƒå°çš„Kå€¼å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹å¤æ‚ï¼Œå®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“ï¼Œè€Œè¾ƒå¤§çš„Kå€¼å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹è¿‡äºç®€å•ï¼Œå¿½ç•¥äº†å±€éƒ¨çš„æ•°æ®æ¨¡å¼ã€‚é€šå¸¸ï¼ŒKå€¼çš„é€‰æ‹©é€šè¿‡äº¤å‰éªŒè¯ç­‰æŠ€æœ¯æ¥è¿›è¡Œè°ƒä¼˜ã€‚</li></ul></li><li><p>ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šKNNç®—æ³•ç®€å•æ˜“æ‡‚ï¼Œæ˜“äºå®ç°ï¼Œå¯¹äºå¤šç±»åˆ«é—®é¢˜è¡¨ç°è‰¯å¥½ã€‚å®ƒä¸éœ€è¦å¯¹æ•°æ®è¿›è¡Œå‡è®¾ï¼Œé€‚ç”¨äºéçº¿æ€§æ•°æ®ã€‚</li><li>ç¼ºç‚¹ï¼šKNNç®—æ³•è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šã€‚å¯¹äºé«˜ç»´æ•°æ®ï¼Œå®¹æ˜“å—åˆ°ç»´åº¦ç¾éš¾çš„å½±å“ã€‚æ­¤å¤–ï¼ŒKNNç®—æ³•å¯¹äºä¸å¹³è¡¡æ•°æ®é›†çš„å¤„ç†æ•ˆæœå¯èƒ½è¾ƒå·®ã€‚</li></ul></li><li><p>å®ç°æ­¥éª¤ï¼š</p><ul><li>åŠ è½½æ•°æ®é›†ã€‚</li><li>é€‰æ‹©è·ç¦»åº¦é‡æ–¹æ³•ã€‚</li><li>é€‰æ‹©Kå€¼ã€‚</li><li>å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œè®¡ç®—æ–°æ ·æœ¬ä¸è®­ç»ƒæ ·æœ¬çš„è·ç¦»ï¼Œé€‰æ‹©æœ€è¿‘çš„Kä¸ªæ ·æœ¬è¿›è¡ŒæŠ•ç¥¨å¾—å‡ºåˆ†ç±»ç»“æœã€‚</li><li>å¯¹äºå›å½’é—®é¢˜ï¼Œè®¡ç®—æ–°æ ·æœ¬ä¸è®­ç»ƒæ ·æœ¬çš„è·ç¦»ï¼Œé€‰æ‹©æœ€è¿‘çš„Kä¸ªæ ·æœ¬è¿›è¡Œå¹³å‡ï¼ˆæˆ–åŠ æƒå¹³å‡ï¼‰å¾—å‡ºé¢„æµ‹å€¼ã€‚</li></ul></li></ol><p>æ€»ç»“ï¼šKNNç®—æ³•æ˜¯ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„ç®—æ³•ï¼Œé€‚ç”¨äºè®¸å¤šåˆ†ç±»å’Œå›å½’é—®é¢˜ã€‚å®ƒçš„å®ç°ç®€å•ï¼Œä½†åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šè®¡ç®—æ•ˆç‡è¾ƒä½ã€‚åˆç†é€‰æ‹©Kå€¼ä»¥åŠé€‚å½“çš„è·ç¦»åº¦é‡æ–¹æ³•æ˜¯ä½¿ç”¨KNNç®—æ³•æ—¶éœ€è¦æ³¨æ„çš„è¦ç‚¹ã€‚</p><h2 id="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"><a href="#æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼" class="headerlink" title="æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼"></a>æ¶‰åŠåˆ°çš„æ•°å­¦å…¬å¼</h2><ol><li><p>æ¬§æ°è·ç¦»ï¼ˆEuclidean distanceï¼‰ï¼š<br>$$ d(A, B) &#x3D; \sqrt{\sum_{i&#x3D;1}^{n}(x_i - y_i)^2} $$</p></li><li><p>æ›¼å“ˆé¡¿è·ç¦»ï¼ˆManhattan distanceï¼‰ï¼š<br>$$ d(A, B) &#x3D; \sum_{i&#x3D;1}^{n}|x_i - y_i| $$</p></li><li><p>KNNåˆ†ç±»å…¬å¼ï¼š<br>$$ \text{Class}(\text{new_sample}) &#x3D; \text{argmax}\left(\sum_{i}{\mathbb{I}(label_i &#x3D; c) \text{ for } i \text{ in neighbors}}\right) $$</p><p> å…¶ä¸­ï¼Œ$\text{Class}(\text{new_sample})$ è¡¨ç¤ºæ–°æ ·æœ¬ç‚¹çš„é¢„æµ‹ç±»åˆ«ï¼Œ$label_i$ æ˜¯ç¬¬ $i$ ä¸ªé‚»å±…æ ·æœ¬çš„ç±»åˆ«ï¼Œ$c$ è¡¨ç¤ºæ‰€æœ‰å¯èƒ½çš„ç±»åˆ«ï¼Œ$\mathbb{I}(condition)$ æ˜¯æŒ‡ç¤ºå‡½æ•°ï¼Œå¦‚æœ $condition$ ä¸ºçœŸï¼Œåˆ™ $\mathbb{I}(condition) &#x3D; 1$ï¼Œå¦åˆ™ä¸º 0ã€‚ $\text{argmax}$ å‡½æ•°è¿”å›ä½¿æ‹¬å·å†…è¡¨è¾¾å¼æœ€å¤§çš„ç±»åˆ« $c$ã€‚</p></li><li><p>KNNå›å½’å…¬å¼ï¼š<br>$$ \text{Prediction}(\text{new_sample}) &#x3D; \frac{1}{K}\sum_{i}{label_i \text{ for } i \text{ in neighbors}} $$</p></li></ol><p>å…¶ä¸­ï¼Œ$\text{Prediction}(\text{new_sample})$ è¡¨ç¤ºæ–°æ ·æœ¬ç‚¹çš„å›å½’é¢„æµ‹å€¼ï¼Œ$label_i$ æ˜¯ç¬¬ $i$ ä¸ªé‚»å±…æ ·æœ¬çš„å›å½’æ ‡ç­¾ã€‚</p><h3 id="æ¬§å¼è·ç¦»ä¸æ›¼å“ˆé¡¿è·ç¦»"><a href="#æ¬§å¼è·ç¦»ä¸æ›¼å“ˆé¡¿è·ç¦»" class="headerlink" title="æ¬§å¼è·ç¦»ä¸æ›¼å“ˆé¡¿è·ç¦»"></a>æ¬§å¼è·ç¦»ä¸æ›¼å“ˆé¡¿è·ç¦»</h3><p>æ¬§å¼è·ç¦»ï¼ˆEuclidean distanceï¼‰å’Œæ›¼å“ˆé¡¿è·ç¦»ï¼ˆManhattan distanceï¼‰æ˜¯ä¸¤ç§å¸¸ç”¨çš„è·ç¦»åº¦é‡æ–¹æ³•ï¼Œç”¨äºè¡¡é‡åœ¨nç»´ç©ºé—´ä¸­ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»ã€‚å®ƒä»¬åœ¨è®¡ç®—æ–¹æ³•å’Œæ€§è´¨ä¸Šæœ‰ä¸€äº›å¼‚åŒï¼š</p><p>å¼‚åŒç‚¹å¦‚ä¸‹ï¼š</p><ol><li><p>è®¡ç®—æ–¹æ³•ï¼š</p><ul><li><p>æ¬§å¼è·ç¦»ï¼šæ¬§å¼è·ç¦»æ˜¯ä¸¤ç‚¹ä¹‹é—´ç›´çº¿è·ç¦»çš„åº¦é‡ï¼Œä¹Ÿç§°ä¸ºç›´çº¿è·ç¦»ã€‚åœ¨nç»´ç©ºé—´ä¸­ï¼Œæ¬§å¼è·ç¦»è®¡ç®—å…¬å¼ä¸ºï¼š<br>$$ d_{\text{euclidean}}(A, B) &#x3D; \sqrt{\sum_{i&#x3D;1}^{n}(x_i - y_i)^2} $$</p></li><li><p>æ›¼å“ˆé¡¿è·ç¦»ï¼šæ›¼å“ˆé¡¿è·ç¦»æ˜¯ä¸¤ç‚¹ä¹‹é—´æ²¿åæ ‡è½´æ–¹å‘çš„è·ç¦»ä¹‹å’Œï¼Œä¹Ÿç§°ä¸ºåŸå¸‚è¡—åŒºè·ç¦»ã€‚åœ¨nç»´ç©ºé—´ä¸­ï¼Œæ›¼å“ˆé¡¿è·ç¦»è®¡ç®—å…¬å¼ä¸ºï¼š<br>$$ d_{\text{manhattan}}(A, B) &#x3D; \sum_{i&#x3D;1}^{n}|x_i - y_i| $$</p></li></ul></li><li><p>è·ç¦»å½¢çŠ¶ï¼š</p><ul><li>æ¬§å¼è·ç¦»ï¼šæ¬§å¼è·ç¦»åœ¨å‡ ä½•ä¸Šå¯¹åº”äºç›´çº¿çš„é•¿åº¦ï¼Œå› æ­¤åœ¨nç»´ç©ºé—´ä¸­å‘ˆç°åœ†å½¢ç­‰è·ç¦»è½®å»“ã€‚</li><li>æ›¼å“ˆé¡¿è·ç¦»ï¼šæ›¼å“ˆé¡¿è·ç¦»åœ¨å‡ ä½•ä¸Šå¯¹åº”äºæ²¿åæ ‡è½´æ–¹å‘çš„æ­¥è¡Œè·ç¦»ï¼Œå› æ­¤åœ¨nç»´ç©ºé—´ä¸­å‘ˆç°æ–¹å½¢ç­‰è·ç¦»è½®å»“ã€‚</li></ul></li><li><p>æ•æ„Ÿåº¦ï¼š</p><ul><li>æ¬§å¼è·ç¦»ï¼šæ¬§å¼è·ç¦»å¯¹å„ä¸ªç»´åº¦çš„å·®å¼‚æ¯”è¾ƒæ•æ„Ÿï¼Œå½“ç‰¹å¾ç»´åº¦ä¹‹é—´çš„å·®å¼‚å¾ˆå¤§æ—¶ï¼Œæ¬§å¼è·ç¦»å¯èƒ½ä¼šå—åˆ°å½±å“ã€‚</li><li>æ›¼å“ˆé¡¿è·ç¦»ï¼šæ›¼å“ˆé¡¿è·ç¦»å¯¹å„ä¸ªç»´åº¦çš„å·®å¼‚ä¸é‚£ä¹ˆæ•æ„Ÿï¼Œå› ä¸ºå®ƒåªè€ƒè™‘äº†æ²¿åæ ‡è½´æ–¹å‘çš„è·ç¦»ã€‚</li></ul></li><li><p>è®¡ç®—æ•ˆç‡ï¼š</p><ul><li>æ¬§å¼è·ç¦»ï¼šè®¡ç®—æ¬§å¼è·ç¦»éœ€è¦è¿›è¡Œå¹³æ–¹å’Œå¼€æ–¹çš„è¿ç®—ï¼Œè®¡ç®—ç›¸å¯¹è¾ƒæ…¢ã€‚</li><li>æ›¼å“ˆé¡¿è·ç¦»ï¼šè®¡ç®—æ›¼å“ˆé¡¿è·ç¦»åªéœ€è¦è¿›è¡Œç»å¯¹å€¼å’Œæ±‚å’Œè¿ç®—ï¼Œè®¡ç®—ç›¸å¯¹è¾ƒå¿«ã€‚</li></ul></li></ol><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€‰æ‹©ä½¿ç”¨æ¬§å¼è·ç¦»è¿˜æ˜¯æ›¼å“ˆé¡¿è·ç¦»å–å†³äºæ•°æ®çš„ç‰¹ç‚¹å’Œå…·ä½“é—®é¢˜ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¬§å¼è·ç¦»æ›´é€‚åˆç”¨äºè¿ç»­ç‰¹å¾ç©ºé—´ï¼Œè€Œæ›¼å“ˆé¡¿è·ç¦»æ›´é€‚åˆç”¨äºå…·æœ‰ç¨€ç–ç‰¹å¾æˆ–ç‰¹å¾ä¹‹é—´å…·æœ‰æ˜æ˜¾åˆ†éš”çš„æ•°æ®ã€‚åœ¨KNNç®—æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©åˆé€‚çš„è·ç¦»åº¦é‡æ–¹æ³•æ¥è·å¾—æ›´å¥½çš„åˆ†ç±»æˆ–å›å½’ç»“æœã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="Pythonå®ç°"><a href="#Pythonå®ç°" class="headerlink" title="Pythonå®ç°"></a>Pythonå®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">KNNClassifier</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, k=<span class="number">3</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Initialize the KNNClassifier.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Parameters:</span></span><br><span class="line"><span class="string">            k (int): Number of nearest neighbors to consider for classification. Default is 3.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.k = k</span><br><span class="line">        self.X_train = <span class="literal">None</span></span><br><span class="line">        self.y_train = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fit</span>(<span class="params">self, X_train, y_train</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Train the KNN classifier.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Parameters:</span></span><br><span class="line"><span class="string">            X_train (numpy.ndarray): Training feature matrix.</span></span><br><span class="line"><span class="string">            y_train (numpy.ndarray): Labels for the training data.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.X_train = X_train</span><br><span class="line">        self.y_train = y_train</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_euclidean_distance</span>(<span class="params">self, point1, point2</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Calculate the Euclidean distance between two points.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Parameters:</span></span><br><span class="line"><span class="string">            point1 (numpy.ndarray): First data point.</span></span><br><span class="line"><span class="string">            point2 (numpy.ndarray): Second data point.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            float: The Euclidean distance between the two points.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> np.sqrt(np.<span class="built_in">sum</span>((point1 - point2) ** <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">predict</span>(<span class="params">self, X_test, predict_type=<span class="string">&quot;classify&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Predict class labels or regression values for the given input data.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Parameters:</span></span><br><span class="line"><span class="string">            X_test (numpy.ndarray): Input feature matrix for prediction.</span></span><br><span class="line"><span class="string">            predict_type (str): Type of prediction, either &quot;classify&quot; or &quot;regress&quot;. Default is &quot;classify&quot;.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            numpy.ndarray: Predicted class labels or regression values.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> predict_type == <span class="string">&quot;classify&quot;</span>:</span><br><span class="line">            y_pred = [self._predict_single_classify(x) <span class="keyword">for</span> x <span class="keyword">in</span> X_test]</span><br><span class="line">            <span class="keyword">return</span> np.array(y_pred)</span><br><span class="line">        <span class="keyword">if</span> predict_type == <span class="string">&quot;regress&quot;</span>:</span><br><span class="line">            y_pred = [self._predict_single_regress(x) <span class="keyword">for</span> x <span class="keyword">in</span> X_test]</span><br><span class="line">            <span class="keyword">return</span> y_pred</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_predict_single_classify</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Classify a single data point.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Parameters:</span></span><br><span class="line"><span class="string">            x (numpy.ndarray): Input data point for classification.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            int: Predicted class label for the input data point.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        distances = [self._euclidean_distance(x, x_train) <span class="keyword">for</span> x_train <span class="keyword">in</span> self.X_train]</span><br><span class="line">        k_indices = np.argsort(distances)[:self.k]  <span class="comment"># Get indices of k nearest neighbors</span></span><br><span class="line">        k_nearest_labels = [self.y_train[i] <span class="keyword">for</span> i <span class="keyword">in</span> k_indices]  <span class="comment"># Get class labels of k nearest neighbors</span></span><br><span class="line">        most_common = Counter(k_nearest_labels).most_common(</span><br><span class="line">            <span class="number">1</span>)  <span class="comment"># Find the most common class label among k nearest neighbors</span></span><br><span class="line">        <span class="keyword">return</span> most_common[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_predict_single_regress</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Make a regression prediction for a single data point.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Parameters:</span></span><br><span class="line"><span class="string">            x (numpy.ndarray): Input data point for regression prediction.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            float: Predicted regression value for the input data point.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        distances = [self._euclidean_distance(x, x_train) <span class="keyword">for</span> x_train <span class="keyword">in</span> self.X_train]</span><br><span class="line">        k_indices = np.argsort(distances)[:self.k]  <span class="comment"># Get indices of k nearest neighbors</span></span><br><span class="line">        k_nearest_y = [self.y_train[i] <span class="keyword">for</span> i <span class="keyword">in</span> k_indices]  <span class="comment"># Get target values of k nearest neighbors</span></span><br><span class="line">        <span class="keyword">return</span> np.mean(k_nearest_y)  <span class="comment"># Use the mean of nearest target values as the prediction</span></span><br></pre></td></tr></table></figure><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>ç±»çš„ä½¿ç”¨æ–¹å¼</p><ol><li>å¯¼å…¥è¯¥ç±»ï¼š<code>from knn_classifier import KNNClassifier</code> (å‡è®¾è¯¥ç±»çš„å®šä¹‰ä¿å­˜åœ¨åä¸º <code>knn_classifier.py</code> çš„æ–‡ä»¶ä¸­)</li><li>åˆ›å»ºKNNåˆ†ç±»å™¨å¯¹è±¡ï¼š<code>knn = KNNClassifier(k=k_value)</code>ï¼Œå…¶ä¸­ <code>k_value</code> æ˜¯æœ€è¿‘é‚»å±…çš„æ•°é‡ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°æŒ‡å®šï¼Œé»˜è®¤ä¸º 3ã€‚</li><li>ä½¿ç”¨è®­ç»ƒæ•°æ®å¯¹åˆ†ç±»å™¨è¿›è¡Œè®­ç»ƒï¼š<code>knn.fit(X_train, y_train)</code>ï¼Œå…¶ä¸­ <code>X_train</code> æ˜¯è®­ç»ƒæ•°æ®çš„ç‰¹å¾çŸ©é˜µï¼Œ<code>y_train</code> æ˜¯å¯¹åº”çš„ç±»æ ‡ç­¾ã€‚</li><li>å¯¹æ–°æ•°æ®è¿›è¡Œé¢„æµ‹ï¼š<code>predictions = knn.predict(X_test, predict_type=&quot;classify&quot;)</code>ï¼Œå…¶ä¸­ <code>X_test</code> æ˜¯åŒ…å«æ–°æ•°æ®ç‚¹çš„ç‰¹å¾çŸ©é˜µï¼Œ<code>predict_type</code> å¯ä»¥é€‰æ‹© â€œclassifyâ€ æˆ– â€œregressâ€ï¼Œåˆ†åˆ«ç”¨äºåˆ†ç±»å’Œå›å½’é¢„æµ‹ã€‚</li></ol><p>æ–¹æ³•è¯´æ˜</p><ol><li><code>__init__(self, k=3)</code>: æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ– KNN åˆ†ç±»å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¼ å…¥æœ€è¿‘é‚»å±…çš„æ•°é‡ <code>k</code>ï¼Œé»˜è®¤ä¸º 3ã€‚</li><li><code>fit(self, X_train, y_train)</code>: è®­ç»ƒ KNN åˆ†ç±»å™¨ï¼Œå°†ç‰¹å¾çŸ©é˜µ <code>X_train</code> å’Œå¯¹åº”çš„ç±»æ ‡ç­¾ <code>y_train</code> ç”¨äºæ¨¡å‹è®­ç»ƒã€‚</li><li><code>predict(self, X_test, predict_type=&quot;classify&quot;)</code>: é¢„æµ‹ç»™å®šè¾“å…¥æ•°æ®çš„ç±»æ ‡ç­¾æˆ–å›å½’å€¼ï¼Œæ ¹æ® <code>predict_type</code> å‚æ•°é€‰æ‹©åˆ†ç±»é¢„æµ‹æˆ–å›å½’é¢„æµ‹ã€‚</li><li><code>_euclidean_distance(self, point1, point2)</code>: è®¡ç®—ä¸¤ä¸ªæ•°æ®ç‚¹ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦»ã€‚</li><li><code>_predict_single_classify(self, x)</code>: å¯¹å•ä¸ªæ•°æ®ç‚¹è¿›è¡Œåˆ†ç±»é¢„æµ‹ï¼Œè¿”å›é¢„æµ‹çš„ç±»æ ‡ç­¾ã€‚</li><li><code>_predict_single_regress(self, x)</code>: å¯¹å•ä¸ªæ•°æ®ç‚¹è¿›è¡Œå›å½’é¢„æµ‹ï¼Œè¿”å›é¢„æµ‹çš„å›å½’å€¼ã€‚</li></ol><p>å±æ€§è¯´æ˜</p><ol><li><code>k</code>: æœ€è¿‘é‚»å±…çš„æ•°é‡ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œç”¨äº KNN ç®—æ³•ä¸­æŒ‡å®šæœ€è¿‘çš„é‚»å±…æ•°ç›®ã€‚</li><li><code>X_train</code>: è®­ç»ƒæ•°æ®çš„ç‰¹å¾çŸ©é˜µï¼Œç”¨äºå­˜å‚¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„è¾“å…¥ç‰¹å¾ã€‚</li><li><code>y_train</code>: è®­ç»ƒæ•°æ®çš„ç±»æ ‡ç­¾ï¼Œç”¨äºå­˜å‚¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„ç›®æ ‡æ ‡ç­¾ã€‚</li></ol><h3 id="ç¤ºä¾‹ç”¨æ³•"><a href="#ç¤ºä¾‹ç”¨æ³•" class="headerlink" title="ç¤ºä¾‹ç”¨æ³•"></a>ç¤ºä¾‹ç”¨æ³•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆä¸€äº›ç¤ºä¾‹æ•°æ®</span></span><br><span class="line">X_train = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">1</span>], [<span class="number">6</span>, <span class="number">2</span>], [<span class="number">7</span>, <span class="number">3</span>]])</span><br><span class="line">y_train = np.array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">knn = KNNClassifier(k=<span class="number">3</span>)  <span class="comment"># åˆ›å»ºKNNåˆ†ç±»å™¨å¯¹è±¡</span></span><br><span class="line">knn.fit(X_train, y_train)  <span class="comment"># ä½¿ç”¨ç¤ºä¾‹æ•°æ®è¿›è¡Œè®­ç»ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹æ–°æ•°æ®ç‚¹</span></span><br><span class="line">X_test = np.array([[<span class="number">2</span>, <span class="number">1</span>], [<span class="number">7</span>, <span class="number">4</span>]])</span><br><span class="line">predictions = knn.predict(X_test, predict_type=<span class="string">&quot;classify&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;é¢„æµ‹ç»“æœ:&quot;</span>, predictions)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç å±•ç¤ºäº†ä½¿ç”¨ <code>KNNClassifier</code> ç±»çš„ç¤ºä¾‹ç”¨æ³•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªç±»çš„ç¤ºä¾‹æ•°æ®é›† <code>X_train</code> å’Œ <code>y_train</code>ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ª <code>KNNClassifier</code> å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ç¤ºä¾‹æ•°æ®è¿›è¡Œè®­ç»ƒã€‚æ¥ç€ï¼Œæˆ‘ä»¬ä½¿ç”¨æ–°æ•°æ® <code>X_test</code> å¯¹æ¨¡å‹è¿›è¡Œåˆ†ç±»é¢„æµ‹ï¼Œå¹¶æ‰“å°é¢„æµ‹ç»“æœã€‚</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li><p><strong>ç‰¹å¾ç¼©æ”¾</strong>ï¼šKNNç®—æ³•åŸºäºè·ç¦»åº¦é‡æ¥è¿›è¡Œåˆ†ç±»æˆ–å›å½’ï¼Œå› æ­¤ç‰¹å¾çš„å°ºåº¦ä¼šå½±å“è·ç¦»è®¡ç®—çš„ç»“æœã€‚å¦‚æœç‰¹å¾å…·æœ‰ä¸åŒçš„å°ºåº¦èŒƒå›´ï¼Œå»ºè®®è¿›è¡Œç‰¹å¾ç¼©æ”¾ï¼Œç¡®ä¿å„ä¸ªç‰¹å¾å¯¹è·ç¦»è®¡ç®—çš„å½±å“ç›¸å¯¹å‡è¡¡ã€‚å¸¸ç”¨çš„ç‰¹å¾ç¼©æ”¾æ–¹æ³•åŒ…æ‹¬æ ‡å‡†åŒ–ï¼ˆz-scoreæ ‡å‡†åŒ–ï¼‰å’Œå½’ä¸€åŒ–ï¼ˆmin-maxç¼©æ”¾ï¼‰ã€‚</p></li><li><p><strong>Kå€¼çš„é€‰æ‹©</strong>ï¼šKNNç®—æ³•ä¸­çš„Kå€¼å†³å®šäº†ç”¨äºåˆ†ç±»æˆ–å›å½’çš„æœ€è¿‘é‚»æ ·æœ¬çš„æ•°é‡ã€‚é€‰æ‹©é€‚å½“çš„Kå€¼å¯¹ç®—æ³•çš„æ€§èƒ½è‡³å…³é‡è¦ã€‚è¾ƒå°çš„Kå€¼å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œè¿‡äºæ•æ„Ÿï¼Œå®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“ã€‚è¾ƒå¤§çš„Kå€¼å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹è¿‡äºç®€å•ï¼Œå¿½ç•¥äº†å±€éƒ¨çš„æ•°æ®æ¨¡å¼ã€‚é€šå¸¸ï¼ŒKå€¼çš„é€‰æ‹©é€šè¿‡äº¤å‰éªŒè¯ç­‰æŠ€æœ¯æ¥è¿›è¡Œè°ƒä¼˜ã€‚</p></li><li><p><strong>è·ç¦»åº¦é‡æ–¹æ³•çš„é€‰æ‹©</strong>ï¼šKNNç®—æ³•éœ€è¦é€‰æ‹©é€‚å½“çš„è·ç¦»åº¦é‡æ–¹æ³•ï¼Œä¾‹å¦‚æ¬§æ°è·ç¦»ã€æ›¼å“ˆé¡¿è·ç¦»æˆ–å…¶ä»–è·ç¦»åº¦é‡æ–¹æ³•ã€‚ä¸åŒçš„è·ç¦»åº¦é‡æ–¹æ³•é€‚ç”¨äºä¸åŒçš„æ•°æ®ç±»å‹å’Œç‰¹å¾ç©ºé—´ï¼Œå› æ­¤åœ¨é€‰æ‹©æ—¶éœ€è¦æ ¹æ®æ•°æ®çš„ç‰¹ç‚¹è¿›è¡Œåˆç†é€‰æ‹©ã€‚</p></li><li><p><strong>æ•°æ®é‡å’Œè®¡ç®—å¤æ‚åº¦</strong>ï¼šKNNç®—æ³•åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šçš„è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ï¼Œå› ä¸ºå®ƒéœ€è¦è®¡ç®—æ–°æ ·æœ¬ä¸æ‰€æœ‰è®­ç»ƒæ ·æœ¬ä¹‹é—´çš„è·ç¦»ã€‚åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶ï¼Œéœ€è¦è€ƒè™‘ä½¿ç”¨æ›´é«˜æ•ˆçš„æ•°æ®ç»“æ„å’Œç®—æ³•æ¥åŠ é€Ÿè®¡ç®—è¿‡ç¨‹ã€‚</p></li><li><p><strong>å¤„ç†ä¸å¹³è¡¡æ•°æ®é›†</strong>ï¼šå¯¹äºä¸å¹³è¡¡çš„æ•°æ®é›†ï¼ˆæŸäº›ç±»åˆ«æ ·æœ¬æ•°é‡è¾ƒå°‘ï¼‰ï¼ŒKNNç®—æ³•å¯èƒ½ä¼šåå‘äºå ä¸»å¯¼åœ°ä½çš„ç±»åˆ«ã€‚è¿™æ—¶å¯ä»¥è€ƒè™‘é‡‡ç”¨è¿‡é‡‡æ ·ã€æ¬ é‡‡æ ·æˆ–åˆæˆæ–°æ ·æœ¬çš„æ–¹æ³•æ¥å¹³è¡¡æ•°æ®é›†ï¼Œä»¥è·å¾—æ›´å¥½çš„åˆ†ç±»ç»“æœã€‚</p></li><li><p><strong>é¿å…æ•°æ®æ³„éœ²</strong>ï¼šåœ¨ä½¿ç”¨KNNç®—æ³•æ—¶ï¼Œåº”ç¡®ä¿æµ‹è¯•é›†å’Œè®­ç»ƒé›†çš„æ ·æœ¬æ˜¯ç‹¬ç«‹çš„ï¼Œé¿å…æ•°æ®æ³„éœ²ã€‚æ•°æ®æ³„éœ²å¯èƒ½å¯¼è‡´æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°è¿‡äºä¹è§‚ï¼Œæ— æ³•çœŸå®åœ°è¯„ä¼°ç®—æ³•çš„æ€§èƒ½ã€‚</p></li><li><p><strong>æ¨¡å‹çš„è§£é‡Šæ€§</strong>ï¼šKNNç®—æ³•æ˜¯ä¸€ç§åŸºäºå®ä¾‹çš„å­¦ä¹ æ–¹æ³•ï¼Œå®ƒä¸ç”Ÿæˆæ˜¾å¼çš„æ¨¡å‹ï¼Œå› æ­¤æ¨¡å‹çš„è§£é‡Šæ€§è¾ƒå·®ã€‚åœ¨æŸäº›åº”ç”¨åœºæ™¯ä¸­ï¼Œæ¨¡å‹çš„è§£é‡Šæ€§å¯èƒ½æ˜¯éå¸¸é‡è¦çš„ï¼Œæ­¤æ—¶éœ€è¦è€ƒè™‘å…¶ä»–ç±»å‹çš„ç®—æ³•ã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼ŒKNNç®—æ³•æ˜¯ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„åˆ†ç±»å’Œå›å½’ç®—æ³•ï¼Œåœ¨å®è·µä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚ä½†è¦è·å¾—å¥½çš„æ€§èƒ½ï¼Œéœ€è¦åˆç†é€‰æ‹©Kå€¼ã€è·ç¦»åº¦é‡æ–¹æ³•ï¼Œå¹¶æ³¨æ„æ•°æ®é¢„å¤„ç†ç­‰æ³¨æ„äº‹é¡¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ML </tag>
            
            <tag> K- Nearest Neighbor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sparkä¸Scala</title>
      <link href="/2023/07/27/Spark%E4%B8%8EScala/"/>
      <url>/2023/07/27/Spark%E4%B8%8EScala/</url>
      
        <content type="html"><![CDATA[<h1 id="Sparkä¸Scala"><a href="#Sparkä¸Scala" class="headerlink" title="Sparkä¸Scala"></a>Sparkä¸Scala</h1><p>Scalaæ˜¯ä¸€ç§é€šç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ—¨åœ¨èåˆé¢å‘å¯¹è±¡ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§ã€‚å®ƒè¿è¡Œåœ¨Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šï¼Œå› æ­¤å¯ä»¥ä¸Javaåº“å’Œæ¡†æ¶æ— ç¼äº¤äº’ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨Javaç”Ÿæ€ç³»ç»Ÿä¸­çš„å„ç§å·¥å…·å’Œåº“ã€‚Scalaçš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€æ˜¯è®©ç¼–ç¨‹æ›´å…·è¡¨ç°åŠ›å’Œç®€æ´ï¼ŒåŒæ—¶æä¾›å¼ºå¤§çš„ç±»å‹ç³»ç»Ÿå’Œé™æ€ç±»å‹æ£€æŸ¥ã€‚</p><p>Apache Sparkæ˜¯ä¸€ä¸ªå¼€æºçš„å¤§æ•°æ®å¤„ç†æ¡†æ¶ï¼Œå®ƒæ—¨åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„åˆ†å¸ƒå¼è®¡ç®—ã€‚Sparkæä¾›äº†è®¸å¤šç”¨äºå¤„ç†æ•°æ®çš„é«˜çº§APIï¼Œä¾‹å¦‚æ‰¹å¤„ç†ï¼ˆSpark Coreï¼‰å’Œæµå¤„ç†ï¼ˆSpark Streamingï¼‰ï¼Œè¿˜æ”¯æŒSQLæŸ¥è¯¢ï¼ˆSpark SQLï¼‰ã€å›¾å¤„ç†ï¼ˆGraphXï¼‰å’Œæœºå™¨å­¦ä¹ ï¼ˆMLlibï¼‰ç­‰åŠŸèƒ½ã€‚Sparkçš„ä¸€ä¸ªå…³é”®ç‰¹ç‚¹æ˜¯å…¶å†…å­˜è®¡ç®—èƒ½åŠ›ï¼Œå®ƒå…è®¸åœ¨å†…å­˜ä¸­è¿›è¡Œæ•°æ®å¤„ç†ï¼Œä»è€Œå¤§å¤§æé«˜äº†æ€§èƒ½ã€‚</p><p>Scalaä¸Sparkä¹‹é—´æœ‰ç€å¯†åˆ‡çš„å…³ç³»ã€‚äº‹å®ä¸Šï¼ŒSparkæœ€åˆæ˜¯ç”¨Scalaç¼–å†™çš„ï¼Œå¹¶ä¸”Scalaä¸€ç›´æ˜¯Sparkä¸»è¦çš„ç¼–ç¨‹è¯­è¨€ã€‚è¿™æ˜¯å› ä¸ºScalaè¯­è¨€å…·æœ‰ä¸Sparkçš„åˆ†å¸ƒå¼è®¡ç®—æ¨¡å‹å’Œå‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§éå¸¸å¥‘åˆçš„ç‰¹ç‚¹ã€‚Scalaçš„å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ç‰¹æ€§ä½¿å¾—Sparkçš„ä»£ç å¯ä»¥æ›´å…·è¡¨ç°åŠ›å’Œæ˜“è¯»æ€§ï¼Œä»è€Œæ›´å®¹æ˜“ç¼–å†™å’Œç»´æŠ¤å¤æ‚çš„åˆ†å¸ƒå¼è®¡ç®—ä»»åŠ¡ã€‚</p><p>Sparkæä¾›äº†Scala APIä»¥åŠå…¶ä»–è¯­è¨€ï¼ˆå¦‚Javaã€Pythonå’ŒRï¼‰çš„APIï¼Œä½†Scala APIé€šå¸¸è¢«è®¤ä¸ºæ˜¯æœ€åŸç”Ÿå’Œæœ€çµæ´»çš„ã€‚è®¸å¤šSparkçš„æ ¸å¿ƒå¼€å‘äººå‘˜å’Œç¤¾åŒºæˆå‘˜éƒ½å–œæ¬¢ä½¿ç”¨Scalaæ¥ç¼–å†™Sparkåº”ç”¨ç¨‹åºï¼Œå› ä¸ºScalaçš„è¯­æ³•å’ŒåŠŸèƒ½å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨Sparkæä¾›çš„é«˜çº§ç‰¹æ€§ï¼Œä½¿å¾—å¼€å‘æ›´åŠ é«˜æ•ˆã€‚</p><p>æ€»ç»“ï¼šScalaæ˜¯Sparkçš„ä¸»è¦ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä¸Sparkä¹‹é—´æœ‰ç€ç´§å¯†çš„å…³ç³»ï¼ŒScalaçš„è®¾è®¡ç‰¹ç‚¹ä¸Sparkçš„åˆ†å¸ƒå¼è®¡ç®—æ¨¡å‹å’Œå‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§éå¸¸å¥‘åˆï¼Œä½¿å¾—ä½¿ç”¨Scalaç¼–å†™Sparkåº”ç”¨ç¨‹åºæ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆã€‚</p><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><div class="tagLink"><a class="link-card" title="Scalaå®˜ç½‘" href="https://www.scala-lang.org/"><span class="link-card-backdrop" style="background-image: url(https://www.scala-lang.org/resources/img/frontpage/scala-spiral.png)"></span><div class="left"><img src="https://www.scala-lang.org/resources/img/frontpage/scala-spiral.png" class="lazyload placeholder" data-srcset="https://www.scala-lang.org/resources/img/frontpage/scala-spiral.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">Scalaå®˜ç½‘</p><p class="url">https://www.scala-lang.org/</p></div></a></div><div class="tagLink"><a class="link-card" title="Sparkå®˜ç½‘" href="https://spark.apache.org/"><span class="link-card-backdrop" style="background-image: url(https://spark.apache.org/images/spark-logo-rev.svg)"></span><div class="left"><img src="https://spark.apache.org/images/spark-logo-rev.svg" class="lazyload placeholder" data-srcset="https://spark.apache.org/images/spark-logo-rev.svg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">Sparkå®˜ç½‘</p><p class="url">https://spark.apache.org/</p></div></a></div><h2 id="ä½¿ç”¨IDEAæ„å»ºä¸€ä¸ªSpark-Scalaé¡¹ç›®"><a href="#ä½¿ç”¨IDEAæ„å»ºä¸€ä¸ªSpark-Scalaé¡¹ç›®" class="headerlink" title="ä½¿ç”¨IDEAæ„å»ºä¸€ä¸ªSpark Scalaé¡¹ç›®"></a>ä½¿ç”¨IDEAæ„å»ºä¸€ä¸ªSpark Scalaé¡¹ç›®</h2><ol><li><p>ä¸‹è½½Scala</p></li><li><p>åœ¨IDEAä¸­è®¾ç½®ä½¿ç”¨Scalaè¯­è¨€<br>æ·»åŠ mavenä¾èµ–</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-sql --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.11<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å°†Scalaæ·»åŠ åˆ°å…¨å±€åº“ä¸­</p></li><li><p>ä¸‹è½½æ’ä»¶Scalaå¹¶é‡å¯IDEA</p></li></ol><h2 id="æ¡ˆä¾‹è§£æ"><a href="#æ¡ˆä¾‹è§£æ" class="headerlink" title="æ¡ˆä¾‹è§£æ"></a>æ¡ˆä¾‹è§£æ</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.hankcs.hanlp.<span class="type">HanLP</span></span><br><span class="line"><span class="keyword">import</span> com.hankcs.hanlp.seg.common.<span class="type">Term</span></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.&#123;<span class="type">Level</span>, <span class="type">Logger</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.<span class="type">StorageLevel</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SearchEngineLogAnalysis</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">   <span class="type">Logger</span></span><br><span class="line">     .getLogger(<span class="string">&quot;org.apache.spark&quot;</span>)</span><br><span class="line">     .setLevel(<span class="type">Level</span>.<span class="type">ERROR</span>)</span><br><span class="line">   <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>()</span><br><span class="line">     .setAppName(<span class="string">&quot;SearchEngineLogAnalysis&quot;</span>)</span><br><span class="line">     .setMaster(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">   <span class="keyword">val</span> sparkContext = <span class="keyword">new</span> <span class="type">SparkContext</span>(config = conf)</span><br><span class="line">   <span class="keyword">val</span> file = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/reduced.txt&quot;</span></span><br><span class="line">   <span class="keyword">val</span> outputPath1 = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/queryWordsWordCountRDD&quot;</span></span><br><span class="line">   <span class="keyword">val</span> outputPath2 = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/userQueryAnalysisRDD&quot;</span></span><br><span class="line">   <span class="keyword">val</span> outputPath3 = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/timeQueryCountAnalysisRDD&quot;</span></span><br><span class="line">   <span class="keyword">val</span> rddSougouRecord = sparkContext.textFile(file)</span><br><span class="line">     .filter(line =&gt; line != <span class="literal">null</span> &amp;&amp; line.trim.split(<span class="string">&quot;\\s+&quot;</span>).length == <span class="number">6</span>)</span><br><span class="line">     .mapPartitions(it =&gt; &#123;</span><br><span class="line">       it.map(line =&gt; &#123;</span><br><span class="line">         <span class="keyword">val</span> contents = line.trim.split(<span class="string">&quot;\\s+&quot;</span>)</span><br><span class="line">         <span class="type">SogouRecord</span>(</span><br><span class="line">           contents(<span class="number">0</span>),</span><br><span class="line">           contents(<span class="number">1</span>),</span><br><span class="line">           contents(<span class="number">2</span>).replaceAll(<span class="string">&quot;[\\[|\\]]&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">           contents(<span class="number">3</span>).toInt,</span><br><span class="line">           contents(<span class="number">4</span>).toInt,</span><br><span class="line">           contents(<span class="number">5</span>)</span><br><span class="line">         )</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;)</span><br><span class="line">   rddSougouRecord.persist(<span class="type">StorageLevel</span>.<span class="type">MEMORY_AND_DISK</span>).count()</span><br><span class="line"></span><br><span class="line">   <span class="keyword">val</span> queryWordsWordCountRDD = rddSougouRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">     it.flatMap(record =&gt; &#123;</span><br><span class="line">       <span class="keyword">val</span> terms: util.<span class="type">List</span>[<span class="type">Term</span>] = <span class="type">HanLP</span>.segment(record.queryWords.trim)</span><br><span class="line">       <span class="keyword">import</span> scala.collection.<span class="type">JavaConverters</span>._</span><br><span class="line">       terms.asScala.map(_.word)</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;).map((_, <span class="number">1</span>)).reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">   queryWordsWordCountRDD.coalesce(numPartitions = <span class="number">1</span>).saveAsTextFile(outputPath1)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">val</span> userQueryAnalysisRDD = rddSougouRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">     it.map(record =&gt; &#123;</span><br><span class="line">       ((record.userId, record.queryWords), <span class="number">1</span>)</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;).reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br><span class="line">   userQueryAnalysisRDD.coalesce(<span class="number">1</span>).saveAsTextFile(outputPath2)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">val</span> timeQueryCountAnalysisRDD = rddSougouRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">     it.map(record =&gt; &#123;</span><br><span class="line">       (record.queryTime.substring(<span class="number">0</span>, <span class="number">2</span>), <span class="number">1</span>)</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;).reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br><span class="line">   timeQueryCountAnalysisRDD.coalesce(<span class="number">1</span>).saveAsTextFile(outputPath3)</span><br><span class="line"></span><br><span class="line">   rddSougouRecord.unpersist()</span><br><span class="line">   sparkContext.stop()</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€æ­¥åˆ†æ"><a href="#é€æ­¥åˆ†æ" class="headerlink" title="é€æ­¥åˆ†æ"></a>é€æ­¥åˆ†æ</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Logger</span></span><br><span class="line">  .getLogger(<span class="string">&quot;org.apache.spark&quot;</span>)</span><br><span class="line">  .setLevel(<span class="type">Level</span>.<span class="type">ERROR</span>)</span><br></pre></td></tr></table></figure><p>è®¾ç½®<code>org.apache.spark</code>çš„æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œå¯ä»¥åœ¨æµ‹è¯•é˜¶æ®µæ›´åŠ æ–¹ä¾¿çš„è§‚å¯Ÿæ§åˆ¶å°çš„è¾“å‡ºç»“æœ</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>()</span><br><span class="line">  .setAppName(<span class="string">&quot;SearchEngineLogAnalysis&quot;</span>)</span><br><span class="line">  .setMaster(<span class="string">&quot;local[*]&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯ä½¿ç”¨Scalaè¯­è¨€åˆ›å»ºä¸€ä¸ªSparkåº”ç”¨ç¨‹åºçš„é…ç½®å¯¹è±¡ï¼ˆSparkConfï¼‰ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¸€äº›è®¾ç½®ã€‚</p><ol><li><p><code>val conf = new SparkConf()</code>: é¦–å…ˆï¼Œåˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>conf</code>çš„ä¸å¯å˜ï¼ˆvalï¼‰å˜é‡ï¼Œå¹¶é€šè¿‡<code>new SparkConf()</code>æ¥å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„SparkConfå¯¹è±¡ã€‚SparkConfæ˜¯ç”¨äºé…ç½®Sparkåº”ç”¨ç¨‹åºçš„ç±»ã€‚</p></li><li><p><code>.setAppName(&quot;SearchEngineLogAnalysis&quot;)</code>: ä½¿ç”¨<code>.setAppName()</code>æ–¹æ³•ä¸ºSparkåº”ç”¨ç¨‹åºè®¾ç½®ä¸€ä¸ªåç§°ï¼Œè¿™é‡Œå°†åº”ç”¨ç¨‹åºçš„åç§°è®¾ç½®ä¸ºâ€SearchEngineLogAnalysisâ€ã€‚åº”ç”¨ç¨‹åºçš„åç§°å°†åœ¨Sparké›†ç¾¤ä¸­æ˜¾ç¤ºï¼Œç”¨äºæ ‡è¯†ä¸åŒçš„åº”ç”¨ç¨‹åºã€‚</p></li><li><p><code>.setMaster(&quot;local[*]&quot;)</code>: ä½¿ç”¨<code>.setMaster()</code>æ–¹æ³•è®¾ç½®Sparkåº”ç”¨ç¨‹åºçš„ä¸»èŠ‚ç‚¹URLæˆ–æœ¬åœ°æ¨¡å¼ã€‚åœ¨è¿™é‡Œï¼Œå°†ä¸»èŠ‚ç‚¹URLè®¾ç½®ä¸ºâ€local[*]â€ï¼Œè¡¨ç¤ºåœ¨æœ¬åœ°æ¨¡å¼ä¸‹è¿è¡ŒSparkåº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„CPUå†…æ ¸ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªSparkåº”ç”¨ç¨‹åºçš„é…ç½®å¯¹è±¡ï¼Œè®¾ç½®äº†åº”ç”¨ç¨‹åºçš„åç§°ä¸º<code>SearchEngineLogAnalysis</code>ï¼Œå¹¶å°†å…¶é…ç½®ä¸ºåœ¨æœ¬åœ°æ¨¡å¼ä¸‹è¿è¡Œï¼Œå¹¶ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„CPUå†…æ ¸è¿›è¡Œå¹¶è¡Œå¤„ç†ã€‚è¯·æ³¨æ„ï¼Œåœ¨æœ¬åœ°æ¨¡å¼ä¸‹è¿è¡Œçš„Sparkåº”ç”¨ç¨‹åºå°†ä¸ä¼šè¿æ¥åˆ°Sparké›†ç¾¤ï¼Œè€Œæ˜¯åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šä»¥å•æœºæ¨¡å¼è¿è¡Œï¼Œé€‚ç”¨äºå¼€å‘å’Œæµ‹è¯•é˜¶æ®µã€‚åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ éœ€è¦å°†<code>.setMaster()</code>æ–¹æ³•çš„å‚æ•°è®¾ç½®ä¸ºè¿æ¥åˆ°Sparké›†ç¾¤çš„ä¸»èŠ‚ç‚¹URLï¼Œä»¥ä¾¿åœ¨é›†ç¾¤ä¸Šåˆ†å¸ƒå¼è¿è¡Œä½ çš„Sparkåº”ç”¨ç¨‹åºã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> sparkContext = <span class="keyword">new</span> <span class="type">SparkContext</span>(config = conf)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ç”¨äºåˆ›å»ºä¸€ä¸ªSparkContextå¯¹è±¡ï¼Œå®ƒæ˜¯Sparkåº”ç”¨ç¨‹åºä¸Sparké›†ç¾¤ä¹‹é—´çš„ä¸»è¦æ¥å£ã€‚</p><ol><li><p><code>val sparkContext</code>: è¿™æ˜¯ä¸€ä¸ªä¸å¯å˜ï¼ˆvalï¼‰å˜é‡ï¼Œç”¨äºå­˜å‚¨SparkContextå¯¹è±¡ã€‚</p></li><li><p><code>new SparkContext(config = conf)</code>: è¿™æ˜¯åˆ›å»ºSparkContextå¯¹è±¡çš„è¯­å¥ã€‚é€šè¿‡<code>new SparkContext()</code>æ¥å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„SparkContextå¯¹è±¡ï¼Œå¹¶é€šè¿‡<code>config = conf</code>å‚æ•°å°†ä¹‹å‰åˆ›å»ºçš„SparkConfå¯¹è±¡<code>conf</code>ä¼ é€’ç»™SparkContextæ„é€ å‡½æ•°ã€‚</p></li></ol><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ä¹‹å‰é…ç½®å¥½çš„SparkConfå¯¹è±¡<code>conf</code>æ¥åˆå§‹åŒ–SparkContextã€‚SparkConfå¯¹è±¡åŒ…å«äº†åº”ç”¨ç¨‹åºçš„å„ç§é…ç½®è®¾ç½®ï¼Œè€ŒSparkContextåˆ™ä½¿ç”¨è¿™äº›é…ç½®åœ¨Sparké›†ç¾¤ä¸Šæ‰§è¡Œä»»åŠ¡ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ›å»ºSparkContextå¯¹è±¡æ˜¯Sparkæ—©æœŸç‰ˆæœ¬ï¼ˆ2.xåŠä¹‹å‰ï¼‰çš„åšæ³•ã€‚ä»Spark 2.0ç‰ˆæœ¬å¼€å§‹ï¼Œæ¨èä½¿ç”¨SparkSessionæ¥ä»£æ›¿SparkContextã€‚SparkSessionæ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„æ¥å£ï¼Œå®ƒå°è£…äº†SparkContextå’ŒSQLContextï¼Œå¹¶ä¸”æä¾›äº†æ›´æ–¹ä¾¿çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¯¹DataFrameå’ŒDatasetçš„æ”¯æŒã€‚</p><p>å¦‚æœåœ¨ä½¿ç”¨Spark 2.xåŠä¹‹åç‰ˆæœ¬ï¼Œå»ºè®®æ”¹ç”¨SparkSessionæ¥åˆå§‹åŒ–Sparkåº”ç”¨ç¨‹åºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.sql.<span class="type">SparkSession</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> spark = <span class="type">SparkSession</span>.builder()</span><br><span class="line">  .appName(<span class="string">&quot;SearchEngineLogAnalysis&quot;</span>)</span><br><span class="line">  .master(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">  .getOrCreate()</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>SparkSession.builder()</code>æ¥æ„å»ºSparkSessionå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨<code>.appName()</code>æ–¹æ³•è®¾ç½®åº”ç”¨ç¨‹åºåç§°ï¼Œ<code>.master()</code>æ–¹æ³•è®¾ç½®ä¸»èŠ‚ç‚¹URLæˆ–æœ¬åœ°æ¨¡å¼ã€‚æœ€åï¼Œé€šè¿‡<code>.getOrCreate()</code>æ–¹æ³•æ¥è·å–æˆ–åˆ›å»ºä¸€ä¸ªSparkSessionå¯¹è±¡ã€‚ä½¿ç”¨SparkSessionä¹‹åï¼Œå¯ä»¥é€šè¿‡<code>.sparkContext</code>å±æ€§æ¥è®¿é—®åº•å±‚çš„SparkContextå¯¹è±¡ï¼Œä»¥ä¾¿è¿›è¡Œä¸€äº›åº•å±‚æ“ä½œã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> rddSougouRecord = sparkContext.textFile(file)</span><br><span class="line">  .filter(line =&gt; line != <span class="literal">null</span> &amp;&amp; line.trim.split(<span class="string">&quot;\\s+&quot;</span>).length == <span class="number">6</span>)</span><br><span class="line">  .mapPartitions(it =&gt; &#123;</span><br><span class="line">    it.map(line =&gt; &#123;</span><br><span class="line">      <span class="keyword">val</span> contents = line.trim.split(<span class="string">&quot;\\s+&quot;</span>)</span><br><span class="line">      <span class="type">SogouRecord</span>(</span><br><span class="line">        contents(<span class="number">0</span>),</span><br><span class="line">        contents(<span class="number">1</span>),</span><br><span class="line">        contents(<span class="number">2</span>).replaceAll(<span class="string">&quot;[\\[|\\]]&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">        contents(<span class="number">3</span>).toInt,</span><br><span class="line">        contents(<span class="number">4</span>).toInt,</span><br><span class="line">        contents(<span class="number">5</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯ä½¿ç”¨Sparkçš„RDDï¼ˆResilient Distributed Datasetï¼‰ APIæ¥è¯»å–ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶æ ¹æ®ç‰¹å®šçš„è§„åˆ™å°†æ¯è¡Œæ•°æ®è½¬æ¢ä¸ºè‡ªå®šä¹‰çš„SogouRecordå¯¹è±¡ã€‚</p><ol><li><p><code>val rddSougouRecord = sparkContext.textFile(file)</code>: è¿™è¡Œä»£ç è¯»å–æ–‡æœ¬æ–‡ä»¶å¹¶åˆ›å»ºäº†ä¸€ä¸ªRDDï¼ˆResilient Distributed Datasetï¼‰ã€‚<code>file</code>æ˜¯æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„ã€‚<code>textFile</code>æ–¹æ³•å°†æ–‡ä»¶çš„æ¯ä¸€è¡Œä½œä¸ºRDDçš„ä¸€ä¸ªå…ƒç´ ã€‚</p></li><li><p><code>.filter(line =&gt; line != null &amp;&amp; line.trim.split(&quot;\\s+&quot;).length == 6)</code>: åœ¨ä¸Šä¸€æ­¥åˆ›å»ºçš„RDDä¸Šè°ƒç”¨<code>filter</code>æ–¹æ³•ï¼Œè¿‡æ»¤æ‰ä¸€äº›ä¸ç¬¦åˆæ¡ä»¶çš„è¡Œã€‚<code>filter</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªLambdaè¡¨è¾¾å¼ã€‚Lambdaè¡¨è¾¾å¼ä¸­çš„æ¡ä»¶<code>line != null &amp;&amp; line.trim.split(&quot;\\s+&quot;).length == 6</code>åˆ¤æ–­æ˜¯å¦æ»¡è¶³è¿‡æ»¤æ¡ä»¶ï¼šè¡Œä¸ä¸ºnullä¸”æŒ‰ç©ºæ ¼æ‹†åˆ†åæœ‰6ä¸ªå…ƒç´ ã€‚</p></li><li><p><code>.mapPartitions(it =&gt; &#123; ... &#125;)</code>: è¿™æ˜¯ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œä½¿ç”¨<code>mapPartitions</code>æ–¹æ³•å¯¹æ¯ä¸ªåˆ†åŒºï¼ˆpartitionï¼‰ä¸­çš„æ•°æ®è¿›è¡Œè½¬æ¢ã€‚<code>mapPartitions</code>æ–¹æ³•ä¹Ÿæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„è¾“å…¥æ˜¯æ¯ä¸ªåˆ†åŒºçš„è¿­ä»£å™¨ï¼ˆiteratorï¼‰ï¼Œè¾“å‡ºæ˜¯è½¬æ¢åçš„è¿­ä»£å™¨ã€‚</p></li><li><p><code>it.map(line =&gt; &#123; ... &#125;)</code>: åœ¨<code>mapPartitions</code>æ–¹æ³•çš„å‡½æ•°ä½“å†…ï¼Œå¯¹æ¯ä¸ªåˆ†åŒºçš„æ•°æ®ï¼ˆå³æ¯è¡Œæ–‡æœ¬ï¼‰è¿›è¡Œè½¬æ¢ã€‚ä½¿ç”¨<code>map</code>æ–¹æ³•å¯¹æ¯è¡Œæ–‡æœ¬åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°†æ–‡æœ¬æŒ‰ç©ºæ ¼æ‹†åˆ†ï¼Œå¹¶æ ¹æ®è‡ªå®šä¹‰çš„è§„åˆ™æ„é€ <code>SogouRecord</code>å¯¹è±¡ã€‚</p></li><li><p><code>val contents = line.trim.split(&quot;\\s+&quot;)</code>: å°†å½“å‰è¡Œå»é™¤é¦–å°¾ç©ºæ ¼åæŒ‰ç©ºæ ¼è¿›è¡Œæ‹†åˆ†ï¼Œå°†ç»“æœä¿å­˜åœ¨<code>contents</code>æ•°ç»„ä¸­ã€‚</p></li><li><p><code>SogouRecord(...)</code>ï¼šæ ¹æ®æ‹†åˆ†åçš„<code>contents</code>æ•°ç»„çš„å†…å®¹æ„é€ <code>SogouRecord</code>å¯¹è±¡ã€‚<code>SogouRecord</code>æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»ï¼Œå®ƒåŒ…å«äº†6ä¸ªå­—æ®µï¼Œå¯¹åº”ç€æ¯è¡Œæ–‡æœ¬ä¸­æ‹†åˆ†åçš„6ä¸ªå…ƒç´ ã€‚</p></li></ol><p>æœ€åï¼Œæ•´ä¸ªä»£ç çš„ä½œç”¨æ˜¯ä»ç»™å®šçš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œæ ¹æ®ç‰¹å®šçš„æ¡ä»¶è¿‡æ»¤æ‰æ— æ•ˆçš„è¡Œï¼Œç„¶åæŒ‰ç…§è‡ªå®šä¹‰çš„è§„åˆ™å°†æ¯è¡Œæ–‡æœ¬è½¬æ¢ä¸º<code>SogouRecord</code>å¯¹è±¡ï¼Œå¹¶æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªåŒ…å«<code>SogouRecord</code>å¯¹è±¡çš„RDD <code>rddSougouRecord</code>ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rddSougouRecord.persist(<span class="type">StorageLevel</span>.<span class="type">MEMORY_AND_DISK</span>).count()</span><br></pre></td></tr></table></figure><p>è¿™è¡Œä»£ç å¯¹ä¹‹å‰çš„RDD <code>rddSougouRecord</code> è¿›è¡Œäº†æŒä¹…åŒ–ï¼ˆç¼“å­˜ï¼‰æ“ä½œï¼Œå¹¶è®¡ç®—äº†RDDä¸­å…ƒç´ çš„æ•°é‡ã€‚</p><ol><li><p><code>rddSougouRecord.persist(StorageLevel.MEMORY_AND_DISK)</code>: è¿™éƒ¨åˆ†ä»£ç å¯¹RDD <code>rddSougouRecord</code> è¿›è¡Œäº†æŒä¹…åŒ–æ“ä½œã€‚åœ¨Sparkä¸­ï¼ŒRDDæ˜¯ä¸€ä¸ªä¸å¯å˜çš„åˆ†å¸ƒå¼æ•°æ®é›†ï¼Œå½“å¯¹ä¸€ä¸ªRDDæ‰§è¡Œä¸€ç³»åˆ—çš„è½¬æ¢æ“ä½œæ—¶ï¼Œæ¯ä¸ªè½¬æ¢éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„RDDï¼Œè€ŒåŸå§‹RDDåˆ™ä¸ä¼šå—åˆ°å½±å“ã€‚æŒä¹…åŒ–ï¼ˆç¼“å­˜ï¼‰æ“ä½œçš„ç›®çš„æ˜¯å°†RDDçš„æ•°æ®ç¼“å­˜åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œè¿™æ ·å¯ä»¥é¿å…åœ¨åç»­çš„æ“ä½œä¸­é‡å¤è®¡ç®—ï¼Œæé«˜è®¡ç®—æ•ˆç‡ã€‚</p><p><code>persist</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³å­˜å‚¨çº§åˆ«ï¼ˆStorageLevelï¼‰ã€‚åœ¨è¿™é‡Œï¼Œä½¿ç”¨äº†<code>StorageLevel.MEMORY_AND_DISK</code>å­˜å‚¨çº§åˆ«ï¼Œè¡¨ç¤ºå°†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœå†…å­˜ç©ºé—´ä¸è¶³ï¼Œåˆ™æº¢å†™åˆ°ç£ç›˜ã€‚è¿™æ ·å¯ä»¥åœ¨å†…å­˜å……è¶³æ—¶å¿«é€Ÿè®¿é—®æ•°æ®ï¼Œå¹¶åœ¨å†…å­˜ä¸è¶³æ—¶ä¿ç•™æ•°æ®åœ¨ç£ç›˜ä¸Šï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚</p></li><li><p><code>.count()</code>: è¿™éƒ¨åˆ†ä»£ç å¯¹æŒä¹…åŒ–åçš„RDDæ‰§è¡Œäº†<code>count</code>æ“ä½œï¼Œç”¨äºè®¡ç®—RDDä¸­å…ƒç´ çš„æ•°é‡ã€‚<code>count</code>æ˜¯ä¸€ä¸ªåŠ¨ä½œï¼ˆactionï¼‰æ“ä½œï¼Œä¼šè§¦å‘å®é™…çš„è®¡ç®—å¹¶è¿”å›RDDä¸­å…ƒç´ çš„æ•°é‡ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯å¯¹RDD <code>rddSougouRecord</code> è¿›è¡ŒæŒä¹…åŒ–æ“ä½œï¼Œå°†æ•°æ®ç¼“å­˜åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œç„¶åè®¡ç®—RDDä¸­å…ƒç´ çš„æ•°é‡ã€‚æŒä¹…åŒ–æ“ä½œä½¿å¾—åœ¨åç»­å¯¹<code>rddSougouRecord</code>æ‰§è¡Œå…¶ä»–è½¬æ¢æˆ–åŠ¨ä½œæ“ä½œæ—¶ï¼Œå¯ä»¥ä»ç¼“å­˜ä¸­å¿«é€Ÿè®¿é—®æ•°æ®ï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> queryWordsWordCountRDD = rddSougouRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">  it.flatMap(record =&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> terms: util.<span class="type">List</span>[<span class="type">Term</span>] = <span class="type">HanLP</span>.segment(record.queryWords.trim)</span><br><span class="line">    <span class="keyword">import</span> scala.collection.<span class="type">JavaConverters</span>._</span><br><span class="line">    terms.asScala.map(_.word)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).map((_, <span class="number">1</span>)).reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯å¯¹ä¹‹å‰æŒä¹…åŒ–çš„RDD <code>rddSougouRecord</code> è¿›è¡Œä¸€ç³»åˆ—è½¬æ¢æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªåŒ…å«æŸ¥è¯¢è¯ï¼ˆqueryWordsï¼‰åŠå…¶å‡ºç°é¢‘ç‡çš„RDD <code>queryWordsWordCountRDD</code>ã€‚</p><ol><li><p><code>val queryWordsWordCountRDD = rddSougouRecord.mapPartitions(it =&gt; &#123; ... &#125;)</code>: è¿™è¡Œä»£ç é¦–å…ˆå¯¹æŒä¹…åŒ–çš„RDD <code>rddSougouRecord</code> è¿›è¡Œäº† <code>mapPartitions</code> è½¬æ¢æ“ä½œã€‚<code>mapPartitions</code> æ–¹æ³•å¯¹ RDD çš„æ¯ä¸ªåˆ†åŒºè¿›è¡Œæ“ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ RDDï¼Œå®ƒçš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯è½¬æ¢åçš„ç»“æœã€‚è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ª Lambda è¡¨è¾¾å¼æ¥å¤„ç†æ¯ä¸ªåˆ†åŒºçš„æ•°æ®ã€‚</p></li><li><p><code>it.flatMap(record =&gt; &#123; ... &#125;)</code>: åœ¨ <code>mapPartitions</code> ä¸­ï¼Œå¯¹æ¯ä¸ªåˆ†åŒºçš„å…ƒç´ è¿›è¡Œ <code>flatMap</code> è½¬æ¢æ“ä½œã€‚<code>flatMap</code> æ–¹æ³•ç±»ä¼¼äº <code>map</code> æ–¹æ³•ï¼Œä½†æ˜¯å®ƒå¯ä»¥å°†æ¯ä¸ªè¾“å…¥å…ƒç´ æ˜ å°„ä¸ºé›¶ä¸ªæˆ–å¤šä¸ªè¾“å‡ºå…ƒç´ ã€‚åœ¨è¿™é‡Œï¼Œ<code>flatMap</code> ç”¨äºå°†æ¯ä¸ª <code>SogouRecord</code> å¯¹è±¡çš„ <code>queryWords</code> å­—æ®µæ‹†åˆ†ä¸ºå•ä¸ªè¯è¯­ã€‚</p></li><li><p><code>val terms: util.List[Term] = HanLP.segment(record.queryWords.trim)</code>: è¿™è¡Œä»£ç ä½¿ç”¨äº† HanLP ä¸­æ–‡åˆ†è¯åº“å¯¹æ¯ä¸ª <code>queryWords</code> è¿›è¡Œä¸­æ–‡åˆ†è¯ï¼Œå¹¶å°†ç»“æœä¿å­˜åœ¨ <code>terms</code> å˜é‡ä¸­ã€‚<code>HanLP.segment</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>util.List[Term]</code> å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†åˆ†è¯åçš„è¯è¯­ã€‚</p></li><li><p><code>import scala.collection.JavaConverters._</code>: è¿™è¡Œä»£ç å¯¼å…¥äº† Scala ä¸ Java é›†åˆä¹‹é—´çš„è½¬æ¢å·¥å…·ï¼Œç”¨äºå°† Java é›†åˆè½¬æ¢ä¸º Scala é›†åˆï¼Œæ–¹ä¾¿åç»­çš„å¤„ç†ã€‚</p></li><li><p><code>terms.asScala.map(_.word)</code>: åœ¨å‰é¢çš„æ­¥éª¤ä¸­ï¼Œå°† <code>queryWords</code> åˆ†è¯åå¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ª Java é›†åˆï¼Œè¿™é‡Œä½¿ç”¨ <code>asScala</code> æ–¹æ³•å°†å…¶è½¬æ¢ä¸º Scala é›†åˆï¼Œå¹¶ä½¿ç”¨ <code>map</code> æ–¹æ³•æå–æ¯ä¸ª <code>Term</code> å¯¹è±¡çš„ <code>word</code> å­—æ®µï¼Œå³æ¯ä¸ªè¯è¯­ï¼Œå½¢æˆä¸€ä¸ªåŒ…å«æ‰€æœ‰è¯è¯­çš„æ–°çš„ Scala é›†åˆã€‚</p></li><li><p><code>.map((_, 1))</code>: è¿™ä¸€æ­¥æ˜¯å¯¹æ¯ä¸ªè¯è¯­æ·»åŠ ä¸€ä¸ªè®¡æ•°å€¼ 1ï¼Œå°†æ¯ä¸ªè¯è¯­æ˜ å°„ä¸ºä¸€ä¸ªäºŒå…ƒç»„ <code>(è¯è¯­, 1)</code>ã€‚</p></li><li><p><code>.reduceByKey(_ + _)</code>: æ¥ç€ä½¿ç”¨ <code>reduceByKey</code> æ–¹æ³•ï¼Œå°†ç›¸åŒçš„è¯è¯­è¿›è¡Œåˆ†ç»„å¹¶æ±‚å’Œã€‚å³å°†ç›¸åŒè¯è¯­çš„è®¡æ•°å€¼ç›¸åŠ ï¼Œå¾—åˆ°æ¯ä¸ªè¯è¯­çš„å‡ºç°é¢‘ç‡ã€‚</p></li><li><p><code>.sortBy(_._2, ascending = false)</code>: æœ€åä½¿ç”¨ <code>sortBy</code> æ–¹æ³•ï¼ŒæŒ‰ç…§è¯è¯­å‡ºç°é¢‘ç‡ï¼ˆå³äºŒå…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼‰è¿›è¡Œé™åºæ’åºï¼Œå¾—åˆ°åŒ…å«æŸ¥è¯¢è¯åŠå…¶å‡ºç°é¢‘ç‡çš„ RDD <code>queryWordsWordCountRDD</code>ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å°†æ¯ä¸ª <code>SogouRecord</code> å¯¹è±¡çš„ <code>queryWords</code> å­—æ®µè¿›è¡Œä¸­æ–‡åˆ†è¯ï¼Œç»Ÿè®¡æŸ¥è¯¢è¯çš„å‡ºç°é¢‘ç‡ï¼Œå¹¶æŒ‰é¢‘ç‡é™åºæ’åˆ—ï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«æŸ¥è¯¢è¯åŠå…¶å‡ºç°é¢‘ç‡çš„ RDD <code>queryWordsWordCountRDD</code>ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryWordsWordCountRDD.coalesce(numPartitions = <span class="number">1</span>).saveAsTextFile(outputPath1)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯å°†ä¹‹å‰å¾—åˆ°çš„RDD <code>queryWordsWordCountRDD</code> è¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œå¹¶å°†ç»“æœä¿å­˜ä¸ºæ–‡æœ¬æ–‡ä»¶ã€‚</p><ol><li><p><code>queryWordsWordCountRDD.coalesce(numPartitions = 1)</code>: è¿™éƒ¨åˆ†ä»£ç ä½¿ç”¨äº† <code>coalesce</code> æ–¹æ³•å¯¹RDDè¿›è¡Œé‡æ–°åˆ†åŒºã€‚<code>coalesce</code> æ–¹æ³•å¯ä»¥å°†RDDçš„åˆ†åŒºæ•°é‡å‡å°‘åˆ°æŒ‡å®šçš„æ•°é‡ã€‚åœ¨è¿™é‡Œï¼Œ<code>numPartitions = 1</code> è¡¨ç¤ºå°†RDDåˆå¹¶ä¸ºä¸€ä¸ªåˆ†åŒºï¼Œä¹Ÿå°±æ˜¯å°†æ‰€æœ‰æ•°æ®åˆå¹¶åˆ°ä¸€ä¸ªåˆ†åŒºä¸­ã€‚</p></li><li><p><code>.saveAsTextFile(outputPath1)</code>: æ¥ç€ä½¿ç”¨ <code>saveAsTextFile</code> æ–¹æ³•å°†RDDä¿å­˜ä¸ºæ–‡æœ¬æ–‡ä»¶ã€‚<code>saveAsTextFile</code> æ–¹æ³•å°†RDDä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆæ¯è¡Œæ–‡æœ¬ï¼‰å†™å…¥åˆ°æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚<code>outputPath1</code> æ˜¯ä¿å­˜æ–‡æœ¬æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å°†ä¹‹å‰è®¡ç®—å¾—åˆ°çš„ <code>queryWordsWordCountRDD</code> é‡æ–°åˆ†åŒºä¸ºä¸€ä¸ªåˆ†åŒºï¼Œå¹¶å°†ç»“æœä¿å­˜ä¸ºæ–‡æœ¬æ–‡ä»¶ã€‚åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªæŸ¥è¯¢è¯åŠå…¶å‡ºç°é¢‘ç‡å°†ä»¥æ–‡æœ¬è¡Œçš„å½¢å¼å­˜å‚¨ã€‚æ³¨æ„ï¼Œç”±äºä½¿ç”¨äº† <code>coalesce(1)</code>ï¼Œç»“æœæ–‡ä»¶å°†åªæœ‰ä¸€ä¸ªåˆ†åŒºï¼Œå¹¶ä¸”æ‰€æœ‰æ•°æ®éƒ½ä¼šå†™å…¥åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œå¯èƒ½ä¼šé€ æˆå•ä¸ªæ–‡ä»¶è¿‡å¤§çš„é—®é¢˜ã€‚å¦‚æœæƒ³è¦åˆ†å¤šä¸ªæ–‡ä»¶ä¿å­˜ï¼Œå¯ä»¥è°ƒæ•´ <code>coalesce</code> æ–¹æ³•ä¸­çš„åˆ†åŒºæ•°ä¸ºéœ€è¦çš„å€¼ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rddSougouRecord.unpersist()</span><br><span class="line">sparkContext.stop()</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯å¯¹ä¹‹å‰æŒä¹…åŒ–çš„RDD <code>rddSougouRecord</code> è¿›è¡Œè§£é™¤æŒä¹…åŒ–ï¼Œå¹¶åœæ­¢SparkContextå¯¹è±¡ï¼Œä»è€Œç»ˆæ­¢Sparkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œã€‚</p><ol><li><p><code>rddSougouRecord.unpersist()</code>: è¿™è¡Œä»£ç è°ƒç”¨äº† <code>unpersist</code> æ–¹æ³•ï¼Œç”¨äºè§£é™¤RDDçš„æŒä¹…åŒ–ã€‚åœ¨ä¹‹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯¹ <code>rddSougouRecord</code> è¿›è¡Œäº†æŒä¹…åŒ–ï¼ˆç¼“å­˜ï¼‰æ“ä½œï¼Œå°†æ•°æ®ç¼“å­˜åˆ°å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œä»¥ä¾¿åç»­çš„æ“ä½œå¯ä»¥å¿«é€Ÿè®¿é—®æ•°æ®ã€‚è€Œ <code>unpersist</code> æ–¹æ³•çš„ä½œç”¨å°±æ˜¯è§£é™¤æŒä¹…åŒ–ï¼Œå³é‡Šæ”¾RDDçš„ç¼“å­˜ï¼Œä»è€Œé‡Šæ”¾å†…å­˜æˆ–ç£ç›˜ç©ºé—´ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå½“RDDä¸å†è¢«é¢‘ç¹ä½¿ç”¨æ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ <code>unpersist</code> æ–¹æ³•æ¥é‡Šæ”¾èµ„æºï¼Œä»¥é¿å…å ç”¨è¿‡å¤šçš„å­˜å‚¨ç©ºé—´ã€‚</p></li><li><p><code>sparkContext.stop()</code>: è¿™è¡Œä»£ç è°ƒç”¨äº† <code>stop</code> æ–¹æ³•ï¼Œç”¨äºåœæ­¢SparkContextå¯¹è±¡ï¼Œä»è€Œç»ˆæ­¢Sparkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œã€‚<code>SparkContext</code> æ˜¯Sparkåº”ç”¨ç¨‹åºä¸Sparké›†ç¾¤ä¹‹é—´çš„ä¸»è¦æ¥å£ï¼Œè°ƒç”¨ <code>stop</code> æ–¹æ³•å°†ä¼šå…³é—­ä¸é›†ç¾¤çš„è¿æ¥ï¼Œå¹¶é‡Šæ”¾èµ„æºã€‚åœ¨åº”ç”¨ç¨‹åºæ‰§è¡Œå®Œæˆåï¼Œé€šå¸¸ä¼šè°ƒç”¨ <code>stop</code> æ–¹æ³•æ¥ä¼˜é›…åœ°ç»ˆæ­¢Sparkåº”ç”¨ç¨‹åºï¼Œé‡Šæ”¾é›†ç¾¤èµ„æºï¼Œé¿å…èµ„æºæµªè´¹ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨æ˜¯è§£é™¤ä¹‹å‰å¯¹RDDçš„æŒä¹…åŒ–ï¼Œé‡Šæ”¾ç¼“å­˜çš„èµ„æºï¼Œå¹¶åœæ­¢SparkContextå¯¹è±¡ï¼Œä»è€Œæ­£å¸¸ç»ˆæ­¢Sparkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œã€‚</p><h2 id="ä½¿ç”¨Spark-SQLæ¡ˆä¾‹è§£æ"><a href="#ä½¿ç”¨Spark-SQLæ¡ˆä¾‹è§£æ" class="headerlink" title="ä½¿ç”¨Spark SQLæ¡ˆä¾‹è§£æ"></a>ä½¿ç”¨Spark SQLæ¡ˆä¾‹è§£æ</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.&#123;<span class="type">Level</span>, <span class="type">Logger</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.&#123;<span class="type">Row</span>, <span class="type">SparkSession</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.&#123;<span class="type">IntegerType</span>, <span class="type">StringType</span>, <span class="type">StructField</span>, <span class="type">StructType</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SogouAnalysisSQL</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®è¾“å‡ºçš„æ—¥å¿—çº§åˆ«</span></span><br><span class="line">    <span class="type">Logger</span>.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(<span class="type">Level</span>.<span class="type">ERROR</span>)</span><br><span class="line">    <span class="keyword">val</span> spark = <span class="type">SparkSession</span>.builder()</span><br><span class="line">      .appName(<span class="string">&quot;SogouAnalysisSQL&quot;</span>)</span><br><span class="line">      .master(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">      .getOrCreate()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> file = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/reduced.txt&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> fileRDD = spark.sparkContext.textFile(file)</span><br><span class="line">      .filter(line =&gt; line != <span class="literal">null</span> &amp;&amp; line.trim.split(<span class="string">&quot;\\s+&quot;</span>).length == <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> schema = <span class="type">StructType</span>(<span class="type">Array</span>(</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;queryTime&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;userId&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;queryWords&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;resultRank&quot;</span>, <span class="type">IntegerType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;clickRank&quot;</span>, <span class="type">IntegerType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;clickUrl&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>)</span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> rddRow = fileRDD.mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.map(line =&gt; &#123;</span><br><span class="line">        <span class="keyword">val</span> contents = line.trim.split(<span class="string">&quot;\\s+&quot;</span>)</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">// å°è£…çš„å­—æ®µçš„æ—¶å€™ï¼Œé¡ºåºè¦ä¸å®šä¹‰çš„schemaé¡ºåºå®Œå…¨ä¸€è‡´</span></span><br><span class="line">          <span class="type">Row</span>(</span><br><span class="line">            contents(<span class="number">0</span>),</span><br><span class="line">            contents(<span class="number">1</span>),</span><br><span class="line">            contents(<span class="number">2</span>).replaceAll(<span class="string">&quot;[\\[|\\]]&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">            contents(<span class="number">3</span>).toInt,</span><br><span class="line">            contents(<span class="number">4</span>).toInt,</span><br><span class="line">            contents(<span class="number">5</span>)</span><br><span class="line">          )</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">          <span class="keyword">case</span> e: <span class="type">Exception</span> =&gt; <span class="type">Row</span>(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;error&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> df = spark.createDataFrame(rddRow, schema)</span><br><span class="line"></span><br><span class="line">    df.createOrReplaceTempView(<span class="string">&quot;sogou_view&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> sql =</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        |select * from sogou_view where clickUrl like &#x27;www%&#x27;</span></span><br><span class="line"><span class="string">        |limit 3</span></span><br><span class="line"><span class="string">        |&quot;&quot;&quot;</span>.stripMargin</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> sqlResult = spark.sql(sql)</span><br><span class="line">    <span class="comment">//    sqlResult.show(truncate = false)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> querySQL =</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        |select userId,queryWords,count(*) as query_count from sogou_view</span></span><br><span class="line"><span class="string">        |group by userId,queryWords</span></span><br><span class="line"><span class="string">        |order by userid,query_count desc</span></span><br><span class="line"><span class="string">        |&quot;&quot;&quot;</span>.stripMargin</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> queryResult = spark.sql(querySQL)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    queryResult.show(truncate = false)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> timeSQL =</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        |select substring(queryTime,0,5) as query_time,count(*) as query_count from sogou_view</span></span><br><span class="line"><span class="string">        |group by substring(queryTime,0,5)</span></span><br><span class="line"><span class="string">        |order by query_time,query_count desc</span></span><br><span class="line"><span class="string">        |&quot;&quot;&quot;</span>.stripMargin</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> timeResult = spark.sql(timeSQL)</span><br><span class="line">    timeResult.show(truncate = <span class="literal">false</span>)</span><br><span class="line">    timeResult.rdd.coalesce(<span class="number">1</span>).saveAsTextFile(<span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/timeResult&quot;</span>)</span><br><span class="line">    spark.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> schema = <span class="type">StructType</span>(<span class="type">Array</span>(</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;queryTime&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;userId&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;queryWords&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;resultRank&quot;</span>, <span class="type">IntegerType</span>, <span class="literal">false</span>),</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;clickRank&quot;</span>, <span class="type">IntegerType</span>, <span class="literal">false</span>),</span><br><span class="line">  <span class="type">StructField</span>(<span class="string">&quot;clickUrl&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>)</span><br><span class="line">))</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªSpark SQLçš„Schemaï¼Œç”¨äºæè¿°æ•°æ®çš„ç»“æ„å’Œå­—æ®µç±»å‹ã€‚Spark SQLæ˜¯Sparkçš„æ¨¡å—ï¼Œå®ƒæä¾›äº†ç”¨äºå¤„ç†ç»“æ„åŒ–æ•°æ®çš„é«˜çº§æ•°æ®å¤„ç†æ¥å£ã€‚</p><ol><li><p><code>val schema = StructType(Array(...))</code>: è¿™è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ª<code>StructType</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¡¨ç¤ºäº†æ•°æ®çš„ç»“æ„ã€‚<code>StructType</code>æ˜¯Spark SQLä¸­ç”¨äºè¡¨ç¤ºæ•°æ®ç»“æ„çš„ç±»ï¼Œå®ƒåŒ…å«ä¸€ä¸ªåŒ…å«äº†å¤šä¸ª<code>StructField</code>çš„æ•°ç»„ã€‚</p></li><li><p><code>StructField(&quot;queryTime&quot;, StringType, false)</code>: è¿™è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ª<code>StructField</code>å¯¹è±¡ï¼Œè¡¨ç¤ºæ•°æ®çš„ä¸€ä¸ªå­—æ®µã€‚<code>StructField</code>æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå­—æ®µåç§°ï¼ˆâ€queryTimeâ€ï¼‰ã€å­—æ®µç±»å‹ï¼ˆStringTypeï¼‰å’Œæ˜¯å¦å¯ç©ºï¼ˆfalseï¼‰ã€‚</p></li><li><p><code>StructField(&quot;userId&quot;, StringType, false)</code>: åŒä¸Šï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¡¨ç¤ºâ€userIdâ€å­—æ®µçš„<code>StructField</code>å¯¹è±¡ã€‚</p></li><li><p><code>StructField(&quot;queryWords&quot;, StringType, false)</code>: åŒä¸Šï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¡¨ç¤ºâ€queryWordsâ€å­—æ®µçš„<code>StructField</code>å¯¹è±¡ã€‚</p></li><li><p><code>StructField(&quot;resultRank&quot;, IntegerType, false)</code>: åŒä¸Šï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¡¨ç¤ºâ€resultRankâ€å­—æ®µçš„<code>StructField</code>å¯¹è±¡ã€‚è¿™é‡Œå­—æ®µç±»å‹æ˜¯<code>IntegerType</code>ï¼Œè¡¨ç¤ºæ•´æ•°ç±»å‹ã€‚</p></li><li><p><code>StructField(&quot;clickRank&quot;, IntegerType, false)</code>: åŒä¸Šï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¡¨ç¤ºâ€clickRankâ€å­—æ®µçš„<code>StructField</code>å¯¹è±¡ã€‚</p></li><li><p><code>StructField(&quot;clickUrl&quot;, StringType, false)</code>: åŒä¸Šï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¡¨ç¤ºâ€clickUrlâ€å­—æ®µçš„<code>StructField</code>å¯¹è±¡ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåŒ…å«å…­ä¸ªå­—æ®µçš„Schemaï¼Œæ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸€ä¸ªåç§°ã€ä¸€ä¸ªå­—æ®µç±»å‹å’Œä¸€ä¸ªæ˜¯å¦å¯ç©ºçš„æ ‡å¿—ã€‚è¿™ä¸ªSchemaæè¿°äº†ä¸€ä¸ªæ•°æ®é›†ï¼Œå…¶ä¸­åŒ…å«äº†æŸ¥è¯¢æ—¶é—´ï¼ˆqueryTimeï¼‰ã€ç”¨æˆ·IDï¼ˆuserIdï¼‰ã€æŸ¥è¯¢è¯ï¼ˆqueryWordsï¼‰ã€ç»“æœæ’åï¼ˆresultRankï¼‰ã€ç‚¹å‡»æ’åï¼ˆclickRankï¼‰å’Œç‚¹å‡»URLï¼ˆclickUrlï¼‰ç­‰å…­ä¸ªå­—æ®µã€‚é€šè¿‡å®šä¹‰Schemaï¼Œæˆ‘ä»¬å¯ä»¥å°†RDDè½¬æ¢ä¸ºDataFrameï¼Œä»è€Œåˆ©ç”¨Spark SQLçš„é«˜çº§åŠŸèƒ½è¿›è¡Œæ•°æ®å¤„ç†å’ŒæŸ¥è¯¢ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> rddRow = fileRDD.mapPartitions(it =&gt; &#123;</span><br><span class="line">  it.map(line =&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> contents = line.trim.split(<span class="string">&quot;\\s+&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// å°è£…çš„å­—æ®µçš„æ—¶å€™ï¼Œé¡ºåºè¦ä¸å®šä¹‰çš„schemaé¡ºåºå®Œå…¨ä¸€è‡´</span></span><br><span class="line">      <span class="type">Row</span>(</span><br><span class="line">        contents(<span class="number">0</span>),</span><br><span class="line">        contents(<span class="number">1</span>),</span><br><span class="line">        contents(<span class="number">2</span>).replaceAll(<span class="string">&quot;[\\[|\\]]&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">        contents(<span class="number">3</span>).toInt,</span><br><span class="line">        contents(<span class="number">4</span>).toInt,</span><br><span class="line">        contents(<span class="number">5</span>)</span><br><span class="line">      )</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> e: <span class="type">Exception</span> =&gt; <span class="type">Row</span>(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;error&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å¯¹ä¹‹å‰çš„RDD <code>fileRDD</code> è¿›è¡Œäº†ä¸€ç³»åˆ—è½¬æ¢æ“ä½œï¼Œå°†æ¯è¡Œæ–‡æœ¬æ•°æ®è½¬æ¢ä¸ºSpark SQLçš„<code>Row</code>å¯¹è±¡ï¼Œå¹¶å¾—åˆ°ä¸€ä¸ªæ–°çš„RDD <code>rddRow</code>ã€‚</p><ol><li><p><code>val rddRow = fileRDD.mapPartitions(it =&gt; &#123; ... &#125;)</code>: è¿™è¡Œä»£ç é¦–å…ˆå¯¹RDD <code>fileRDD</code> è¿›è¡Œäº† <code>mapPartitions</code> è½¬æ¢æ“ä½œã€‚<code>mapPartitions</code> æ–¹æ³•å¯¹RDDçš„æ¯ä¸ªåˆ†åŒºè¿›è¡Œæ“ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„RDDï¼Œå®ƒçš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯è½¬æ¢åçš„ç»“æœã€‚è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ª Lambda è¡¨è¾¾å¼æ¥å¤„ç†æ¯ä¸ªåˆ†åŒºçš„æ•°æ®ã€‚</p></li><li><p><code>it.map(line =&gt; &#123; ... &#125;)</code>: åœ¨ <code>mapPartitions</code> ä¸­ï¼Œå¯¹æ¯ä¸ªåˆ†åŒºçš„å…ƒç´ ï¼ˆå³æ¯è¡Œæ–‡æœ¬ï¼‰è¿›è¡Œè½¬æ¢æ“ä½œã€‚</p></li><li><p><code>val contents = line.trim.split(&quot;\\s+&quot;)</code>: å°†å½“å‰è¡Œå»é™¤é¦–å°¾ç©ºæ ¼åæŒ‰ç©ºæ ¼è¿›è¡Œæ‹†åˆ†ï¼Œå°†ç»“æœä¿å­˜åœ¨ <code>contents</code> æ•°ç»„ä¸­ã€‚</p></li><li><p><code>try &#123; ... &#125; catch &#123; ... &#125;</code>: è¿™æ˜¯ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç»“æ„ï¼Œç”¨äºæ•è·å¯èƒ½çš„å¼‚å¸¸ã€‚åœ¨è¿™é‡Œï¼Œä»£ç å°è¯•æ ¹æ®ä¹‹å‰å®šä¹‰çš„Schemaå°è£…æ¯è¡Œæ•°æ®ä¸º<code>Row</code>å¯¹è±¡ã€‚å¦‚æœæˆåŠŸå°è£…ï¼Œåˆ™è¿”å›å°è£…å¥½çš„<code>Row</code>å¯¹è±¡ï¼›å¦‚æœå‡ºç°å¼‚å¸¸ï¼ˆä¾‹å¦‚æ•°ç»„è¶Šç•Œæˆ–ç±»å‹è½¬æ¢å¤±è´¥ï¼‰ï¼Œåˆ™å°†å¼‚å¸¸æ•è·ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«é”™è¯¯ä¿¡æ¯çš„<code>Row</code>å¯¹è±¡ã€‚</p></li><li><p><code>Row(...)</code>: åœ¨ <code>try</code> å—ä¸­ï¼Œæ ¹æ®ä¹‹å‰å®šä¹‰çš„Schemaæ„é€ <code>Row</code>å¯¹è±¡ã€‚<code>Row</code>å¯¹è±¡æ˜¯Spark SQLä¸­çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒç”¨äºè¡¨ç¤ºä¸€è¡Œæ•°æ®ï¼Œå…¶ä¸­çš„å‚æ•°æŒ‰ç…§ä¹‹å‰å®šä¹‰çš„Schemaçš„é¡ºåºå¯¹åº”å„ä¸ªå­—æ®µã€‚</p></li><li><p><code>contents(2).replaceAll(&quot;[\\[|\\]]&quot;, &quot;&quot;)</code>: è¿™è¡Œä»£ç å¯¹ç¬¬ä¸‰ä¸ªå­—æ®µï¼ˆcontents(2)ï¼‰è¿›è¡Œå¤„ç†ï¼Œå»é™¤å…¶ä¸­çš„æ–¹æ‹¬å· â€œ[ ]â€ã€‚</p></li><li><p><code>contents(3).toInt, contents(4).toInt</code>: è¿™è¡Œä»£ç å°†ç¬¬å››ä¸ªå­—æ®µï¼ˆcontents(3)ï¼‰å’Œç¬¬äº”ä¸ªå­—æ®µï¼ˆcontents(4)ï¼‰è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ã€‚</p></li><li><p><code>case e: Exception =&gt; Row(&quot;error&quot;, &quot;error&quot;, &quot;error&quot;, 0, 0, &quot;error&quot;)</code>: åœ¨ <code>catch</code> å—ä¸­ï¼Œæ•è·å¼‚å¸¸ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«é”™è¯¯ä¿¡æ¯çš„<code>Row</code>å¯¹è±¡ã€‚å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™ç”¨â€errorâ€å­—ç¬¦ä¸²ä»£æ›¿æ— æ³•è§£æçš„å­—æ®µï¼Œå¹¶å°†æ•°å€¼ç±»å‹å­—æ®µè®¾ä¸º0ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨æ˜¯å°†æ¯è¡Œæ–‡æœ¬æ•°æ®è½¬æ¢ä¸ºSpark SQLçš„<code>Row</code>å¯¹è±¡ï¼Œå¹¶æ ¹æ®ä¹‹å‰å®šä¹‰çš„Schemaå¯¹å­—æ®µè¿›è¡Œç±»å‹è½¬æ¢å’Œå¤„ç†ã€‚å¦‚æœèƒ½æˆåŠŸè½¬æ¢ï¼Œåˆ™å¾—åˆ°ä¸€ä¸ªåŒ…å«æ­£ç¡®æ•°æ®çš„<code>Row</code>å¯¹è±¡ï¼›å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™è¿”å›ä¸€ä¸ªåŒ…å«é”™è¯¯ä¿¡æ¯çš„<code>Row</code>å¯¹è±¡ã€‚æœ€ç»ˆå¾—åˆ°çš„RDD <code>rddRow</code> åŒ…å«äº†ç»è¿‡å¤„ç†çš„<code>Row</code>å¯¹è±¡ï¼Œå¯ä»¥ç”¨äºæ„å»ºDataFrameå¹¶ä½¿ç”¨Spark SQLçš„é«˜çº§åŠŸèƒ½è¿›è¡Œæ•°æ®å¤„ç†å’ŒæŸ¥è¯¢ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> df = spark.createDataFrame(rddRow, schema)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä½¿ç”¨ä¹‹å‰å¾—åˆ°çš„RDD <code>rddRow</code> å’Œä¹‹å‰å®šä¹‰çš„Schema <code>schema</code> æ¥åˆ›å»ºä¸€ä¸ªDataFrameã€‚DataFrameæ˜¯Spark SQLä¸­çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®è¡¨ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ç»“æ„åŒ–çš„æ•°æ®å’ŒSchemaè¿›è¡Œå¤„ç†å’ŒæŸ¥è¯¢ã€‚</p><ol><li><p><code>val df = spark.createDataFrame(rddRow, schema)</code>: è¿™è¡Œä»£ç è°ƒç”¨äº†SparkSessionå¯¹è±¡çš„ <code>createDataFrame</code> æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªDataFrameã€‚<code>createDataFrame</code> æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¹‹å‰åˆ›å»ºçš„RDD <code>rddRow</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¹‹å‰å®šä¹‰çš„Schema <code>schema</code>ã€‚</p></li><li><p><code>rddRow</code>: è¿™æ˜¯ä¹‹å‰è½¬æ¢å¾—åˆ°çš„RDDï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªSpark SQLçš„<code>Row</code>å¯¹è±¡ã€‚è¯¥RDDåŒ…å«äº†å¤„ç†åçš„æ•°æ®ï¼Œæ¯ä¸ª<code>Row</code>å¯¹è±¡æŒ‰ç…§ä¹‹å‰å®šä¹‰çš„Schemaçš„é¡ºåºå¯¹åº”å„ä¸ªå­—æ®µã€‚</p></li><li><p><code>schema</code>: è¿™æ˜¯ä¹‹å‰å®šä¹‰çš„Schemaï¼Œå®ƒæè¿°äº†DataFrameä¸­æ¯ä¸ªå­—æ®µçš„åç§°å’Œç±»å‹ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨æ˜¯åˆ©ç”¨ä¹‹å‰å¤„ç†å¾—åˆ°çš„<code>rddRow</code> å’Œå®šä¹‰å¥½çš„ <code>schema</code>ï¼Œåˆ›å»ºä¸€ä¸ªDataFrame <code>df</code>ã€‚DataFrameæ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„ã€å¯åˆ†å¸ƒå¼å¤„ç†çš„æ•°æ®è¡¨ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>df</code> æ¥ä½¿ç”¨Spark SQLçš„é«˜çº§åŠŸèƒ½è¿›è¡Œæ•°æ®å¤„ç†å’ŒæŸ¥è¯¢ã€‚DataFrameæä¾›äº†æ›´æ–¹ä¾¿çš„æ•°æ®å¤„ç†æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨SQLè¯­å¥æˆ–DataFrame APIæ¥è¿›è¡Œæ•°æ®åˆ†æã€è¿‡æ»¤ã€èšåˆã€è¿æ¥ç­‰æ“ä½œã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.createOrReplaceTempView(<span class="string">&quot;sogou_view&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç åœ¨Spark SQLä¸­å°†DataFrame <code>df</code> æ³¨å†Œä¸ºä¸€ä¸ªä¸´æ—¶è§†å›¾ï¼ˆTemporary Viewï¼‰ï¼Œä½¿å…¶å¯ä»¥åœ¨å½“å‰SparkSessionä¸­è¢«æŸ¥è¯¢ã€‚ä¸´æ—¶è§†å›¾æ˜¯ä¸€ç§ä¸´æ—¶çš„æ•°æ®è¡¨ï¼Œä»…åœ¨å½“å‰SparkSessionçš„ç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆï¼Œé€šå¸¸ç”¨äºæ‰§è¡ŒSQLæŸ¥è¯¢ã€‚</p><ol><li><p><code>df.createOrReplaceTempView(&quot;sogou_view&quot;)</code>: è¿™è¡Œä»£ç è°ƒç”¨äº†DataFrame <code>df</code> çš„ <code>createOrReplaceTempView</code> æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºæˆ–æ›¿æ¢ä¸€ä¸ªä¸´æ—¶è§†å›¾ã€‚<code>createOrReplaceTempView</code> æ–¹æ³•æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¡¨ç¤ºè§†å›¾çš„åç§°ã€‚åœ¨è¿™é‡Œï¼Œè§†å›¾åç§°è¢«è®¾ç½®ä¸ºâ€sogou_viewâ€ã€‚</p></li><li><p>â€œsogou_viewâ€: è¿™æ˜¯ä¸´æ—¶è§†å›¾çš„åç§°ã€‚é€šè¿‡æ­¤åç§°ï¼Œå¯ä»¥åœ¨å½“å‰SparkSessionä¸­ä½¿ç”¨SQLè¯­å¥æŸ¥è¯¢DataFrame <code>df</code> çš„æ•°æ®ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨æ˜¯åœ¨å½“å‰SparkSessionä¸­å°†DataFrame <code>df</code> æ³¨å†Œä¸ºä¸€ä¸ªä¸´æ—¶è§†å›¾ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨åç»­çš„æ“ä½œä¸­ä½¿ç”¨SQLè¯­å¥æŸ¥è¯¢ä¸´æ—¶è§†å›¾çš„æ•°æ®ã€‚é€šè¿‡åˆ›å»ºä¸´æ—¶è§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´ç†Ÿæ‚‰çš„SQLè¯­æ³•æ¥è¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œåˆ†æã€‚è§†å›¾åªåœ¨å½“å‰SparkSessionçš„ç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆï¼Œä¸ä¼šè¢«æŒä¹…åŒ–åˆ°å­˜å‚¨ç³»ç»Ÿä¸­ã€‚å¦‚æœéœ€è¦åœ¨ä¸åŒçš„SparkSessionä¸­è®¿é—®ç›¸åŒçš„è§†å›¾ï¼Œå¯ä»¥ä½¿ç”¨<code>createGlobalTempView</code>æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªå…¨å±€ä¸´æ—¶è§†å›¾ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> timeSQL =</span><br><span class="line">  <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    |select substring(queryTime,0,5) as query_time,count(*) as query_count from sogou_view</span></span><br><span class="line"><span class="string">    |group by substring(queryTime,0,5)</span></span><br><span class="line"><span class="string">    |order by query_time,query_count desc</span></span><br><span class="line"><span class="string">    |&quot;&quot;&quot;</span>.stripMargin</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> timeResult = spark.sql(timeSQL)</span><br><span class="line">timeResult.show(truncate = <span class="literal">false</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä½¿ç”¨Spark SQLæŸ¥è¯¢ä¹‹å‰åˆ›å»ºçš„ä¸´æ—¶è§†å›¾ <code>sogou_view</code>ï¼Œå¹¶ç»Ÿè®¡æŸ¥è¯¢æ—¶é—´ï¼ˆ<code>queryTime</code>å­—æ®µï¼‰çš„æ¯å¹´æœˆä»½ï¼ˆæˆªå–å‰5ä¸ªå­—ç¬¦ï¼‰çš„æŸ¥è¯¢æ¬¡æ•°ã€‚ç„¶åæŒ‰ç…§æŸ¥è¯¢æ—¶é—´ï¼ˆå¹´æœˆä»½ï¼‰è¿›è¡Œåˆ†ç»„ï¼Œå¹¶æŒ‰æŸ¥è¯¢æ¬¡æ•°é™åºæ’åºï¼Œæœ€åå°†æŸ¥è¯¢ç»“æœæ‰“å°è¾“å‡ºã€‚</p><ol><li><p><code>val timeSQL = &quot;&quot;&quot; ... &quot;&quot;&quot;</code>: è¿™æ˜¯ä¸€ä¸ªåŒ…å«SQLæŸ¥è¯¢è¯­å¥çš„å¤šè¡Œå­—ç¬¦ä¸²ã€‚åœ¨Scalaä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰ä¸ªåŒå¼•å· <code>&quot;&quot;&quot; ... &quot;&quot;&quot;</code> æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œå…¶ä¸­çš„æ¢è¡Œç¬¦å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™ã€‚è¿™ä¸ªSQLæŸ¥è¯¢è¯­å¥ç”¨äºç»Ÿè®¡æŸ¥è¯¢æ—¶é—´ï¼ˆ<code>queryTime</code>å­—æ®µï¼‰çš„æ¯å¹´æœˆä»½çš„æŸ¥è¯¢æ¬¡æ•°ï¼Œå¹¶æŒ‰ç…§å¹´æœˆä»½è¿›è¡Œåˆ†ç»„å’Œæ’åºã€‚</p></li><li><p><code>select substring(queryTime,0,5) as query_time, count(*) as query_count from sogou_view group by substring(queryTime,0,5) order by query_time, query_count desc</code>: è¿™æ˜¯SQLæŸ¥è¯¢è¯­å¥çš„ä¸»ä½“éƒ¨åˆ†ã€‚åœ¨è¿™é‡Œï¼Œä½¿ç”¨<code>substring</code>å‡½æ•°æˆªå–<code>queryTime</code>å­—æ®µçš„å‰5ä¸ªå­—ç¬¦ï¼ˆå³å¹´æœˆä»½ï¼‰ï¼Œå¹¶å°†å…¶å‘½åä¸º<code>query_time</code>ã€‚ç„¶åä½¿ç”¨<code>count(*)</code>å‡½æ•°å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œè®¡æ•°ï¼Œå¾—åˆ°æ¯ä¸ªå¹´æœˆä»½çš„æŸ¥è¯¢æ¬¡æ•°ã€‚æ¥ç€ä½¿ç”¨<code>group by</code>å­å¥å¯¹ç»“æœæŒ‰ç…§å¹´æœˆä»½è¿›è¡Œåˆ†ç»„ï¼Œæœ€åä½¿ç”¨<code>order by</code>å­å¥æŒ‰ç…§å¹´æœˆä»½å’ŒæŸ¥è¯¢æ¬¡æ•°é™åºæ’åºã€‚</p></li><li><p><code>val timeResult = spark.sql(timeSQL)</code>: è¿™è¡Œä»£ç ä½¿ç”¨<code>spark.sql</code>æ–¹æ³•æ‰§è¡Œä¹‹å‰å®šä¹‰çš„SQLæŸ¥è¯¢è¯­å¥ï¼Œå¹¶å°†ç»“æœä¿å­˜åœ¨<code>timeResult</code>ä¸­ã€‚<code>spark.sql</code>æ–¹æ³•æ¥å—ä¸€ä¸ªSQLæŸ¥è¯¢å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªDataFrameï¼Œå…¶ä¸­åŒ…å«äº†æŸ¥è¯¢ç»“æœçš„æ•°æ®ã€‚</p></li><li><p><code>timeResult.show(truncate = false)</code>: æœ€åï¼Œä½¿ç”¨<code>show</code>æ–¹æ³•æ‰“å°è¾“å‡ºæŸ¥è¯¢ç»“æœã€‚<code>show</code>æ–¹æ³•ç”¨äºæ˜¾ç¤ºDataFrameçš„å†…å®¹ï¼Œé»˜è®¤æ˜¾ç¤ºå‰20è¡Œï¼Œå¹¶ä¸”æˆªæ–­å­—æ®µå†…å®¹ä»¥ä¾¿äºæ˜¾ç¤ºã€‚é€šè¿‡è®¾ç½®<code>truncate = false</code>ï¼Œå¯ä»¥ç¦ç”¨å­—æ®µå†…å®¹çš„æˆªæ–­ï¼Œä»¥ä¾¿å®Œæ•´æ˜¾ç¤ºå­—æ®µçš„å†…å®¹ã€‚</p></li></ol><p>ç»¼åˆèµ·æ¥ï¼Œè¿™æ®µä»£ç çš„ä½œç”¨æ˜¯æ‰§è¡ŒSQLæŸ¥è¯¢ï¼Œç»Ÿè®¡æ¯ä¸ªæŸ¥è¯¢æ—¶é—´ï¼ˆå¹´æœˆä»½ï¼‰çš„æŸ¥è¯¢æ¬¡æ•°ï¼Œå¹¶æŒ‰ç…§å¹´æœˆä»½è¿›è¡Œåˆ†ç»„å’Œé™åºæ’åºï¼Œç„¶åå°†æŸ¥è¯¢ç»“æœæ‰“å°è¾“å‡ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
            <tag> Spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7.13-7.16æŠ€æœ¯åŸ¹è®­å®è®°</title>
      <link href="/2023/07/12/7-13-7-16%E6%8A%80%E6%9C%AF%E5%9F%B9%E8%AE%AD%E5%AE%9E%E8%AE%B0/"/>
      <url>/2023/07/12/7-13-7-16%E6%8A%80%E6%9C%AF%E5%9F%B9%E8%AE%AD%E5%AE%9E%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸ¹è®­æŠ¥å‘Š"><a href="#åŸ¹è®­æŠ¥å‘Š" class="headerlink" title="åŸ¹è®­æŠ¥å‘Š"></a>åŸ¹è®­æŠ¥å‘Š</h1><p><strong>[å­¦é™¢ç»„ç»‡]</strong></p><p><strong>[7.13-7.16]</strong></p><h2 id="åŸ¹è®­ç›®çš„"><a href="#åŸ¹è®­ç›®çš„" class="headerlink" title="åŸ¹è®­ç›®çš„"></a>åŸ¹è®­ç›®çš„</h2><p>æœ¬æ¬¡æŠ€æœ¯åŸ¹è®­çš„ç›®çš„æ˜¯æå‡å‚ä¸äººå‘˜åœ¨ç‰¹å®šæŠ€æœ¯é¢†åŸŸçš„çŸ¥è¯†å’ŒæŠ€èƒ½ï¼Œä»¥åº”å¯¹å…¬å¸åœ¨è¯¥é¢†åŸŸé¢ä¸´çš„æŒ‘æˆ˜å’Œéœ€æ±‚ã€‚é€šè¿‡åŸ¹è®­ï¼Œå‚ä¸äººå‘˜å°†èƒ½å¤ŸæŒæ¡ç›¸å…³æŠ€æœ¯ï¼Œå¹¶å°†å…¶åº”ç”¨äºæ—¥å¸¸å·¥ä½œä¸­ï¼Œä»è€Œæé«˜å·¥ä½œæ•ˆç‡å’Œè´¨é‡ã€‚</p><h2 id="07-13-åŸºç¡€ç¯å¢ƒæ­å»º"><a href="#07-13-åŸºç¡€ç¯å¢ƒæ­å»º" class="headerlink" title="07-13 åŸºç¡€ç¯å¢ƒæ­å»º"></a>07-13 åŸºç¡€ç¯å¢ƒæ­å»º</h2><h3 id="åŸºç¡€ç¯å¢ƒ"><a href="#åŸºç¡€ç¯å¢ƒ" class="headerlink" title="åŸºç¡€ç¯å¢ƒ"></a>åŸºç¡€ç¯å¢ƒ</h3><p><strong>æ­å»ºæ­¥éª¤</strong></p><ol><li><p>ä¿®æ”¹ä¸»æœºåï¼Œä¾¿äºè¯†åˆ«èŠ‚ç‚¹ï¼›</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> ä¿®æ”¹ä¸»æœºå</span></span><br><span class="line">hostnamectl set-hostname &lt;hostname&gt;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ·æ–°</span></span><br><span class="line">bash</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹hostsæ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤èŠ‚ç‚¹æ˜ å°„ï¼ŒæŒ‰ç…§ç»™å‡ºçš„èŠ‚ç‚¹IPå’Œå¯¹åº”çš„ä¸»æœºåè¿›è¡Œè®¾ç½®ï¼›</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹hostsæ–‡ä»¶å†…å®¹</span></span><br><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ã€å±€åŸŸç½‘ipã€‘ ã€ä¸»æœºåã€‘</span><br><span class="line">[ip] [hostname]</span><br></pre></td></tr></table></figure></li><li><p>è¦æ±‚å„èŠ‚ç‚¹æ—¶åŒºä¿®æ”¹ä¸ºä¸­å›½æ—¶åŒºï¼ˆ ä¸­å›½æ ‡å‡†æ—¶é—´CST+8ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ä¸ºä¸­å›½æ—¶åŒº</span></span><br><span class="line">timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…ntpæœåŠ¡ï¼Œè¦æ±‚ä¸»èŠ‚ç‚¹masterä¸ºæœ¬åœ°æ—¶é’Ÿæºï¼Œä»èŠ‚ç‚¹è®¾ç½®å®šæ—¶ä»»åŠ¡åŒæ­¥æœ¬åœ°æ—¶é—´ï¼›</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹masterèŠ‚ç‚¹NTPé…ç½®</span></span><br><span class="line">vim /etc/ntp.conf</span><br></pre></td></tr></table></figure><p>è®¾ç½®masterä¸ºæœ¬åœ°æ—¶é—´æœåŠ¡å™¨ï¼Œå±è”½é»˜è®¤serverï¼ŒæœåŠ¡å™¨å±‚çº§è®¾ä¸º10</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># server &lt;é»˜è®¤æœåŠ¡å™¨&gt;</span><br><span class="line">server 127.127.1.0</span><br><span class="line">fudge 127.127.1.0 stratum 10</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ntpæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start ntp</span><br><span class="line">systemctl restart ntpd.service</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®šæ—¶ä»»åŠ¡â€“åœ¨æ—©å-æ™šäº”æ—¶é—´æ®µå†…æ¯éš”åŠä¸ªå°æ—¶åŒæ­¥ä¸€æ¬¡æœ¬åœ°æœåŠ¡å™¨æ—¶é—´ï¼ˆ24å°æ—¶åˆ¶ã€ä½¿ç”¨ç”¨æˆ·rootä»»åŠ¡è°ƒåº¦crontabï¼ŒæœåŠ¡å™¨åœ°å€ä½¿ç”¨ä¸»æœºåï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo crontab -e</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/30 10-17 * * * /usr/sbin/ntpdate -u &lt;ä¸»æœºå&gt;</span><br></pre></td></tr></table></figure></li><li><p>é›†ç¾¤ä¸­æ•°æ®ä¼ è¾“éœ€è¦èŠ‚ç‚¹ä¹‹é—´å…å¯†è®¿é—®ï¼Œè¦æ±‚è®¾ç½®ä¸»èŠ‚ç‚¹ä¹‹é—´åˆ°ä»èŠ‚ç‚¹çš„å…å¯†è®¿é—®ï¼›<br>ä¸»èŠ‚ç‚¹ç”Ÿæˆå…¬é’¥æ–‡ä»¶id_rsa.pub(æ•°å­—ç­¾åRSAï¼Œç”¨æˆ·rootï¼Œä¸»æœºåmaster)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><p>å»ºâ½´masterâ¾ƒèº«ä½¿â½¤rootâ½¤æˆ·sshè®¿é—®localhostå…å¯†ç™»å½•<br>è‹¥æ²¡æœ‰authorized_keysåˆ™ä½¿ç”¨ä¸‹é¢å‘½ä»¤åˆ›å»º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /root/.ssh/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>å»ºâ½´masterä½¿â½¤rootâ½¤æˆ·åˆ°slaveçš„sshå…å¯†ç™»å½•è®¿é—®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id root@&lt;ä»èŠ‚ç‚¹IPæˆ–ä¸»æœºå&gt;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id root@&lt;ä»èŠ‚ç‚¹IPæˆ–ä¸»æœºå&gt;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®Javaç¯å¢ƒ<br>è§£å‹ä¸‹è½½çš„java JDK</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf [jdk]</span><br></pre></td></tr></table></figure><p>æ·»åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>æ·»åŠ å†…å®¹</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=&lt;you_java_jdk_path&gt;</span><br><span class="line">export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;</span><br></pre></td></tr></table></figure><p>é…ç½®ç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li><li><p>åˆ†å‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /etc/profile root@slave:/etc/</span><br><span class="line">scp -r /usr/java root@slave:/usr/</span><br></pre></td></tr></table></figure></li></ol><h3 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h3><p><strong>æ¦‚å¿µ</strong></p><p>ZooKeeperæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œå®ƒä¸ºåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºæä¾›äº†é«˜åº¦å¯é çš„åè°ƒåŠŸèƒ½ã€‚å®ƒæ—¨åœ¨è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€äº›å¸¸è§é—®é¢˜ï¼Œå¦‚é…ç½®ç®¡ç†ã€å‘½åæœåŠ¡ã€åˆ†å¸ƒå¼é”ã€åˆ†å¸ƒå¼åè°ƒç­‰ã€‚</p><p>ZooKeeperçš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªç®€å•è€Œé«˜æ•ˆçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œå®ƒé‡‡ç”¨äº†åŸºäºè§‚å¯Ÿè€…æ¨¡å¼çš„æ•°æ®æ¨¡å‹ã€‚åœ¨ZooKeeperä¸­ï¼Œæ•°æ®è¢«ç»„ç»‡ä¸ºä¸€ä¸ªåˆ†å±‚çš„å‘½åç©ºé—´ï¼ˆç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„ï¼‰ï¼Œç§°ä¸ºZooKeeperæ ‘ï¼ˆZooKeeper<br>treeï¼‰æˆ–ZooKeeperå‘½åç©ºé—´ï¼ˆZooKeeper namespaceï¼‰ã€‚æ¯ä¸ªèŠ‚ç‚¹åœ¨æ ‘ä¸­éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„è·¯å¾„æ ‡è¯†ï¼Œå¹¶å¯ä»¥å­˜å‚¨ä¸€ä¸ªå°çš„æ•°æ®å—ã€‚</p><p>ZooKeeperæä¾›äº†ä¸´æ—¶èŠ‚ç‚¹ã€é¡ºåºèŠ‚ç‚¹ã€è§‚å¯Ÿè€…æœºåˆ¶ç­‰ç‰¹æ€§ï¼Œå¯ä»¥ç”¨äºå®ç°åˆ†å¸ƒå¼é”ã€é€‰ä¸»ï¼ˆLeader<br>Electionï¼‰ã€é›†ç¾¤ç®¡ç†ã€åˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰åœºæ™¯ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªé«˜å¯ç”¨çš„ã€åŸºäºä¸»ä»æ¶æ„çš„åè°ƒæœåŠ¡å™¨é›†ç¾¤ï¼Œé€šè¿‡é€‰ä¸¾æœºåˆ¶ç¡®ä¿äº†æœåŠ¡çš„é«˜å¯ç”¨æ€§å’Œå¯é æ€§ã€‚</p><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒZooKeeperè¢«å¹¿æ³›åº”ç”¨äºå„ç§åœºæ™¯ï¼Œå¦‚å¤§æ•°æ®ã€åˆ†å¸ƒå¼æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºç­‰ã€‚å®ƒä¸ºåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªå¯é çš„ã€é«˜æ€§èƒ½çš„åŸºç¡€è®¾æ–½ï¼Œå¸®åŠ©å¼€å‘äººå‘˜ç®€åŒ–äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡å’Œå®ç°ã€‚</p><p>Zookeeperæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œæ˜¯Apache Hadoop çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥è§£å†³åˆ†å¸ƒå¼åº”ç”¨ä¸­ç»å¸¸é‡åˆ°çš„ä¸€äº›æ•°æ®ç®¡ç†é—®é¢˜ï¼Œå¦‚ï¼šç»Ÿä¸€å‘½åæœåŠ¡ã€çŠ¶æ€åŒæ­¥æœåŠ¡ã€é›†ç¾¤ç®¡ç†ã€åˆ†å¸ƒå¼åº”ç”¨é…ç½®é¡¹çš„ç®¡ç†ç­‰ã€‚<br>é¢„è£…çš„é…ç½®æ–‡ä»¶zoo_sample.cfgä¸‹é¢é»˜è®¤æœ‰äº”ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol><li><p>tickTime<br>å¿ƒè·³é—´éš”ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼Œç³»ç»Ÿé»˜è®¤æ˜¯2000æ¯«ç§’ï¼Œä¹Ÿå°±æ˜¯é—´éš”ä¸¤ç§’å¿ƒè·³ä¸€æ¬¡ã€‚<br>tickTimeçš„æ„ä¹‰ï¼šå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æˆ–è€…æœåŠ¡å™¨ä¸æœåŠ¡å™¨ä¹‹é—´ç»´æŒå¿ƒè·³ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªtickTimeæ—¶é—´å°±ä¼šå‘é€ä¸€æ¬¡å¿ƒè·³ã€‚é€šè¿‡å¿ƒè·³ä¸ä»…èƒ½å¤Ÿç”¨æ¥ç›‘å¬æœºå™¨çš„å·¥ä½œçŠ¶æ€ï¼Œè¿˜å¯ä»¥é€šè¿‡å¿ƒè·³æ¥æ§åˆ¶Flowerè·ŸLeaderçš„é€šä¿¡æ—¶é—´ï¼Œé»˜è®¤æƒ…å†µä¸‹FLçš„ä¼šè¯æ—¶å¸¸æ˜¯å¿ƒè·³é—´éš”çš„ä¸¤å€ã€‚</p></li><li><p>initLimit<br>é›†ç¾¤ä¸­çš„followeræœåŠ¡å™¨(F)ä¸leaderæœåŠ¡å™¨(L)ä¹‹é—´åˆå§‹è¿æ¥æ—¶èƒ½å®¹å¿çš„æœ€å¤šå¿ƒè·³æ•°ï¼ˆtickTimeçš„æ•°é‡ï¼‰ã€‚</p></li><li><p>syncLimit<br>é›†ç¾¤ä¸­floweræœåŠ¡å™¨ï¼ˆFï¼‰è·Ÿleaderï¼ˆLï¼‰æœåŠ¡å™¨ä¹‹é—´çš„è¯·æ±‚å’Œç­”åº”æœ€å¤šèƒ½å®¹å¿çš„å¿ƒè·³æ•°ã€‚</p></li><li><p>clientPort<br>å®¢æˆ·ç«¯è¿æ¥çš„æ¥å£ï¼Œå®¢æˆ·ç«¯è¿æ¥zookeeperæœåŠ¡å™¨çš„ç«¯å£ï¼Œzookeeperä¼šç›‘å¬è¿™ä¸ªç«¯å£ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚è®¿é—®ï¼Œç«¯å£é»˜è®¤æ˜¯2181ã€‚</p></li><li><p>dataDir<br>è¯¥å±æ€§å¯¹åº”çš„ç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾myidä¿¡æ¯è·Ÿä¸€äº›ç‰ˆæœ¬ï¼Œæ—¥å¿—ï¼Œè·ŸæœåŠ¡å™¨å”¯ä¸€çš„IDä¿¡æ¯ç­‰ã€‚<br>åœ¨é›†ç¾¤ZookeeperæœåŠ¡åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šå›å»è¯»å–zoo.cfgè¿™ä¸ªæ–‡ä»¶ï¼Œä»è¿™ä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°è¿™ä¸ªå±æ€§ç„¶åè·å–å®ƒçš„å€¼ä¹Ÿå°±æ˜¯dataDir<br>çš„è·¯å¾„ï¼Œå®ƒä¼šä»è¿™ä¸ªè·¯å¾„ä¸‹é¢è¯»å–myidè¿™ä¸ªæ–‡ä»¶ï¼Œä»è¿™ä¸ªæ–‡ä»¶ä¸­è·å–è¦å¯åŠ¨çš„å½“å‰æœåŠ¡å™¨çš„åœ°å€ã€‚</p></li></ol><p>é›†ç¾¤ä¿¡æ¯çš„é…ç½®ï¼š<br>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®é›†ç¾¤ä¿¡æ¯æ˜¯å­˜åœ¨ä¸€å®šçš„æ ¼å¼ï¼šservice.N &#x3D;YYYï¼š Aï¼šB<br>Nï¼šä»£è¡¨æœåŠ¡å™¨ç¼–å·ï¼ˆå‡†ç¡®å¯¹åº”å¯¹åº”æœåŠ¡å™¨ä¸­myidé‡Œé¢çš„å€¼ï¼‰<br>YYYï¼šæœåŠ¡å™¨åœ°å€<br>Aï¼šè¡¨ç¤º Flower è·Ÿ Leaderçš„é€šä¿¡ç«¯å£ï¼Œç®€ç§°æœåŠ¡ç«¯å†…éƒ¨é€šä¿¡çš„ç«¯å£ï¼ˆé»˜è®¤2888ï¼‰<br>Bï¼šè¡¨ç¤ºæ˜¯é€‰ä¸¾ç«¯å£ï¼ˆé»˜è®¤æ˜¯3888ï¼‰</p><p>å‚è€ƒé…ç½®æ–‡ä»¶</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">tickTime=2000</span><br><span class="line">initLimit=10</span><br><span class="line">syncLimit=5</span><br><span class="line">clientPort=2181</span><br><span class="line"># é…ç½®æ•°æ®å­˜å‚¨è·¯å¾„</span><br><span class="line">????</span><br><span class="line"># é…ç½®æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><br><span class="line">????</span><br><span class="line"># é…ç½®é›†ç¾¤åˆ—è¡¨</span><br><span class="line">server.1=????</span><br><span class="line">server.2=????</span><br><span class="line">server.3=????</span><br></pre></td></tr></table></figure><p><strong>æ­å»ºæ­¥éª¤</strong></p><ol><li><p>å°†zookeeperå®‰è£…åŒ…è§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf [zookeeper]</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®ç³»ç»Ÿå˜é‡ZOOKEEPER_HOMEï¼ŒåŒæ—¶å°†Zookeeperå®‰è£…è·¯å¾„ä¸­binç›®å½•åŠ å…¥PATHç³»ç»Ÿå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># zookeeper</span><br><span class="line">export ZOOKEEPER_HOME=/usr/zookeeper/zookeeper-3.4.14</span><br><span class="line">export PATH=&quot;$ZOOKEEPER_HOME/bin:$PATH&quot;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li><li><p>Zookeeperçš„é»˜è®¤é…ç½®æ–‡ä»¶ä¸ºZookeeperå®‰è£…è·¯å¾„ä¸‹conf&#x2F;zoo_sample.cfgï¼Œå°†å…¶ä¿®æ”¹ä¸ºzoo.cfg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd zookeeper/zookeeper-3.4.14/conf/</span><br><span class="line">mv zoo_sample.cfg zoo.cfg</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®æ•°æ®å­˜å‚¨è·¯å¾„(dataDir)ä¸º&#x2F;usr&#x2F;zookeeper&#x2F;zookeeper-3.4.14&#x2F;zkdata</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim zoo.cfg</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataDir=/usr/zookeeper/zookeeper-3.4.14/zkdata</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®æ—¥å¿—æ–‡ä»¶è·¯å¾„(dataLogDir)ä¸º&#x2F;usr&#x2F;zookeeper&#x2F;zookeeper-3.4.14&#x2F;zkdatalog</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim zoo.cfg</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataLogDir=/usr/zookeeper/zookeeper-3.4.14/zkdatalog</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®é›†ç¾¤åˆ—è¡¨ï¼ˆè¦æ±‚masterä¸º1å·æœåŠ¡å™¨ï¼Œslave1ä¸º2å·æœåŠ¡å™¨ï¼Œslave2ä¸º3å·æœåŠ¡å™¨ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim zoo.cfg</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.1=master:2888:3888</span><br><span class="line">server.2=slave1:2888:3888</span><br><span class="line">server.3=slave2:2888:3888</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºæ‰€éœ€æ•°æ®å­˜å‚¨æ–‡ä»¶å¤¹ã€æ—¥å¿—å­˜å‚¨æ–‡ä»¶å¤¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/zookeeper/zookeeper-3.4.14/&#123;zkdata,zkdatalog&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ•°æ®å­˜å‚¨è·¯å¾„ä¸‹åˆ›å»ºmyidï¼Œå†™å…¥å¯¹åº”çš„æ ‡è¯†ä¸»æœºæœåŠ¡å™¨åºå·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/zookeeper/zookeeper-3.4.14/zkdata</span><br><span class="line">vim myid</span><br></pre></td></tr></table></figure><p>server.1 ä¸­çš„ 1 å°±æ˜¯ä¸»æœºæœåŠ¡å™¨çš„åºå·</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure></li><li><p>åˆ†å‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /usr/zookeeper/ root@slave:/usr</span><br><span class="line">scp /etc/profile root@slave:/etc</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨æœåŠ¡ï¼ŒæŸ¥çœ‹è¿›ç¨‹QuorumPeerMainæ˜¯å¦å­˜åœ¨</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh start</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹å„èŠ‚ç‚¹æœåŠ¡å™¨è§’è‰²æ˜¯å¦æ­£å¸¸(leader&#x2F;follower)</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zkServer.sh status</span><br></pre></td></tr></table></figure></li></ol><h3 id="Hadoop"><a href="#Hadoop" class="headerlink" title="Hadoop"></a>Hadoop</h3><p><strong>æ¦‚è¿°</strong></p><p>Hadoopæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼Œæ—¨åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„å­˜å‚¨å’Œå¤„ç†ã€‚å®ƒæä¾›äº†å¯é æ€§ã€å¯æ‰©å±•æ€§å’Œå®¹é”™æ€§ï¼Œé€‚ç”¨äºåœ¨é›†ç¾¤ä¸­å¹¶è¡Œå¤„ç†å¤§é‡æ•°æ®çš„åœºæ™¯ã€‚</p><p>Hadoopçš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š</p><ol><li><p>Hadoop Distributed File System (HDFS)ï¼šè¿™æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºå­˜å‚¨å¤§è§„æ¨¡æ•°æ®é›†ã€‚å®ƒå°†æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨é›†ç¾¤ä¸­çš„å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¹¶æä¾›é«˜å®¹é”™æ€§å’Œé«˜å¯é æ€§ï¼Œä»¥æ”¯æŒå¤§è§„æ¨¡æ•°æ®çš„å­˜å‚¨å’Œå¤„ç†ã€‚</p></li><li><p>MapReduceï¼šè¿™æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®å¤„ç†æ¨¡å‹ï¼Œç”¨äºåœ¨Hadoopé›†ç¾¤ä¸Šå¹¶è¡Œå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚MapReduceå°†è®¡ç®—ä»»åŠ¡åˆ†è§£ä¸ºå¯å¹¶è¡Œæ‰§è¡Œçš„â€œæ˜ å°„â€ï¼ˆMapï¼‰å’Œâ€œå½’çº¦â€ï¼ˆReduceï¼‰é˜¶æ®µï¼Œå…è®¸åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­å¤„ç†æµ·é‡æ•°æ®ã€‚</p></li></ol><p>é™¤äº†æ ¸å¿ƒç»„ä»¶ä¹‹å¤–ï¼ŒHadoopç”Ÿæ€ç³»ç»Ÿè¿˜åŒ…æ‹¬è®¸å¤šå…¶ä»–å·¥å…·å’Œç»„ä»¶ï¼Œå¦‚ï¼š</p><ul><li>YARN (Yet Another Resource Negotiator)ï¼šä½œä¸ºHadoopçš„èµ„æºç®¡ç†å™¨ï¼Œè´Ÿè´£é›†ç¾¤èµ„æºçš„ç®¡ç†å’Œä»»åŠ¡è°ƒåº¦ã€‚</li><li>Hiveï¼šä¸€ä¸ªåŸºäºHadoopçš„æ•°æ®ä»“åº“å’ŒæŸ¥è¯¢å·¥å…·ï¼Œæä¾›ç±»ä¼¼äºSQLçš„æŸ¥è¯¢è¯­è¨€ï¼Œç”¨äºåˆ†æå’Œå¤„ç†å­˜å‚¨åœ¨Hadoopä¸Šçš„æ•°æ®ã€‚</li><li>Sparkï¼šä¸€ä¸ªå¿«é€Ÿã€é€šç”¨çš„å¤§æ•°æ®å¤„ç†å¼•æ“ï¼Œæä¾›é«˜çº§åˆ«çš„APIï¼Œæ”¯æŒå†…å­˜è®¡ç®—å’Œæ›´å¤æ‚çš„æ•°æ®å¤„ç†æ¨¡å¼ã€‚</li><li>HBaseï¼šä¸€ä¸ªåˆ†å¸ƒå¼ã€å¯æ‰©å±•çš„åˆ—å¼æ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨å’Œè®¿é—®ç»“æ„åŒ–æ•°æ®ã€‚</li><li>Pigï¼šä¸€ç§é«˜çº§æ•°æ®æµè„šæœ¬è¯­è¨€ï¼Œç”¨äºç¼–å†™å¤æ‚çš„æ•°æ®è½¬æ¢å’Œåˆ†æä»»åŠ¡ã€‚</li><li>ZooKeeperï¼šä¸€ä¸ªåˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œç”¨äºç®¡ç†å’Œåè°ƒåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å„ç§ä»»åŠ¡ã€‚</li></ul><p>Hadoopè¢«å¹¿æ³›åº”ç”¨äºå¤§æ•°æ®é¢†åŸŸï¼Œå®ƒå¯ä»¥å¤„ç†æµ·é‡æ•°æ®å¹¶æä¾›å¯é çš„æ•°æ®å­˜å‚¨å’Œåˆ†æèƒ½åŠ›ã€‚å®ƒçš„è®¾è®¡ç†å¿µå’Œæ¶æ„ä½¿å¾—å®ƒé€‚ç”¨äºæ„å»ºå¯æ‰©å±•çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä»¥æ»¡è¶³æ—¥ç›Šå¢é•¿çš„å¤§æ•°æ®éœ€æ±‚ã€‚</p><p>Hadoopæ˜¯ç”±Javaè¯­è¨€ç¼–å†™çš„ï¼Œåœ¨åˆ†å¸ƒå¼æœåŠ¡å™¨é›†ç¾¤ä¸Šå­˜å‚¨æµ·é‡æ•°æ®å¹¶è¿è¡Œåˆ†å¸ƒå¼åˆ†æåº”ç”¨çš„å¼€æºæ¡†æ¶ï¼Œå…¶æ ¸å¿ƒéƒ¨ä»¶æ˜¯HDFSä¸MapReduceã€‚</p><ol><li>HDFSæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼šå¼•å…¥å­˜æ”¾æ–‡ä»¶å…ƒæ•°æ®ä¿¡æ¯çš„æœåŠ¡å™¨Namenodeå’Œå®é™…å­˜æ”¾æ•°æ®çš„æœåŠ¡å™¨Datanodeï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ†å¸ƒå¼å‚¨å­˜å’Œè¯»å–ã€‚</li><li>MapReduceæ˜¯ä¸€ä¸ªè®¡ç®—æ¡†æ¶ï¼šMapReduceçš„æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠè®¡ç®—ä»»åŠ¡åˆ†é…ç»™é›†ç¾¤å†…çš„æœåŠ¡å™¨é‡Œæ‰§è¡Œã€‚é€šè¿‡å¯¹è®¡ç®—ä»»åŠ¡çš„æ‹†åˆ†ï¼ˆMapè®¡ç®—&#x2F;Reduceè®¡ç®—ï¼‰å†æ ¹æ®ä»»åŠ¡è°ƒåº¦å™¨ï¼ˆJobTrackerï¼‰å¯¹ä»»åŠ¡è¿›è¡Œåˆ†å¸ƒå¼è®¡ç®—ã€‚</li></ol><table><thead><tr><th>é…ç½®æ–‡ä»¶</th><th>é…ç½®å¯¹è±¡</th><th>ä¸»è¦å†…å®¹</th></tr></thead><tbody><tr><td>hadoop-env.sh</td><td>hadoopè¿è¡Œç¯å¢ƒ</td><td>ç”¨æ¥å®šä¹‰Hadoopè¿è¡Œç¯å¢ƒç›¸å…³çš„é…ç½®ä¿¡æ¯ï¼›</td></tr><tr><td>core-site.xml</td><td>é›†ç¾¤å…¨å±€å‚æ•°</td><td>å®šä¹‰ç³»ç»Ÿçº§åˆ«çš„å‚æ•°ï¼ŒåŒ…æ‹¬HDFS URLã€Hadoopä¸´æ—¶ç›®å½•ç­‰ï¼›</td></tr><tr><td>hdfs-site.xml</td><td>HDFSå‚æ•°</td><td>å®šä¹‰åç§°èŠ‚ç‚¹ã€æ•°æ®èŠ‚ç‚¹çš„å­˜æ”¾ä½ç½®ã€æ–‡æœ¬å‰¯æœ¬çš„ä¸ªæ•°ã€æ–‡ä»¶è¯»å–æƒé™ç­‰ï¼›</td></tr><tr><td>mapred-site.xml</td><td>MapReduceå‚æ•°</td><td>åŒ…æ‹¬JobHistory Server å’Œåº”ç”¨ç¨‹åºå‚æ•°ä¸¤éƒ¨åˆ†ï¼Œå¦‚reduceä»»åŠ¡çš„é»˜è®¤ä¸ªæ•°ã€ä»»åŠ¡æ‰€èƒ½å¤Ÿä½¿ç”¨å†…å­˜çš„é»˜è®¤ä¸Šä¸‹é™ç­‰ï¼›</td></tr><tr><td>yarn-site.xml</td><td>é›†ç¾¤èµ„æºç®¡ç†ç³»ç»Ÿå‚æ•°</td><td>é…ç½®ResourceManager ï¼ŒnodeManagerçš„é€šä¿¡ç«¯å£ï¼Œwebç›‘æ§ç«¯å£ç­‰ï¼›</td></tr></tbody></table><p>Hadoopçš„é…ç½®ç±»æ˜¯ç”±èµ„æºæŒ‡å®šçš„ï¼Œèµ„æºå¯ä»¥ç”±ä¸€ä¸ªStringæˆ–Pathæ¥æŒ‡å®š,èµ„æºä»¥XMLå½¢å¼çš„æ•°æ®è¡¨ç¤ºï¼Œç”±ä¸€ç³»åˆ—çš„é”®å€¼å¯¹ç»„æˆã€‚èµ„æºå¯ä»¥ç”¨Stringæˆ–pathå‘½åï¼ˆç¤ºä¾‹å¦‚ä¸‹ï¼‰ï¼Œ</p><ol><li>String:æŒ‡ç¤ºhadoopåœ¨classpathä¸­æŸ¥æ‰¾è¯¥èµ„æºï¼›</li><li>Path:æŒ‡ç¤ºhadoopåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­æŸ¥æ‰¾è¯¥èµ„æºã€‚</li></ol><p><strong>é…ç½®ç¤ºä¾‹</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>????<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li><p>core-site.xml</p><table><thead><tr><th>é…ç½®å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>fs.default.name</td><td>ç”¨äºæŒ‡å®šNameNodeçš„åœ°å€</td></tr><tr><td>hadoop.tmp.dir</td><td>Hadoopè¿è¡Œæ—¶äº§ç”Ÿæ–‡ä»¶çš„ä¸´æ—¶å­˜å‚¨ç›®å½•</td></tr></tbody></table></li><li><p>hdfs-site.xml</p><table><thead><tr><th>é…ç½®å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>dfs.replication</td><td>æŒ‡å®šå¤‡ä»½æ•°</td></tr><tr><td>dfs.namenode.name.dir</td><td>NameNodeåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­æŒä¹…å­˜å‚¨å‘½åç©ºé—´å’Œäº‹åŠ¡æ—¥å¿—çš„è·¯å¾„</td></tr><tr><td>dfs.datanode.data.dir</td><td>DataNodeåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­å­˜æ”¾å—çš„è·¯å¾„</td></tr><tr><td>dfs.permissions</td><td>é›†ç¾¤æƒé™ç³»ç»Ÿæ ¡éªŒ</td></tr><tr><td>dfs.datanode.use.datanode.hostname</td><td>datanodeä¹‹é—´é€šè¿‡åŸŸåæ–¹å¼é€šä¿¡</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼šå¤–åŸŸæœºå™¨é€šä¿¡éœ€è¦ç”¨å¤–ç½‘IPï¼Œæœªé…ç½®hostnameè®¿é—®ä¼šè®¿é—®å¼‚å¸¸ã€‚å¯ä»¥åœ¨Java apiå®¢æˆ·ç«¯ä½¿ç”¨conf.set(â€œ<br>fs.client.use.datanode.hostnameâ€,â€trueâ€);ã€‚</p></blockquote></li><li><p>mapreduce-site.xml</p><table><thead><tr><th>é…ç½®å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>mapreduce.framework.name</td><td>æŒ‡å®šæ‰§è¡ŒMapReduceä½œä¸šçš„è¿è¡Œæ—¶æ¡†æ¶ã€‚å±æ€§å€¼å¯ä»¥æ˜¯localï¼Œclassicæˆ–yarn</td></tr></tbody></table></li><li><p>yarn-site.xml</p><table><thead><tr><th>é…ç½®å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>yarn.resourcemanager.admin.address</td><td>ç”¨äºæŒ‡å®šRMç®¡ç†ç•Œé¢çš„åœ°å€ï¼ˆä¸»æœº:ç«¯å£ï¼‰</td></tr><tr><td>yarn.nodemanager.aux-services</td><td>mapreduce è·å–æ•°æ®çš„æ–¹å¼ï¼ŒæŒ‡å®šåœ¨è¿›è¡Œmapreduceä½œä¸šæ—¶ï¼Œyarnä½¿ç”¨mapreduce_shuffleæ··æ´—æŠ€æœ¯ã€‚è¿™ä¸ªæ··æ´—æŠ€æœ¯æ˜¯hadoopçš„ä¸€ä¸ªæ ¸å¿ƒæŠ€æœ¯ï¼Œéå¸¸é‡è¦ã€‚</td></tr><tr><td>yarn.nodemanager.auxservices.mapreduce.shuffle.class</td><td>ç”¨äºæŒ‡å®šæ··æ´—æŠ€æœ¯å¯¹åº”çš„å­—èŠ‚ç æ–‡ä»¶ï¼Œå€¼ä¸ºorg.apache.hadoop.mapred.ShuffleHandler</td></tr></tbody></table></li></ol><p><strong>é…ç½®æ­¥éª¤</strong></p><ol><li><p>Hadoopå®‰è£…åŒ…è§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf [hadoop]</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®ç¯å¢ƒå˜é‡HADOOP_HOMEï¼Œå°†Hadoopå®‰è£…è·¯å¾„ä¸­binç›®å½•å’Œsbinç›®å½•åŠ å…¥PATHç³»ç»Ÿå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># hadoop</span><br><span class="line">export HADOOP_HOME=/usr/hadoop/hadoop-2.7.7</span><br><span class="line">export PATH=&quot;$HADOOP_HOME/sbin:$HADOOP_HOME/bin:$PATH&quot;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®Hadoopè¿è¡Œç¯å¢ƒJAVA_HOME</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/hadoop/hadoop-2.7.7/etc/hadoop</span><br><span class="line">vim hadoop-env.sh</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_221</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®å…¨å±€å‚æ•°ï¼ŒæŒ‡å®šHDFSä¸ŠNameNodeåœ°å€ä¸ºmaster,ç«¯å£é»˜è®¤ä¸º9000ï¼›æŒ‡å®šä¸´æ—¶å­˜å‚¨ç›®å½•ä¸ºæœ¬åœ°&#x2F;root&#x2F;hadoopData&#x2F;tmp(è¦æ±‚ä¸ºç»å¯¹è·¯å¾„ï¼Œä¸‹åŒ)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim core-site.xml</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/hadoopData/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®HDFSå‚æ•°ï¼ŒæŒ‡å®šå¤‡ä»½æ–‡æœ¬æ•°é‡ä¸º2ï¼›è®¾ç½®HDFSå‚æ•°ï¼ŒæŒ‡å®šNNå­˜æ”¾å…ƒæ•°æ®ä¿¡æ¯è·¯å¾„ä¸ºæœ¬åœ°&#x2F;root&#x2F;hadoopData&#x2F;nameï¼›æŒ‡å®šDNå­˜æ”¾å…ƒæ•°æ®ä¿¡æ¯è·¯å¾„ä¸ºæœ¬åœ°&#x2F;root&#x2F;hadoopData&#x2F;data(è¦æ±‚ä¸ºç»å¯¹è·¯å¾„)ï¼›è®¾ç½®HDFSå‚æ•°ï¼Œå…³é—­hadoopé›†ç¾¤æƒé™æ ¡éªŒï¼ˆå®‰å…¨é…ç½®ï¼‰ï¼Œå…è®¸å…¶ä»–ç”¨æˆ·è¿æ¥é›†ç¾¤ï¼›æŒ‡å®šdatanodeä¹‹é—´é€šè¿‡åŸŸåæ–¹å¼è¿›è¡Œé€šä¿¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim hdfs-site.xml</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/hadoopData/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/hadoopData/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.use.datanode.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®YARNè¿è¡Œç¯å¢ƒ$JAVA_HOMEå‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim yarn-env.sh</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_221</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®YARNæ ¸å¿ƒå‚æ•°ï¼ŒæŒ‡å®šResourceManagerè¿›ç¨‹æ‰€åœ¨ä¸»æœºä¸ºmasterï¼Œç«¯å£ä¸º18141;æŒ‡å®šmapreduce è·å–æ•°æ®çš„æ–¹å¼ä¸ºmapreduce_shuffle</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim yarn-site.xml</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.admin.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:18141<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.auxservices.mapreduce.shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.mapred.shuffleHandler<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®è®¡ç®—æ¡†æ¶å‚æ•°ï¼ŒæŒ‡å®šMRè¿è¡Œåœ¨yarnä¸Š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp mapred-site.xml.template mapred-site.xml</span><br><span class="line">vim mapred-site.xml</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®èŠ‚ç‚¹æ–‡ä»¶ï¼Œè¦æ±‚masterä¸ºä¸»èŠ‚ç‚¹ï¼› slave1ã€slave2ä¸ºå­èŠ‚ç‚¹<br>è¿™é‡Œå¡«å…¥ä»èŠ‚ç‚¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim slaves</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slave</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¡«å…¥ä¸»èŠ‚ç‚¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim master</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">master</span><br></pre></td></tr></table></figure></li><li><p>åˆ†å‘</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /usr/hadoop/ root@slave:/usr/</span><br><span class="line">scp /etc/profile root@slave:/etc/</span><br></pre></td></tr></table></figure></li><li><p>å¯¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ ¼å¼åŒ–</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure><p>   å‡ºç°ä¸€ä¸‹å†…å®¹å°±æ˜¯æˆåŠŸäº†</p>   <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO common.Storage: Storage directory /root/hadoopData/name has been successfully formatted.</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨Hadoopé›†ç¾¤æŸ¥çœ‹å„èŠ‚ç‚¹æœåŠ¡</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start-all.sh </span><br><span class="line">hadoop-daemon.sh start datanode</span><br><span class="line">jps</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹é›†ç¾¤è¿è¡ŒçŠ¶æ€æ˜¯å¦æ­£å¸¸</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop dfsadmin -report</span><br></pre></td></tr></table></figure></li></ol><h3 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h3><p><strong>æ¦‚å¿µ</strong></p><p>Hiveæ˜¯åŸºäºHadoopçš„æ•°æ®ä»“åº“åŸºç¡€æ¶æ„ï¼Œå®ƒæä¾›äº†ä¸€ç§ç±»ä¼¼äºSQLçš„æŸ¥è¯¢è¯­è¨€ï¼ˆHiveQLï¼‰å’Œç”¨äºå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚Hiveä½¿å¾—ç”¨æˆ·å¯ä»¥ä½¿ç”¨SQLè¯­è¨€è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€è½¬æ¢å’Œåˆ†æï¼Œè€Œæ— éœ€ç¼–å†™å¤æ‚çš„MapReduceç¨‹åºã€‚</p><p>Hiveçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰æ˜ å°„åˆ°Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰ä¸Šçš„å¤§è§„æ¨¡æ•°æ®é›†ã€‚å®ƒå°†SQLæŸ¥è¯¢è½¬æ¢ä¸ºä¸€ç³»åˆ—MapReduceä½œä¸šï¼Œä»è€Œèƒ½å¤Ÿåœ¨Hadoopé›†ç¾¤ä¸Šå¹¶è¡Œå¤„ç†æ•°æ®ã€‚</p><p>Hiveçš„ç‰¹æ€§åŒ…æ‹¬ï¼š</p><ol><li><p>æ•°æ®æ¨¡å‹ï¼šHiveæä¾›äº†ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„è¡¨ç»“æ„ï¼Œæ”¯æŒåŸºäºæ¨¡å¼çš„æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢ã€‚å®ƒå¯ä»¥å°†æ•°æ®æ˜ å°„åˆ°è¡¨å’Œåˆ†åŒºï¼Œå¹¶æ”¯æŒå¤æ‚çš„æ•°æ®ç±»å‹å’Œæ•°æ®æ¨¡å‹ã€‚</p></li><li><p>æŸ¥è¯¢è¯­è¨€ï¼šHiveçš„æŸ¥è¯¢è¯­è¨€HiveQLç±»ä¼¼äºSQLï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨SQLè¯­å¥æ¥æŸ¥è¯¢å’Œåˆ†ææ•°æ®ã€‚HiveQLæ”¯æŒå¸¸è§çš„æŸ¥è¯¢æ“ä½œï¼Œå¦‚SELECTã€JOINã€GROUP<br>BYã€ORDER BYç­‰ã€‚</p></li><li><p>æ•°æ®è½¬æ¢å’ŒETLï¼šHiveæ”¯æŒæ•°æ®è½¬æ¢å’ŒETLï¼ˆæŠ½å–ã€è½¬æ¢ã€åŠ è½½ï¼‰æ“ä½œï¼Œå¯ä»¥é€šè¿‡HiveQLè¿›è¡Œæ•°æ®æ¸…æ´—ã€è½¬æ¢å’Œæå–ã€‚</p></li><li><p>æ‰©å±•æ€§å’Œé›†æˆï¼šHiveå¯ä»¥ä¸å…¶ä»–Hadoopç”Ÿæ€ç³»ç»Ÿç»„ä»¶é›†æˆï¼Œå¦‚HDFSã€HBaseã€Sparkç­‰ã€‚å®ƒè¿˜æ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼ˆUDFï¼‰å’Œæ‰©å±•æ’ä»¶ï¼Œå…è®¸ç”¨æˆ·ç¼–å†™è‡ªå®šä¹‰é€»è¾‘å’Œæ‰©å±•åŠŸèƒ½ã€‚</p></li><li><p>å…ƒæ•°æ®ç®¡ç†ï¼šHiveç»´æŠ¤è¡¨å’Œåˆ†åŒºçš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡¨çš„ç»“æ„ã€å­˜å‚¨ä½ç½®ã€åˆ†åŒºä¿¡æ¯ç­‰ã€‚è¿™ä½¿å¾—Hiveèƒ½å¤Ÿæä¾›æ›´é«˜çº§åˆ«çš„æŸ¥è¯¢ä¼˜åŒ–å’ŒæŸ¥è¯¢è®¡åˆ’ç”Ÿæˆã€‚</p></li></ol><p>Hiveå¹¿æ³›åº”ç”¨äºå¤§æ•°æ®é¢†åŸŸï¼Œç‰¹åˆ«æ˜¯æ•°æ®ä»“åº“ã€æ•°æ®åˆ†æå’Œæ•°æ®å¤„ç†åœºæ™¯ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€åŒ–çš„æ–¹å¼æ¥ä½¿ç”¨SQLè¯­è¨€è¿›è¡Œå¤§æ•°æ®æŸ¥è¯¢å’Œå¤„ç†ï¼Œä½¿å¾—æ›´å¤šçš„äººå¯ä»¥è½»æ¾åœ°åˆ©ç”¨Hadoopé›†ç¾¤è¿›è¡Œæ•°æ®åˆ†æå’Œæ•°æ®æŒ–æ˜ã€‚</p><ol><li><p>ç¯å¢ƒä¸­å·²ç»å®‰è£…mysql-community-serverï¼Œæ³¨æ„mysql5.7é»˜è®¤å®‰è£…åä¸ºrootç”¨æˆ·éšæœºç”Ÿæˆä¸€ä¸ªå¯†ç ï¼›<br>ç›´æ¥æŸ¥çœ‹å¯†ç ï¼šgrep â€œtemporary passwordâ€ &#x2F;var&#x2F;log&#x2F;mysqld.log<br>ç™»å…¥æ•°æ®åº“ï¼šmysql -uroot -p<br>è¾“å…¥éšæœºå¯†ç å³å¯ç™»å½•</p></li><li><p>æ ¹æ®è¦æ±‚è®¾ç½®å¯†ç ï¼Œæ³¨æ„å¯¹åº”çš„å®‰å…¨ç­–ç•¥ä¿®æ”¹ï¼›<br>è®¾ç½®å¯†ç å¼ºåº¦ä¸ºä½çº§ï¼šset global validate_password_policy&#x3D;????;<br>è®¾ç½®å¯†ç é•¿åº¦ï¼šset global validate_password_length&#x3D;????;<br>ä¿®æ”¹æœ¬åœ°å¯†ç ï¼šalter user â€˜rootâ€˜@â€™localhostâ€™ identified by â€˜????â€™;</p></li><li><p>æ ¹æ®è¦æ±‚æ»¡è¶³ä»»æ„ä¸»æœºèŠ‚ç‚¹rootçš„è¿œç¨‹è®¿é—®æƒé™(å¦åˆ™åç»­hiveæ— æ³•è¿æ¥mysql)ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;????&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;????&#x27;</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br></pre></td></tr></table></figure></li><li><p>æ³¨æ„åˆ·æ–°æƒé™ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></li><li><p>å‚è€ƒå‘½ä»¤</p><ol><li>å¯åŠ¨mysqlæœåŠ¡ï¼šsystemctl start mysqld.service</li><li>å…³é—­mysqlæœåŠ¡ï¼šsystemctl stop mysqld.service</li><li>æŸ¥çœ‹mysqlæœåŠ¡ï¼šsystemctl status mysqld.service</li></ol></li></ol><p><strong>é…ç½®æ­¥éª¤</strong></p><ol><li><p>ç¯å¢ƒä¸­å·²ç»å®‰è£…mysql-community-serverï¼Œå…³é—­mysqlå¼€æœºè‡ªå¯æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl disable mysqld</span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯MySQLæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure></li><li><p>åˆ¤æ–­mysqld.logæ—¥å¿—ä¸‹æ˜¯å¦ç”Ÿæˆåˆä¸´æ—¶å¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;temporary password&quot; /var/log/mysqld.log </span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿåˆå§‹å¯†ç å¹¶å¤åˆ¶ä¸‹æ¥</p></li><li><p>è®¾ç½®mysqlæ•°æ®åº“æœ¬åœ°rootç”¨æˆ·å¯†ç ä¸º123456<br>ç™»å½•mysqlï¼Œä½¿ç”¨ä¸´æ—¶å¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><p>sqlä¸­æ‰§è¡Œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_policy<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_length<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> root<span class="variable">@localhost</span> identified <span class="keyword">by</span> â€˜<span class="number">123456</span>â€™;</span><br></pre></td></tr></table></figure><p>é€€å‡º</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quit</span><br></pre></td></tr></table></figure></li><li><p>Hiveå®‰è£…åŒ…è§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf [hive]</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®ç¯å¢ƒå˜é‡HIVE_HOME,å°†Hiveå®‰è£…è·¯å¾„ä¸­çš„binç›®å½•åŠ å…¥PATHç³»ç»Ÿå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export HIVE_HOME=/usr/hive/apache-hive-2.3.4-bin</span><br><span class="line">export PATH=PATH : PATH:PATH:HIVE_HOME/bin</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹HIVEè¿è¡Œç¯å¢ƒï¼Œé…ç½®Hadoopå®‰è£…è·¯å¾„HADOOP_HOMEï¼›ä¿®æ”¹HIVEè¿è¡Œç¯å¢ƒï¼Œé…ç½®Hiveé…ç½®æ–‡ä»¶å­˜æ”¾è·¯å¾„HIVE_CONF_DIRï¼›ä¿®æ”¹HIVEè¿è¡Œç¯å¢ƒï¼Œé…ç½®Hiveè¿è¡Œèµ„æºåº“è·¯å¾„HIVE_AUX_JARS_PATH</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/hive/apache-hive-2.3.4-bin/conf/</span><br><span class="line">cp hive-env.sh.template hive-env.sh</span><br><span class="line">vim hive-env.sh</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export HADOOP_HOME=/usr/hadoop/hadoop-2.7.7</span><br><span class="line">export HIVE_CONF_DIR=/usr/hive/apache-hive-2.3.4-bin/conf</span><br><span class="line">export HIVE_AUX_JARS_PATH=/usr/hive/apache-hive-2.3.4-bin/lib</span><br></pre></td></tr></table></figure></li><li><p>è§£å†³jlineçš„ç‰ˆæœ¬å†²çªï¼Œå°†$HIVE_HOME&#x2F;lib&#x2F;jline-2.12.jaråŒæ­¥è‡³$HADOOP_HOME&#x2F;share&#x2F;hadoop&#x2F;yarn&#x2F;lib&#x2F;ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/package277/mysql-connector-java-5.1.47-bin.jar /usr/hive/apache-hive-2.3.4-bin/lib/</span><br></pre></td></tr></table></figure></li><li><p>åˆ†å‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /usr/hive root@slave:/usr</span><br><span class="line">scp /etc/profile root@slave:/etc</span><br></pre></td></tr></table></figure><div class="note info"><p>æ¥ä¸‹æ¥çš„æ“ä½œè¯·é€‰æ‹©åˆšæ‰è¿›è¡Œåˆ†å‘çš„slaveä»èŠ‚ç‚¹è¿›è¡Œæ“ä½œ</p></div></li><li><p>é©±åŠ¨JDBCæ‹·è´è‡³hiveå®‰è£…ç›®å½•å¯¹åº”libä¸‹ï¼ˆä¾èµ–åŒ…å­˜æ”¾äº&#x2F;usr&#x2F;package277&#x2F;ï¼‰</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/package277/mysql-connector-java-5.1.47-bin.jar /usr/hive/apache-hive-2.3.4-bin/lib/</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®å…ƒæ•°æ®æ•°æ®å­˜å‚¨ä½ç½®ä¸º&#x2F;user&#x2F;hive_remote&#x2F;warehouseï¼›é…ç½®è¿æ¥JDBCçš„URLåœ°å€ä¸»æœºååŠé»˜è®¤ç«¯å£å·3306ï¼Œæ•°æ®åº“ä¸ºhiveï¼Œå¦‚ä¸å­˜åœ¨è‡ªè¡Œåˆ›å»ºï¼Œsslè¿æ¥æ–¹å¼ä¸ºfalseï¼›é…ç½®æ•°æ®åº“è¿æ¥ç”¨æˆ·ï¼›é…ç½®æ•°æ®åº“è¿æ¥å¯†ç </p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/hive/apache-hive-2.3.4-bin/conf/hive-site.xml</span><br></pre></td></tr></table></figure>   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Hiveäº§ç”Ÿçš„å…ƒæ•°æ®å­˜æ”¾ä½ç½®--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive_remote/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥driverï¼Œå³MySQLé©±åŠ¨--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥JDBCçš„URLåœ°å€--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://slave2:3306/hive?createDatabaseIfNotExist=true<span class="symbol">&amp;amp;</span>useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- MySQLæ•°æ®åº“ç”¨æˆ·å--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- MySQLæ•°æ®åº“å¯†ç --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>   <div class="note info"><p>æ¥ä¸‹æ¥çš„æ“ä½œè¯·é€‰æ‹©masterèŠ‚ç‚¹è¿›è¡Œæ“ä½œ</p></div></li><li><p>é…ç½®å…ƒæ•°æ®å­˜å‚¨ä½ç½®ä¸º&#x2F;user&#x2F;hive_remote&#x2F;warehouseï¼›å…³é—­æœ¬åœ°metastoreæ¨¡å¼ï¼›é…ç½®æŒ‡å‘metastoreæœåŠ¡çš„ä¸»æœºä¸ºslave1ï¼Œç«¯å£ä¸º9083</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/hive/apache-hive-2.3.4-bin/conf/hive-site.xml</span><br></pre></td></tr></table></figure>   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Hiveäº§ç”Ÿçš„å…ƒæ•°æ®å­˜æ”¾ä½ç½®--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive_remote/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--- ä½¿ç”¨æœ¬åœ°æœåŠ¡è¿æ¥Hive,é»˜è®¤ä¸ºtrue--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.local<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- è¿æ¥æœåŠ¡å™¨--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://slave1:9083<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>æœåŠ¡å™¨ç«¯åˆå§‹åŒ–æ•°æ®åº“ï¼Œå¹¶å¯åŠ¨metastoreæœåŠ¡;</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">schematool -dbType mysql -initSchema</span><br><span class="line">hive --service metastore</span><br></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯å¼€å¯è¿›å…¥hiveï¼Œåˆ›å»ºhiveæ•°æ®åº“</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive</span><br></pre></td></tr></table></figure>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database hive;</span><br></pre></td></tr></table></figure></li></ol><h3 id="Spark"><a href="#Spark" class="headerlink" title="Spark"></a>Spark</h3><p>Hiveæ˜¯åŸºäºHadoopçš„æ•°æ®ä»“åº“åŸºç¡€æ¶æ„ï¼Œå®ƒæä¾›äº†ä¸€ç§ç±»ä¼¼äºSQLçš„æŸ¥è¯¢è¯­è¨€ï¼ˆHiveQLï¼‰å’Œç”¨äºå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚Hiveä½¿å¾—ç”¨æˆ·å¯ä»¥ä½¿ç”¨SQLè¯­è¨€è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€è½¬æ¢å’Œåˆ†æï¼Œè€Œæ— éœ€ç¼–å†™å¤æ‚çš„MapReduceç¨‹åºã€‚</p><p>Hiveçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰æ˜ å°„åˆ°Hadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰ä¸Šçš„å¤§è§„æ¨¡æ•°æ®é›†ã€‚å®ƒå°†SQLæŸ¥è¯¢è½¬æ¢ä¸ºä¸€ç³»åˆ—MapReduceä½œä¸šï¼Œä»è€Œèƒ½å¤Ÿåœ¨Hadoopé›†ç¾¤ä¸Šå¹¶è¡Œå¤„ç†æ•°æ®ã€‚</p><p>Hiveçš„ç‰¹æ€§åŒ…æ‹¬ï¼š</p><ol><li><p>æ•°æ®æ¨¡å‹ï¼šHiveæä¾›äº†ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„è¡¨ç»“æ„ï¼Œæ”¯æŒåŸºäºæ¨¡å¼çš„æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢ã€‚å®ƒå¯ä»¥å°†æ•°æ®æ˜ å°„åˆ°è¡¨å’Œåˆ†åŒºï¼Œå¹¶æ”¯æŒå¤æ‚çš„æ•°æ®ç±»å‹å’Œæ•°æ®æ¨¡å‹ã€‚</p></li><li><p>æŸ¥è¯¢è¯­è¨€ï¼šHiveçš„æŸ¥è¯¢è¯­è¨€HiveQLç±»ä¼¼äºSQLï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨SQLè¯­å¥æ¥æŸ¥è¯¢å’Œåˆ†ææ•°æ®ã€‚HiveQLæ”¯æŒå¸¸è§çš„æŸ¥è¯¢æ“ä½œï¼Œå¦‚SELECTã€JOINã€GROUP<br>BYã€ORDER BYç­‰ã€‚</p></li><li><p>æ•°æ®è½¬æ¢å’ŒETLï¼šHiveæ”¯æŒæ•°æ®è½¬æ¢å’ŒETLï¼ˆæŠ½å–ã€è½¬æ¢ã€åŠ è½½ï¼‰æ“ä½œï¼Œå¯ä»¥é€šè¿‡HiveQLè¿›è¡Œæ•°æ®æ¸…æ´—ã€è½¬æ¢å’Œæå–ã€‚</p></li><li><p>æ‰©å±•æ€§å’Œé›†æˆï¼šHiveå¯ä»¥ä¸å…¶ä»–Hadoopç”Ÿæ€ç³»ç»Ÿç»„ä»¶é›†æˆï¼Œå¦‚HDFSã€HBaseã€Sparkç­‰ã€‚å®ƒè¿˜æ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼ˆUDFï¼‰å’Œæ‰©å±•æ’ä»¶ï¼Œå…è®¸ç”¨æˆ·ç¼–å†™è‡ªå®šä¹‰é€»è¾‘å’Œæ‰©å±•åŠŸèƒ½ã€‚</p></li><li><p>å…ƒæ•°æ®ç®¡ç†ï¼šHiveç»´æŠ¤è¡¨å’Œåˆ†åŒºçš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡¨çš„ç»“æ„ã€å­˜å‚¨ä½ç½®ã€åˆ†åŒºä¿¡æ¯ç­‰ã€‚è¿™ä½¿å¾—Hiveèƒ½å¤Ÿæä¾›æ›´é«˜çº§åˆ«çš„æŸ¥è¯¢ä¼˜åŒ–å’ŒæŸ¥è¯¢è®¡åˆ’ç”Ÿæˆã€‚</p></li></ol><p>Hiveå¹¿æ³›åº”ç”¨äºå¤§æ•°æ®é¢†åŸŸï¼Œç‰¹åˆ«æ˜¯æ•°æ®ä»“åº“ã€æ•°æ®åˆ†æå’Œæ•°æ®å¤„ç†åœºæ™¯ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€åŒ–çš„æ–¹å¼æ¥ä½¿ç”¨SQLè¯­è¨€è¿›è¡Œå¤§æ•°æ®æŸ¥è¯¢å’Œå¤„ç†ï¼Œä½¿å¾—æ›´å¤šçš„äººå¯ä»¥è½»æ¾åœ°åˆ©ç”¨Hadoopé›†ç¾¤è¿›è¡Œæ•°æ®åˆ†æå’Œæ•°æ®æŒ–æ˜ã€‚</p><p>Sparkæ˜¯Hadoopçš„å­é¡¹ç›®ã€‚ ç¯å¢ƒä¸­å°†Sparkå®‰è£…åˆ°åŸºäºLinuxçš„ç³»ç»Ÿä¸­ã€‚</p><p>ç›¸å…³é…ç½®å˜é‡å¦‚ä¸‹ï¼š</p><ol><li>JAVA_HOMEï¼šJavaå®‰è£…ç›®å½•</li><li>HADOOP_HOMEï¼šHadoopå®‰è£…ç›®å½•</li><li>HADOOP_CONF_DIRï¼šHadoopé›†ç¾¤çš„é…ç½®æ–‡ä»¶çš„ç›®å½•</li><li>SPARK_MASTER_IPï¼šSparké›†ç¾¤çš„MasterèŠ‚ç‚¹çš„ipåœ°å€</li><li>SPARK_WORKER_MEMORYï¼šæ¯ä¸ªworkerèŠ‚ç‚¹èƒ½å¤Ÿæœ€å¤§åˆ†é…ç»™exectorsçš„å†…å­˜å¤§å°</li></ol><p><strong>é…ç½®æ­¥éª¤</strong></p><ol><li><p>å°†Sparkå®‰è£…åŒ…è§£å‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zvxf [spark]</span><br></pre></td></tr></table></figure></li><li><p>æ–‡ä»¶&#x2F;etc&#x2F;profileä¸­é…ç½®ç¯å¢ƒå˜é‡SPARK_HOMEï¼Œå°†Sparkå®‰è£…è·¯å¾„ä¸­çš„binç›®å½•åŠ å…¥PATHç³»ç»Ÿå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export SPARK_HOME=/usr/spark/spark-2.4.3-bin-hadoop2.7</span><br><span class="line">export PATH=$SPARK_HOME/bin:$SPARK_HOME/sbin:$PATH</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶spark-env.shï¼Œè®¾ç½®ä¸»æœºèŠ‚ç‚¹ä¸ºmasterï¼Œè®¾ç½®javaå®‰è£…è·¯å¾„ï¼Œè®¾ç½®èŠ‚ç‚¹å†…å­˜ä¸º8gï¼Œè®¾ç½®hadoopå®‰è£…ç›®å½•ã€hadoopé›†ç¾¤çš„é…ç½®æ–‡ä»¶çš„ç›®å½•ï¼Œæ·»åŠ sparkä»èŠ‚ç‚¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/spark/spark-2.4.3-bin-hadoop2.7/conf</span><br><span class="line">cp spark-defaults.sh.template spark-env.sh</span><br><span class="line"></span><br><span class="line">vim spark-env.sh</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_221</span><br><span class="line">export SPARK_MASTER_IP=master</span><br><span class="line">export HADOOP_CONF_DIR=/usr/hadoop/hadoop-2.7.7/etc/hadoop</span><br><span class="line">export HADOOP_HOME=/usr/hadoop/hadoop-2.7.7</span><br><span class="line">export SPARK_WORKER_MEMORY=8g</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»èŠ‚ç‚¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp slaves.template slaves</span><br><span class="line">vim slaves</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slave</span><br></pre></td></tr></table></figure></li><li><p>åˆ†å‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -r /usr/spark root@slave:/usr</span><br><span class="line">scp /etc/profile root@slave:/etc</span><br></pre></td></tr></table></figure></li><li><p>å¼€å¯é›†ç¾¤ï¼ŒæŸ¥çœ‹å„èŠ‚ç‚¹è¿›ç¨‹(ä¸»èŠ‚ç‚¹è¿›ç¨‹ä¸ºMasterï¼Œå­èŠ‚ç‚¹è¿›ç¨‹ä¸ºWorker)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/spark/spark-2.4.3-bin-hadoop2.7/sbin</span><br><span class="line">./start-all.sh</span><br></pre></td></tr></table></figure></li></ol><h2 id="07-14-Hadoop-MapReduce"><a href="#07-14-Hadoop-MapReduce" class="headerlink" title="07-14 Hadoop MapReduce"></a>07-14 Hadoop MapReduce</h2><p><strong>æ¦‚å¿µ</strong><br>Hadoop MapReduceæ˜¯Hadoopç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€ä¸ªè®¡ç®—æ¨¡å‹å’Œç¼–ç¨‹æ¡†æ¶ï¼Œç”¨äºå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„åˆ†å¸ƒå¼è®¡ç®—ä»»åŠ¡ã€‚</p><p>MapReduceæ¨¡å‹æ—¨åœ¨è§£å†³å¤§è§„æ¨¡æ•°æ®å¤„ç†çš„å¹¶è¡ŒåŒ–å’Œåˆ†å¸ƒå¼è®¡ç®—é—®é¢˜ã€‚å®ƒå°†è®¡ç®—ä»»åŠ¡åˆ†è§£ä¸ºä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼šMapé˜¶æ®µå’ŒReduceé˜¶æ®µã€‚</p><p>åœ¨Mapé˜¶æ®µï¼Œæ•°æ®è¢«åˆ†å‰²æˆå°çš„æ•°æ®å—ï¼Œå¹¶ç”±å¤šä¸ªMapä»»åŠ¡å¹¶è¡Œå¤„ç†ã€‚æ¯ä¸ªMapä»»åŠ¡å°†è¾“å…¥æ•°æ®å—è½¬æ¢ä¸ºä¸€ç³»åˆ—é”®å€¼å¯¹ï¼Œå…¶ä¸­é”®è¡¨ç¤ºä¸­é—´ç»“æœçš„æ ‡è¯†ï¼Œå€¼è¡¨ç¤ºç›¸å…³æ•°æ®ã€‚</p><p>åœ¨Reduceé˜¶æ®µï¼Œé€šè¿‡å¯¹Mapé˜¶æ®µè¾“å‡ºçš„ä¸­é—´ç»“æœè¿›è¡Œæ•´ç†å’Œå½’å¹¶ï¼Œå°†å…·æœ‰ç›¸åŒé”®çš„å€¼èšåˆåœ¨ä¸€èµ·ã€‚è¿™æ ·ï¼ŒReduceä»»åŠ¡å¯ä»¥å¯¹æ¯ä¸ªé”®çš„å€¼è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆæœ€ç»ˆçš„è®¡ç®—ç»“æœã€‚</p><p>Hadoop<br>MapReduceæä¾›äº†ä¸€ä¸ªç¼–ç¨‹æ¨¡å‹å’Œæ¡†æ¶ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿç¼–å†™å¹¶è¡Œè®¡ç®—ä»»åŠ¡ï¼Œå¹¶å°†å…¶è‡ªåŠ¨åˆ†å¸ƒåˆ°Hadoopé›†ç¾¤ä¸­çš„å¤šä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨Javaç­‰ç¼–ç¨‹è¯­è¨€ç¼–å†™MapReduceä½œä¸šï¼Œåˆ©ç”¨Hadoopæ¡†æ¶æä¾›çš„APIæ¥å¤„ç†è¾“å…¥æ•°æ®ã€å®šä¹‰Mapå’ŒReduceå‡½æ•°ï¼Œå¹¶è®¾ç½®ä½œä¸šçš„é…ç½®å‚æ•°ã€‚</p><p>é€šè¿‡åˆ©ç”¨Hadoop MapReduceçš„åˆ†å¸ƒå¼è®¡ç®—èƒ½åŠ›ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ï¼Œå®ç°æ•°æ®å¤„ç†ã€æ•°æ®æŒ–æ˜ã€æ—¥å¿—åˆ†æç­‰å„ç§åº”ç”¨åœºæ™¯ã€‚</p><h3 id="WordCountç¨‹åº"><a href="#WordCountç¨‹åº" class="headerlink" title="WordCountç¨‹åº"></a>WordCountç¨‹åº</h3><p><strong>æ•°æ®è¯´æ˜</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Shakespeare Sonnet</span><br><span class="line">Shall I compare thee to a summer&#x27;s day?</span><br><span class="line">Thou art more lovely and more temperate:</span><br><span class="line">Rough winds do shake the darling buds of May,</span><br><span class="line">And summer&#x27;s lease hath all too short a date:</span><br><span class="line">Sometime too hot the eye of heaven shines,</span><br><span class="line">And often is his gold complexion dimm&#x27;d;</span><br><span class="line">And every fair from fair sometime declines,</span><br><span class="line">By chance or nature&#x27;s changing course untrimm&#x27;d</span><br><span class="line">But thy eternal summer shall not fade</span><br><span class="line">Nor lose possession of that fair thou owest;</span><br><span class="line">Nor shall Death brag thou wander&#x27;st in his shade,</span><br><span class="line">When in eternal lines to time thou growest:</span><br><span class="line">So long as men can breathe or eyes can see,</span><br><span class="line">So long lives this and this gives life to thee.</span><br></pre></td></tr></table></figure><p><strong>ç¨‹åºå®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WordCountDriver</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, InterruptedException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1ã€è·å–Job</span></span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line">        <span class="type">Job</span> <span class="variable">job</span> <span class="operator">=</span> Job.getInstance(conf);</span><br><span class="line">        <span class="comment">//è®¾ç½®jaråŒ…è·¯å¾„</span></span><br><span class="line">        job.setJarByClass(WordCountDriver.class);</span><br><span class="line">        <span class="comment">//3ã€å…³è”mapå’Œreducer</span></span><br><span class="line">        job.setMapperClass(WordCountMapper.class);</span><br><span class="line">        job.setReducerClass(WordCountReducer.class);</span><br><span class="line">        <span class="comment">//4ã€è®¾ç½®mapçš„è¾“å‡ºkvç±»å‹</span></span><br><span class="line">        job.setMapOutputKeyClass(Text.class);</span><br><span class="line">        job.setMapOutputValueClass(IntWritable.class);</span><br><span class="line">        <span class="comment">//5ã€è®¾ç½®æœ€ç»ˆè¾“å‡ºçš„kvç±»å‹</span></span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line">        <span class="comment">//6ã€è®¾ç½®è¾“å…¥è¾“å‡ºè·¯å¾„</span></span><br><span class="line">        FileInputFormat.setInputPaths(job, <span class="keyword">new</span> <span class="title class_">Path</span>(args[<span class="number">0</span>]));</span><br><span class="line">        FileOutputFormat.setOutputPath(job, <span class="keyword">new</span> <span class="title class_">Path</span>(args[<span class="number">1</span>]));</span><br><span class="line">        <span class="comment">//7ã€æäº¤job</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> job.waitForCompletion(<span class="literal">true</span>);</span><br><span class="line">        System.exit(result ? <span class="number">0</span> : <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WordCountMapper</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;LongWritable, Text, Text, IntWritable&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Text</span> <span class="variable">k</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Text</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">IntWritable</span> <span class="variable">v</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IntWritable</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">map</span><span class="params">(LongWritable key, Text value, Mapper&lt;LongWritable, Text, Text, IntWritable&gt;.Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> value.toString();</span><br><span class="line">        String[] words = line.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">            k.set(word);</span><br><span class="line">            context.write(k, v);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WordCountReducer</span> <span class="keyword">extends</span> <span class="title class_">Reducer</span>&lt;Text, IntWritable, Text, IntWritable&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">IntWritable</span> <span class="variable">v</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IntWritable</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">reduce</span><span class="params">(Text key, Iterable&lt;IntWritable&gt; values, Reducer&lt;Text, IntWritable, Text, IntWritable&gt;.Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (IntWritable value : values) &#123;</span><br><span class="line">            sum += value.get();</span><br><span class="line">        &#125;</span><br><span class="line">        v.set(sum);</span><br><span class="line">        context.write(key, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="07-15-Hiveæ•°æ®åˆ†æ"><a href="#07-15-Hiveæ•°æ®åˆ†æ" class="headerlink" title="07-15 Hiveæ•°æ®åˆ†æ"></a>07-15 Hiveæ•°æ®åˆ†æ</h2><p><strong>æ¦‚è¿°</strong></p><p>Hiveæ˜¯åŸºäºHadoopçš„æ•°æ®ä»“åº“åŸºç¡€è®¾æ–½ï¼Œå®ƒæä¾›äº†ä¸€ç§ç±»SQLçš„æŸ¥è¯¢è¯­è¨€ï¼ˆHiveQLï¼‰æ¥è¿›è¡Œæ•°æ®åˆ†æã€‚Hiveä½¿å¾—ä½¿ç”¨ç±»ä¼¼äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„æŸ¥è¯¢è¯­è¨€è¿›è¡Œå¤§è§„æ¨¡æ•°æ®å¤„ç†å’Œåˆ†æå˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨Hiveè¿›è¡Œæ•°æ®åˆ†æçš„ä¸€èˆ¬æ­¥éª¤ï¼š</p><ol><li><p>åˆ›å»ºæ•°æ®è¡¨ï¼šé¦–å…ˆï¼Œä½ éœ€è¦åœ¨Hiveä¸­åˆ›å»ºé€‚åˆä½ æ•°æ®çš„è¡¨ã€‚ä½¿ç”¨Hiveçš„æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰ï¼Œä½ å¯ä»¥å®šä¹‰è¡¨çš„ç»“æ„ã€å­—æ®µå’Œæ•°æ®ç±»å‹ã€‚ä½ å¯ä»¥é€‰æ‹©å°†æ•°æ®åŠ è½½åˆ°è¡¨ä¸­ï¼Œæˆ–è€…ä½¿ç”¨å¤–éƒ¨è¡¨å¼•ç”¨ç°æœ‰çš„æ•°æ®ã€‚</p></li><li><p>å¯¼å…¥æ•°æ®ï¼šå¦‚æœä½ çš„æ•°æ®å°šæœªåœ¨Hiveä¸­å¯ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨Hiveçš„æ•°æ®å¯¼å…¥åŠŸèƒ½å°†æ•°æ®åŠ è½½åˆ°è¡¨ä¸­ã€‚Hiveæ”¯æŒä»å„ç§æ•°æ®æºå¯¼å…¥æ•°æ®ï¼Œå¦‚æ–‡æœ¬æ–‡ä»¶ã€CSVæ–‡ä»¶ã€Parquetæ–‡ä»¶ã€HBaseç­‰ã€‚</p></li><li><p>æ‰§è¡ŒæŸ¥è¯¢ï¼šä½¿ç”¨HiveQLç¼–å†™æŸ¥è¯¢è¯­å¥æ¥æ‰§è¡Œæ•°æ®åˆ†ææ“ä½œã€‚HiveQLç±»ä¼¼äºä¼ ç»Ÿçš„SQLè¯­è¨€ï¼Œä½ å¯ä»¥ä½¿ç”¨SELECTè¯­å¥ã€WHEREå­å¥ã€GROUP BYå­å¥ã€JOINæ“ä½œç­‰æ¥è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€è¿‡æ»¤ã€èšåˆç­‰æ“ä½œã€‚</p></li><li><p>å­˜å‚¨ç»“æœï¼šæ ¹æ®éœ€è¦ï¼Œä½ å¯ä»¥å°†æŸ¥è¯¢ç»“æœå­˜å‚¨åˆ°æ–°çš„è¡¨ä¸­ï¼Œä»¥ä¾›åç»­åˆ†æä½¿ç”¨ã€‚Hiveæ”¯æŒå°†æŸ¥è¯¢ç»“æœå­˜å‚¨ä¸ºæ–°è¡¨æˆ–ä»¥å…¶ä»–æ ¼å¼å¯¼å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p></li><li><p>ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼šä¸ºäº†æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œä½ å¯ä»¥ä½¿ç”¨Hiveçš„ä¼˜åŒ–æŠ€æœ¯ï¼Œå¦‚åˆ†åŒºã€åˆ†æ¡¶ã€ç´¢å¼•ç­‰ã€‚è¿™äº›æŠ€æœ¯å¯ä»¥å‡å°‘æ•°æ®æ‰«æé‡å’Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p></li><li><p>å®šæœŸç»´æŠ¤å’Œç®¡ç†ï¼šä½œä¸ºæ•°æ®ä»“åº“ï¼Œä½ éœ€è¦å®šæœŸç»´æŠ¤å’Œç®¡ç†Hiveç¯å¢ƒã€‚è¿™åŒ…æ‹¬æ•°æ®æ¸…ç†ã€åˆ†åŒºç»´æŠ¤ã€è¡¨ç»“æ„å˜æ›´ç­‰ã€‚</p></li></ol><p>è¯·æ³¨æ„ï¼ŒHiveé€‚ç”¨äºæ‰¹å¤„ç†å’Œç¦»çº¿åˆ†æåœºæ™¯ï¼Œå¯¹äºå®æ—¶æŸ¥è¯¢å’Œä½å»¶è¿Ÿè¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»–æŠ€æœ¯æˆ–æ¡†æ¶ã€‚</p><p>ä½¿ç”¨Hiveè¿›è¡Œæ•°æ®åˆ†æéœ€è¦ä¸€å®šçš„å­¦ä¹ å’Œäº†è§£ï¼Œç‰¹åˆ«æ˜¯HiveQLæŸ¥è¯¢è¯­è¨€å’ŒHiveçš„è¡¨ç°è¡Œä¸ºã€‚æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚å’Œæ•°æ®æƒ…å†µï¼Œä½ å¯èƒ½éœ€è¦æ·±å…¥å­¦ä¹ å’Œä½¿ç”¨Hiveçš„é«˜çº§åŠŸèƒ½å’ŒæŠ€æœ¯ã€‚</p><h3 id="æ¡ˆä¾‹ï¼šæˆ¿å±‹æ•°æ®åˆ†æ"><a href="#æ¡ˆä¾‹ï¼šæˆ¿å±‹æ•°æ®åˆ†æ" class="headerlink" title="æ¡ˆä¾‹ï¼šæˆ¿å±‹æ•°æ®åˆ†æ"></a>æ¡ˆä¾‹ï¼šæˆ¿å±‹æ•°æ®åˆ†æ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"># æ ‡é¢˜                                           ,æˆ·å‹               ,åŒºå¿,å•†åœˆ,å°åŒº        ,æˆ¿ç§Ÿ,åœ°é“,äº®ç‚¹1,äº®ç‚¹2,äº®ç‚¹3</span><br><span class="line"># ç»¿åœ° ç²¾è£…å¥—äºŒ éšæ—¶çœ‹æˆ¿ å®å›¾æ‹æ‘„ ä¸´åƒç›› æ¬§å°š ä¼˜åš ç©¿å··å­,æ•´ç§Ÿ|2å®¤2å…|84ã¡|æœå—,æ­¦ä¾¯,ç°‡æ¡¥,ç»¿åœ°åœ£è·¯æ˜“åé‚¸,2400,,å®¶ç”µé½å…¨,,</span><br><span class="line"># è­¦å®˜å…¬å¯“ åˆç§Ÿ æ¬¡å§103å¹³ç±³2å®¤1å…1å«é™å¥³ç”Ÿ,åˆç§Ÿæ¬¡å§|2æˆ·åˆç§Ÿ|103ã¡,é«˜æ–°åŒº,ä¸­å’Œé•‡,è­¦å®˜å…¬å¯“,860,,äº¤é€šä¾¿åˆ©,åˆç§Ÿå¥³ç”Ÿ,</span><br><span class="line"># é«˜æ–°åŒºå¤§æºå˜‰ç¥¥ç‘åº­å—åŸ 35å¹³ç±³1å®¤1å…1å«,æ•´ç§Ÿ|1å®¤1å…|35ã¡|æœå—åŒ—,é«˜æ–°åŒº,å¤§æº,å˜‰ç¥¥ç‘åº­å—åŸ,2300,,é‡‡å…‰å¥½,,</span><br><span class="line"># å›½å…‰ä¸€ç¯å¤§å¦1å®¤1å…1å«,æ•´ç§Ÿ|1å®¤1å…|60ã¡|æœå—,æˆå,å»ºè®¾è·¯ä¼Šè—¤,å›½å…‰ä¸€ç¯å¤§å¦,1300,çº¢æ˜Ÿæ¡¥ç«™,éšæ—¶å…¥ä½,,</span><br><span class="line"># åŒæµè›Ÿé¾™æ¸¯ä¸–çºªåéƒ½é«˜å±‚ 93å¹³ç±³3å®¤1å…1å«,æ•´ç§Ÿ|3å®¤1å…|93ã¡|æœå—åŒ—,åŒæµ,è›Ÿé¾™æ¸¯,ä¸–çºªåéƒ½é«˜å±‚,1400,,å®¶ç”µé½å…¨,,</span><br><span class="line"># æµ£èŠ±è‹‘1å®¤1å…1å«,æ•´ç§Ÿ|1å®¤1å…|64ã¡|æœå—,é’ç¾Š,æœç”«è‰å ‚,æµ£èŠ±è‹‘,600,è‰å ‚åŒ—è·¯ç«™,éšæ—¶å…¥ä½,,</span><br><span class="line"># åå®‡é˜³å…‰æ°´å²¸ åˆç§Ÿ æ¬¡å§80å¹³ç±³2å®¤1å…1å«æ€§åˆ«ä¸é™,åˆç§Ÿæ¬¡å§|2æˆ·åˆç§Ÿ|80ã¡|æœå—,æˆå,é©·é©¬æ¡¥,åå®‡é˜³å…‰æ°´å²¸,700,æ˜­è§‰å¯ºå—è·¯ç«™,æ€§åˆ«ä¸é™,éšæ—¶å…¥ä½,</span><br><span class="line"># æ¶¦æ‰¬å·å¤§æ²³ç•”ä¸€æœŸ1å®¤1å…1å«,æ•´ç§Ÿ|1å®¤1å…|60ã¡|æœå—,åŒæµ,èˆªç©ºæ¸¯,æ¶¦æ‰¬å·å¤§æ²³ç•”ä¸€æœŸ,1300,,äº¤é€šä¾¿åˆ©,éšæ—¶å…¥ä½,</span><br><span class="line"># ä¸œç«‹å…‰åææ— æ•´ç§Ÿ 1å®¤1å…1å« 50å¹³ç±³(ä¸ªäºº),æ•´ç§Ÿ|1å®¤1å…|50ã¡|æœå—,é’ç¾Š,ä¸‡å®¶æ¹¾,ä¸œç«‹å…‰åææ—,1600,ä¸­åç«™,ç²¾è£…ä¿®,,</span><br><span class="line"></span><br><span class="line"># åœ¨hiveæ•°æ®åº“ä¸‹æ„å»ºæ•°æ®è¡¨house</span><br><span class="line">create table if not exists house</span><br><span class="line">(</span><br><span class="line">    title string comment &#x27;æ ‡é¢˜&#x27;,</span><br><span class="line">    layout string comment &#x27;æˆ·å‹&#x27;,</span><br><span class="line">    district string comment &#x27;åŒºå¿&#x27;,</span><br><span class="line">    area string comment &#x27;å•†åœˆ&#x27;,</span><br><span class="line">    estate string comment &#x27;æ¥¼ç›˜&#x27;,</span><br><span class="line">    rent int comment &#x27;æˆ¿ç§Ÿ&#x27;,</span><br><span class="line">    station string comment &#x27;åœ°é“&#x27;,</span><br><span class="line">    merit1 string comment &#x27;äº®ç‚¹1&#x27;,</span><br><span class="line">    merit2 string comment &#x27;äº®ç‚¹2&#x27;,</span><br><span class="line">    merit3 string comment &#x27;äº®ç‚¹3&#x27;</span><br><span class="line">) row format delimited</span><br><span class="line">fields terminated by &#x27;,&#x27;</span><br><span class="line">tblproperties(&#x27;skip.header.line.count&#x27;=&#x27;1&#x27;);</span><br><span class="line"></span><br><span class="line"># å¯¼å…¥æ•°æ®house.csv</span><br><span class="line">load data local inpath &#x27;/root/house/house.csv&#x27;overwrite into table house;</span><br><span class="line"></span><br><span class="line"># è®¡ç®—æˆ¿å±‹å‡ºç§Ÿé‡å‰åçš„æ¥¼ç›˜æ’åï¼Œç»“æœå†™å…¥æœ¬åœ°/college2020/01/000000_0 ï¼ˆäºŒç»´æ•°ç»„ï¼šæ¥¼ç›˜ æ•°é‡,ä¸è®¡å…¥ç©ºå€¼ï¼‰</span><br><span class="line">insert overwrite local directory &#x27;/college2020/01&#x27;</span><br><span class="line">row format delimited fields terminated by &#x27;\t&#x27;</span><br><span class="line">select estate, count(*) as row_count</span><br><span class="line">from house</span><br><span class="line">where estate is not null</span><br><span class="line">group by estate</span><br><span class="line">order by row_count desc, estate</span><br><span class="line">limit 10;</span><br><span class="line"></span><br><span class="line"># è®¡ç®—æˆ¿å±‹å‡ºç§Ÿé‡å‰åçš„å•†åœˆæ’åï¼Œç»“æœå†™å…¥æœ¬åœ°/college2020/02/000000_0 ï¼ˆäºŒç»´æ•°ç»„ï¼šå•†åœˆ æ•°é‡,ä¸è®¡å…¥ç©ºå€¼ï¼‰</span><br><span class="line">insert overwrite local directory &#x27;/college2020/02&#x27;</span><br><span class="line">row format delimited fields terminated by &#x27;\t&#x27;</span><br><span class="line">select area, count(*) as area_count</span><br><span class="line">from house</span><br><span class="line">where area is not null</span><br><span class="line">group by area</span><br><span class="line">order by area_count desc, area</span><br><span class="line">limit 10;</span><br><span class="line"></span><br><span class="line"># æ•´ç†åŒæµåŒºæ•´ç§Ÿä¸‰å®¤ä¸€å…ä¸åŒæ¥¼ç›˜ä»·æ ¼ï¼Œç»“æœå†™å…¥æœ¬åœ°/college2020/03/000000_0 (äºŒç»´æ•°ç»„ï¼šæ¥¼ç›˜ ä»·æ ¼ï¼Œä¸ºå‡ä»·é™åº)</span><br><span class="line">insert overwrite local directory &#x27;/college2020/03&#x27;</span><br><span class="line">row format delimited fields terminated by &#x27;\t&#x27;</span><br><span class="line">select estate, avg(rent) as avg_rent</span><br><span class="line">from house</span><br><span class="line">where district like &#x27;%åŒæµ%&#x27;</span><br><span class="line">  and split(layout, &#x27;\\|&#x27;)[0] = &#x27;æ•´ç§Ÿ&#x27;</span><br><span class="line">  and split(layout, &#x27;\\|&#x27;)[1] = &#x27;3å®¤1å…&#x27;</span><br><span class="line">group by estate</span><br><span class="line">order by avg_rent desc;</span><br><span class="line"></span><br><span class="line"># ç°æƒ³åœ¨ä¸­åç«™ä¸‡å®¶æ¹¾é™„è¿‘è¿›è¡Œåˆç§Ÿï¼Œè¯•ç»™å‡ºæˆ·å‹åŠæˆ¿ç§Ÿä¿¡æ¯è¿›è¡Œå‚è€ƒï¼Œç»“æœå†™å…¥æœ¬åœ°/college2020/04/000000_0 (äºŒç»´æ•°ç»„ï¼šæˆ·å‹ ä»·æ ¼é™åº)</span><br><span class="line">insert overwrite local directory &#x27;/college2020/04&#x27;</span><br><span class="line">row format delimited fields terminated by &#x27;\t&#x27;</span><br><span class="line">select layout, rent</span><br><span class="line">from house</span><br><span class="line">where station = &#x27;ä¸­åç«™&#x27;</span><br><span class="line">  and area = &#x27;ä¸‡å®¶æ¹¾&#x27;</span><br><span class="line">  and split(layout, &#x27;\\|&#x27;)[0] like &#x27;%åˆç§Ÿ%&#x27;</span><br><span class="line">order by rent desc;</span><br><span class="line"></span><br><span class="line"># ç°æƒ³åœ¨ä¿åˆ©æ˜Ÿåº§è¿›è¡Œç§Ÿæˆ¿ï¼Œé¢„ç®—ä¸º1000-1500ï¼Œè¯•ç»™å‡ºå‚è€ƒæˆ·å‹ä¿¡æ¯ï¼Œç»“æœå†™å…¥æœ¬åœ°/college2020/05/000000_0 (äºŒç»´æ•°ç»„ï¼šæˆ·å‹ ä»·æ ¼é™åº)</span><br><span class="line">insert overwrite local directory &#x27;/college2020/05&#x27;</span><br><span class="line">row format delimited fields terminated by &#x27;\t&#x27;</span><br><span class="line">select layout, rent</span><br><span class="line">from house</span><br><span class="line">where estate like &#x27;%ä¿åˆ©æ˜Ÿåº§%&#x27;</span><br><span class="line">  and rent between 1000 and 1500</span><br><span class="line">order by rent desc;</span><br><span class="line"></span><br><span class="line"># è¯•åˆ—å‡ºä¸åŒå•†åœˆæ•´ç§Ÿ1å®¤1å…çš„ä»·æ ¼TOP3ï¼Œç»“æœå†™å…¥æœ¬åœ°/college2020/06/000000_0 (äºŒç»´æ•°ç»„ï¼šå•†åœˆ ä»·æ ¼ï¼Œå‡å€¼é™åº)</span><br><span class="line">insert overwrite local directory &#x27;/college2020/06&#x27;</span><br><span class="line">row format delimited fields terminated by &#x27;\t&#x27;</span><br><span class="line">select area, avg(rent) as avg_rent</span><br><span class="line">from house</span><br><span class="line">where split(layout, &#x27;\\|&#x27;)[0] = &#x27;æ•´ç§Ÿ&#x27;</span><br><span class="line">  and split(layout, &#x27;\\|&#x27;)[1] = &#x27;1å®¤1å…&#x27;</span><br><span class="line">group by area</span><br><span class="line">order by avg_rent desc</span><br><span class="line">limit 3;</span><br><span class="line"></span><br><span class="line"># è¯•åˆ—å‡ºé«˜æ–°åŒºä¸åŒæˆ·å‹çš„æ•´ç§Ÿä»·æ ¼æ¸…å•ï¼Œç»“æœå†™å…¥æœ¬åœ°/college2020/07/000000_0 (äºŒç»´æ•°ç»„ç¤ºä¾‹ï¼š3å®¤2å… 4000ï¼Œå‡å€¼å‘ä¸‹å–æ•´é™åº)</span><br><span class="line">insert overwrite local directory &#x27;/college2020/07&#x27;</span><br><span class="line">row format delimited fields terminated by &#x27;\t&#x27;</span><br><span class="line">select split(layout, &#x27;\\|&#x27;)[1], floor(avg(rent)) as avg_rent</span><br><span class="line">from house</span><br><span class="line">where district like &#x27;%é«˜æ–°åŒº%&#x27;</span><br><span class="line">  and split(layout, &#x27;\\|&#x27;)[0] like &#x27;%æ•´ç§Ÿ%&#x27;</span><br><span class="line">group by split(layout, &#x27;\\|&#x27;)[1]</span><br><span class="line">order by avg_rent desc;</span><br><span class="line"></span><br><span class="line"># åˆå¹¶æˆ¿å±‹å‡ºç§Ÿäº®ç‚¹(ç‰¹ç‚¹),ç»™å‡ºå¸¸ç”¨äº®ç‚¹TOP5,ç»“æœå†™å…¥æœ¬åœ°/college2020/08/000000_0 (äºŒç»´æ•°ç»„:äº®ç‚¹ æ•°é‡ï¼Œä¸è®¡å…¥ç©ºå€¼ï¼Œé™åº)</span><br><span class="line">insert overwrite local directory &#x27;/college2020/08&#x27;</span><br><span class="line">row format delimited fields terminated by &#x27;\t&#x27;</span><br><span class="line">select merit, count(*) as merit_count</span><br><span class="line">from (select merit1 as merit</span><br><span class="line">      from house</span><br><span class="line">      union all</span><br><span class="line">      select merit2 as merit</span><br><span class="line">      from house</span><br><span class="line">      union all</span><br><span class="line">      select merit3 as merit</span><br><span class="line">      from house) t</span><br><span class="line">group by merit</span><br><span class="line">order by merit_count desc</span><br><span class="line">limit 5;</span><br></pre></td></tr></table></figure><h2 id="07-16-Sparkæ•°æ®åˆ†æ"><a href="#07-16-Sparkæ•°æ®åˆ†æ" class="headerlink" title="07-16 Sparkæ•°æ®åˆ†æ"></a>07-16 Sparkæ•°æ®åˆ†æ</h2><h3 id="æ¡ˆä¾‹ï¼šWordCount"><a href="#æ¡ˆä¾‹ï¼šWordCount" class="headerlink" title="æ¡ˆä¾‹ï¼šWordCount"></a>æ¡ˆä¾‹ï¼šWordCount</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.&#123;<span class="type">Level</span>, <span class="type">Logger</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="type">Logger</span></span><br><span class="line">      .getLogger(<span class="string">&quot;org.apache.spark&quot;</span>)</span><br><span class="line">      .setLevel(<span class="type">Level</span>.<span class="type">ERROR</span>)</span><br><span class="line">    <span class="comment">// æ–°å»ºSparkConfå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>()</span><br><span class="line">      .setAppName(<span class="string">&quot;WordCount&quot;</span>)</span><br><span class="line">      .setMaster(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">    <span class="comment">// åˆ›å»ºSparkContextå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">val</span> sparkContext = <span class="keyword">new</span> <span class="type">SparkContext</span>(config = conf)</span><br><span class="line">    <span class="comment">// å®šä¹‰æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">val</span> fileRDD = sparkContext.textFile(<span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/words.txt&quot;</span>)</span><br><span class="line">    <span class="comment">// æŒ‰è¡Œåˆ†å‰²å•è¯</span></span><br><span class="line">    <span class="keyword">var</span> wordCountResultRDD = fileRDD.mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.flatMap(_.split(<span class="string">&quot; &quot;</span>).map((_, <span class="number">1</span>)))</span><br><span class="line">    &#125;)</span><br><span class="line">      <span class="comment">// (word1,3) (word2, 2) (word3, 5)</span></span><br><span class="line">      .reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br><span class="line">    <span class="comment">// output</span></span><br><span class="line">    wordCountResultRDD.collect().foreach(println)</span><br><span class="line">    wordCountResultRDD.saveAsTextFile(<span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/WordCountResult&quot;</span>)</span><br><span class="line">    <span class="comment">// å…³é—­</span></span><br><span class="line">    sparkContext.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¡ˆä¾‹ï¼šæœç´¢å¼•æ“æ—¥å¿—åˆ†æ"><a href="#æ¡ˆä¾‹ï¼šæœç´¢å¼•æ“æ—¥å¿—åˆ†æ" class="headerlink" title="æ¡ˆä¾‹ï¼šæœç´¢å¼•æ“æ—¥å¿—åˆ†æ"></a>æ¡ˆä¾‹ï¼šæœç´¢å¼•æ“æ—¥å¿—åˆ†æ</h3><ol><li><p>å°è£…æ•°æ®</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">queryTime  è®¿é—®æ—¶é—´ï¼Œæ ¼å¼ä¸ºï¼šHH:mm:ss</span></span><br><span class="line"><span class="comment">userId     ç”¨æˆ·ID</span></span><br><span class="line"><span class="comment">queryWords æŸ¥è¯¢è¯</span></span><br><span class="line"><span class="comment">resultRank è¯¥URLåœ¨è¿”å›ç»“æœä¸­çš„æ’å</span></span><br><span class="line"><span class="comment">clickRank  ç”¨æˆ·ç‚¹å‡»çš„é¡ºåºå·</span></span><br><span class="line"><span class="comment">clickUrl   ç”¨æˆ·ç‚¹å‡»çš„URL</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">SogouRecord</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="class">                        queryTime:<span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                        userId:<span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                        queryWords:<span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                        resultRank:<span class="type">Int</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                        clickRank:<span class="type">Int</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                        clickUrl:<span class="type">String</span></span></span></span><br><span class="line"><span class="params"><span class="class">                      </span>)</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨case classåå°„ï¼Œé€‚ç”¨äºç®€å•åˆ†æ</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.hankcs.hanlp.<span class="type">HanLP</span></span><br><span class="line"><span class="keyword">import</span> com.hankcs.hanlp.seg.common.<span class="type">Term</span></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.&#123;<span class="type">Level</span>, <span class="type">Logger</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.<span class="type">StorageLevel</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SearchEngineLogAnalysis</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="type">Logger</span></span><br><span class="line">      .getLogger(<span class="string">&quot;org.apache.spark&quot;</span>)</span><br><span class="line">      .setLevel(<span class="type">Level</span>.<span class="type">ERROR</span>)</span><br><span class="line">    <span class="comment">// æ–°å»ºSparkConfå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>()</span><br><span class="line">      .setAppName(<span class="string">&quot;SearchEngineLogAnalysis&quot;</span>)</span><br><span class="line">      .setMaster(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">    <span class="comment">// åˆ›å»ºSparkContextå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">val</span> sparkContext = <span class="keyword">new</span> <span class="type">SparkContext</span>(config = conf)</span><br><span class="line">    <span class="keyword">val</span> file = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/reduced.txt&quot;</span></span><br><span class="line">    <span class="keyword">val</span> outputPath1 = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/queryWordsWordCountRDD&quot;</span></span><br><span class="line">    <span class="keyword">val</span> outputPath2 = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/userQueryAnalysisRDD&quot;</span></span><br><span class="line">    <span class="keyword">val</span> outputPath3 = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/timeQueryCountAnalysisRDD&quot;</span></span><br><span class="line">    <span class="keyword">val</span> rddSougouRecord = sparkContext.textFile(file)</span><br><span class="line">      <span class="comment">// è¿‡æ»¤ç©ºè¡Œæ•°æ®ã€è¿‡æ»¤å­—æ®µæ•°é‡ä¸ç­‰äº6</span></span><br><span class="line">      .filter(line =&gt; line != <span class="literal">null</span> &amp;&amp; line.trim.split(<span class="string">&quot;\\s+&quot;</span>).length == <span class="number">6</span>)</span><br><span class="line">      <span class="comment">// å°†RDD[String]=&gt;RDD[SogouRecord]</span></span><br><span class="line">      .mapPartitions(it =&gt; &#123;</span><br><span class="line">        it.map(line =&gt; &#123;</span><br><span class="line">          <span class="keyword">val</span> contents = line.trim.split(<span class="string">&quot;\\s+&quot;</span>)</span><br><span class="line">          <span class="comment">// æ³¨æ„å­—æ®µæ ¼å¼</span></span><br><span class="line">          <span class="type">SogouRecord</span>(</span><br><span class="line">            contents(<span class="number">0</span>),</span><br><span class="line">            contents(<span class="number">1</span>),</span><br><span class="line">            <span class="comment">// [360å®‰å…¨å«å£«]</span></span><br><span class="line">            contents(<span class="number">2</span>).replaceAll(<span class="string">&quot;[\\[|\\]]&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">            contents(<span class="number">3</span>).toInt,</span><br><span class="line">            contents(<span class="number">4</span>).toInt,</span><br><span class="line">            contents(<span class="number">5</span>)</span><br><span class="line">          )</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    rddSougouRecord.persist(<span class="type">StorageLevel</span>.<span class="type">MEMORY_AND_DISK</span>).count()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> queryWordsWordCountRDD = rddSougouRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.flatMap(record =&gt; &#123;</span><br><span class="line">        <span class="keyword">val</span> terms: util.<span class="type">List</span>[<span class="type">Term</span>] = <span class="type">HanLP</span>.segment(record.queryWords.trim)</span><br><span class="line">        <span class="keyword">import</span> scala.collection.<span class="type">JavaConverters</span>._</span><br><span class="line">        terms.asScala.map(_.word)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;).map((_, <span class="number">1</span>)).reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    queryWordsWordCountRDD.coalesce(numPartitions = <span class="number">1</span>).saveAsTextFile(outputPath1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> userQueryAnalysisRDD = rddSougouRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.map(record =&gt; &#123;</span><br><span class="line">        ((record.userId, record.queryWords), <span class="number">1</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;).reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br><span class="line">    userQueryAnalysisRDD.coalesce(<span class="number">1</span>).saveAsTextFile(outputPath2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> timeQueryCountAnalysisRDD = rddSougouRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.map(record =&gt; &#123;</span><br><span class="line">        (record.queryTime.substring(<span class="number">0</span>, <span class="number">2</span>), <span class="number">1</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;).reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br><span class="line">    timeQueryCountAnalysisRDD.coalesce(<span class="number">1</span>).saveAsTextFile(outputPath3)</span><br><span class="line"></span><br><span class="line">    rddSougouRecord.unpersist()</span><br><span class="line">    sparkContext.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨StructTypeç¼–ç¨‹ï¼Œé€‚ç”¨äºå¤æ‚åˆ†æ</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.&#123;<span class="type">Level</span>, <span class="type">Logger</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.&#123;<span class="type">Row</span>, <span class="type">SparkSession</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.&#123;<span class="type">IntegerType</span>, <span class="type">StringType</span>, <span class="type">StructField</span>, <span class="type">StructType</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SogouAnalysisSQL</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®è¾“å‡ºçš„æ—¥å¿—çº§åˆ«</span></span><br><span class="line">    <span class="type">Logger</span>.getLogger(<span class="string">&quot;org.apache.spark&quot;</span>).setLevel(<span class="type">Level</span>.<span class="type">ERROR</span>)</span><br><span class="line">    <span class="keyword">val</span> spark = <span class="type">SparkSession</span>.builder()</span><br><span class="line">      .appName(<span class="string">&quot;SogouAnalysisSQL&quot;</span>)</span><br><span class="line">      .master(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">      .getOrCreate()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> file = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/reduced.txt&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> fileRDD = spark.sparkContext.textFile(file)</span><br><span class="line">      .filter(line =&gt; line != <span class="literal">null</span> &amp;&amp; line.trim.split(<span class="string">&quot;\\s+&quot;</span>).length == <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> schema = <span class="type">StructType</span>(<span class="type">Array</span>(</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;queryTime&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;userId&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;queryWords&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;resultRank&quot;</span>, <span class="type">IntegerType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;clickRank&quot;</span>, <span class="type">IntegerType</span>, <span class="literal">false</span>),</span><br><span class="line">      <span class="type">StructField</span>(<span class="string">&quot;clickUrl&quot;</span>, <span class="type">StringType</span>, <span class="literal">false</span>)</span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RDD[String] =&gt; RDD[Row]</span></span><br><span class="line">    <span class="keyword">val</span> rddRow = fileRDD.mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.map(line =&gt; &#123;</span><br><span class="line">        <span class="keyword">val</span> contents = line.trim.split(<span class="string">&quot;\\s+&quot;</span>)</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="comment">// å°è£…çš„å­—æ®µçš„æ—¶å€™ï¼Œé¡ºåºè¦ä¸å®šä¹‰çš„schemaé¡ºåºå®Œå…¨ä¸€è‡´</span></span><br><span class="line">          <span class="type">Row</span>(</span><br><span class="line">            contents(<span class="number">0</span>),</span><br><span class="line">            contents(<span class="number">1</span>),</span><br><span class="line">            contents(<span class="number">2</span>).replaceAll(<span class="string">&quot;[\\[|\\]]&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">            contents(<span class="number">3</span>).toInt,</span><br><span class="line">            contents(<span class="number">4</span>).toInt,</span><br><span class="line">            contents(<span class="number">5</span>)</span><br><span class="line">          )</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">          <span class="keyword">case</span> e: <span class="type">Exception</span> =&gt; <span class="type">Row</span>(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;error&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;error&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RDD[Row] ==&gt; DataFrame</span></span><br><span class="line">    <span class="keyword">val</span> df = spark.createDataFrame(rddRow, schema)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†DataFrameæ³¨å†Œä¸ºä¸´æ—¶è§†å›¾</span></span><br><span class="line">    df.createOrReplaceTempView(<span class="string">&quot;sogou_view&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰æŸ¥è¯¢çš„sql</span></span><br><span class="line">    <span class="keyword">val</span> sql =</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        |select * from sogou_view where clickUrl like &#x27;www%&#x27;</span></span><br><span class="line"><span class="string">        |limit 3</span></span><br><span class="line"><span class="string">        |&quot;&quot;&quot;</span>.stripMargin</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œsql</span></span><br><span class="line">    <span class="keyword">val</span> sqlResult = spark.sql(sql)</span><br><span class="line">    <span class="comment">//    sqlResult.show(truncate = false)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> querySQL =</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        |select userId,queryWords,count(*) as query_count from sogou_view</span></span><br><span class="line"><span class="string">        |group by userId,queryWords</span></span><br><span class="line"><span class="string">        |order by userid,query_count desc</span></span><br><span class="line"><span class="string">        |&quot;&quot;&quot;</span>.stripMargin</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> queryResult = spark.sql(querySQL)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    queryResult.show(truncate = false)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> timeSQL =</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        |select substring(queryTime,0,5) as query_time,count(*) as query_count from sogou_view</span></span><br><span class="line"><span class="string">        |group by substring(queryTime,0,5)</span></span><br><span class="line"><span class="string">        |order by query_time,query_count desc</span></span><br><span class="line"><span class="string">        |&quot;&quot;&quot;</span>.stripMargin</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> timeResult = spark.sql(timeSQL)</span><br><span class="line">    timeResult.show(truncate = <span class="literal">false</span>)</span><br><span class="line">    timeResult.rdd.coalesce(<span class="number">1</span>).saveAsTextFile(<span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/timeResult&quot;</span>)</span><br><span class="line">    spark.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¤ºä¾‹æ•°æ®</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">00:00:002982199073774412[360å®‰å…¨å«å£«]8 3download.it.com.cn/softweb/software/firewall/antivirus/20067/17938.html</span><br><span class="line">00:00:0007594220010824798[å“„æŠ¢æ•‘ç¾ç‰©èµ„]1 1news.21cn.com/social/daqian/2008/05/29/4777194_1.shtml</span><br><span class="line">00:00:005228056822071097[75810éƒ¨é˜Ÿ]14 5www.greatoo.com/greatoo_cn/list.asp?link_id=276&amp;title=%BE%DE%C2%D6%D0%C2%CE%C5</span><br><span class="line">00:00:006140463203615646[ç»³è‰º]62 36www.jd-cd.com/jd_opus/xx/200607/706.html</span><br><span class="line">00:00:008561366108033201[æ±¶å·åœ°éœ‡åŸå› ]3 2www.big38.net/</span><br><span class="line">00:00:0023908140386148713[è«è¡·ä¸€æ˜¯çš„æ„æ€]1 2www.chinabaike.com/article/81/82/110/2007/2007020724490.html</span><br><span class="line">00:00:001797943298449139[æ˜Ÿæ¢¦ç¼˜å…¨é›†åœ¨çº¿è§‚çœ‹]8 5www.6wei.net/dianshiju/????\xa1\xe9|????do=index</span><br></pre></td></tr></table></figure></li></ol><h3 id="æ¡ˆä¾‹ï¼šæ‰‹æœºåŸºç«™æ—¥å¿—åˆ†æ"><a href="#æ¡ˆä¾‹ï¼šæ‰‹æœºåŸºç«™æ—¥å¿—åˆ†æ" class="headerlink" title="æ¡ˆä¾‹ï¼šæ‰‹æœºåŸºç«™æ—¥å¿—åˆ†æ"></a>æ¡ˆä¾‹ï¼šæ‰‹æœºåŸºç«™æ—¥å¿—åˆ†æ</h3><ol><li><p>ç¤ºä¾‹æ•°æ®<br><strong>åŸºç«™ä¿¡æ¯æ•°æ®ï¼ˆåŸºç«™ID ç»åº¦ çº¬åº¦ ä¿¡å·è¾å°„ç±»å‹ï¼‰</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9F36407EAD0629FC166F14DDE7970F68,116.304864,40.050645,6</span><br><span class="line">CC0710CC94ECC657A8561DE549D940E0,116.303955,40.041935,6</span><br><span class="line">16030401EAFB68F1E3CDF819735E1C66,116.296302,40.032296,6</span><br></pre></td></tr></table></figure><p><strong>ç”¨æˆ·ä¿¡æ¯æ•°æ®ï¼ˆæ‰‹æœºå· æ—¶é—´(æ—¶é—´æˆ³) åŸºç«™ID è¿æ¥çŠ¶æ€ï¼ˆâ€œ1â€ä¸ºè¿æ¥ï¼Œâ€œ0â€ä¸ºæ–­å¼€ï¼‰ï¼‰</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">13554756349,20211202082000,16030401EAFB68F1E3CDF819735E1C66,1</span><br><span class="line">13236723613,20211202082500,16030401EAFB68F1E3CDF819735E1C66,1</span><br><span class="line">13554756349,20211202180000,16030401EAFB68F1E3CDF819735E1C66,0</span><br><span class="line">13236723613,20211202180000,16030401EAFB68F1E3CDF819735E1C66,0</span><br><span class="line">13236723613,20211202075000,9F36407EAD0629FC166F14DDE7970F68,1</span><br><span class="line">13554756349,20211202075100,9F36407EAD0629FC166F14DDE7970F68,1</span><br><span class="line">13236723613,20211202081000,9F36407EAD0629FC166F14DDE7970F68,0</span><br><span class="line">13554756349,20211202081300,9F36407EAD0629FC166F14DDE7970F68,0</span><br><span class="line">13554756349,20211202175000,9F36407EAD0629FC166F14DDE7970F68,1</span><br><span class="line">13236723613,20211202182000,9F36407EAD0629FC166F14DDE7970F68,1</span><br><span class="line">13554756349,20211202220000,9F36407EAD0629FC166F14DDE7970F68,0</span><br><span class="line">13236723613,20211202230000,9F36407EAD0629FC166F14DDE7970F68,0</span><br><span class="line">13236723613,20211202081100,CC0710CC94ECC657A8561DE549D940E0,1</span><br><span class="line">13554756349,20211202081200,CC0710CC94ECC657A8561DE549D940E0,1</span><br><span class="line">13554756349,20211202081900,CC0710CC94ECC657A8561DE549D940E0,0</span><br><span class="line">13236723613,20211202082000,CC0710CC94ECC657A8561DE549D940E0,0</span><br><span class="line">13554756349,20211202171000,CC0710CC94ECC657A8561DE549D940E0,1</span><br><span class="line">13554756349,20211202171600,CC0710CC94ECC657A8561DE549D940E0,0</span><br><span class="line">13236723613,20211202180500,CC0710CC94ECC657A8561DE549D940E0,1</span><br><span class="line">13236723613,20211202181500,CC0710CC94ECC657A8561DE549D940E0,0</span><br></pre></td></tr></table></figure></li><li><p>case Class</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseStation</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="class">                        baseStationId: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                        longitude: <span class="type">Double</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                        latitude: <span class="type">Double</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                        signalRadiationType: <span class="type">Int</span></span></span></span><br><span class="line"><span class="params"><span class="class">                      </span>)</span></span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">UserRecord</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="class">                       phone: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                       time: <span class="type">Long</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                       baseStationId: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="params"><span class="class">                       connectionStatus: <span class="type">Int</span></span></span></span><br><span class="line"><span class="params"><span class="class">                     </span>)</span></span><br></pre></td></tr></table></figure></li><li><p>main</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.log4j.&#123;<span class="type">Level</span>, <span class="type">Logger</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.<span class="type">StorageLevel</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">éœ€æ±‚ä¸€ï¼šè¦æ±‚ä½¿ç”¨Sparkcoreå¯¹åˆ†ææ•°æ®è¿›è¡Œåˆ†å‰²å¤„ç†è·å–ä¸šåŠ¡éœ€æ±‚æ‰€ä½¿ç”¨åˆ°çš„æ•°æ®ï¼Œæ ¹æ®ä¸åŒç”¨æˆ·åœ¨åŸºç«™åœç•™çš„æ—¶é•¿æ•°æ®ç»Ÿè®¡å‡ºç”¨æˆ·ä¸åœç•™åœ°ç‚¹çš„å…³ç³»ã€‚</span></span><br><span class="line"><span class="comment">ï¼ˆ1ï¼‰æ ¹æ®ç”¨æˆ·ä¿¡æ¯ä¸­&quot;æ‰‹æœºå·,åŸºç«™ID&quot;åšä¸ºå”¯ä¸€æ ‡è¯†ï¼Œå’Œæ—¶é—´æˆ³æ„æˆæ–°çš„å…ƒç»„--&gt;((æ‰‹æœºå·, ç«™ç‚¹), æ—¶é—´æˆ³)</span></span><br><span class="line"><span class="comment">ï¼ˆ2ï¼‰ä»¥ï¼ˆæ‰‹æœºå·ï¼ŒåŸºç«™IDï¼‰ä½œä¸ºkeyï¼Œé€šè¿‡reduceByKeyç®—å­è¿›è¡Œèšåˆï¼Œè®¡ç®—å‡ºåœ¨åŸºç«™çš„åœç•™æ—¶é—´ï¼Œæ„æˆæ–°çš„æ•°æ®ç»“æ„ï¼Œä»¥ä¾¿å’Œåæ ‡æ•°æ®è¿›è¡Œjoinï¼Œç”Ÿæˆå…ƒç»„--&gt;(åŸºç«™ID,(æ‰‹æœºå·,åœç•™æ—¶é—´))</span></span><br><span class="line"><span class="comment">ï¼ˆ3ï¼‰å°†åŸºç«™åæ ‡æ•°æ®ä¿¡æ¯è¿›è¡Œæ‹†åˆ†ï¼Œé€šè¿‡mapï¼Œæ„å»ºæˆåŒ…å«åŸºç«™IDã€ç»çº¬åº¦çš„å…ƒç»„ --&gt;(åŸºç«™ID,(ç»åº¦,çº¬åº¦))</span></span><br><span class="line"><span class="comment">ï¼ˆ4ï¼‰å°†2ã€3ç»“æœæ ¹æ®åŸºç«™IDè¿›è¡Œjoinæ“ä½œï¼Œæ„æˆæ–°çš„æ•°æ®ç±»å‹--&gt;(æ‰‹æœºå·,åŸºç«™ID,åœç•™æ—¶é—´,(ç»åº¦,çº¬åº¦))</span></span><br><span class="line"><span class="comment">ï¼ˆ5ï¼‰æŒ‰æ‰‹æœºå·è¿›è¡Œåˆ†ç»„--&gt;(æ‰‹æœºå·,(æ‰‹æœºå·,åŸºç«™ID,åœç•™æ—¶é—´,(ç»åº¦,çº¬åº¦)))</span></span><br><span class="line"><span class="comment">ï¼ˆ6ï¼‰å¯¹æ—¶é—´è¿›è¡Œæ’åºå–å‡ºåœç•™æ—¶é—´æœ€é•¿çš„åŸºç«™IDï¼ˆtop1ï¼‰ï¼Œåˆ™å¯èƒ½æ˜¯å±…ä½åœ°ç‚¹å’Œå·¥ä½œåœ°ç‚¹ã€‚</span></span><br><span class="line"><span class="comment">ï¼ˆ7ï¼‰æ ¼å¼ç»“æœï¼š(æ‰‹æœºå·,List(æ‰‹æœºå·,åœç•™æ—¶é—´,åŸºç«™ID,(ç»åº¦,çº¬åº¦)))</span></span><br><span class="line"><span class="comment">ï¼ˆ8ï¼‰æ³¨æ„ï¼šæŒ‰ç…§æ‰‹æœºå·è¿›è¡Œåˆ†ç»„æ—¶ï¼Œè¿ç®—ç»“æœæŒ‰ç…§é¡ºåºä¸ºpart-00000,part-00001...</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MobileLocation</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="type">Logger</span></span><br><span class="line">      .getLogger(<span class="string">&quot;org.apache.spark&quot;</span>)</span><br><span class="line">      .setLevel(<span class="type">Level</span>.<span class="type">ERROR</span>)</span><br><span class="line">    <span class="keyword">val</span> sparkConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">&quot;MobileLocation&quot;</span>).setMaster(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> sparkContext = <span class="keyword">new</span> <span class="type">SparkContext</span>(config = sparkConf)</span><br><span class="line">    <span class="keyword">val</span> infoFile = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/mobilebasestationloganalysis/info.txt&quot;</span></span><br><span class="line">    <span class="keyword">val</span> userFile = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/mobilebasestationloganalysis/user.txt&quot;</span></span><br><span class="line">    <span class="keyword">val</span> outputPath = <span class="string">&quot;/Volumes/KeQing/Documents/IntelliJ IDEA Ultimate/SparkTraning/src/main/resources/output/mobilebasestationloganalysis&quot;</span></span><br><span class="line">    <span class="keyword">val</span> rddUserRecord = sparkContext.textFile(userFile)</span><br><span class="line">      .filter(line =&gt; line != <span class="literal">null</span>)</span><br><span class="line">      .mapPartitions(it =&gt; &#123;</span><br><span class="line">        it.map(line =&gt; &#123;</span><br><span class="line">          <span class="keyword">val</span> contents = line.trim.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">          <span class="comment">// æ³¨æ„å­—æ®µæ ¼å¼</span></span><br><span class="line">          <span class="type">UserRecord</span>(</span><br><span class="line">            contents(<span class="number">0</span>),</span><br><span class="line">            contents(<span class="number">1</span>).toLong,</span><br><span class="line">            contents(<span class="number">2</span>),</span><br><span class="line">            contents(<span class="number">3</span>).toInt</span><br><span class="line">          )</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">    rddUserRecord.persist(<span class="type">StorageLevel</span>.<span class="type">MEMORY_AND_DISK</span>).count()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> basePhoneTime = rddUserRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.map(record =&gt; &#123;</span><br><span class="line">        ((record.phone, record.baseStationId, record.connectionStatus), record.time)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;).reduceByKey(_ + _).sortBy(_._2, ascending = <span class="literal">false</span>)</span><br><span class="line">      .mapPartitions(line =&gt; &#123;</span><br><span class="line">        line.map(</span><br><span class="line">          line =&gt; &#123;</span><br><span class="line">            ((line._1._1, line._1._2), line._2)</span><br><span class="line">          &#125;</span><br><span class="line">        )</span><br><span class="line">      &#125;).reduceByKey(_ - _)</span><br><span class="line">      .mapPartitions(it =&gt; &#123;</span><br><span class="line">        it.map(line =&gt; &#123;</span><br><span class="line">          (line._1._2, (line._1._1, line._2))</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;).sortBy(_._2._2, ascending = <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> rddInfoRecord = sparkContext.textFile(infoFile)</span><br><span class="line">      .filter(line =&gt; line != <span class="literal">null</span>)</span><br><span class="line">      .mapPartitions(it =&gt; &#123;</span><br><span class="line">        it.map(line =&gt; &#123;</span><br><span class="line">          <span class="keyword">val</span> contents = line.trim.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">          <span class="type">BaseStation</span>(</span><br><span class="line">            contents(<span class="number">0</span>),</span><br><span class="line">            contents(<span class="number">1</span>).toDouble,</span><br><span class="line">            contents(<span class="number">2</span>).toDouble,</span><br><span class="line">            contents(<span class="number">3</span>).toInt</span><br><span class="line">          )</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> baseLongLat = rddInfoRecord.mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.map(record =&gt; &#123;</span><br><span class="line">        (record.baseStationId, (record.longitude, record.latitude))</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// (æ‰‹æœºå·,åŸºç«™ID,åœç•™æ—¶é—´,(ç»åº¦,çº¬åº¦))</span></span><br><span class="line">    <span class="keyword">val</span> basePhoneTimeLongLat = basePhoneTime.join(baseLongLat).mapPartitions(it =&gt; &#123;</span><br><span class="line">      it.map(line =&gt; &#123;</span><br><span class="line">        (line._2._1._1, line._1, line._2._1._2, (line._2._2._1, line._2._2._2))</span><br><span class="line">      &#125;)</span><br><span class="line">        <span class="comment">// (æ‰‹æœºå·,(æ‰‹æœºå·,åŸºç«™ID,åœç•™æ—¶é—´,(ç»åº¦,çº¬åº¦))</span></span><br><span class="line">        .map(line =&gt; &#123;</span><br><span class="line">          (line._1, (line._2, line._3, line._4))</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;).groupByKey()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‡è®¾dataRDDæ˜¯ä¸€ä¸ªRDDï¼ŒåŒ…å«äº†é”®å€¼å¯¹ï¼ˆæ‰‹æœºå·ï¼Œæ•°æ®è®°å½•è¿­ä»£å™¨ï¼‰</span></span><br><span class="line">    <span class="comment">// (æ‰‹æœºå·,åœç•™æ—¶é—´,åŸºç«™ID,(ç»åº¦,çº¬åº¦)</span></span><br><span class="line">    <span class="keyword">val</span> dataRDD: <span class="type">RDD</span>[(<span class="type">String</span>, <span class="type">Iterable</span>[(<span class="type">String</span>, <span class="type">Long</span>, (<span class="type">Double</span>, <span class="type">Double</span>))])] = basePhoneTimeLongLat</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„RDDï¼Œå¹¶æŒ‰ç…§åœç•™æ—¶é—´è¿›è¡Œæ’åº</span></span><br><span class="line">    <span class="keyword">val</span> resultRDD: <span class="type">RDD</span>[(<span class="type">String</span>, <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Long</span>, <span class="type">String</span>, (<span class="type">Double</span>, <span class="type">Double</span>))])] = dataRDD.map &#123; <span class="keyword">case</span> (phoneNumber, records) =&gt;</span><br><span class="line">      <span class="keyword">val</span> resultData = records.map(record =&gt; (phoneNumber, record._2, record._1, (record._3._1, record._3._2))).toList</span><br><span class="line">      <span class="keyword">val</span> sortedResultData = resultData.sortBy(_._2)(<span class="type">Ordering</span>.<span class="type">Long</span>.reverse) <span class="comment">// æŒ‰ç…§åœç•™æ—¶é—´é™åºæ’åº</span></span><br><span class="line">      (phoneNumber, sortedResultData)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ¯ä¸ªæ‰‹æœºå·çš„top1åŸºç«™ID</span></span><br><span class="line">    <span class="keyword">val</span> top1BaseStationRDD: <span class="type">RDD</span>[(<span class="type">String</span>, <span class="type">String</span>)] = resultRDD.map &#123; <span class="keyword">case</span> (phoneNumber, sortedResultData) =&gt;</span><br><span class="line">      <span class="keyword">if</span> (sortedResultData.nonEmpty) &#123;</span><br><span class="line">        <span class="keyword">val</span> top1BaseStationID = sortedResultData.head._3</span><br><span class="line">        (phoneNumber, top1BaseStationID)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        (phoneNumber, <span class="string">&quot;Unknown&quot;</span>) <span class="comment">// è‹¥æ²¡æœ‰åœç•™è®°å½•ï¼Œåˆ™æ ‡è®°ä¸ºUnknown</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¾“å‡ºç»“æœ</span></span><br><span class="line">    top1BaseStationRDD.foreach &#123; <span class="keyword">case</span> (phoneNumber, top1BaseStationID) =&gt;</span><br><span class="line">      println(<span class="string">s&quot;æ‰‹æœºå· <span class="subst">$phoneNumber</span> çš„åœç•™æ—¶é—´æœ€é•¿çš„åŸºç«™IDä¸º <span class="subst">$top1BaseStationID</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    resultRDD.saveAsTextFile(outputPath)</span><br><span class="line">    sparkContext.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="å­¦ä¹ ç›®æ ‡è¯„ä¼°"><a href="#å­¦ä¹ ç›®æ ‡è¯„ä¼°" class="headerlink" title="å­¦ä¹ ç›®æ ‡è¯„ä¼°"></a>å­¦ä¹ ç›®æ ‡è¯„ä¼°</h2><p>åœ¨æœ¬æ¬¡åŸ¹è®­å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬æ˜ç¡®äº†å­¦ä¹ ç›®æ ‡ï¼Œå¹¶ä¸å‚ä¸äººå‘˜å…±äº«ï¼Œä»¥ä¾¿è®©ä»–ä»¬äº†è§£åŸ¹è®­çš„é¢„æœŸæˆæœã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡æœ¬æ¬¡åŸ¹è®­ï¼Œå‚ä¸äººå‘˜èƒ½å¤Ÿï¼š</p><ol><li>ç†è§£ MapReduce çš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†ï¼ŒæŒæ¡åˆ†å¸ƒå¼è®¡ç®—çš„åŸºæœ¬æ€æƒ³ã€‚</li><li>æŒæ¡ Hive çš„ä½¿ç”¨ï¼Œäº†è§£å¦‚ä½•åˆ©ç”¨ Hive è¿›è¡Œæ•°æ®ä»“åº“å’Œæ•°æ®åˆ†æã€‚</li><li>ç†Ÿæ‚‰ Spark çš„æ ¸å¿ƒæ¦‚å¿µå’Œç¼–ç¨‹æ¨¡å‹ï¼Œèƒ½å¤Ÿä½¿ç”¨ Spark è¿›è¡Œå¤§è§„æ¨¡æ•°æ®å¤„ç†å’Œåˆ†æã€‚</li></ol><h2 id="åŸ¹è®­æˆæœ"><a href="#åŸ¹è®­æˆæœ" class="headerlink" title="åŸ¹è®­æˆæœ"></a>åŸ¹è®­æˆæœ</h2><p>é€šè¿‡æœ¬æ¬¡åŸ¹è®­ï¼Œå‚ä¸äººå‘˜åœ¨ä»¥ä¸‹æ–¹é¢å–å¾—äº†æ˜¾è‘—çš„è¿›æ­¥ï¼š</p><h3 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h3><ul><li>å‚ä¸äººå‘˜æ·±å…¥ç†è§£äº† MapReduce çš„åŸºæœ¬åŸç†å’Œåˆ†å¸ƒå¼è®¡ç®—çš„æ¦‚å¿µã€‚</li><li>ä»–ä»¬å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ Hadoop ç”Ÿæ€ç³»ç»Ÿæ¥å®ç° MapReduce ä»»åŠ¡ï¼Œå¹¶åœ¨å®é™…ç»ƒä¹ ä¸­ä½“éªŒäº†åˆ†å¸ƒå¼è®¡ç®—çš„ä¼˜åŠ¿å’ŒæŒ‘æˆ˜ã€‚</li></ul><h3 id="Hive-1"><a href="#Hive-1" class="headerlink" title="Hive"></a>Hive</h3><ul><li>å‚ä¸äººå‘˜æŒæ¡äº† Hive çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬åˆ›å»ºè¡¨ã€æ•°æ®å¯¼å…¥å¯¼å‡ºã€æŸ¥è¯¢æ•°æ®ç­‰æ“ä½œã€‚</li><li>ä»–ä»¬äº†è§£äº† Hive çš„æ•°æ®ä»“åº“å’Œæ•°æ®åˆ†æèƒ½åŠ›ï¼Œèƒ½å¤Ÿä½¿ç”¨ Hive è¿›è¡Œå¤æ‚çš„æ•°æ®æŸ¥è¯¢å’Œæ•°æ®å¤„ç†ã€‚</li></ul><h3 id="Spark-1"><a href="#Spark-1" class="headerlink" title="Spark"></a>Spark</h3><ul><li>å‚ä¸äººå‘˜ç†Ÿæ‚‰äº† Spark çš„æ ¸å¿ƒæ¦‚å¿µï¼ŒåŒ…æ‹¬ RDDã€DataFrame å’Œ Spark SQL ç­‰ã€‚</li><li>ä»–ä»¬å­¦ä¼šäº†ä½¿ç”¨ Spark è¿›è¡Œå¤§è§„æ¨¡æ•°æ®å¤„ç†å’Œåˆ†æï¼Œå¹¶åœ¨å®é™…å®éªŒä¸­ä½“éªŒäº† Spark çš„é«˜æ€§èƒ½å’Œçµæ´»æ€§ã€‚</li></ul><h3 id="ä¸“ä¸šæˆé•¿"><a href="#ä¸“ä¸šæˆé•¿" class="headerlink" title="ä¸“ä¸šæˆé•¿"></a>ä¸“ä¸šæˆé•¿</h3><ul><li>é€šè¿‡æœ¬æ¬¡åŸ¹è®­ï¼Œå‚ä¸äººå‘˜åœ¨å¤§æ•°æ®å¤„ç†å’Œåˆ†æé¢†åŸŸè·å¾—äº†å®é™…åŠ¨æ‰‹ç»éªŒï¼Œæå‡äº†ç›¸å…³æŠ€èƒ½ã€‚</li><li>åŸ¹è®­ä¸­çš„æ¡ˆä¾‹å’Œå®è·µè®©ä»–ä»¬å¯¹å¤§æ•°æ®å¤„ç†æŠ€æœ¯æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ï¼Œä¸ºæœªæ¥åœ¨æ•°æ®é¢†åŸŸçš„å·¥ä½œæä¾›äº†åšå®çš„åŸºç¡€ã€‚</li></ul><p>æ€»ç»“ï¼š<br>æœ¬æ¬¡ MapReduceã€Hive å’Œ Spark çš„åŸ¹è®­ä¸ºå‚ä¸äººå‘˜æä¾›äº†ä¸€æ¬¡é«˜è´¨é‡çš„å­¦ä¹ æœºä¼šã€‚å‚ä¸äººå‘˜åœ¨ä¸“ä¸šæŠ€èƒ½å’ŒçŸ¥è¯†æ°´å¹³æ–¹é¢å–å¾—äº†æ˜¾è‘—è¿›æ­¥ï¼Œä»–ä»¬å¯¹å¤§æ•°æ®å¤„ç†å’Œåˆ†ææœ‰äº†æ›´æ·±å…¥çš„äº†è§£ã€‚é€šè¿‡æŒç»­æ”¹è¿›åŸ¹è®­å†…å®¹å’Œåé¦ˆæœºåˆ¶ï¼Œæˆ‘ä»¬å°†ç»§ç»­æé«˜åŸ¹è®­çš„è´¨é‡ï¼Œå¸®åŠ©æ›´å¤šçš„äººåœ¨å¤§æ•°æ®é¢†åŸŸå–å¾—æˆåŠŸã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scala </tag>
            
            <tag> Spark </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Hive </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æ ‘</title>
      <link href="/2023/07/10/%E6%88%91%E7%9A%84%E6%A0%91/"/>
      <url>/2023/07/10/%E6%88%91%E7%9A%84%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="æˆ‘çš„æ ‘"><a href="#æˆ‘çš„æ ‘" class="headerlink" title="æˆ‘çš„æ ‘"></a>æˆ‘çš„æ ‘</h1><p>åœ¨ä¸€ä¸ªæ˜¥æ—¥çš„æ¸…æ™¨ï¼Œæˆ‘äº²æ‰‹ç§ä¸‹äº†ä¸€é¢—å…«é‡æ¨±æ ‘ã€‚è¿™ä¸‰ä¸ªæœˆçš„æ—¶å…‰é‡Œï¼Œæˆ‘ç›®ç¹ç€å±±æ³‰é€æ¸æˆé•¿ï¼Œä¸€ç‰‡ç‰‡å«©ç»¿çš„å¶å­åœ¨ææ¡ä¸Šèˆ’å±•å¼€æ¥ã€‚å±±æ³‰ä»¥å±±æ³‰çš„ç”Ÿå‘½åŠ›å’Œç¾ä¸½ï¼Œä¸ºè¿™ä¸ªå­£èŠ‚æ³¨å…¥äº†ä¸€ä»½æ–°çš„ç”Ÿæœºã€‚</p><p>åœ¨é‚£ä¸ªæ˜¥å¤©çš„æ—¶åˆ»ï¼Œå½“æˆ‘å°†é‚£é¢—å¨‡å°çš„å…«é‡æ¨±æ ‘æ’å…¥åœŸå£¤ä¸­æ—¶ï¼Œæˆ‘å¿ƒä¸­å……æ»¡äº†æœŸå¾…å’Œå¸Œæœ›ã€‚éšç€æ˜¥é£çš„å¹æ‹‚ï¼Œå±±æ³‰å¼€å§‹å±•ç¤ºå‡ºå±±æ³‰çš„æˆé•¿ä¹‹ç¾ã€‚æ¸æ¸åœ°ï¼Œæ–°å¶åœ¨å±±æ³‰çš„ææ¡ä¸Šé•¿å‡ºï¼Œè¿æ¥ç€æ¸©æš–çš„é˜³å…‰ã€‚è¿™äº›å«©ç»¿çš„å¶å­å¦‚åŒå°å°çš„æ¸©æš–æ‹¥æŠ±ï¼Œä¸ºæ•´ä¸ªæ ‘å† å¢æ·»äº†ä¸€æŠ¹ç”Ÿæœºã€‚</p><p>è¿™ä¸‰ä¸ªæœˆçš„æ—¶å…‰é‡Œï¼Œæˆ‘æ³¨è§†ç€å±±æ³‰çš„æ¯ä¸€ä¸ªç»†å¾®çš„å˜åŒ–ã€‚æ¯ä¸€ç‰‡æ–°å¶çš„å±•å¼€éƒ½ä»¿ä½›æ˜¯ä¸€æ¬¡å°å°çš„å¥‡è¿¹ï¼Œä¸ºè¿™é¢—å°æ ‘æ³¨å…¥äº†æ›´å¤šçš„æ´»åŠ›å’Œé­…åŠ›ã€‚æˆ‘çœ‹ç€å±±æ³‰çš„å¶å­æ¸æ¸æˆç†Ÿï¼Œå˜å¾—æ›´åŠ æµ“ç»¿ï¼Œä»¿ä½›æ˜¯å¤§è‡ªç„¶å¯¹æˆ‘å¿è€å’Œè€å¿ƒçš„å›æŠ¥ã€‚</p><p>è¿™æ£µå…«é‡æ¨±æ ‘åœ¨æ˜¥å¤©çš„æ€€æŠ±ä¸­æˆé•¿ï¼Œå±±æ³‰ä»¥å±±æ³‰é‚£å©€å¨œå¤šå§¿çš„ææ¡å’Œå«©ç»¿çš„å¶å­ï¼Œå‘ç€é˜³å…‰ä¼¸å±•ç€ã€‚å±±æ³‰å‘Šè¯‰æˆ‘ï¼Œç”Ÿå‘½çš„åŠ›é‡æ˜¯å¦‚æ­¤çš„é¡½å¼ºå’Œç¾å¥½ã€‚å³ä½¿åœ¨æœ€åˆçš„æ—¶åˆ»ï¼Œå±±æ³‰å¯èƒ½åªæ˜¯ä¸€é¢—å°æ ‘ï¼Œä½†å±±æ³‰æ‰€æ•£å‘å‡ºçš„ç”Ÿæœºå’Œæˆé•¿çš„éŸµå¾‹ï¼Œå·²ç»åœ¨è¿™ç‰‡åœŸåœ°ä¸Šç•™ä¸‹äº†ç‹¬ç‰¹çš„è¶³è¿¹ã€‚</p><p>æ¯ä¸€æ¬¡æˆ‘é™é™åœ°ç«™åœ¨å±±æ³‰çš„æ—è¾¹ï¼Œæ„Ÿå—ç€æ˜¥é£æ‹‚é¢ï¼Œçœ‹ç€å±±æ³‰çš„æˆé•¿ï¼Œæˆ‘éƒ½æ„Ÿå—åˆ°äº†å¸Œæœ›å’Œç”Ÿå‘½çš„åŠ›é‡ã€‚è¿™é¢—å…«é‡æ¨±æ ‘ï¼Œå±±æ³‰ä¸ä»…ä»…æ˜¯ä¸€æ£µæ ‘ï¼Œæ›´æ˜¯ä¸€ä»½ç¾å¥½å’Œå‹‡æ°”çš„è±¡å¾ã€‚</p><div class="timeline"><div class="timenode"><div class="meta"><p><p>2023-03-10</p></p></div><div class="body"><p>å®ƒå«åšå±±æ³‰ã€‚</p><img src="https://s1.imagehub.cc/images/2023/07/10/79cc2969d2443f727ca4edd8cc007d.jpeg" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/07/10/79cc2969d2443f727ca4edd8cc007d.jpeg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="" width="300px"></div></div><div class="timenode"><div class="meta"><p><p>2023-04-29</p></p></div><div class="body"><p>æˆ‘ç›¼ç€å±±æ³‰èƒ½å¿«å¿«é•¿å¤§ã€‚</p><img src="https://s1.imagehub.cc/images/2023/07/10/IMG_8004.jpeg" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/07/10/IMG_8004.jpeg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="" width="300px"></div></div><div class="timenode"><div class="meta"><p><p>2023-05-09</p></p></div><div class="body"><p>ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼Œç»ˆäºçœ‹åˆ°äº†æ–°å¶ã€‚</p><img src="https://s1.imagehub.cc/images/2023/07/10/IMG_8085.jpeg" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/07/10/IMG_8085.jpeg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="" width="300px"></div></div><div class="timenode"><div class="meta"><p><p>2023-05-14</p></p></div><div class="body"><p>ç»å¸¸åœ¨å›å®¿èˆçš„æ—¶å€™å»çœ‹å±±æ³‰ã€‚</p><img src="https://s1.imagehub.cc/images/2023/07/10/IMG_8122.jpeg" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/07/10/IMG_8122.jpeg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="" width="300px"></div></div><div class="timenode"><div class="meta"><p><p>2023-05-23</p></p></div><div class="body"><p>ç»å¸¸åœ¨å±±æ³‰æ—è¾¹å–é…’ã€èšé¤</p><img src="https://s1.imagehub.cc/images/2023/07/10/IMG_8222.jpeg" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/07/10/IMG_8222.jpeg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="" width="300px"></div></div><div class="timenode"><div class="meta"><p><p>2023-06-30</p></p></div><div class="body"><p>ç«¯åˆèŠ‚å›æ¥ä¹‹åï¼Œç¬¬ä¸€åœºé›¨ã€‚</p><p>æˆ‘æŠŠæˆ‘çš„çº¢ç»³ï¼ŒæŒ‚åœ¨äº†å±±æ³‰çš„èº«ä¸Š</p><img src="https://s1.imagehub.cc/images/2023/07/10/IMG_8556.jpeg" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/07/10/IMG_8556.jpeg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="" width="300px"></div></div><div class="timenode"><div class="meta"><p><p>2023-07-10</p></p></div><div class="body"><p>å¿«æ”¾å‡äº†ã€‚</p><img src="https://s1.imagehub.cc/images/2023/07/10/IMG_8596.jpeg" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/07/10/IMG_8596.jpeg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="" width="300px"></div></div><div class="timenode"><div class="meta"><p><p>2023-09-01</p></p></div><div class="body"><p>å®ƒå—ä¼¤äº†ï¼Œæˆ‘å¾ˆç€æ€¥</p><img src="https://s1.imagehub.cc/images/2023/09/01/IMG_9026.jpeg" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/09/01/IMG_9026.jpeg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="" width="300px"></div></div><div class="timenode"><div class="meta"><p><p>2023-??-??</p></p></div><div class="body"></div></div></div>]]></content>
      
      
      <categories>
          
          <category> Pointless small talk </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GPT APIä½¿ç”¨æ•™ç¨‹</title>
      <link href="/2023/07/09/GPT-API%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"/>
      <url>/2023/07/09/GPT-API%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯GPT"><a href="#ä»€ä¹ˆæ˜¯GPT" class="headerlink" title="ä»€ä¹ˆæ˜¯GPT"></a>ä»€ä¹ˆæ˜¯GPT</h1><p>ChatGPTæ˜¯OpenAIå¼€å‘çš„ä¸€ç§åŸºäºè¯­è¨€æ¨¡å‹çš„èŠå¤©ä»£ç†å·¥å…·ã€‚å®ƒå»ºç«‹åœ¨å¼ºå¤§çš„GPTï¼ˆGenerative Pre-trained<br>Transformerï¼‰æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥å¯¹è‡ªç„¶è¯­è¨€è¿›è¡Œç†è§£å’Œç”Ÿæˆã€‚</p><p>GPTæ˜¯ä¸€ç§åŸºäºTransformeræ¶æ„çš„è¯­è¨€æ¨¡å‹ï¼Œé€šè¿‡å¤§è§„æ¨¡çš„é¢„è®­ç»ƒæ¥å­¦ä¹ è¯­è¨€çš„æ½œåœ¨æ¨¡å¼å’Œç»“æ„ã€‚åœ¨é¢„è®­ç»ƒé˜¶æ®µï¼Œæ¨¡å‹ä½¿ç”¨äº†å¤§é‡çš„å…¬å¼€å¯ç”¨çš„äº’è”ç½‘æ–‡æœ¬æ•°æ®ï¼Œä»è€Œè·å¾—äº†ä¸°å¯Œçš„è¯­è¨€çŸ¥è¯†ã€‚åœ¨é¢„è®­ç»ƒä¹‹åï¼Œé€šè¿‡å¾®è°ƒå’Œç‰¹å®šä»»åŠ¡çš„è®­ç»ƒï¼Œæ¨¡å‹å¯ä»¥ç”¨äºå„ç§è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ï¼ŒåŒ…æ‹¬å¯¹è¯ç”Ÿæˆã€‚</p><p>ChatGPTæ˜¯GPTæ¨¡å‹åœ¨å¯¹è¯ç”Ÿæˆä»»åŠ¡ä¸Šçš„åº”ç”¨ã€‚å®ƒç»è¿‡è®­ç»ƒï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿç†è§£å’Œç”Ÿæˆè¿è´¯çš„å¯¹è¯ã€‚æ‚¨å¯ä»¥å‘ChatGPTæä¾›ä¸€ä¸ªå¯¹è¯å†å²æˆ–é—®é¢˜ï¼Œå¹¶ä»æ¨¡å‹ä¸­è·å¾—ç›¸åº”çš„å›å¤ã€‚ChatGPTå¯ä»¥ç”¨äºæ„å»ºæ™ºèƒ½èŠå¤©æœºå™¨äººã€å®¢æœä»£ç†ã€è¯­è¨€ç¿»è¯‘ç­‰åº”ç”¨ã€‚</p><p>OpenAIé€šè¿‡å¯¹å¤§è§„æ¨¡æ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼Œä½¿ChatGPTèƒ½å¤Ÿç”Ÿæˆæµç•…ã€æœ‰é€»è¾‘çš„å›å¤ï¼Œå¹¶ä¸”å…·å¤‡ä¸€å®šçš„ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿå¯èƒ½å­˜åœ¨ç”Ÿæˆä¸å‡†ç¡®ã€å«æœ‰åè§æˆ–ä¸æ°å½“å›ç­”çš„æƒ…å†µï¼Œå› æ­¤åœ¨ä½¿ç”¨ChatGPTæ—¶éœ€è¦æ³¨æ„å¯¹è¾“å‡ºè¿›è¡Œç­›é€‰å’Œå®¡æŸ¥ï¼Œä»¥ç¡®ä¿ç”Ÿæˆçš„å›å¤ç¬¦åˆæœŸæœ›å’Œè¦æ±‚ã€‚</p><h2 id="GPT-3-5ä¸GPT-4çš„åŒºåˆ«"><a href="#GPT-3-5ä¸GPT-4çš„åŒºåˆ«" class="headerlink" title="GPT-3.5ä¸GPT-4çš„åŒºåˆ«"></a>GPT-3.5ä¸GPT-4çš„åŒºåˆ«</h2><p>æˆ‘å¹¶æ²¡æœ‰å®é™…çš„æ¯”è¾ƒè¿‡GPT-3.5ä¸GPT-4ï¼Œä½†å¯ä»¥çœ‹åˆ°çš„æ˜¯GPT-4æ–°å¢äº†æ’ä»¶æ”¯æŒï¼Œæ”¯æŒè”ç½‘ï¼Œä¹Ÿå°±æ˜¯GPT-4å¯ä»¥è¿›è¡ŒåŠè‡ªä¸»å­¦ä¹ ï¼Œæˆ‘åœ¨å‰ä¸€æ®µæ—¶é—´å°±çœ‹åˆ°äº†GPT-4çš„ä¸€ä¸ªæ’ä»¶ï¼Œå£°ç§°å¯ä»¥å¿«é€Ÿçš„å¸®ä½ è¯»è®ºæ–‡ï¼Œç”šè‡³ä½ å¯ä»¥ä¸ç»™å‡ºè®ºæ–‡ï¼Œè€Œæ˜¯æ ¹æ®GPT-4è”ç½‘çš„è®ºæ–‡åº“ä¸­æŸ¥æ‰¾ï¼Œä½ åªéœ€è¦ç»™å‡ºåå­—å³å¯ã€‚</p><p>ç½‘é¡µç‰ˆGPT-3.5æ˜¯å…è´¹çš„ï¼Œè€ŒGPT-4æ˜¯æ”¶è´¹çš„ï¼Œæœˆè´¹ç‡ä¸º$20ã€‚</p><p>å¦å¤–ï¼Œåœ¨APIä»·æ ¼æ–¹é¢ä¹Ÿæœ‰ä¸€å®šå·®åˆ«ã€‚è¿™ä¸ªå¯ä»¥çœ‹æˆ‘å‰æ®µæ—¶é—´å‘çš„tokensã€‚</p><div class="tagLink"><a class="link-card" title="About-GPT-Token" href="/2023/07/07/About-GPT-Token/"><span class="link-card-backdrop" style="background-image: url(https://s1.imagehub.cc/images/2023/07/08/2023-07-08-20.32.05.png)"></span><div class="left"><img src="https://s1.imagehub.cc/images/2023/07/08/2023-07-08-20.32.05.png" class="lazyload placeholder" data-srcset="https://s1.imagehub.cc/images/2023/07/08/2023-07-08-20.32.05.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">About-GPT-Token</p><p class="url">/2023/07/07/About-GPT-Token/</p></div></a></div><h2 id="æ¨¡å‹ä½¿ç”¨æ–¹æ³•ä¸ä¸»è§‚è¯„ä»·"><a href="#æ¨¡å‹ä½¿ç”¨æ–¹æ³•ä¸ä¸»è§‚è¯„ä»·" class="headerlink" title="æ¨¡å‹ä½¿ç”¨æ–¹æ³•ä¸ä¸»è§‚è¯„ä»·"></a>æ¨¡å‹ä½¿ç”¨æ–¹æ³•ä¸ä¸»è§‚è¯„ä»·</h2><p>OpenAIå³ä»Šä¸ºæ­¢å‘å¸ƒäº†éå¸¸å¤šçš„æ¨¡å‹ï¼Œä»Šå¤©æ—©äº›çš„æ—¶å€™æˆ‘æ¯ä¸ªéƒ½å»ä½¿ç”¨äº†ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥å°±è¯´ä¸€è¯´æˆ‘çš„ä¸»è§‚æ„Ÿå—ä¸ä½¿ç”¨æ–¹æ³•å’Œä½“éªŒã€‚</p><p>è¯¦ç»†çš„ä½¿ç”¨æ•™ç¨‹åœ¨OpenAIå®˜ç½‘æœ‰è®²ã€‚</p><div class="tagLink"><a class="link-card" title="API REFERENCE" href="https://platform.openai.com/docs/api-reference/introduction"><span class="link-card-backdrop" style="background-image: url(https://yt3.googleusercontent.com/UqT_vCkJIn1P2fH1pchr6lbe3xeEekY61h4bUpJkVuityqKOEtUYcNy3pLiJ5OKdj4uKA81FWE8=s176-c-k-c0x00ffffff-no-rj)"></span><div class="left"><img src="https://yt3.googleusercontent.com/UqT_vCkJIn1P2fH1pchr6lbe3xeEekY61h4bUpJkVuityqKOEtUYcNy3pLiJ5OKdj4uKA81FWE8=s176-c-k-c0x00ffffff-no-rj" class="lazyload placeholder" data-srcset="https://yt3.googleusercontent.com/UqT_vCkJIn1P2fH1pchr6lbe3xeEekY61h4bUpJkVuityqKOEtUYcNy3pLiJ5OKdj4uKA81FWE8=s176-c-k-c0x00ffffff-no-rj" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">API REFERENCE</p><p class="url">https://platform.openai.com/docs/api-reference/introduction</p></div></a></div><h3 id="GPT"><a href="#GPT" class="headerlink" title="GPT"></a>GPT</h3><h4 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h4><p>GPTæ˜¯OpenAIå‘å¸ƒçš„æœ€ä¸ºå¹¿ä¸ºäººçŸ¥çš„æ¨¡å‹ï¼Œä¹Ÿæ˜¯æˆ‘ä¸ªäººè®¤ä¸ºæœ€å¼ºå¤§çš„æ¨¡å‹ã€‚æ ¹æ®OpenAIå®˜æ–¹ç½‘ç«™çš„ä»‹ç»ï¼Œå¦‚æœè¦ä½¿ç”¨GPTçš„APIï¼Œæœ€ä½³é€‰æ‹©æ˜¯ä½¿ç”¨Node.jså’ŒPythonã€‚æˆ‘æ›¾å°è¯•è¿‡ä½¿ç”¨Node.jsã€Pythonã€Javaå’ŒCurlè¿™å‡ ç§æ–¹å¼ï¼Œæ€»çš„æ¥è¯´å®ƒä»¬ä¹‹é—´å·®åˆ«ä¸å¤§ã€‚</p><p>æˆ‘é€šå¸¸æœ€å¸¸ä½¿ç”¨çš„æ˜¯<code>gpt-3.5-turbo</code>æ¨¡å‹ï¼Œä¸è¿‡å¬è¯´è¿™ä¸ªæ¨¡å‹å°†åœ¨å¹´åº•ä¸‹æ¶ï¼Œå¹¶è¢«æ–°ä¸€ä»£çš„3.5æ¨¡å‹æ‰€å–ä»£ã€‚å¯¹äºè¿™ä¸ªæ¶ˆæ¯ï¼Œæˆ‘å¹¶æ²¡æœ‰æ·±å…¥äº†è§£ã€‚</p><p>èµ·åˆï¼Œæˆ‘å¹¶ä¸æ“…é•¿è¿›è¡Œå¤šè½®å¯¹è¯ï¼Œæ„Ÿè§‰è‡ªå·±å¾ˆå¯ç¬‘ã€‚ä½†ä»Šå¤©æˆ‘å­¦äº†ä¸€ä¸‹ï¼Œå‘ç°å…¶å®éå¸¸ç®€å•ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹å‘é€è¯·æ±‚çš„ç»„æˆéƒ¨åˆ†ï¼ˆä»¥Curlä¸ºä¾‹ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">curl https://api.openai.com/v1/chat/completions \</span><br><span class="line">  -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">  -H &quot;Authorization: Bearer $OPENAI_API_KEY&quot; \</span><br><span class="line">  -d &#x27;&#123;</span><br><span class="line">     &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,</span><br><span class="line">     &quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Say this is a test!&quot;&#125;],</span><br><span class="line">     &quot;temperature&quot;: 0.7</span><br><span class="line">   &#125;&#x27;</span><br></pre></td></tr></table></figure><p>APIæ¥å£ä¸ºï¼š<a href="https://api.openai.com/v1/chat/completions">https://api.openai.com/v1/chat/completions</a></p><p><code>-H</code>éƒ¨åˆ†åŒ…å«äº†ä¸¤ä¸ªå¤´ä¿¡æ¯å‚æ•°ï¼Œåˆ†åˆ«æ˜¯<code>Content-Type</code>å’Œ<code>Authorization</code>ï¼Œç”¨äºæŒ‡å®šè¯·æ±‚ä½“çš„ç±»å‹å’Œæˆæƒä»¤ç‰Œã€‚éœ€è¦åœ¨å®˜ç½‘ç”³è¯·è·å–OPENAI_API_KEYï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸ºå®é™…çš„å¯†é’¥ã€‚</p><p><code>-d</code>éƒ¨åˆ†æ˜¯è¯·æ±‚ä½“ï¼Œæ ¹æ®å‰æ–‡ä¸­<code>Content-Type</code>ä¸º<code>application/json</code>ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†éœ€è¦ç¬¦åˆJSONæ ¼å¼ã€‚</p><p>å…¶ä¸­ï¼Œ<code>model</code>æŒ‡å®šäº†è¦ä½¿ç”¨çš„æ¨¡å‹ï¼Œ<code>messages</code>æ˜¯å¯¹è¯å†…å®¹ï¼Œæ¯ä¸ªæ¶ˆæ¯åŒ…å«ä¸€ä¸ª<code>role</code>è§’è‰²å’Œ<code>content</code>å†…å®¹ï¼Œç”¨æˆ·é»˜è®¤è§’è‰²ä¸º<code>user</code><br>ã€‚è¿™ä¸¤ä¸ªå‚æ•°æ˜¯å¿…éœ€çš„ã€‚</p><p>å“åº”ç¤ºä¾‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chatcmpl-abc123&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;object&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chat.completion&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;created&quot;</span><span class="punctuation">:</span> <span class="number">1677858242</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gpt-3.5-turbo-0301&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;usage&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;prompt_tokens&quot;</span><span class="punctuation">:</span> <span class="number">13</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;completion_tokens&quot;</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;total_tokens&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;choices&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assistant&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\n\nThis is a test!&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;finish_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stop&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯<code>choices</code>ä¸­çš„<code>message</code>å†…å®¹ï¼Œå…¶ä¸­<code>role</code>ä¸ºassistantï¼Œè¡¨ç¤ºè¿™æ˜¯AIåŠ©æ‰‹çš„å›å¤ï¼Œ<code>content</code>åˆ™æ˜¯AIåŠ©æ‰‹çš„å›å¤å†…å®¹ã€‚</p><p>ä»¥ä¸Šæ˜¯åŸºæœ¬çš„è¯·æ±‚å’Œå“åº”å†…å®¹ã€‚å®ç°å¤šè½®å¯¹è¯ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€å°†å‰é¢çš„å¯¹è¯å†…å®¹å…¨éƒ¨ä¼ å›å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">curl https://api.openai.com/v1/chat/completions \</span><br><span class="line">  -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">  -H &quot;Authorization: Bearer $OPENAI_API_KEY&quot; \</span><br><span class="line">  -d &#x27;&#123;</span><br><span class="line">      &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,</span><br><span class="line">      &quot;messages&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;role&quot;: &quot;system&quot;,</span><br><span class="line">          &quot;content&quot;: &quot;You are a helpful assistant.&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">          &quot;content&quot;: &quot;What is 1+1?&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">          &quot;content&quot;: &quot;1+1 equals 2.&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">          &quot;content&quot;: &quot;And if we add 3?&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">          &quot;content&quot;: &quot;1 + 1 + 3 = 5. So, 1+1 plus 3 equals 5.&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">          &quot;content&quot;: &quot;What if we multiply it by 5?&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;&#x27;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå‡ºç°äº†å¤šä¸ª<code>assistant</code>å’Œ<code>user</code>ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>system</code>è§’è‰²ã€‚ä¸ªäººè€Œè¨€ï¼Œæˆ‘å°†<code>user</code>è§†ä¸ºè‡ªå·±ï¼Œè€Œå…¶ä»–è§’è‰²éƒ½æ˜¯AIåŠ©æ‰‹ã€‚è¿™æ®µå¯¹è¯å¯ä»¥çœ‹ä½œæ˜¯å¤šè½®å¯¹è¯çš„ç¤ºä¾‹ã€‚</p><p>é€šè¿‡ä»¥ä¸Šæ–¹æ³•ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†æœ€åŸºæœ¬çš„å¤šè½®å¯¹è¯è¯·æ±‚æ–¹å¼ã€‚</p><h4 id="è¯„ä»·"><a href="#è¯„ä»·" class="headerlink" title="è¯„ä»·"></a>è¯„ä»·</h4><p>GPT-3.5æ¨¡å‹æ˜¯OpenAIå‘å¸ƒçš„ä¸€æ¬¾å¼ºå¤§çš„è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„ä¼˜ç‚¹ï¼š</p><ol><li><p><strong>è¯­è¨€ç”Ÿæˆèƒ½åŠ›å¼ºå¤§</strong>ï¼šGPT-3.5æ¨¡å‹åœ¨è¯­è¨€ç”Ÿæˆä»»åŠ¡ä¸Šè¡¨ç°å‡ºè‰²ï¼Œèƒ½å¤Ÿç”Ÿæˆæµç•…ã€å‡†ç¡®ã€è¿è´¯çš„æ–‡æœ¬ã€‚å®ƒèƒ½å¤Ÿæ ¹æ®ä¸Šä¸‹æ–‡ç†è§£ç”¨æˆ·çš„æ„å›¾å¹¶ç”Ÿæˆç›¸å…³å›å¤ï¼Œå…·å¤‡ä¸€å®šçš„è¯­ä¹‰ç†è§£å’Œé€»è¾‘æ¨ç†èƒ½åŠ›ã€‚</p></li><li><p><strong>å¤šé¢†åŸŸé€‚ç”¨</strong>ï¼šGPT-3.5æ¨¡å‹åœ¨å¤šä¸ªé¢†åŸŸéƒ½æœ‰åº”ç”¨æ½œåŠ›ï¼Œå¯ä»¥ç”¨äºç¼–å†™æ–‡ç« ã€å›ç­”é—®é¢˜ã€æä¾›å»ºè®®ã€åˆ›ä½œæ•…äº‹ç­‰ã€‚æ— è®ºæ˜¯æŠ€æœ¯é¢†åŸŸã€å•†ä¸šåº”ç”¨è¿˜æ˜¯åˆ›æ„åˆ›ä½œï¼Œè¯¥æ¨¡å‹éƒ½å¯ä»¥æä¾›æœ‰ç”¨çš„ä¿¡æ¯å’Œå¸®åŠ©ã€‚</p></li><li><p><strong>çµæ´»çš„å¯¹è¯äº¤äº’</strong>ï¼šGPT-3.5æ¨¡å‹æ”¯æŒå¤šè½®å¯¹è¯ï¼Œå¯ä»¥è¿›è¡Œå¤æ‚çš„å¯¹è¯äº¤äº’ã€‚å®ƒèƒ½å¤Ÿè®°ä½å…ˆå‰çš„å¯¹è¯å†å²å¹¶æ ¹æ®ä¸Šä¸‹æ–‡è¿›è¡Œå›å¤ï¼Œä½¿å¾—å¯¹è¯æ›´åŠ è¿è´¯å’Œä¸€è‡´ã€‚</p></li><li><p><strong>å¯å®šåˆ¶æ€§å¼º</strong>ï¼šGPT-3.5æ¨¡å‹å…è®¸ç”¨æˆ·æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œå®šåˆ¶ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šä¸åŒçš„è§’è‰²ã€æ·»åŠ ç³»ç»Ÿçº§æŒ‡ç¤ºç­‰æ–¹å¼æ¥æ§åˆ¶æ¨¡å‹çš„è¡Œä¸ºã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—æ¨¡å‹å¯ä»¥æ ¹æ®ç‰¹å®šçš„åº”ç”¨åœºæ™¯è¿›è¡Œå®šåˆ¶åŒ–çš„ä½¿ç”¨ã€‚</p></li></ol><p>å°½ç®¡GPT-3.5æ¨¡å‹å…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›è€ƒè™‘å› ç´ ï¼š</p><ol><li><p><strong>æ¨¡å‹è®­ç»ƒæˆæœ¬é«˜</strong>ï¼šç”±äºGPT-3.5æ¨¡å‹çš„å¤æ‚æ€§ï¼Œå…¶è®­ç»ƒå’Œéƒ¨ç½²æˆæœ¬ç›¸å¯¹è¾ƒé«˜ï¼Œå¯èƒ½å¯¹æŸäº›ä¸ªäººå¼€å‘è€…æˆ–å°å‹å›¢é˜Ÿè€Œè¨€ä¸å¤ªå¯æ‰¿å—ã€‚</p></li><li><p><strong>å¯¹å¤§é‡æ•°æ®çš„ä¾èµ–</strong>ï¼šGPT-3.5æ¨¡å‹çš„æ€§èƒ½ä¸å…¶æ‰€è®­ç»ƒçš„å¤§è§„æ¨¡æ•°æ®é›†å¯†åˆ‡ç›¸å…³ã€‚åœ¨æŸäº›é¢†åŸŸæˆ–ç‰¹å®šä»»åŠ¡ä¸Šï¼Œæ¨¡å‹å¯èƒ½éœ€è¦æ›´å¤šçš„é¢†åŸŸä¸“ä¸šçŸ¥è¯†æˆ–æ•°æ®æ¥å–å¾—æœ€ä½³æ•ˆæœã€‚</p></li><li><p><strong>ç¼ºä¹å¸¸è¯†å’Œå®é™…çŸ¥è¯†</strong>ï¼šå°½ç®¡GPT-3.5æ¨¡å‹åœ¨ç”Ÿæˆæ–‡æœ¬æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å®é™…çš„å¸¸è¯†å’ŒèƒŒæ™¯çŸ¥è¯†ã€‚åœ¨å¤„ç†éœ€è¦å…·å¤‡å®é™…çŸ¥è¯†æˆ–å¤æ‚æ¨ç†çš„ä»»åŠ¡æ—¶ï¼Œæ¨¡å‹å¯èƒ½ä¼šå‡ºç°ä¸€äº›ä¸å‡†ç¡®æˆ–ä¸åˆç†çš„å›å¤ã€‚</p></li></ol><blockquote><p>å½“ç„¶è¿™æ˜¯ChatGPTè‡ªå·±å¯¹è‡ªå·±çš„è¯„ä»·ã€‚</p></blockquote><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><p>OpenAIæ¨å‡ºçš„Imageæ¨¡å‹è¿˜æ˜¯æ»¡åƒåœ¾çš„ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯æˆ‘è‡ªå·±çš„é—®é¢˜è¿˜æ˜¯ä»€ä¹ˆã€‚</p><blockquote><p>è¿™ä¸ªImageå›¾åƒç”Ÿæˆæ¨¡å‹å¹¶ä¸æ˜¯DALLÂ·Eæ¨¡å‹</p></blockquote><h4 id="ä½¿ç”¨æ–¹æ³•-1"><a href="#ä½¿ç”¨æ–¹æ³•-1" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">curl https://api.openai.com/v1/images/generations \</span><br><span class="line">  -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">  -H &quot;Authorization: Bearer $OPENAI_API_KEY&quot; \</span><br><span class="line">  -d &#x27;&#123;</span><br><span class="line">    &quot;prompt&quot;: &quot;A cute baby sea otter&quot;,</span><br><span class="line">    &quot;n&quot;: 2,</span><br><span class="line">    &quot;size&quot;: &quot;1024x1024&quot;</span><br><span class="line">  &#125;&#x27;</span><br></pre></td></tr></table></figure><p><code>prompt</code>æ˜¯æç¤ºè¯ï¼Œä½¿ç”¨è¿‡<a href="https://www.midjourney.com/">midjourney</a>æˆ–è€…å…¶ä»–çš„å›¾åƒç”Ÿæˆæ¨¡å‹åº”è¯¥æ»¡ç†Ÿæ‚‰äº†ï¼Œå¦‚ä½•ä½¿ç”¨æˆ‘ä¸å¤šè¯´äº†</p><p><code>n</code>ç”Ÿæˆå›¾åƒçš„æ•°é‡</p><p><code>size</code>ç”Ÿæˆå›¾åƒçš„å¤§å°ï¼Œç°åœ¨å¯é€‰ä¸º<code>256x256</code>, <code>512x512</code>, <code>1024x1024</code></p><h4 id="è¯„ä»·-1"><a href="#è¯„ä»·-1" class="headerlink" title="è¯„ä»·"></a>è¯„ä»·</h4><p>å¹¶ä¸æ¨èä½¿ç”¨ï¼Œè¿™é‡Œæ¨èmidjourneyã€DALLÂ·Eã€Diffusion Modelè¿™ä¸‰ä¸ªåº”è¯¥æ˜¯ä¸»æµçš„äº†</p><p>ä»¥è‡³äºåæ¥çš„å›¾åƒç¼–è¾‘ã€å›¾åƒå˜åŒ–çš„apiæˆ‘éƒ½ä¸æƒ³å¤šè¯´äº†ï¼Œè¿™é‡Œå°±ç»™å‡ºä½¿ç”¨æ–¹æ³•ç¤ºä¾‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl https://api.openai.com/v1/images/edits \</span><br><span class="line">  -H &quot;Authorization: Bearer $OPENAI_API_KEY&quot; \</span><br><span class="line">  -F image=&quot;@otter.png&quot; \</span><br><span class="line">  -F mask=&quot;@mask.png&quot; \</span><br><span class="line">  -F prompt=&quot;A cute baby sea otter wearing a beret&quot; \</span><br><span class="line">  -F n=2 \</span><br><span class="line">  -F size=&quot;1024x1024&quot;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl https://api.openai.com/v1/images/variations \</span><br><span class="line">  -H &quot;Authorization: Bearer $OPENAI_API_KEY&quot; \</span><br><span class="line">  -F image=&quot;@otter.png&quot; \</span><br><span class="line">  -F n=2 \</span><br><span class="line">  -F size=&quot;1024x1024&quot;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æœ‰è¯¦ç»†å‚æ•°</p><h3 id="Audio"><a href="#Audio" class="headerlink" title="Audio"></a>Audio</h3><p>è¯­éŸ³è½¬æ–‡å­—è¿™ä¸ªæ¨¡å‹æˆ‘è§‰å¾—è¿˜æ˜¯è›®ä½¿ç”¨çš„</p><h4 id="ä½¿ç”¨æ–¹æ³•-2"><a href="#ä½¿ç”¨æ–¹æ³•-2" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl https://api.openai.com/v1/audio/transcriptions \</span><br><span class="line">  -H &quot;Authorization: Bearer $OPENAI_API_KEY&quot; \</span><br><span class="line">  -H &quot;Content-Type: multipart/form-data&quot; \</span><br><span class="line">  -F file=&quot;@/path/to/file/audio.mp3&quot; \</span><br><span class="line">  -F model=&quot;whisper-1&quot;</span><br></pre></td></tr></table></figure><p><code>-F</code>ä»£è¡¨ä½¿ç”¨form-dataï¼Œè¿™å°±å¯¹åº”äº†ä¸Šæ–‡ä¸­<code>Content-Type: multipart/form-data</code></p><p><code>file</code>éœ€è¦ä¸Šä¼ çš„éŸ³é¢‘æ–‡ä»¶ï¼Œæ”¯æŒçš„æ ¼å¼æœ‰<code>mp3</code>, <code>mp4</code>, <code>mpeg</code>, <code>mpga</code>, <code>m4a</code>, <code>wav</code>, <code>webm</code></p><p><code>model</code>ä½¿ç”¨çš„æ¨¡å‹ï¼Œç›®å‰ï¼Œç”¨äºéŸ³é¢‘çš„æ¨¡å‹ä»…æœ‰<code>whisper-1</code></p><h4 id="è¯„ä»·-2"><a href="#è¯„ä»·-2" class="headerlink" title="è¯„ä»·"></a>è¯„ä»·</h4><p>ä¸ªäººä½¿ç”¨çš„æ¬¡æ•°ä¸å¤šï¼Œä½†æ€»ä½“æ„Ÿå—æ˜¯ï¼Œè›®å¥½ç”¨çš„ã€‚</p><h2 id="èµ„æ–™åˆ†äº«"><a href="#èµ„æ–™åˆ†äº«" class="headerlink" title="èµ„æ–™åˆ†äº«"></a>èµ„æ–™åˆ†äº«</h2><p>å…³äºOpenAIçš„è®ºæ–‡ï¼Œå®˜ç½‘å·²ç»å‘è¡¨äº†è¿æ¥<a href="https://openai.com/research">åœ¨è¿™é‡Œ</a></p><h2 id="æœ€åçš„è¯"><a href="#æœ€åçš„è¯" class="headerlink" title="æœ€åçš„è¯"></a>æœ€åçš„è¯</h2><p>ç›®å‰æˆ‘è¿˜å¹¶æ²¡æœ‰å»ç ”ç©¶å¾®è°ƒæ¨¡å‹ï¼Œä¸è¿‡åœ¨ä»Šåè¯´ä¸å®šä¼šæ„Ÿå…´è¶£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Computer Technology </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœŸæœ«å¤ä¹ -ä¹ è¿‘å¹³æ€æƒ³å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»æ¦‚è®º</title>
      <link href="/2023/07/08/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0-%E4%B9%A0%E8%BF%91%E5%B9%B3%E6%80%9D%E6%83%B3%E5%92%8C%E4%B8%AD%E5%9B%BD%E7%89%B9%E8%89%B2%E7%A4%BE%E4%BC%9A%E4%B8%BB%E4%B9%89%E7%90%86%E8%AE%BA%E4%BD%93%E7%B3%BB%E6%A6%82%E8%AE%BA/"/>
      <url>/2023/07/08/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0-%E4%B9%A0%E8%BF%91%E5%B9%B3%E6%80%9D%E6%83%B3%E5%92%8C%E4%B8%AD%E5%9B%BD%E7%89%B9%E8%89%B2%E7%A4%BE%E4%BC%9A%E4%B8%BB%E4%B9%89%E7%90%86%E8%AE%BA%E4%BD%93%E7%B3%BB%E6%A6%82%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¹ è¿‘å¹³æ€æƒ³å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»æ¦‚è®º"><a href="#ä¹ è¿‘å¹³æ€æƒ³å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»æ¦‚è®º" class="headerlink" title="ä¹ è¿‘å¹³æ€æƒ³å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»æ¦‚è®º"></a>ä¹ è¿‘å¹³æ€æƒ³å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»æ¦‚è®º</h1><h2 id="å•é¡¹é€‰æ‹©"><a href="#å•é¡¹é€‰æ‹©" class="headerlink" title="å•é¡¹é€‰æ‹©"></a>å•é¡¹é€‰æ‹©</h2><ol><li>ç»è¿‡é•¿æœŸåŠªåŠ›ï¼Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰è¿›å…¥æ–°æ—¶ä»£ï¼Œè¿™æ˜¯æˆ‘å›½å‘å±•æ–°çš„<code>å†å²æ–¹ä½</code></li><li><code>äººæ°‘è‡³ä¸Š</code>æ˜¯è´¯å½»ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³çš„ä¸€æ ¹çº¢çº¿ã€‚</li><li>åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ï¼Œæ€»ä»»åŠ¡æ˜¯<code>å®ç°ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å’Œä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´ï¼Œåœ¨å…¨é¢å»ºæˆå°åº·ç¤¾ä¼šçš„åŸºç¡€ä¸Šï¼Œåˆ†ä¸¤æ­¥èµ°åœ¨æœ¬ä¸–çºªä¸­å¶å»ºæˆå¯Œå¼ºæ°‘ä¸»æ–‡æ˜å’Œè°ç¾ä¸½çš„ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å¼ºå›½</code>ã€‚</li><li>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„æˆ˜ç•¥å¸ƒå±€æ˜¯<code>â€œå››ä¸ªå…¨é¢â€</code>ã€‚</li><li>ä¸–ç•Œæœªæœ‰ä¹‹å¤§å˜å±€æ­£åœ¨åŠ é€Ÿæ¼”å˜ã€‚<code>å’Œå¹³ä¸å‘å±•</code>ä»ç„¶æ˜¯æ—¶ä»£ä¸»é¢˜ï¼Œä½†æ˜¯ä¸ç¨³å®šä¸ç¡®å®šæ€§æ›´åŠ çªå‡ºã€‚</li><li>å®ç°ä¸­å›½æ¢¦å¿…é¡»å‡èšä¸­å›½åŠ›é‡ï¼Œè¿™å°±æ˜¯<code>å„æ—äººæ°‘å¤§å›¢ç»“çš„åŠ›é‡</code>ã€‚</li><li>å®ç°ä¸­å›½æ¢¦å¿…é¡»å¼˜æ‰¬ä¸­å›½ç²¾ç¥ï¼Œè¿™å°±æ˜¯<code>ä»¥çˆ±å›½ä¸»ä¹‰ä¸ºæ ¸å¿ƒçš„æ°‘æ—ç²¾ç¥å’Œä»¥æ”¹é©åˆ›æ–°ä¸ºæ ¸å¿ƒçš„æ—¶ä»£ç²¾ç¥</code>ã€‚</li><li>å®ç°ä¸­å›½æ¢¦å¿…é¡»èµ°ä¸­å›½é“è·¯ã€‚ä¸­å›½é“è·¯æ˜¯æŒ‡<code>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯</code>ã€‚</li><li>å…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å›½å®¶è¿›ç¨‹ä¸­çš„ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œä»2020å¹´åˆ°2035å¹´ï¼Œ<code>åŸºæœ¬å®ç°ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–</code>ã€‚</li><li>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„æ€»ä½“å¸ƒå±€æ˜¯<code>â€œäº”ä½ä¸€ä½“â€</code>ã€‚</li><li><code>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–</code>æ˜¯ä¸­åæ°‘æ—çš„æ ¹å’Œé­‚ï¼Œæ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ¤æ ¹çš„æ–‡åŒ–æ²ƒåœŸã€‚</li><li>å…šçš„åå…«å¤§ä»¥æ¥ï¼Œæˆ‘ä»¬å…šçš„å…¨éƒ¨ç†è®ºå’Œå®è·µæ¢ç´¢éƒ½æ˜¯å›´ç»•<code>åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰</code>è¿™ä¸ªä¸»é¢˜æ¥å±•å¼€ã€æ·±åŒ–å’Œæ‹“å±•çš„ã€‚</li><li>è¿›å…¥æ–°æ—¶ä»£ï¼Œæˆ‘å›½ç¤¾ä¼šä¸»è¦çŸ›ç›¾å·²ç»è½¬åŒ–ä¸º<code>äººæ°‘æ—¥ç›Šå¢é•¿çš„ç¾å¥½ç”Ÿæ´»éœ€è¦å’Œä¸å¹³è¡¡ä¸å……åˆ†çš„å‘å±•ä¹‹é—´çš„çŸ›ç›¾</code>ã€‚</li><li>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æœ€æœ¬è´¨çš„ç‰¹å¾æ˜¯<code>ä¸­å›½å…±äº§å…šé¢†å¯¼</code>ã€‚</li><li>ä¸­å›½æ¢¦å½’æ ¹åˆ°åº•æ˜¯<code>äººæ°‘çš„æ¢¦</code>ï¼Œå¿…é¡»ç´§ç´§ä¾é äººæ°‘æ¥å®ç°ï¼Œå¿…é¡»ä¸æ–­ä¸ºäººæ°‘é€ ç¦ã€‚</li><li>æ”¹é©å¼€æ”¾ä¹‹åï¼Œæˆ‘ä»¬å…šæå‡ºçš„â€œä¸‰æ­¥èµ°â€æˆ˜ç•¥çš„ç¬¬ä¸‰æ­¥ï¼Œå³åŸºæœ¬å®ç°ç°ä»£åŒ–ï¼Œå°†æå‰<code>15å¹´</code>å®Œæˆã€‚</li><li>ä¸­å›½å…±äº§å…šçš„æ€§è´¨å†³å®šäº†å…šçš„å®—æ—¨æ˜¯<code>å…¨å¿ƒå…¨æ„ä¸ºäººæ°‘æœåŠ¡</code>ã€‚</li><li>ä¸­å›½å…±äº§å…šä½œä¸ºé©¬å…‹æ€ä¸»ä¹‰æ”¿å…šï¼Œå…¶æœ€å¤§çš„æ”¿æ²»ä¼˜åŠ¿æ˜¯<code>å¯†åˆ‡è”ç³»ç¾¤ä¼—</code>ã€‚</li><li><code>å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´</code>æ˜¯å…šç™¾å¹´å¥‹æ–—çš„ä¸»é¢˜ã€‚</li><li>ä¸­å›½æ¢¦çš„æœ¬è´¨æ˜¯<code>å›½å®¶å¯Œå¼ºã€æ°‘æ—æŒ¯å…´ã€äººæ°‘å¹¸ç¦</code>ã€‚</li><li><code>ç¾¤ä¼—è·¯çº¿</code>å§‹ç»ˆæ˜¯å…šçš„ç”Ÿå‘½çº¿å’Œæ ¹æœ¬å·¥ä½œè·¯çº¿ï¼Œæ˜¯æˆ‘ä»¬å…šæ°¸è‘†é’æ˜¥æ´»åŠ›å’Œæˆ˜æ–—åŠ›çš„é‡è¦ä¼ å®¶å®ã€‚</li><li>é©¬å…‹æ€ä¸»ä¹‰æ”¿å…šç«™åœ¨äººæ°‘ç«‹åœºä¸Šï¼Œå§‹ç»ˆå°†æœ€å¹¿å¤§äººæ°‘ç¾¤ä¼—çš„æ ¹æœ¬åˆ©ç›Šä½œä¸ºè‡ªå·±çš„<code>æœ€é«˜åˆ©ç›Š</code>ã€‚</li><li>å…šè‡ªæˆç«‹ä¹‹æ—¥èµ·ï¼Œå°±æŠŠâ€œäººæ°‘â€äºŒå­—é“­åˆ»åœ¨å¿ƒï¼ŒæŠŠåšæŒ<code>äººæ°‘åˆ©ç›Š</code>é«˜äºä¸€åˆ‡é²œæ˜åœ°å†™åœ¨è‡ªå·±çš„æ——å¸œä¸Šã€‚</li><li><code>äººçš„å…¨é¢å‘å±•</code>æ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„ä»·å€¼ç›®æ ‡ã€‚</li><li><code>å…±åŒå¯Œè£•</code>æ˜¯ç¤¾ä¼šä¸»ä¹‰çš„æœ¬è´¨è¦æ±‚ï¼Œæ˜¯ä¸­å›½å¼ç°ä»£åŒ–çš„é‡è¦ç‰¹å¾ã€‚</li><li>å…šçš„åä¹å±Šå…­ä¸­å…¨ä¼šè¿›ä¸€æ­¥æ˜ç¡®ï¼Œå¿…é¡»åšæŒ<code>ä»¥äººæ°‘ä¸ºä¸­å¿ƒ</code>çš„å‘å±•æ€æƒ³ï¼Œå‘å±•å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»ï¼Œæ¨åŠ¨äººçš„å…¨é¢å‘å±•ã€å…¨ä½“äººæ°‘å…±åŒå¯Œè£•å–å¾—æ›´ä¸ºæ˜æ˜¾çš„å®è´¨æ€§è¿›å±•ã€‚</li><li>æˆ‘ä»¬ä¹˜åŠ¿è€Œä¸Šå¼€å¯å…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å›½å®¶æ–°å¾ç¨‹ã€å‘ç¬¬äºŒä¸ªç™¾å¹´å¥‹æ–—ç›®æ ‡è¿›å†›ï¼Œè¿™æ ‡å¿—ç€æˆ‘å›½è¿›å…¥äº†ä¸€ä¸ª<code>æ–°å‘å±•é˜¶æ®µ</code>ã€‚</li><li>æˆ‘å›½ç»æµå·²ç”±é«˜é€Ÿå¢é•¿é˜¶æ®µè½¬å‘<code>é«˜è´¨é‡å‘å±•é˜¶æ®µ</code>ï¼Œæ­£å¤„åœ¨è½¬å˜å‘å±•æ–¹å¼ã€ä¼˜åŒ–ç»æµç»“æ„ã€è½¬æ¢å¢é•¿åŠ¨åŠ›çš„æ”»å…³æœŸã€‚</li><li>ç»æµè¿›å…¥æ–°å¸¸æ€åï¼Œä¼´éšç€ç»æµå¢é•¿é€Ÿåº¦çš„ä¸‹é™ï¼Œæ¨åŠ¨<code>ä¾›ç»™ä¾§æ”¹é©</code>æˆä¸ºç»æµç”Ÿæ´»ä¸­çš„ä¸»æ—‹å¾‹ã€‚</li><li><code>æ–°å‘å±•æ ¼å±€</code>æ˜¯æ ¹æ®æˆ‘å›½å‘å±•é˜¶æ®µã€ç¯å¢ƒã€æ¡ä»¶å˜åŒ–æå‡ºæ¥çš„ï¼Œæ˜¯é‡å¡‘æˆ‘å›½å›½é™…åˆä½œå’Œç«äº‰æ–°ä¼˜åŠ¿çš„æˆ˜ç•¥æŠ‰æ‹©ï¼Œæ˜¯æŠŠæ¡æœªæ¥å‘å±•ä¸»åŠ¨æƒçš„æˆ˜ç•¥æ€§å¸ƒå±€å’Œå…ˆæ‰‹æ£‹ã€‚</li><li>ç»æµæ”¹é©çš„æ–¹å‘æ˜¯è¦è®©<code>å¸‚åœº</code>åœ¨èµ„æºé…ç½®ä¸­å‘æŒ¥å†³å®šæ€§ä½œç”¨ã€‚</li><li>å›½æœ‰ä¼ä¸šæ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„é‡è¦ç‰©è´¨åŸºç¡€å’Œæ”¿æ²»åŸºç¡€ï¼Œå…³ç³»<code>å…¬æœ‰åˆ¶ä¸»ä½“</code>åœ°ä½çš„å·©å›ºï¼Œå…³ç³»æˆ‘ä»¬å…šçš„æ‰§æ”¿åœ°ä½å’Œæ‰§æ”¿èƒ½åŠ›ï¼Œå…³ç³»æˆ‘å›½ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ã€‚</li><li>å»ºè®¾å……åˆ†å‘æŒ¥<code>å¸‚åœºä½œç”¨</code>ï¼Œæ›´å¥½å‘æŒ¥æ”¿åºœä½œç”¨çš„ç»æµä½“åˆ¶ã€‚</li><li>å…šçš„åä¹å¤§æå‡ºï¼Œåˆ°<code>2035å¹´</code>â€œå„æ–¹é¢åˆ¶åº¦æ›´åŠ å®Œå–„ï¼Œå›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–åŸºæœ¬å®ç°â€ã€‚</li><li>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦å’Œå›½å®¶æ²»ç†ä½“ç³»æ˜¯ä»¥<code>é©¬å…‹æ€ä¸»ä¹‰</code>ä¸ºæŒ‡å¯¼ã€æ¤æ ¹ä¸­å›½å¤§åœ°ã€å…·æœ‰æ·±åšä¸­åæ–‡åŒ–æ ¹åŸºã€æ·±å¾—äººæ°‘æ‹¥æŠ¤çš„åˆ¶åº¦å’Œæ²»ç†ä½“ç³»ã€‚</li><li>åšæŒå’Œå®Œå–„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ã€æ¨è¿›å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–ï¼Œä¸ä»…è¦å»ºç«‹å®Œå–„çš„åˆ¶åº¦ä½“ç³»ï¼Œè¿˜è¦åœ¨ä¸æ–­<code>æé«˜åˆ¶åº¦æ‰§è¡ŒåŠ›å’Œæ²»ç†èƒ½åŠ›</code>ä¸Šç‹ ä¸‹åŠŸå¤«ã€‚</li><li><code>å…šçš„åå…«å±Šä¸‰ä¸­å…¨ä¼š</code>ä½œå‡ºäº†å…¨é¢æ·±åŒ–æ”¹é©çš„å†³å®šã€‚</li><li>å…šçš„åä¹å±Šå››ä¸­å…¨ä¼šï¼Œå¯¹åšæŒå’Œå®Œå–„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ã€æ¨è¿›å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–ä½œå‡ºæ€»ä½“æ“˜ç”»ã€‚ä»¥ä¸‹è¡¨è¿°ä¸æ­£ç¡®çš„æ˜¯<code>æœ¬ä¸–çºªä¸­å¶ï¼Œå…¨é¢å»ºæˆç¬¦åˆç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å‘å±•çš„å›½å®¶æ²»ç†ä½“ç³»</code>ã€‚</li><li>æ¨è¿›æ”¹é©çš„ç›®çš„æ˜¯è¦ä¸æ–­æ¨è¿›æˆ‘å›½ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦<code>è‡ªæˆ‘å®Œå–„å’Œå‘å±•</code>ï¼Œèµ‹äºˆç¤¾ä¼šä¸»ä¹‰æ–°çš„ç”Ÿæœºæ´»åŠ›ã€‚</li><li><code>å¼•è¿›æ¥å’Œèµ°å‡ºå»</code>æ˜¯â€œä¸€å¸¦ä¸€è·¯â€å›½é™…åˆä½œçš„é‡è¦å†…å®¹ï¼Œå¦‚åŒè½¦ä¹‹ä¸¤è½®ã€é¸Ÿä¹‹ä¸¤ç¿¼ã€‚å›½å®¶å¯Œå¼ºã€æ°‘æ—æŒ¯å…´ã€äººæ°‘å¹¸ç¦ã€‚</li><li><code>è‡ªåŠ›æ›´ç”Ÿ</code>æ˜¯ä¸­åæ°‘æ—è‡ªç«‹äºä¸–ç•Œæ°‘æ—ä¹‹æ—çš„å¥‹æ–—åŸºç‚¹ï¼Œè‡ªä¸»åˆ›æ–°æ˜¯æˆ‘ä»¬æ”€ç™»ä¸–ç•Œç§‘æŠ€é«˜å³°çš„å¿…ç”±ä¹‹è·¯ã€‚</li><li><code>ä¸­å›½å…±äº§å…šé¢†å¯¼</code>æ˜¯ä¸­å›½ç‰¹è‰²ç§‘æŠ€åˆ›æ–°äº‹ä¸šä¸æ–­å‰è¿›çš„æ ¹æœ¬æ”¿æ²»ä¿è¯ã€‚</li><li>åŠå¥½äººæ°‘æ»¡æ„çš„æ•™è‚²å¿…é¡»æ·±åŒ–æ•™è‚²é¢†åŸŸç»¼åˆæ”¹é©ã€å¿…é¡»ä¿ƒè¿›æ•™è‚²å…¬å¹³ã€å¿…é¡»<code>å»ºè®¾é«˜è´¨é‡æ•™è‚²ä½“ç³»</code>ã€å¿…é¡»åŠ å¼ºæ•™å¸ˆé˜Ÿä¼å»ºè®¾ã€‚</li><li>å…šçš„åå…«å¤§ä»¥æ¥ï¼Œåœ¨ä»¥ä¹ è¿‘å¹³åŒå¿—ä¸ºæ ¸å¿ƒçš„å…šä¸­å¤®çš„åšå¼ºé¢†å¯¼ä¸‹ï¼Œæˆ‘å›½æŠŠ<code>ç§‘æŠ€è‡ªç«‹è‡ªå¼º</code>ä½œä¸ºå›½å®¶å‘å±•çš„æˆ˜ç•¥æ”¯æ’‘ï¼ŒæŒç»­æ·±å…¥å®æ–½åˆ›æ–°é©±åŠ¨å‘å±•æˆ˜ç•¥ï¼Œå¤§åŠ›å»ºè®¾åˆ›æ–°å‹å›½å®¶å’Œç§‘æŠ€å¼ºå›½ï¼Œæˆ‘å›½å·²æˆåŠŸè¿›å…¥åˆ›æ–°å‹å›½å®¶è¡Œåˆ—ã€‚</li><li>å…¨çƒç§‘æŠ€é©å‘½å‘å±•çš„ä¸»è¦ç‰¹å¾æ˜¯ä»<code>ç§‘å­¦</code>åˆ°<code>æŠ€æœ¯</code>è½¬åŒ–ï¼ŒåŸºæœ¬è¦æ±‚æ˜¯é‡å¤§åŸºç¡€ç ”ç©¶æˆæœäº§ä¸šåŒ–ã€‚</li><li>å¿…é¡»åšæŒç§‘æŠ€æ˜¯ç¬¬ä¸€ç”Ÿäº§åŠ›ã€<code>äººæ‰</code>æ˜¯ç¬¬ä¸€èµ„æºã€åˆ›æ–°æ˜¯ç¬¬ä¸€åŠ¨åŠ›ï¼Œæ·±å…¥å®æ–½ç§‘æ•™å…´å›½æˆ˜ç•¥ã€äººæ‰å¼ºå›½æˆ˜ç•¥ã€åˆ›æ–°é©±åŠ¨å‘å±•æˆ˜ç•¥ï¼Œå¼€è¾Ÿå‘å±•æ–°é¢†åŸŸæ–°èµ›é“ï¼Œä¸æ–­å¡‘é€ å‘å±•æ–°åŠ¨èƒ½æ–°ä¼˜åŠ¿ã€‚</li><li><code>äººæ°‘æ°‘ä¸»</code>æ˜¯ç¤¾ä¼šä¸»ä¹‰çš„ç”Ÿå‘½ï¼Œæ²¡æœ‰æ°‘ä¸»å°±æ²¡æœ‰ç¤¾ä¼šä¸»ä¹‰ï¼Œå°±æ²¡æœ‰ç¤¾ä¼šä¸»ä¹‰çš„ç°ä»£åŒ–ï¼Œå°±æ²¡æœ‰ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´ã€‚</li><li><code>ä¸­å›½å…±äº§å…šçš„é¢†å¯¼</code>æ˜¯ä¸­å›½å‘å±•å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»çš„æ ¹æœ¬ä¿è¯ã€‚</li><li>å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»é¦–æ¬¡æå‡ºæ˜¯åœ¨<code>2019å¹´11æœˆ</code>ã€‚</li><li>ç¤¾ä¼šä¸»ä¹‰æ°‘ä¸»çš„å®è´¨æ˜¯<code>äººæ°‘å½“å®¶ä½œä¸»</code>ã€‚</li><li><code>æ°‘ä¸»</code>æ˜¯ç»Ÿæ²»é˜¶çº§ç”¨æ¥å®ç°å…¶é˜¶çº§åˆ©ç›Šçš„æ”¿æ²»å½¢å¼å’Œæ‰‹æ®µã€‚</li><li>ä¸­åæ°‘æ—è¦å®ç°ä¼Ÿå¤§å¤å…´ä¸­å›½æ¢¦ï¼Œä¸ä»…è¦åˆ›é€ é«˜åº¦çš„ç‰©è´¨æ–‡æ˜ã€ç²¾ç¥æ–‡æ˜ã€ç¤¾ä¼šæ–‡æ˜ã€ç”Ÿæ€æ–‡æ˜ï¼Œè€Œä¸”è¦å»ºè®¾é«˜åº¦çš„<code>æ”¿æ²»æ–‡æ˜</code>ã€‚</li><li>å›½å®¶æ²»ç†é«˜æ•ˆåœ¨äºï¼Œå§‹ç»ˆæŠŠ<code>ä¸­å›½äººæ°‘</code>åˆ©ç›Šæ”¾åœ¨ç¬¬ä¸€ä½ã€‚</li><li><code>ç¨‹åºæ°‘ä¸»</code>æ˜¯æŒ‡æ°‘ä¸»çš„åˆ¶åº¦å®‰æ’ï¼Œå®è´¨æ°‘ä¸»æ˜¯æŒ‡æ°‘ä¸»å§‹ç»ˆè¿½æ±‚çš„ä»·å€¼ç›®æ ‡ï¼ŒäºŒè€…æœ‰æœºç»“åˆã€‚</li><li>å®Œå–„è¡Œæ”¿ç»„ç»‡å’Œè¡Œæ”¿ç¨‹åºæ³•å¾‹åˆ¶åº¦ï¼Œæ¨è¿›<code>æœºæ„ã€èŒèƒ½ã€æƒé™ã€ç¨‹åºã€è´£ä»»</code>æ³•å®šåŒ–ã€‚</li><li>åŠå¥½æ³•å­¦æ•™è‚²ï¼Œå¿…é¡»åšæŒèµ°ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯ï¼ŒåšæŒä»¥<code>é©¬å…‹æ€ä¸»ä¹‰</code>æ³•å­¦æ€æƒ³å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ç†è®ºä¸ºæŒ‡å¯¼ã€‚</li><li><code>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ä½“ç³»</code>æ˜¯æ¨è¿›å…¨é¢ä¾æ³•æ²»å›½çš„æ€»æŠ“æ‰‹ã€‚</li><li><code>å®ªæ³•</code>æ˜¯å›½å®¶æ ¹æœ¬æ³•ï¼Œæ˜¯å…šå’Œäººæ°‘æ„å¿—çš„é›†ä¸­ä½“ç°ï¼Œæ˜¯å›½å®¶å„ç§åˆ¶åº¦å’Œæ³•å¾‹æ³•è§„çš„æ€»ä¾æ®ã€‚</li><li>æˆ‘ä»¬è®²åšæŒä¾å®ªæ²»å›½ã€ä¾å®ªæ‰§æ”¿ï¼Œå°±åŒ…æ‹¬åšæŒå®ªæ³•ç¡®å®šçš„<code>ä¸­å›½å…±äº§å…šé¢†å¯¼</code>åœ°ä½ä¸åŠ¨æ‘‡ã€‚</li><li><code>å…šå†…æ³•è§„</code>æ—¢æ˜¯å…¨é¢ä»ä¸¥æ²»å…šçš„é‡è¦ä¾æ®ï¼Œä¹Ÿæ˜¯å…¨é¢ä¾æ³•æ²»å›½çš„æœ‰åŠ›ä¿éšœã€‚</li><li><code>æ–‡åŒ–è‡ªä¿¡</code>æ˜¯æ›´åŸºç¡€ã€æ›´å¹¿æ³›ã€æ›´æ·±åšçš„è‡ªä¿¡ï¼Œæ˜¯ä¸€ä¸ªå›½å®¶ã€ä¸€ä¸ªæ°‘æ—å‘å±•ä¸­æœ€åŸºæœ¬ã€æœ€æ·±æ²‰ã€æœ€æŒä¹…çš„åŠ›é‡ã€‚</li><li>ä»¥ä¸‹ä¸æ˜¯åæ˜ ä¸­åä¼˜ç§€ä¼ ç»Ÿæ–‡åŒ–ä¸­è•´å«ç€ä¸°å¯Œçš„å›½å®¶å®‰å…¨æˆ˜ç•¥æ€æƒ³çš„æ˜¯<code>â€œç¾äººä¹‹ç¾ï¼Œç¾ç¾ä¸å…±â€</code>ã€‚</li><li>æ¯å¹´<code>4æœˆ15æ—¥</code>è¢«ç¡®å®šä¸ºå…¨æ°‘å›½å®¶å®‰å…¨æ•™è‚²æ—¥ã€‚</li><li>åŸºå±‚æ²»ç†æ˜¯å›½å®¶æ²»ç†çš„åŸºçŸ³ï¼Œç»Ÿç­¹æ¨è¿›ä¹¡é•‡ï¼ˆè¡—é“ï¼‰å’ŒåŸä¹¡ç¤¾åŒºæ²»ç†ï¼Œæ˜¯å®ç°<code>å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–</code>çš„åŸºç¡€å·¥ç¨‹ã€‚</li><li>è¦æ ‘ç«‹å°Šé‡è‡ªç„¶ã€é¡ºåº”è‡ªç„¶ã€ä¿æŠ¤è‡ªç„¶çš„ç”Ÿæ€æ–‡æ˜ç†å¿µï¼Œå¢å¼º<code>ç»¿æ°´é’å±±å°±æ˜¯é‡‘å±±é“¶å±±</code>çš„æ„è¯†ã€‚</li><li><code>ç”Ÿæ€ç³»ç»Ÿ</code>æ˜¯ä¸€ä¸ªç³»ç»Ÿæ•´ä½“ï¼Œå±±æ°´æ—ç”°æ¹–è‰æ²™æ„æˆç›¸ä¾å…±å­˜ã€æœ‰æœºå…³è”çš„ç”Ÿå‘½å…±åŒä½“ã€‚è¿™ä¸ªç”Ÿå‘½å…±åŒä½“çš„ç”Ÿç”Ÿå¾ªç¯ã€ç»µå»¶ä¸æ¯è‘†æœ‰ç€äººç±»ç”Ÿå­˜å‘å±•çš„ç‰©è´¨æ ¹åŸºã€‚</li><li><code>æ”¿æ²»å®‰å…¨</code>æ”¸å…³å…šå’Œå›½å®¶ç”Ÿæ­»å­˜äº¡ï¼Œæ˜¯å›½å®¶å®‰å…¨çš„æ ¹æœ¬ã€‚</li><li><code>å°±ä¸š</code>æ˜¯æœ€å¤§çš„æ°‘ç”Ÿå·¥ç¨‹ã€æ°‘å¿ƒå·¥ç¨‹ã€æ ¹åŸºå·¥ç¨‹ï¼Œæ˜¯ç¤¾ä¼šç¨³å®šçš„é‡è¦ä¿éšœã€‚</li><li>ä¹ è¿‘å¹³â€œä¸¤å±±è®ºâ€çš„çªå‡ºè´¡çŒ®æ˜¯<code>é©¬å…‹æ€ä¸»ä¹‰ç”Ÿäº§åŠ›è§‚çš„æ–°æˆæœ</code>ã€‚</li><li>å…³äºç¹è£å‘å±•æ–‡åŒ–äº‹ä¸šå’Œæ–‡åŒ–äº§ä¸šï¼Œä»¥ä¸‹è¯´æ³•é”™è¯¯çš„æ˜¯<code>åšæŒä»¥å¸‚åœºæ•ˆç›Šä¸ºæ ¸å¿ƒçš„åˆ›ä½œå¯¼å‘ï¼Œæ¨å‡ºæ›´å¤šå—å¸‚åœºæ¬¢è¿çš„ä¼˜ç§€ä½œå“</code>ã€‚</li><li>ä»æ„è¯†å½¢æ€é¢†åŸŸçœ‹ï¼Œ<code>äº’è”ç½‘</code>å·²ç»æˆä¸ºèˆ†è®ºæ–—äº‰çš„ä¸»æˆ˜åœºï¼Œç›´æ¥å…³ç³»æˆ‘å›½æ„è¯†å½¢æ€å®‰å…¨å’Œæ”¿æƒå®‰å…¨ã€‚</li><li>å…šçš„äºŒåå¤§æŠ¥å‘Šå¼ºè°ƒï¼ŒåšæŒä»¥<code>äººæ°‘</code>ä¸ºä¸­å¿ƒçš„åˆ›ä½œå¯¼å‘ï¼Œæ¨å‡ºæ›´å¤šå¢å¼ºäººæ°‘ç²¾ç¥åŠ›é‡çš„ä¼˜ç§€ä½œå“ï¼ŒåŸ¹è‚²é€ å°±å¤§æ‰¹å¾·è‰ºåŒé¦¨çš„æ–‡å­¦è‰ºæœ¯å®¶å’Œè§„æ¨¡å®å¤§çš„æ–‡åŒ–æ–‡è‰ºäººæ‰é˜Ÿä¼ã€‚</li><li><code>æ°‘ç”Ÿåœ¨å‹¤ï¼Œå‹¤åˆ™ä¸åŒ®</code>æ˜¯æ°‘ç”Ÿæ¦‚å¿µåœ¨ä¸­å›½å†å²ä¸Šçš„æœ€æ—©è¡¨è¿°ã€‚</li><li>å¦‚æœŸå®ç°å»ºå†›ä¸€ç™¾å¹´å¥‹æ–—ç›®æ ‡ï¼ŒåŠ å¿«æŠŠäººæ°‘å†›é˜Ÿå»ºæˆä¸–ç•Œä¸€æµå†›é˜Ÿï¼Œå¿…é¡»è´¯å½»æ–°æ—¶ä»£å…šçš„å¼ºå†›æ€æƒ³ï¼Œè´¯å½»æ–°æ—¶ä»£å†›äº‹æˆ˜ç•¥æ–¹é’ˆï¼ŒåšæŒå…šå¯¹äººæ°‘å†›é˜Ÿçš„ç»å¯¹é¢†å¯¼ï¼ŒåšæŒæ”¿æ²»å»ºå†›ã€æ”¹é©å¼ºå†›ã€<code>ç§‘æŠ€å¼ºå†›</code>ã€äººæ‰å¼ºå†›ã€ä¾æ³•æ²»å†›ã€‚</li><li>æ¨åŠ¨å½¢æˆ<code>ç»¿è‰²ç”Ÿäº§æ–¹å¼å’Œç”Ÿæ´»æ–¹å¼</code>æ˜¯è´¯å½»æ–°å‘å±•ç†å¿µçš„å¿…ç„¶è¦æ±‚ï¼Œå¿…é¡»æŠŠç”Ÿæ€æ–‡æ˜å»ºè®¾æ‘†åœ¨å…¨å±€å·¥ä½œçš„çªå‡ºåœ°ä½ã€‚</li><li>äººå› è‡ªç„¶è€Œç”Ÿï¼Œäººä¸è‡ªç„¶æ˜¯ä¸€ç§<code>å…±ç”Ÿå…³ç³»</code>ã€‚ç”Ÿæ€ç¯å¢ƒæ²¡æœ‰æ›¿ä»£å“ï¼Œç”¨ä¹‹ä¸è§‰ï¼Œå¤±ä¹‹éš¾å­˜ã€‚å¦‚æœç«­æ³½è€Œæ¸”ï¼Œæœ€åå¿…ç„¶æ˜¯ä»€ä¹ˆé±¼ä¹Ÿæ²¡æœ‰äº†ã€‚</li><li>å…šçš„äºŒåå¤§æŠ¥å‘Šä¸­å¼ºè°ƒï¼ŒåšæŒæˆ¿å­æ˜¯ç”¨æ¥ä½çš„ã€ä¸æ˜¯ç”¨æ¥ç‚’çš„å®šä½ï¼ŒåŠ å¿«å»ºç«‹å¤šä¸»ä½“ä¾›ç»™ã€å¤šæ¸ é“ä¿éšœã€<code>ç§Ÿè´­å¹¶ä¸¾</code>çš„ä½æˆ¿åˆ¶åº¦ã€‚</li><li>æˆ‘ä»¬ç»è¿‡æ¥ç»­å¥‹æ–—ï¼Œå®ç°äº†å°åº·è¿™ä¸ªä¸­åæ°‘æ—çš„åƒå¹´æ¢¦æƒ³ï¼Œæ‰“èµ¢äº†äººç±»å†å²ä¸Šè§„æ¨¡æœ€å¤§çš„è„±è´«æ”»åšæˆ˜ï¼Œå…¨å›½832ä¸ªè´«å›°å¿å…¨éƒ¨æ‘˜å¸½ï¼Œè¿‘<code>ä¸€äº¿</code>å†œæ‘è´«å›°äººå£å®ç°è„±è´«ï¼Œ960å¤šä¸‡è´«å›°äººå£å®ç°æ˜“åœ°æ¬è¿ã€‚</li><li>ä¸€ä¸ªæ”¿æƒçš„ç“¦è§£å¾€å¾€æ˜¯ä»<code>æ€æƒ³</code>é¢†åŸŸå¼€å§‹çš„ï¼Œè¿™ä¸€é˜²çº¿è¢«æ”»ç ´äº†ï¼Œå…¶ä»–é˜²çº¿å°±å¾ˆéš¾å®ˆä½ã€‚</li><li>å‘å±•å’Œå®‰å…¨ï¼Œæ˜¯ä¸€ä¸ªå›½å®¶ã€ä¸€ä¸ªæ°‘æ—ç”Ÿå­˜ä¸è¿›æ­¥å¿…é¡»å¤„ç†å¥½çš„é¦–è¦é—®é¢˜ã€‚å‘å±•è§£å†³çš„æ˜¯<code>åŠ¨åŠ›é—®é¢˜</code>ï¼Œæ˜¯æ¨åŠ¨å›½å®¶å’Œæ°‘æ—èµ“ç»­ç»µå»¶çš„æ ¹æœ¬æ”¯æ’‘ï¼Œå®‰å…¨è§£å†³çš„æ˜¯<code>ä¿éšœé—®é¢˜</code>ï¼Œæ˜¯ç¡®ä¿å›½å®¶å’Œæ°‘æ—è¡Œç¨³è‡´è¿œçš„åšå¼ºæŸ±çŸ³ï¼Œå‘å±•å’Œå®‰å…¨æ˜¯ä¸€ä½“ä¹‹ä¸¤ç¿¼ã€é©±åŠ¨ä¹‹åŒè½®ã€‚</li><li>å…šå¯¹å†›é˜Ÿçš„<code>ç»å¯¹é¢†å¯¼</code>æ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„æœ¬è´¨ç‰¹å¾ï¼Œæ˜¯å…šå’Œå›½å®¶çš„é‡è¦æ”¿æ²»ä¼˜åŠ¿ï¼Œæ˜¯äººæ°‘å†›é˜Ÿçš„å»ºå†›ä¹‹æœ¬ã€å¼ºå†›ä¹‹é­‚ã€‚</li><li>å¼ºå›½å¿…é¡»å¼ºå†›ï¼Œå†›å¼ºæ‰èƒ½å›½å®‰ã€‚åœ¨å…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å›½å®¶ã€å®ç°ç¬¬äºŒä¸ªç™¾å¹´å¥‹æ–—ç›®æ ‡çš„å†å²è¿›ç¨‹ä¸­ï¼Œå¿…é¡»æŠŠ<code>å›½é˜²å’Œå†›é˜Ÿå»ºè®¾</code>æ‘†åœ¨æ›´åŠ é‡è¦çš„ä½ç½®ã€‚</li><li>é€‚åº”å›½å®¶å‘å±•æˆ˜ç•¥å’Œå®‰å…¨æˆ˜ç•¥æ–°è¦æ±‚ï¼Œä¸æ—¶ä¿±è¿›åˆ›æ–°å†›äº‹æˆ˜ç•¥æŒ‡å¯¼ï¼Œè°ƒæ•´ä¼˜åŒ–å†›äº‹æˆ˜ç•¥å¸ƒå±€ï¼Œå®Œå–„æ–°æ—¶ä»£å†›äº‹æˆ˜ç•¥ä½“ç³»ï¼Œä¸æ–­èµ‹äºˆ<code>ç§¯æé˜²å¾¡</code>æˆ˜ç•¥æ€æƒ³æ–°çš„å†…æ¶µã€‚</li><li>æ–°æ—¶ä»£å…¨å†›å¿…é¡»å¤¯å®<code>ä¾æ³•æ²»å†›</code>ã€ä»ä¸¥æ²»å†›è¿™ä¸ªå¼ºå†›ä¹‹åŸºï¼ŒæŒä¹‹ä»¥æ’æ¨è¿›ä½œé£å»ºè®¾å’Œåè…è´¥æ–—äº‰ï¼Œè‡ªè§‰è·µè¡Œäººæ°‘å†›é˜Ÿæ ¹æœ¬å®—æ—¨ï¼Œä¿æŒäººæ°‘å†›é˜Ÿé•¿æœŸå½¢æˆçš„è‰¯å¥½å½¢è±¡ã€‚</li><li>å†›é˜Ÿæ˜¯è¦æ‰“ä»—çš„ï¼Œè¦ç‰¢å›ºæ ‘ç«‹<code>æˆ˜æ–—åŠ›</code>è¿™ä¸ªå”¯ä¸€çš„æ ¹æœ¬çš„æ ‡å‡†ï¼ŒåšæŒæŠŠè¿™ä¸ªæ ‡å‡†è´¯å½»åˆ°å…¨å†›å„é¡¹å»ºè®¾å’Œå·¥ä½œä¹‹ä¸­ã€‚</li><li>â€œä¸€å›½ä¸¤åˆ¶â€æ„æƒ³æœ€æ—©æ˜¯é’ˆå¯¹<code>å°æ¹¾</code>é—®é¢˜æå‡ºæ¥çš„ã€‚</li><li>2022å¹´7æœˆ1æ—¥ï¼Œä¹ è¿‘å¹³æ€»ä¹¦è®°åœ¨åº†ç¥é¦™æ¸¯å›å½’ç¥–å›½25å‘¨å¹´å¤§ä¼šæš¨é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºç¬¬å…­å±Šæ”¿åºœå°±èŒå…¸ç¤¼ä¸Šçš„é‡è¦è®²è¯ä¸­æŒ‡å‡ºï¼šâ€â€˜ä¸€å›½ä¸¤åˆ¶â€™æ˜¯å‰æ— å¤äººçš„ä¼Ÿå¤§åˆ›ä¸¾ã€‚â€™ä¸€å›½ä¸¤åˆ¶â€™çš„æ ¹æœ¬å®—æ—¨æ˜¯<code>ç»´æŠ¤å›½å®¶ä¸»æƒã€å®‰å…¨ã€å‘å±•åˆ©ç›Šï¼Œä¿æŒé¦™æ¸¯ã€æ¾³é—¨é•¿æœŸç¹è£ç¨³å®š</code>ã€‚â€</li><li>ä¸­å›½å§‹ç»ˆåšæŒ<code>ç»´æŠ¤ä¸–ç•Œå’Œå¹³ã€ä¿ƒè¿›å…±åŒå‘å±•</code>çš„å¤–äº¤æ”¿ç­–å®—æ—¨ï¼Œè‡´åŠ›äºæ¨åŠ¨æ„å»ºäººç±»å‘½è¿å…±åŒä½“ã€‚</li><li>ç»è¿‡æŒç»­åŠªåŠ›ï¼Œä¸­å›½ç‰¹è‰²å¤§å›½å¤–äº¤å…¨é¢æ¨è¿›ï¼Œ<code>æ„å»ºäººç±»å‘½è¿å…±åŒä½“</code>æˆä¸ºå¼•é¢†æ—¶ä»£æ½®æµå’Œäººç±»å‰è¿›æ–¹å‘çš„é²œæ˜æ——å¸œã€‚</li><li>ä¸­å›½åšå®šå¥‰è¡Œ<code>ç‹¬ç«‹è‡ªä¸»</code>çš„å’Œå¹³å¤–äº¤æ”¿ç­–ï¼Œå§‹ç»ˆæ ¹æ®äº‹æƒ…æœ¬èº«çš„æ˜¯éæ›²ç›´å†³å®šè‡ªå·±çš„ç«‹åœºå’Œæ”¿ç­–ã€‚</li><li>ä¸­å›½åšæŒå¯¹å¤–å¼€æ”¾çš„åŸºæœ¬å›½ç­–ï¼Œåšå®šå¥‰è¡Œ<code>äº’åˆ©å…±èµ¢</code>çš„å¼€æ”¾æˆ˜ç•¥ï¼Œä¸æ–­ä»¥ä¸­å›½æ–°å‘å±•ä¸ºä¸–ç•Œæä¾›æ–°æœºé‡ï¼Œæ¨åŠ¨å»ºè®¾å¼€æ”¾å‹ä¸–ç•Œç»æµï¼Œæ›´å¥½æƒ åŠå„å›½äººæ°‘ã€‚</li><li>ä¸­å›½åšæŒåœ¨<code>å’Œå¹³å…±å¤„äº”é¡¹åŸåˆ™</code>åŸºç¡€ä¸ŠåŒå„å›½å‘å±•å‹å¥½åˆä½œï¼Œæ¨åŠ¨æ„å»ºæ–°å‹å›½é™…å…³ç³»ï¼Œæ·±åŒ–æ‹“å±•å¹³ç­‰ã€å¼€æ”¾ã€åˆä½œçš„å…¨çƒä¼™ä¼´å…³ç³»ï¼Œè‡´åŠ›äºæ‰©å¤§åŒå„å›½åˆ©ç›Šçš„æ±‡åˆç‚¹ã€‚</li><li>åå¹´æ¥ï¼Œæˆ‘ä»¬æå‡º<code>æ–°æ—¶ä»£è§£å†³å°æ¹¾é—®é¢˜çš„æ€»ä½“æ–¹ç•¥</code>ï¼Œä¿ƒè¿›ä¸¤å²¸äº¤æµåˆä½œï¼Œåšå†³åå¯¹â€å°ç‹¬â€åˆ†è£‚è¡Œå¾„ï¼Œåšå†³åå¯¹å¤–éƒ¨åŠ¿åŠ›å¹²æ¶‰ï¼Œç‰¢ç‰¢æŠŠæ¡ä¸¤å²¸å…³ç³»ä¸»å¯¼æƒå’Œä¸»åŠ¨æƒã€‚</li><li>å…šçš„äºŒåå¤§æŠ¥å‘ŠæŒ‡å‡ºï¼Œç»è¿‡ä¸æ‡ˆåŠªåŠ›ï¼Œå…šæ‰¾åˆ°äº†<code>è‡ªæˆ‘é©å‘½</code>è¿™ä¸€è·³å‡ºæ²»ä¹±å…´è¡°å†å²å‘¨æœŸç‡çš„ç¬¬äºŒä¸ªç­”æ¡ˆã€‚</li><li>ä¹ è¿‘å¹³æ€»ä¹¦è®°åœ¨ä¸­å›½å…±äº§å…šç¬¬åä¹æ¬¡å…¨å›½ä»£è¡¨å¤§ä¼šä¸Šçš„æŠ¥å‘Šä¸­å¼ºè°ƒï¼ŒåšæŒå’Œ<code>åŠ å¼ºå…šçš„å…¨é¢é¢†å¯¼ï¼ŒåšæŒå…šè¦ç®¡å…šã€å…¨é¢ä»ä¸¥æ²»å…šï¼Œä»¥åŠ å¼ºå…šçš„é•¿æœŸæ‰§æ”¿èƒ½åŠ›å»ºè®¾ã€å…ˆè¿›æ€§å’Œçº¯æ´æ€§å»ºè®¾</code>ä¸ºä¸»çº¿ã€‚</li><li>æŠŠ<code>æ”¿æ²»å»ºè®¾</code>æ‘†åœ¨é¦–ä½ï¼ŒæŠ“ä½äº†å…¨é¢ä»ä¸¥æ²»å…šçš„æ ¹æœ¬æ€§é—®é¢˜ã€‚</li><li>ç”¨å…šçš„åˆ›æ–°ç†è®ºæ­¦è£…å…¨å…šæ˜¯å…šçš„<code>æ€æƒ³å»ºè®¾</code>æ ¹æœ¬ä»»åŠ¡ã€‚</li><li>å…šçš„<code>ä½œé£</code>å°±æ˜¯å…šçš„å½¢è±¡ï¼Œå…³ç³»äººå¿ƒå‘èƒŒï¼Œå…³ç³»å…šçš„ç”Ÿæ­»å­˜äº¡ã€‚</li><li>æˆ‘ä»¬è¦è·µè¡Œ<code>å…±å•†å…±å»ºå…±äº«</code>å…¨çƒæ²»ç†è§‚ï¼Œå¼˜æ‰¬å…¨äººç±»å…±åŒä»·å€¼ï¼Œå€¡å¯¼ä¸åŒæ–‡æ˜äº¤æµäº’é‰´ã€‚</li></ol><h2 id="å¤šé¡¹é€‰æ‹©"><a href="#å¤šé¡¹é€‰æ‹©" class="headerlink" title="å¤šé¡¹é€‰æ‹©"></a>å¤šé¡¹é€‰æ‹©</h2><p>å®ç°â€œä¸¤ä¸ªç»“åˆâ€æ˜¯æˆ‘ä»¬æ¨è¿›é©¬å…‹æ€ä¸»ä¹‰ä¸­å›½åŒ–æ—¶ä»£åŒ–çš„æ ¹æœ¬é€”å¾„ï¼Œå…·ä½“æ˜¯æŒ‡____ã€‚<br>åšæŒé©¬å…‹æ€ä¸»ä¹‰åŸºæœ¬åŸç†åŒä¸­å›½å…·ä½“å®é™…ç›¸ç»“åˆ<br>åšæŒé©¬å…‹æ€ä¸»ä¹‰åŸºæœ¬åŸç†åŒä¸­åä¼˜ç§€ä¼ ç»Ÿæ–‡åŒ–ç›¸ç»“åˆ</p><p>ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³å›ç­”çš„é‡å¤§æ—¶ä»£è¯¾é¢˜åŒ…æ‹¬____ã€‚<br>æ–°æ—¶ä»£åšæŒå’Œå‘å±•ä»€ä¹ˆæ ·çš„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ã€æ€æ ·åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰<br>å»ºè®¾ä»€ä¹ˆæ ·çš„ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å¼ºå›½ã€æ€æ ·å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å¼ºå›½<br>å»ºè®¾ä»€ä¹ˆæ ·çš„é•¿æœŸæ‰§æ”¿çš„é©¬å…‹æ€ä¸»ä¹‰æ”¿å…šã€æ€æ ·å»ºè®¾é•¿æœŸæ‰§æ”¿çš„é©¬å…‹æ€ä¸»ä¹‰æ”¿å…š</p><p>ä»¥ä¸‹å±äºä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³çš„ä¸–ç•Œè§‚å’Œæ–¹æ³•è®ºçš„æ˜¯____ã€‚<br>åšæŒäººæ°‘è‡³ä¸Š<br>åšæŒè‡ªä¿¡è‡ªç«‹<br>åšæŒå®ˆæ­£åˆ›æ–°</p><p>å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´è¿›å…¥äº†ä¸å¯é€†è½¬çš„å†å²è¿›ç¨‹ï¼Œæˆ‘å›½å‘å±•çš„æˆ˜ç•¥æ€§æœ‰åˆ©æ¡ä»¶åŒ…æ‹¬<br>____ã€‚<br>ä¸­å›½å…±äº§å…šçš„åšå¼ºé¢†å¯¼<br>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦çš„æ˜¾è‘—ä¼˜åŠ¿<br>æŒç»­å¿«é€Ÿå‘å±•ç§¯ç´¯çš„åšå®åŸºç¡€<br>é•¿æœŸç¨³å®šçš„ç¤¾ä¼šç¯å¢ƒå’Œè‡ªä¿¡è‡ªå¼ºçš„ç²¾ç¥åŠ›é‡</p><p>ä¸­å›½å¼ç°ä»£åŒ–æ˜¯ä¸­å›½å…±äº§å…šé¢†å¯¼çš„ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–ï¼Œæ—¢æœ‰å„å›½ç°ä»£åŒ–çš„å…±åŒç‰¹å¾ï¼Œæ›´æœ‰åŸºäºè‡ªå·±å›½æƒ…çš„ä¸­å›½ç‰¹è‰²ã€‚ä¸­å›½å¼ç°ä»£åŒ–æ˜¯____ã€‚<br>äººå£è§„æ¨¡å·¨å¤§çš„ç°ä»£åŒ–<br>å…¨ä½“äººæ°‘å…±åŒå¯Œè£•çš„ç°ä»£åŒ–<br>èµ°å’Œå¹³å‘å±•é“è·¯å§¿å’Œçš„ç°ä»£åŒ–</p><p>â€œäº”ä¸ªå¿…ç”±ä¹‹è·¯â€æ˜¯å¤šå¹´æ¥æˆ‘å›½å…šå’Œäººæ°‘åœ¨å†å²å®è·µå†ç¨‹ä¸­å¾—åˆ°çš„å®è´µç­”æ¡ˆï¼Œæ­ç¤ºäº†æ–°æ—¶ä»£åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„è§„å¾‹æ€§è®¤è¯†ï¼Œå…·ä½“åŒ…æ‹¬____ã€‚<br>åšæŒå…šçš„å…¨é¢é¢†å¯¼å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰<br>è´¯å½»æ–°å‘å±•ç†å¿µ<br>åšæŒå…¨é¢ä»ä¸¥æ²»å…šã€‚</p><p>å…šçš„åå…«å±Šå…­ä¸­å…¨ä¼šæ­£å¼ç¡®ç«‹ä¹ è¿‘å¹³æ€»ä¹¦è®°å…šä¸­å¤®çš„æ ¸å¿ƒã€å…¨å…šçš„æ ¸å¿ƒåœ°ä½ï¼Œè¦æ±‚å…¨å…šå¿…é¡»ç‰¢å›ºæ ‘ç«‹â€œå››ä¸ªæ„è¯†â€ã€‚â€œå››ä¸ªæ„è¯†â€æ˜¯æŒ‡____ã€‚<br>æ”¿æ²»æ„è¯†<br>å¤§å±€æ„è¯†<br>æ ¸å¿ƒæ„è¯†<br>çœ‹é½æ„è¯†</p><p>ä¸­å›½å…±äº§å…šæ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šçš„å¼€åˆ›è€…ã€æ¨åŠ¨è€…ã€å¼•é¢†è€…ï¼Œå›¢ç»“å¸¦é¢†äººæ°‘____ã€‚<br>å¼€è¾Ÿäº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯<br>åˆ›ç«‹äº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®º<br>åˆ›å»ºäº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦<br>å‘å±•äº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–</p><p>ä¸­å›½æ¢¦çš„æœ¬è´¨æ˜¯____ã€‚<br>å›½å®¶å¯Œå¼º<br>æ°‘æ—æŒ¯å…´<br>äººæ°‘å¹¸ç¦</p><p>åšå®šä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰â€œå››ä¸ªè‡ªä¿¡â€ï¼Œå…·ä½“åŒ…æ‹¬____ã€‚<br>é“è·¯è‡ªä¿¡<br>ç†è®ºè‡ªä¿¡<br>åˆ¶åº¦è‡ªä¿¡<br>æ–‡åŒ–è‡ªä¿¡</p><p>ä»¥äººæ°‘ä¸ºä¸­å¿ƒçš„å‘å±•æ€æƒ³ï¼Œä¸æ˜¯é«˜é«˜åœ¨ä¸Šçš„å®£ä¼ å£å·ï¼Œç»å¯¹ä¸èƒ½åªåœç•™åœ¨å£å¤´ä¸Šï¼Œè¦å…¨æ–¹ä½è´¯ç©¿äºç»æµç¤¾ä¼šå‘å±•çš„å„ä¸ªç¯èŠ‚ï¼Œä½“ç°åœ¨äººæ°‘ç¾¤ä¼—____çš„æ‰å®æå‡ä¸Šã€‚<br>è·å¾—æ„Ÿ<br>å¹¸ç¦æ„Ÿ<br>å®‰å…¨æ„Ÿ</p><p>ä¸å¿˜åˆå¿ƒã€ç‰¢è®°ä½¿å‘½ï¼Œè¯´åˆ°åº•æ˜¯ä¸ºä»€ä¹ˆäººã€é ä»€ä¹ˆäººçš„é—®é¢˜ã€‚ä»¥ç™¾å§“å¿ƒä¸ºå¿ƒï¼Œä¸äººæ°‘____ï¼Œæ˜¯å…šçš„åˆå¿ƒï¼Œä¹Ÿæ˜¯å…šçš„æ’å¿ƒã€‚<br>åŒå‘¼å¸<br>å…±å‘½è¿<br>å¿ƒè¿å¿ƒ</p><p>____ä¸____ç›¸ç»Ÿä¸€ï¼Œæ—¢æ˜¯é©¬å…‹æ€ä¸»ä¹‰çš„ä»·å€¼è¿½æ±‚ï¼Œä¹Ÿæ˜¯ç¤¾ä¼šä¸»ä¹‰çš„æœ¬è´¨è¦æ±‚ï¼Œæ›´æ˜¯ä¸­å›½å…±äº§å…šäººçš„å¥‹æ–—ç›®æ ‡ã€‚<br>ä¿ƒè¿›äººçš„å…¨é¢å‘å±•<br>ä¿ƒè¿›å…±åŒå¯Œè£•</p><p>æˆ‘å›½ç»æµå‘å±•å¤„äº____é˜¶æ®µï¼Œæˆ‘å›½å‘å±•è¿›å…¥æ–°å¸¸æ€ã€‚<br>å¢é•¿é€Ÿåº¦æ¢æŒ¡æœŸ<br>ç»“æ„è°ƒæ•´é˜µç—›æœŸ<br>å‰æœŸåˆºæ¿€æ”¿ç­–æ¶ˆåŒ–æœŸ</p><p>è¦æ¨è¿›ä¾›ç»™ä¾§ç»“æ„æ€§æ”¹é©ä½œä¸ºç»æµå‘å±•çš„ä¸»çº¿ï¼ŒåšæŒ____æ–¹é’ˆ<br>å·©å›º<br>å¢å¼º<br>æå‡<br>ç•…é€š</p><p>è¿›å…¥____ã€è´¯å½»____ã€æ„å»º____ï¼Œæ˜¯ç”±æˆ‘å›½ç»æµç¤¾ä¼šå‘å±•çš„ç†è®ºé€»è¾‘ã€å†å²é€»è¾‘ã€ç°å®é€»è¾‘å†³å®šçš„ï¼Œä¸‰è€…ç´§å¯†å…³è”ã€‚<br>æ–°å‘å±•é˜¶æ®µ<br>æ–°å‘å±•ç†å¿µ<br>æ–°å‘å±•æ ¼å±€</p><p>æ²»ç†èƒ½åŠ›æ˜¯è¿ç”¨å›½å®¶åˆ¶åº¦ç®¡ç†å›½å®¶å„æ–¹é¢äº‹åŠ¡çš„èƒ½åŠ›ï¼Œå®ƒåŒ…æ‹¬____ç­‰å„ä¸ªæ–¹é¢å„ä¸ªé¢†åŸŸçš„æ²»ç†èƒ½åŠ›ã€‚<br>æ”¹é©å‘å±•ç¨³å®š<br>å†…æ”¿å¤–äº¤å›½é˜²<br>æ²»å…šæ²»å›½æ²»å†›</p><p>å…¨é¢æ·±åŒ–æ”¹é©å¿…é¡»åšæŒå’Œå®Œå–„____ã€‚<br>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦<br>å›½å®¶æ²»ç†ä½“ç³»</p><p>äº”å››è¿åŠ¨ä»¥æ¥ï¼Œæˆ‘å›½å‘ç”Ÿçš„ä¸‰å¤§å†å²æ€§äº‹ä»¶____ï¼Œæ˜¯è¿‘ä»£ä»¥æ¥å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸‰å¤§é‡Œç¨‹ç¢‘ã€‚<br>å»ºç«‹ä¸­å›½å…±äº§å…š<br>æˆç«‹ä¸­åäººæ°‘å…±å’Œå›½<br>æ¨è¿›æ”¹é©å¼€æ”¾å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰äº‹ä¸š</p><p>å…¨é¢æ·±åŒ–æ”¹é©çš„æ€»ç›®æ ‡æ˜¯____ã€‚<br>å®Œå–„å’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦<br>æ¨è¿›å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–</p><p>æˆ‘ä»¬å¿…é¡»ç«™åœ¨æˆ˜ç•¥é«˜åº¦ä¸Šçœ‹é—®é¢˜ï¼ŒçœŸæ­£æŠŠæ•™è‚²æ‘†åœ¨å…ˆè¡Œå®˜çš„ä½ç½®ï¼ŒåŠªåŠ›å®ç°____ç›¸äº’æ”¯æŒã€ç›¸äº’ä¿ƒè¿›çš„è‰¯æ€§å¾ªç¯ã€‚<br>æ•™è‚²<br>ç§‘æŠ€<br>ç»æµ</p><p>æ•™è‚²å¼ºå›½ã€ç§‘æŠ€å¼ºå›½å’Œäººæ‰å¼ºå›½æ˜¯æ–°æ—¶ä»£ç§‘æ•™å…´å›½æˆ˜ç•¥çš„æ€»ä½“éƒ¨ç½²ï¼Œç›®çš„æ˜¯____<br>åŠå¥½äººæ°‘æ»¡æ„çš„æ•™è‚²<br>å®Œå–„ç§‘æŠ€åˆ›æ–°ä½“ç³»<br>åˆ›æ–°é©±åŠ¨å‘å±•<br>ä¼˜åŒ–é«˜ç´ è´¨äººæ‰åŸ¹å…»</p><p>è¦æŠŠé‡è¦é¢†åŸŸçš„ç§‘æŠ€åˆ›æ–°æ‘†åœ¨æ›´åŠ çªå‡ºçš„åœ°ä½ï¼Œä»¥____ä¸ºçªç ´å£ï¼ŒåŠ å¼ºå¯¹å…³ç³»æ ¹æœ¬å’Œå…¨å±€çš„ç§‘å­¦é—®é¢˜çš„ç ”ç©¶éƒ¨ç½²ï¼Œåœ¨æˆ˜ç•¥å¿…äº‰é¢†åŸŸæ‰“ç ´é‡å¤§å…³é”®æ ¸å¿ƒæŠ€æœ¯å—åˆ¶äºäººçš„å±€é¢ï¼ŒåŠ å¿«æ„ç­‘æ”¯æ’‘é«˜ç«¯å¼•é¢†çš„å…ˆå‘ä¼˜åŠ¿ã€‚åšæŒäººæ°‘è‡³ä¸Š<br>å…³é”®å…±æ€§æŠ€æœ¯<br>å‰æ²¿å¼•é¢†æŠ€æœ¯<br>ç°ä»£å·¥ç¨‹æŠ€æœ¯<br>é¢ è¦†æ€§æŠ€æœ¯åˆ›æ–°</p><p>äººæ°‘æ—¢æ˜¯æ°‘ä¸»çš„____ï¼Œä¹Ÿæ˜¯æ°‘ä¸»çš„____ï¼Œæ™ºæ…§åŠ›é‡å……åˆ†æ¿€å‘ï¼Œæ—¢ä¸ºè‡ªå·±ä¹Ÿä¸ºå›½å®¶ã€æ°‘æ—æ‹¼æå¥‹æ–—ã€‚<br>å‚ä¸è€…<br>å—ç›Šè€…</p><p>åœ¨äººæ°‘æ°‘ä¸»çš„å…±åŒæ——å¸œä¸‹ï¼Œä¸­å›½å…±äº§å…šä¸å„æ°‘ä¸»å…šæ´¾____ã€‚<br>é•¿æœŸå…±å­˜<br>äº’ç›¸ç›‘ç£<br>è‚èƒ†ç›¸ç…§<br>è£è¾±ä¸å…±</p><p>è¦åšæŒå’Œå®Œå–„äººæ°‘å½“å®¶ä½œä¸»åˆ¶åº¦ä½“ç³»ï¼Œä¸æ–­æ¨è¿›ç¤¾ä¼šä¸»ä¹‰æ°‘ä¸»æ”¿æ²»____ï¼Œæ›´å¥½æŠŠåˆ¶åº¦ä¼˜åŠ¿è½¬åŒ–ä¸ºæ²»ç†æ•ˆèƒ½ã€‚<br>åˆ¶åº¦åŒ–<br>è§„èŒƒåŒ–<br>ç¨‹åºåŒ–</p><p>èµ°ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»å‘å±•é“è·¯ï¼Œå¿…é¡»åšæŒ____æœ‰æœºç»Ÿä¸€ã€‚<br>å…šçš„é¢†å¯¼<br>äººæ°‘å½“å®¶ä½œä¸»ï¼Œä¾æ³•æ²»å›½</p><p>å‡†ç¡®æŠŠæ¡å…¨é¢æ¨è¿›ä¾æ³•æ²»å›½é‡ç‚¹ä»»åŠ¡ï¼Œç€åŠ›æ¨è¿›____ã€‚<br>ç§‘å­¦ç«‹æ³•<br>ä¸¥æ ¼æ‰§æ³•<br>å…¬æ­£å¸æ³•<br>å…¨æ°‘å®ˆæ³•</p><p>åšæŒä»¥å®ªæ³•ä¸ºæœ€é«˜æ³•å¾‹è§„èŒƒï¼Œå®Œå–„ä»¥å®ªæ³•ä¸ºæ ¸å¿ƒçš„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•å¾‹ä½“ç³»ï¼ŒåŠ å¼º____ç«‹æ³•ï¼ŒæŠŠå›½å®¶å„é¡¹äº‹ä¸šå’Œå„é¡¹å·¥ä½œçº³å…¥æ³•åˆ¶è½¨é“ã€‚<br>é‡ç‚¹é¢†åŸŸ<br>æ–°å…´é¢†åŸŸ<br>æ¶‰å¤–é¢†åŸŸ</p><p>å…¨é¢æ¨è¿›ä¾æ³•æ²»å›½ï¼Œå¿…é¡»å¤§åŠ›æé«˜æ³•æ²»å·¥ä½œé˜Ÿä¼æ€æƒ³æ”¿æ²»ç´ è´¨ã€ä¸šåŠ¡å·¥ä½œèƒ½åŠ›ã€èŒä¸šé“å¾·æ°´å‡†ï¼Œç€åŠ›å»ºè®¾ä¸€æ”¯____çš„ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å·¥ä½œé˜Ÿä¼ã€‚<br>å¿ äºå…š<br>å¿ äºå›½å®¶<br>å¿ äºäººæ°‘<br>å¿ äºæ³•å¾‹</p><p>ä¼Ÿå¤§æŠ—ç–«ç²¾ç¥åŒ…æ‹¬____ã€‚<br>ç”Ÿå‘½è‡³ä¸Š<br>ä¸¾å›½åŒå¿ƒ<br>èˆç”Ÿå¿˜æ­»<br>å°Šé‡ç§‘å­¦<br>å‘½è¿ä¸å…±</p><p>åŠ å¼ºå’Œåˆ›æ–°ç¤¾ä¼šæ²»ç†ï¼Œæ”¹è¿›ç¤¾ä¼šæ²»ç†æ–¹å¼ï¼Œè¦åšæŒ____ã€‚<br>ç³»ç»Ÿæ²»ç†<br>ç»¼åˆæ²»ç†<br>ä¾æ³•æ²»ç†<br>æºå¤´æ²»ç†</p><p>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–çš„æ ¹æœ¬æ‰€åœ¨ã€æ·±åšåŸºç¡€ã€ä¸ç«­æºæ³‰åˆ†åˆ«æ˜¯____ã€‚<br>é©¬å…‹æ€ä¸»ä¹‰æŒ‡å¯¼ä¸‹å½¢æˆçš„é©å‘½æ–‡åŒ–å’Œç¤¾ä¼šä¸»ä¹‰å…ˆè¿›æ–‡åŒ–<br>ä¸­åä¼˜ç§€ä¼ ç»Ÿæ–‡åŒ–<br>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ä¼Ÿå¤§å®è·µ</p><p>ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚æ¶‰åŠå›½å®¶ã€ç¤¾ä¼šã€å…¬æ°‘ä¸‰ä¸ªå±‚é¢çš„ä»·å€¼è¦æ±‚ï¼Œå…·ä½“è¡¨è¾¾ä¸º____<br>å¯Œå¼ºã€æ°‘ä¸»ã€æ–‡æ˜ã€å’Œè°<br>çˆ±å›½ã€æ•¬ä¸šã€è¯šä¿¡ã€å‹å–„<br>è‡ªç”±ã€å¹³ç­‰ã€å…¬æ­£ã€æ³•æ²»</p><p>å…±åŒå¯Œè£•æ˜¯å…¨ä½“äººæ°‘å…±åŒå¯Œè£•ï¼Œæ˜¯äººæ°‘ç¾¤ä¼—____éƒ½å¯Œè£•ã€‚<br>ç‰©è´¨ç”Ÿæ´»<br>ç²¾ç¥ç”Ÿæ´»</p><p>åšå¥½æ„è¯†å½¢æ€å·¥ä½œäº‹å…³____ï¼Œä»»ä½•æ—¶å€™ä»»ä½•æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¸èƒ½å¿½è§†æ€æƒ³çš„åŠ›é‡ã€å¿½è§†æ„è¯†å½¢æ€çš„ä½œç”¨ã€‚<br>å…šçš„å‰é€”å‘½è¿<br>å›½å®¶é•¿æ²»ä¹…å®‰<br>æ°‘æ—å‡èšåŠ›å’Œå‘å¿ƒåŠ›</p><p>è®²å¥½ä¸­å›½æ•…äº‹ï¼Œè¦ç€é‡è®²å¥½____ï¼Œå±•ç¤ºæ–‡æ˜å¤§å›½ã€ä¸œæ–¹å¤§å›½ã€è´Ÿè´£ä»»å¤§å›½ã€ç¤¾ä¼šä¸»ä¹‰å¤§å›½å½¢è±¡ï¼Œè®©å½“ä»£ä¸­å›½å½¢è±¡åœ¨ä¸–ç•Œä¸Šä¸æ–­æ ‘ç«‹å’Œé—ªäº®èµ·æ¥ã€‚<br>ä¸­å›½çš„æ•…äº‹<br>ä¸­å›½å…±äº§å…šçš„æ•…äº‹<br>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„æ•…äº‹<br>ä¸­å›½äººæ°‘çš„æ•…äº‹</p><p>æ–°æ—¶ä»£ç»´æŠ¤å›½å®¶å®‰å…¨çš„å®è·µè¦æ±‚____ã€‚<br>åŠ å¼ºå›½å®¶å®‰å…¨ä½“ç³»å’Œèƒ½åŠ›å»ºè®¾<br>æé«˜é˜²èŒƒåŒ–è§£é‡å¤§é£é™©èƒ½åŠ›</p><p>å¢å¼ºæ„è¯†å½¢æ€é¢†åŸŸä¸»å¯¼æƒå’Œè¯è¯­æƒï¼Œå°±è¦åšå®šå¹¿å¤§å¹²éƒ¨ç¾¤ä¼—çš„____ã€‚<br>é“è·¯è‡ªä¿¡<br>ç†è®ºè‡ªä¿¡<br>åˆ¶åº¦è‡ªä¿¡<br>æ–‡åŒ–è‡ªä¿¡</p><p>æ¨åŠ¨ç»æµç¤¾ä¼šå‘å±•ç»¿è‰²åŒ–ã€ä½ç¢³åŒ–æ˜¯å®ç°é«˜è´¨é‡å‘å±•çš„å…³é”®ç¯èŠ‚ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦ç§¯ææ¨åŠ¨____çš„ç»¿è‰²è½¬å‹ï¼Œæ‰“é€ å›½å®¶é‡å¤§æˆ˜ç•¥ç»¿è‰²å‘å±•é«˜åœ°ã€‚<br>äº§ä¸šç»“æ„<br>èƒ½æºç»“æ„<br>äº¤é€šè¿è¾“ç»“æ„<br>æ¶ˆè´¹æ–¹å¼</p><p>æ¨åŠ¨æ„å»ºæ–°å‹å›½é™…å…³ç³»ï¼Œå°±æ˜¯è¦ç§‰æŒ____ï¼Œæ‘’å¼ƒä¼ ç»Ÿçš„ä»¥å¼ºå‡Œå¼±çš„ä¸›æ—æ³•åˆ™ï¼Œèµ°å‡ºä¸€æ¡å¯¹è¯è€Œä¸å¯¹æŠ—ã€ç»“ä¼´è€Œä¸ç»“ç›Ÿçš„å›½ä¸å›½äº¤å¾€æ–°è·¯ã€‚<br>åˆä½œå…±èµ¢<br>ç›¸äº’å°Šé‡<br>å…¬å¹³æ­£ä¹‰</p><p>è¿‘å¹´æ¥ï¼Œä¿æŠ¤ä¸»ä¹‰ã€å•è¾¹ä¸»ä¹‰æŠ¬å¤´ï¼Œé€†å…¨çƒåŒ–æ€æ½®å‘é…µï¼Œå‘å±•ç©ºé—´ä¸å¹³è¡¡æˆä¸ºå…¨çƒæ²»ç†é¢ä¸´çš„çªå‡ºé—®é¢˜ï¼Œä¸–ç•Œæ­£é¢ä¸´ç€____å‡ å¤§èµ¤å­—ã€‚<br>å‘å±•<br>ä¿¡ä»»<br>å’Œå¹³<br>æ²»ç†</p><p>____æ˜¯å…¨äººç±»çš„å…±åŒä»·å€¼ï¼Œä¹Ÿæ˜¯è”åˆå›½çš„å´‡é«˜ç›®æ ‡ã€‚ç›®æ ‡è¿œæœªå®Œæˆï¼Œæˆ‘ä»¬ä»é¡»åŠªåŠ›ã€‚<br>å…¬å¹³ã€æ­£ä¹‰<br>å’Œå¹³ã€å‘å±•<br>æ°‘ä¸»ã€è‡ªç”±</p><p>å½“ä»Šä¸–ç•Œæ­£ç»å†ç™¾å¹´æœªæœ‰ä¹‹å¤§å˜å±€ï¼Œè¿™æ ·çš„å¤§å˜å±€ä¸æ˜¯ä¸€æ—¶ä¸€äº‹ã€ä¸€åŸŸä¸€å›½ä¹‹å˜ï¼Œæ˜¯____ã€‚<br>ä¸–ç•Œä¹‹å˜<br>å†å²ä¹‹å˜<br>æ—¶ä»£ä¹‹å˜</p><p>ç§¯æå‘å±•å…¨çƒä¼™ä¼´å…³ç³»ï¼Œæ‰©å¤§åŒå„å›½çš„åˆ©ç›Šæ±‡åˆç‚¹ï¼Œä¸æ–­å®Œå–„æˆ‘å›½____çš„å¤–äº¤å¸ƒå±€ï¼Œæ‰“é€ è¦†ç›–å…¨çƒçš„â€æœ‹å‹åœˆâ€ã€‚<br>å¤šå±‚æ¬¡<br>å…¨æ–¹ä½<br>ç«‹ä½“åŒ–</p><p>æ„å»ºäººç±»å‘½è¿å…±åŒä½“æ€æƒ³çš„å†…æ¶µæ˜¯ï¼šå»ºè®¾æŒä¹…å’Œå¹³ã€____çš„ä¸–ç•Œã€‚<br>æ™®éå®‰å…¨<br>å¼€æ”¾åŒ…å®¹<br>å…±åŒç¹è£<br>æ¸…æ´ç¾ä¸½</p><p>ä¸€ä¸ªå›½å®¶çš„å®‰å…¨ä¸èƒ½å»ºç«‹åœ¨åˆ«å›½çš„åŠ¨è¡ä¹‹ä¸Šï¼Œå„æ–¹åº”è¯¥æ ‘ç«‹____çš„å®‰å…¨è§‚ï¼Œç»Ÿç­¹åº”å¯¹ä¼ ç»Ÿå’Œéä¼ ç»Ÿå®‰å…¨å¨èƒï¼Œåå¯¹ä¸€åˆ‡å½¢å¼çš„ææ€–ä¸»ä¹‰ã€‚<br>å…±åŒ<br>å¯æŒç»­<br>åˆä½œ<br>ç»¼åˆ</p><p>å…¨å†›å¿…é¡»åšå†³è½å®å…šä¸­å¤®ã€ä¸­å¤®å†›å§”å’Œä¹ è¿‘å¹³ä¸»å¸­å†³ç­–éƒ¨ç½²ï¼Œå¼ºåŒ–____ï¼Œåšåˆ°å…¨éƒ¨ç²¾åŠ›å‘æ‰“ä»—èšç„¦ï¼Œå…¨éƒ¨å·¥ä½œå‘æ‰“ä»—ç”¨åŠ²ï¼Œå®Œæˆå…šå’Œäººæ°‘èµ‹äºˆçš„æ–°æ—¶ä»£ä½¿å‘½ä»»åŠ¡ã€‚<br>å±æœºæ„è¯†<br>å¿§æ‚£æ„è¯†<br>æ‰“ä»—æ„è¯†</p><p>ç€åŠ›æŠ“å¥½å†›é˜Ÿå…šçš„æ”¿æ²»å»ºè®¾ï¼Œä¸¥è‚ƒæ”¿æ²»çºªå¾‹å’Œæ”¿æ²»è§„çŸ©ï¼Œç¡®ä¿éƒ¨é˜Ÿ____ï¼Œç¡®ä¿æªæ†å­æ°¸è¿œå¬å…šæŒ‡æŒ¥ã€‚<br>ç»å¯¹çº¯æ´<br>ç»å¯¹å¯é <br>ç»å¯¹å¿ è¯š</p><p>ã€Šä¸­å…±ä¸­å¤®å…³äºå…šçš„ç™¾å¹´å¥‹æ–—é‡å¤§æˆå°±å’Œå†å²ç»éªŒçš„å†³è®®ã€‹ä¸­æ˜ç¡®å…šåœ¨æ–°æ—¶ä»£çš„å¼ºå†›ç›®æ ‡æ˜¯å»ºè®¾ä¸€æ”¯____çš„äººæ°‘å†›é˜Ÿï¼ŒæŠŠäººæ°‘å†›é˜Ÿå»ºè®¾æˆä¸ºä¸–ç•Œä¸€æµå†›é˜Ÿã€‚<br>èƒ½æ‰“èƒœä»—<br>å¬å…šæŒ‡æŒ¥<br>ä½œé£ä¼˜è‰¯</p><p>åœ¨é‡å¡‘äººæ°‘å†›é˜Ÿç»„ç»‡å½¢æ€æ–¹é¢ï¼ŒæŒ‰ç…§â€____â€åŸåˆ™ï¼Œå¼ºåŒ–å†›å§”é›†ä¸­ç»Ÿä¸€é¢†å¯¼å’Œæˆ˜ç•¥æŒ‡æŒ¥ã€æˆ˜ç•¥ç®¡ç†åŠŸèƒ½ï¼Œæ‰“ç ´é•¿æœŸå®è¡Œçš„æ€»éƒ¨ä½“åˆ¶ã€å¤§å†›åŒºä½“åˆ¶ã€å¤§é™†å†›ä½“åˆ¶ï¼Œæ„å»ºæ–°çš„å†›é˜Ÿé¢†å¯¼ç®¡ç†å’Œä½œæˆ˜æŒ‡æŒ¥ä½“åˆ¶ã€‚<br>æˆ˜åŒºä¸»æˆ˜<br>å†›ç§ä¸»å»º<br>å†›å§”ç®¡æ€»</p><p>å…šæå‡ºæ–°æ—¶ä»£äººæ°‘å†›é˜Ÿä½¿å‘½ä»»åŠ¡ï¼Œåˆ›æ–°å†›äº‹æˆ˜ç•¥æŒ‡å¯¼ï¼Œè°ƒæ•´ä¼˜åŒ–å†›äº‹æˆ˜ç•¥å¸ƒå±€ï¼Œå¼ºåŒ–äººæ°‘å†›é˜Ÿ____çš„æˆ˜ç•¥åŠŸèƒ½ã€‚<br>éåˆ¶æˆ˜äº‰<br>æ‰“èµ¢æˆ˜äº‰<br>å¡‘é€ æ€åŠ¿<br>ç®¡æ§å±æœº</p><p>å…¨é¢åŠ å¼ºç»ƒå…µå¤‡æˆ˜ï¼Œæé«˜äººæ°‘å†›é˜Ÿæ‰“èµ¢èƒ½åŠ›ï¼Œè¦æ·±å…¥æ¨è¿›å®æˆ˜åŒ–å†›äº‹è®­ç»ƒï¼Œæ·±åŒ–____ã€‚<br>ç§‘æŠ€ç»ƒå…µ<br>å¯¹æŠ—è®­ç»ƒ<br>è”åˆè®­ç»ƒ</p><p>ä¸¤å²¸åŒèƒè¡€è„‰ç›¸è¿ï¼Œæ˜¯è¡€æµ“äºæ°´çš„ä¸€å®¶äººã€‚æˆ‘ä»¬å§‹ç»ˆå°Šé‡ã€å…³çˆ±ã€é€ ç¦å°æ¹¾åŒèƒï¼Œç»§ç»­è‡´åŠ›äº____ã€‚<br>ä¿ƒè¿›ä¸¤å²¸ç»æµæ–‡åŒ–äº¤æµåˆä½œï¼Œ<br>æ·±åŒ–ä¸¤å²¸å„é¢†åŸŸèåˆå‘å±•ï¼Œ<br>å®Œå–„å¢è¿›å°æ¹¾åŒèƒç¦ç¥‰çš„åˆ¶åº¦å’Œæ”¿ç­–ï¼Œ<br>æ¨åŠ¨ä¸¤å²¸å…±åŒå¼˜æ‰¬ä¸­åæ–‡åŒ–ï¼Œä¿ƒè¿›ä¸¤å²¸åŒèƒå¿ƒçµå¥‘åˆã€‚</p><p>æ”¯æŒé¦™æ¸¯ã€æ¾³é—¨å‘å±•ç»æµã€æ”¹å–„æ°‘ç”Ÿã€ç ´è§£ç»æµç¤¾ä¼šå‘å±•ä¸­çš„æ·±å±‚æ¬¡çŸ›ç›¾å’Œé—®é¢˜ã€‚å‘æŒ¥é¦™æ¸¯ã€æ¾³é—¨ä¼˜åŠ¿å’Œç‰¹ç‚¹ï¼Œ<br>å·©å›ºæå‡é¦™æ¸¯ã€æ¾³é—¨åœ¨å›½é™…é‡‘èã€è´¸æ˜“ã€èˆªè¿èˆªç©ºã€åˆ›æ–°ç§‘æŠ€ã€æ–‡åŒ–æ—…æ¸¸ç­‰é¢†åŸŸçš„åœ°ä½<br>æ·±åŒ–é¦™æ¸¯ã€æ¾³é—¨åŒå„å›½å„åœ°åŒºæ›´åŠ å¼€æ”¾ã€æ›´åŠ å¯†åˆ‡çš„äº¤å¾€åˆä½œ<br>æ¨è¿›ç²¤æ¸¯æ¾³å¤§æ¹¾åŒºå»ºè®¾<br>æ”¯æŒé¦™æ¸¯ã€æ¾³é—¨æ›´å¥½èå…¥å›½å®¶å‘å±•å¤§å±€ï¼Œä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´æ›´å¥½å‘æŒ¥ä½œç”¨</p><p>åœ¨ç¡®ä¿å›½å®¶____çš„å‰æä¸‹ï¼Œå’Œå¹³ç»Ÿä¸€åï¼Œå°æ¹¾åŒèƒçš„ç¤¾ä¼šåˆ¶åº¦å’Œç”Ÿæ´»æ–¹å¼ç­‰å°†å¾—åˆ°å……åˆ†å°Šé‡ï¼Œå°æ¹¾åŒèƒçš„ç§äººè´¢äº§ã€å®—æ•™ä¿¡ä»°ã€åˆæ³•æƒç›Šå°†å¾—åˆ°å……åˆ†ä¿éšœã€‚<br>å‘å±•åˆ©ç›Š<br>ä¸»æƒ<br>å®‰å…¨</p><p>ç™¾å¹´æ¥ï¼Œä¸­å›½å…±äº§å…š____ä»æœ€åˆ50å¤šåå…šå‘˜å‘å±•åˆ°ä»Šå¤©æ‹¥æœ‰9600å¤šä¸‡åå…šå‘˜çš„ä¸–ç•Œä¸Šæœ€å¤§çš„é©¬å…‹æ€ä¸»ä¹‰æ‰§æ”¿å…šï¼Œå†ç»åƒé”¤ç™¾ç‚¼è€Œæœæ°”è“¬å‹ƒï¼Œæ­£å¸¦é¢†ä¸­å›½äººæ°‘ä»¥ä¸å¯é˜»æŒ¡çš„æ­¥ä¼è¿ˆå‘ä¼Ÿå¤§å¤å…´ã€‚<br>åšæŒæ€§è´¨å®—æ—¨<br>åšæŒç†æƒ³ä¿¡å¿µ<br>åšå®ˆåˆå¿ƒä½¿å‘½<br>å‹‡äºè‡ªæˆ‘é©å‘½</p><p>å…¨é¢åŠ å¼ºå…šçš„æ€æƒ³å»ºè®¾ï¼ŒåšæŒç”¨ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³____ï¼Œç»„ç»‡å®æ–½å…šçš„åˆ›æ–°ç†è®ºå­¦ä¹ æ•™è‚²è®¡åˆ’ï¼Œå»ºè®¾é©¬å…‹æ€ä¸»ä¹‰å­¦ä¹ å‹æ”¿å…šã€‚<br>ç»Ÿä¸€æ€æƒ³<br>ç»Ÿä¸€æ„å¿—<br>ç»Ÿä¸€è¡ŒåŠ¨</p><p>æ–°æ—¶ä»£å…šçš„ç»„ç»‡è·¯çº¿,å…¨é¢è´¯å½»æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³ï¼Œ____ä¸ºåšæŒå’ŒåŠ å¼ºå…šçš„å…¨é¢é¢†å¯¼ã€åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æä¾›åšå¼ºç»„ç»‡ä¿è¯ã€‚<br>ä»¥ç»„ç»‡ä½“ç³»å»ºè®¾ä¸ºé‡ç‚¹<br>ç€åŠ›åŸ¹å…»å¿ è¯šå¹²å‡€æ‹…å½“çš„é«˜ç´ è´¨å¹²éƒ¨<br>ç€åŠ›é›†èšçˆ±å›½å¥‰çŒ®çš„å„æ–¹é¢ä¼˜ç§€äººæ‰<br>åšæŒå¾·æ‰å…¼å¤‡ã€ä»¥å¾·ä¸ºå…ˆã€ä»»äººå”¯è´¤</p><p>çªå‡ºå·¥ä½œé‡ç‚¹ï¼ŒæŠ“ç´§å»ºç«‹å’Œå®Œå–„ä¸»å¹²æ€§ã€æ”¯æ’‘æ€§å…šå†…æ³•è§„åˆ¶åº¦ï¼Œå¥å…¨ç›¸å…³é…å¥—æ³•è§„åˆ¶åº¦ï¼Œç»Ÿç­¹æ¨è¿›ç«‹æ”¹åºŸé‡Šå·¥ä½œï¼Œå½¢æˆ____çš„å…šå†…æ³•è§„åˆ¶åº¦ä½“ç³»ã€‚ä»¥æ”¹é©åˆ›æ–°ç²¾ç¥è§£å†³çªå‡ºé—®é¢˜ã€è¡¥é½æ³•è§„åˆ¶åº¦çŸ­æ¿ï¼Œæé«˜å…šå†…æ³•è§„åˆ¶åº¦è´¨é‡ã€‚<br>å†…å®¹ç§‘å­¦<br>ç¨‹åºä¸¥å¯†<br>é…å¥—å®Œå¤‡<br>è¿è¡Œæœ‰æ•ˆ</p><h2 id="ä¸»è§‚é¢˜"><a href="#ä¸»è§‚é¢˜" class="headerlink" title="ä¸»è§‚é¢˜"></a>ä¸»è§‚é¢˜</h2><h3 id="äººç±»å‘½è¿å…±åŒä½“çš„å†…æ¶µï¼Ÿ"><a href="#äººç±»å‘½è¿å…±åŒä½“çš„å†…æ¶µï¼Ÿ" class="headerlink" title="äººç±»å‘½è¿å…±åŒä½“çš„å†…æ¶µï¼Ÿ"></a>äººç±»å‘½è¿å…±åŒä½“çš„å†…æ¶µï¼Ÿ</h3><ol><li>åšæŒå¯¹è¯åå•†ï¼Œæ¨åŠ¨å»ºè®¾ä¸€ä¸ªæŒä¹…å’Œå¹³çš„ä¸–ç•Œ;</li><li>åšæŒå…±å»ºå…±äº«ï¼Œæ¨åŠ¨å»ºè®¾ä¸€ä¸ªæ™®éå®‰å…¨çš„ä¸–ç•Œ;</li><li>åšæŒåˆä½œå…±èµ¢ï¼Œæ¨åŠ¨å»ºè®¾ä¸€ä¸ªå…±åŒç¹è£çš„ä¸–ç•Œ;</li><li>åšæŒäº¤æµäº’é‰´ï¼Œæ¨åŠ¨å»ºè®¾ä¸€ä¸ªå¼€æ”¾åŒ…å®¹çš„ä¸–ç•Œ;</li><li>åšç‰¹ç»¿è‰²ä½ç¢³ï¼Œæ¨åŠ¨å»ºè®¾ä¸€ä¸ªæ¸…æ´ç¾ä¸½çš„ä¸–ç•Œã€‚</li></ol><h3 id="ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰è¿›å…¥æ–°æ—¶ä»£çš„å†å²æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰è¿›å…¥æ–°æ—¶ä»£çš„å†å²æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰è¿›å…¥æ–°æ—¶ä»£çš„å†å²æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰è¿›å…¥æ–°æ—¶ä»£çš„å†å²æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li>æ„å‘³ç€è¿‘ä»£ä»¥æ¥ä¹…ç»ç£¨éš¾çš„ä¸­åæ°‘æ—è¿æ¥äº†ä»ç«™èµ·æ¥ã€å¯Œèµ·æ¥åˆ°å¼ºèµ·æ¥çš„ä¼Ÿå¤§é£è·ƒï¼Œè¿æ¥äº†å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„å…‰æ˜å‰æ™¯;</li><li>æ„å‘³ç€ç§‘å­¦ç¤¾ä¼šä¸»ä¹‰åœ¨äºŒåä¸€ä¸–çºªçš„ä¸­å›½ç„•å‘å‡ºå¼ºå¤§ç”Ÿæœºæ´»åŠ›ï¼Œåœ¨ä¸–ç•Œä¸Šé«˜é«˜ç±»èµ·äº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ä¼Ÿå¤§æ——å¸œ;</li><li>æ„å‘³ç€ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯ã€ç†è®ºã€åˆ¶åº¦ã€‚æ–‡åŒ–ä¸æ–­å‘å±•ï¼Œæ‹“å±•äº†å‘å±•ä¸­å›½å®¶èµ°å‘ç°ä»£åŒ–çš„é€”å¾„ï¼Œç»™ä¸–ç•Œä¸Šé‚£äº›æ—¢å¸Œæœ›åŠ å¿«å‘å±•åˆå¸Œæœ›ä¿æŒè‡ªèº«ç‹¬ç«‹æ€§çš„å›½å®¶å’Œæ°‘æ—æä¾›äº†å…¨æ–°é€‰æ‹©ï¼Œä¸ºè§£å†³äººç±»é—®é¢˜è´¡çŒ®äº†ä¸­å›½æ™ºæ…§å’Œä¸­å›½æ–¹æ¡ˆã€‚</li></ol><h3 id="ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³å›ç­”äº†ä»€ä¹ˆé‡å¤§æ—¶ä»£è¯¾é¢˜ï¼Ÿ"><a href="#ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³å›ç­”äº†ä»€ä¹ˆé‡å¤§æ—¶ä»£è¯¾é¢˜ï¼Ÿ" class="headerlink" title="ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³å›ç­”äº†ä»€ä¹ˆé‡å¤§æ—¶ä»£è¯¾é¢˜ï¼Ÿ"></a>ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³å›ç­”äº†ä»€ä¹ˆé‡å¤§æ—¶ä»£è¯¾é¢˜ï¼Ÿ</h3><ol><li>æ–°æ—¶ä»£åšæŒå’Œå‘å±•ä»€ä¹ˆæ ·çš„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ã€æ€æ ·åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰</li><li>å»ºè®¾ä»€ä¹ˆæ ·çš„ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å¼ºå›½ã€æ€æ ·å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å¼ºå›½</li><li>å»ºè®¾ä»€ä¹ˆæ ·çš„é•¿æœŸæ‰§æ”¿çš„é©¬å…‹æ€ä¸»ä¹‰æ”¿å…šï¼Œæ€æ ·å»ºè®¾é•¿æœŸæ‰§æ”¿çš„é©¬å…‹æ€ä¸»ä¹‰æ”¿å…š</li></ol><h3 id="å¦‚ä½•ç†è§£ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³çš„å†å²åœ°ä½ï¼Ÿ"><a href="#å¦‚ä½•ç†è§£ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³çš„å†å²åœ°ä½ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç†è§£ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³çš„å†å²åœ°ä½ï¼Ÿ"></a>å¦‚ä½•ç†è§£ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³çš„å†å²åœ°ä½ï¼Ÿ</h3><ol><li>å½“ä»£ä¸­å›½é©¬å…‹æ€ä¸»ä¹‰ã€‚ä¸‰åä¸€ä¸–çºªé©¬å…‹æ€ä¸»ä¹‰ã€‚</li><li>ä¸­åæ–‡åŒ–å’Œä¸­å›½ç²¾ç¥çš„æ—¶ä»£ç²¾åã€‚</li><li>é©¬å…‹æ€ä¸»ä¹‰ä¸­å›½åŒ–æ—¶ä»£åŒ–æ–°çš„é£è·ƒã€‚</li></ol><h3 id="å¦‚ä½•å¥‹åŠ›å®ç°ä¸­å›½æ¢¦ï¼Ÿ"><a href="#å¦‚ä½•å¥‹åŠ›å®ç°ä¸­å›½æ¢¦ï¼Ÿ" class="headerlink" title="å¦‚ä½•å¥‹åŠ›å®ç°ä¸­å›½æ¢¦ï¼Ÿ"></a>å¦‚ä½•å¥‹åŠ›å®ç°ä¸­å›½æ¢¦ï¼Ÿ</h3><ol><li>å®ç°ä¸­å›½æ¢¦å¿…é¢†èµ°ä¸­å›½é“è·¯ï¼Œè¿™å°±æ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯;</li><li>å®ç°ä¸­å›½æ¢¦å¿…é¡»å¼˜æ‰¬ä¸­å›½ç²¾ç¥â€”â€”ä»¥çˆ±å›½ä¸»ä¹‰ä¸ºæ ¸å¿ƒçš„æ°‘æ—ç²¾ç¥å’Œä»¥æ”¹é©åˆ›æ–°ä¸ºæ ¸å¿ƒçš„æ—¶ä»£ç²¾ç¥ï¼›</li><li>å®ç°ä¸­å›½æ¢¦å¿…é¡»å‡èšä¸­å›½åŠ›é‡â€”â€”ä¸­å›½å„æ—äººæ°‘å¤§å›­ç»“çš„åŠ›é‡ã€‚</li></ol><h3 id="å®ç°å…¨ä½“äººæ°‘å…±åŒå¯Œè£•çš„å®è·µä¸¾æªæœ‰å“ªäº›ï¼Ÿå…³æ³¨ä¹¡æ‘æŒ¯å…´"><a href="#å®ç°å…¨ä½“äººæ°‘å…±åŒå¯Œè£•çš„å®è·µä¸¾æªæœ‰å“ªäº›ï¼Ÿå…³æ³¨ä¹¡æ‘æŒ¯å…´" class="headerlink" title="å®ç°å…¨ä½“äººæ°‘å…±åŒå¯Œè£•çš„å®è·µä¸¾æªæœ‰å“ªäº›ï¼Ÿå…³æ³¨ä¹¡æ‘æŒ¯å…´"></a>å®ç°å…¨ä½“äººæ°‘å…±åŒå¯Œè£•çš„å®è·µä¸¾æªæœ‰å“ªäº›ï¼Ÿå…³æ³¨ä¹¡æ‘æŒ¯å…´</h3><ol><li>æé«˜å‘å±•çš„å¹³è¡¡æ€§ã€åè°ƒæ€§ã€åŒ…å®¹æ€§ã€‚</li><li>ç€åŠ›æ‰©å¤§ä¸­ç­‰æ”¶å…¥ç¾¤ä½“è§„æ¨¡ã€‚</li><li>ä¿ƒè¿›åŸºæœ¬å…¬å…±æœåŠ¡å‡ç­‰åŒ–ã€‚</li><li>åŠ å¼ºå¯¹é«˜æ”¶å…¥çš„è§„èŒƒå’Œè°ƒèŠ‚ã€‚</li><li>ä¿ƒè¿›äººæ°‘ç²¾ç¥ç”Ÿæ´»å…±åŒå¯Œè£•ã€‚</li><li>ä¿ƒè¿›å†œæ°‘å†œæ‘å…±åŒå¯Œè£•ã€‚</li></ol><h3 id="å¦‚ä½•æ„å»ºå¯¹å¤–å¼€æ”¾æ–°æ ¼å±€ï¼Ÿ"><a href="#å¦‚ä½•æ„å»ºå¯¹å¤–å¼€æ”¾æ–°æ ¼å±€ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ„å»ºå¯¹å¤–å¼€æ”¾æ–°æ ¼å±€ï¼Ÿ"></a>å¦‚ä½•æ„å»ºå¯¹å¤–å¼€æ”¾æ–°æ ¼å±€ï¼Ÿ</h3><ol><li>å®è¡Œæ›´åŠ ç§¯æä¸»åŠ¨çš„å¼€æ”¾æˆ˜å’¯ã€‚<br>å¼€æ”¾æ˜¯å½“ä»£ä¸­å›½çš„é²œæ˜æ ‡è¯†ï¼Œè§‰çš„åå…«å¤§ä»¥æ¥ï¼Œæˆ‘å›½é‡‡å–äº†æ›´åŠ ç§¯æä¸»åŠ¨çš„å¼€æ”¾æˆ˜ç•¥ï¼Œæˆ‘å›½å¯¹å¤–å¼€æ”¾æ°´å¹³æŒç»­æå‡ï¼Œæˆ‘ä»¬è¦æ¨åŠ¨æ›´åŠ åŒ…å®¹çš„å…¨çƒå‘å±•ã€‚äººç±»æ–‡æ˜å·±ç»è¿›å…¥21ä¸–çºªï¼Œå†·æˆ˜æ€ç»´æ—©å·±è¿‡æ—¶ã€‚æˆ‘ä»¬åº”è¯¥æºæ‰‹åŠªåŠ›ï¼Œå¼€è¾Ÿåˆä½œå…±èµ¢çš„æ–°å¢ƒç•Œã€‚</li><li>æ„å»ºäº’åˆ©å…±èµ¢ã€å¤šå…ƒå¹³è¡¡ã€ å®‰å…¨é«˜æ•ˆçš„å¼€æ”¾å‹ç»æµä½“ç³»ã€‚<br>æ‰©å†…éœ€å’Œå¢å¤–éœ€ç›¸äº’åŠ¨ï¼Œâ€œå¼•è¿›æ¥â€å’Œâ€œèµ°å‡ºå»â€ å¹¶ä¸¾ï¼Œä¿ƒå¼€æ”¾å’ŒæŠ¤å®‰å…¨ç»Ÿç­¹ï¼Œç¨³æ­¥æ‰©å¤§è§„åˆ™ã€è§„åˆ¶ã€ç®¡ç†ã€æ ‡å‡†ç­‰åˆ¶åº¦å‹å¼€æ”¾ã€‚</li><li>æ¨åŠ¨å…±å»ºâ€œä¸€å¸¦ä¸€è·¯â€é«˜è´¨é‡å‘å±•ã€‚ç»æµå‘å±•ã€æ°‘ç”Ÿæ”¹å–„ã€æ–‡æ˜è¿›æ­¥ã€‚</li></ol><h3 id="æˆ‘å›½ç°ä»£åŒ–ç»æµä½“ç³»çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æˆ‘å›½ç°ä»£åŒ–ç»æµä½“ç³»çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æˆ‘å›½ç°ä»£åŒ–ç»æµä½“ç³»çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æˆ‘å›½ç°ä»£åŒ–ç»æµä½“ç³»çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li>åˆ›æ–°å¼•é¢†ã€‚ååŒå‘å±•çš„äº§ä¸šä½“ç³»ã€‚ç»Ÿä¸€å¼€æ”¾ã€ç«äº‰æœ‰åºçš„å¸‚åœºä½“ç³»ã€‚</li><li>ä½“ç°æ•ˆç‡ã€ä¿ƒè¿›å…¬å¹³çš„æ”¶å…¥åˆ†é…ä½“ç³»ã€‚å½°æ˜¾ä¼˜åŠ¿ã€åè°ƒè”åŠ¨çš„åŸä¹¡åŒºåŸŸå‘å±•ä½“ç³»ã€‚</li><li>èµ„æºèŠ‚çº¦ã€‚ç¯å¢ƒå‹å¥½çš„ç»¿è‰²å‘å±•ä½“ç³»ã€‚å¤šå…ƒå¹³è¡—ã€å®‰å…¨é«˜æ•ˆçš„å…¨é¢å¼€æ”¾ä½“ç³»ã€‚</li><li>å……åˆ†å‘æŒ¥å¸‚åœºä½œç”¨ã€é‡å¥½å‘æŒ¥æ”¿åºœä½œç”¨çš„ç»æµä½“åˆ¶ã€‚</li></ol><h3 id="ä¾›ç»™ä¾§ç»“æ„æ€§æ”¹é©çš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¾›ç»™ä¾§ç»“æ„æ€§æ”¹é©çš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¾›ç»™ä¾§ç»“æ„æ€§æ”¹é©çš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¾›ç»™ä¾§ç»“æ„æ€§æ”¹é©çš„å¿…è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li>é€‚åº”æŠŠæ¡å¼•é¢†ç»æµå‘å±•æ–°å¸¸æ€çš„é‡å¤§åˆ›æ–°;</li><li>é€‚åº”å›½é™…é‡‘èå±æœºå‘ç”Ÿåç»¼åˆå›½åŠ›ç«äº‰æ–°å½¢åŠ¿çš„ä¸»åŠ¨é€‰æ‹©;</li><li>æ¨åŠ¨æˆ‘å›½ç»æµå®ç°é«˜è´¨é‡å‘å±•çš„å¿…ç„¶è¦æ±‚ã€‚</li></ol><h3 id="å¦‚ä½•åŠå¥½äººæ°‘æ»¡æ„çš„æ•™è‚²ï¼Ÿ"><a href="#å¦‚ä½•åŠå¥½äººæ°‘æ»¡æ„çš„æ•™è‚²ï¼Ÿ" class="headerlink" title="å¦‚ä½•åŠå¥½äººæ°‘æ»¡æ„çš„æ•™è‚²ï¼Ÿ"></a>å¦‚ä½•åŠå¥½äººæ°‘æ»¡æ„çš„æ•™è‚²ï¼Ÿ</h3><ol><li>å¿…é¡»æ·±åŒ–æ•™è‚²é¢†åŸŸç·šåˆæ”¹é©ã€‚</li><li>å¿…é¡»ä¿ƒè¿›æ•™è‚²å…¬å¹³ï¼Œå¿…é¡»å»ºè®¾é«˜è´¨é‡æ•™è‚²ä½“ç³»ã€‚</li><li>å¿…é¡»åŠ å¼ºæ•™å¸ˆé˜Ÿä¼å»ºè®¾ã€‚</li></ol><h3 id="æ€æ ·åŠ å¿«å»ºè®¾ç§‘æŠ€å¼ºå›½ï¼Ÿ"><a href="#æ€æ ·åŠ å¿«å»ºè®¾ç§‘æŠ€å¼ºå›½ï¼Ÿ" class="headerlink" title="æ€æ ·åŠ å¿«å»ºè®¾ç§‘æŠ€å¼ºå›½ï¼Ÿ"></a>æ€æ ·åŠ å¿«å»ºè®¾ç§‘æŠ€å¼ºå›½ï¼Ÿ</h3><ol><li>å‘æŒ¥æ–°å‹ä¸¾å›½ä½“åˆ¶ä¼˜åŠ¿ã€‚<br>å¥å…¨æ–°å‹ä¸¾å›½ä½“åˆ¶ï¼Œå¼ºåŒ–å›½å®¶æˆ˜è·¯ç§‘æŠ€åŠ›é‡ï¼Œä¼˜åŒ–é…ç½®åˆ›æ–°èµ„æºï¼Œä½¿æˆ‘å›½åœ¨é‡è¦ç§‘æŠ€é¢†åŸŸæˆä¸ºå…¨çƒé¢†è·‘è€…ï¼Œåœ¨å‰æ²¿äº¤å‰é¢†åŸŸæˆä¸ºå¼€æ‹“è€…ï¼ŒåŠ›äº‰å°½æ—©æˆä¸ºä¸–ç•Œä¸»è¦ç§‘å­¦ä¸­å¿ƒå’Œåˆ›æ–°é«˜åœ°ã€‚å‘æŒ¥æ–°å‹ä¸¾å›½ä½“åˆ¶ä¼˜åŠ¿ï¼Œè¦åšç‰¹å…šå¯¹ç§‘æŠ€äº‹ä¸šçš„é›†ä¸­ç»Ÿä¸€é¢†å¯¼ã€‚å‘æŒ¥æ–°å‹ä¸¾å›½ä½“åˆ¶ä¼˜åŠ¿ï¼Œè¦å…¨é¢æ¨è¿›ç§‘æŠ€ä½“åˆ¶æ”¹é©ã€‚</li><li>æ‰“è±ªå…³é”®æ¥å¿ƒæŠ€æœ¯æ”»åšæˆ˜ã€‚<br>åªæœ‰æŠŠå…³é”®æ ¸å¿ƒæŠ€æœ¯æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ï¼Œæ‰èƒ½ä»æ ¹æœ¬ä¸Šä¿éšœå›½å®¶ç»æµå®‰å…¨ï¼Œå›½é˜²å®‰å…¨å’Œå…¶ä»–å®‰å…¨ã€‚åªæœ‰æŠŠå…³å¥æ ¸å¿ƒæŠ€æœ¯æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ï¼Œæ‰èƒ½çœŸæ­£æŒæ¡ç«äº‰å’Œå‘å±•çš„ä¸»åŠ¨æƒã€‚æ‰“èµ¢å…³å¥æŒ‰å¿ƒæŠ€æœ¯æ”»åšæˆ˜ï¼Œé¦–è¦ä»»åŠ¡æ˜¯åŠ å¿«å®ç°â€œå¡è„–å­ã€ å…³å¥æ ¸å¿ƒæŠ€æœ¯çªç ´ã€‚</li><li>å¢å¼ºè‡ªä¸»åˆ›æ–°èƒ½åŠ›ã€‚<br>å¢å¼ºè‡ªä¸»åˆ›æ–°èƒ½åŠ›ï¼Œè¦è€…åŠ›æ¨è¿›åŸºç¡€ç ”ç©¶ã€‚å¢å¼ºè‡ªä¸»åˆ›æ–°èƒ½åŠ›ï¼Œè¦ç€åŠ›æ¨åŠ¨åº”ç”¨ç ”ç©¶ã€‚å¢å¼ºè‡ªä¸»åˆ›æ–°èƒ½åŠ›ï¼Œè¦è‘—åŠ›æ¨åŠ¨å‰æ²¿ç ”ç©¶ã€‚ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–°æ—¶ä»£æ˜¯å†³èƒœå…¨é¢å»ºæˆå°åº·ç¤¾ä¼šï¼Œè¿›è€Œå…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å¼ºå›½çš„æ—¶ä»£ã€‚</li></ol><h3 id="å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»å¥½åœ¨å“ªé‡Œï¼Ÿ"><a href="#å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»å¥½åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»å¥½åœ¨å“ªé‡Œï¼Ÿ"></a>å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»å¥½åœ¨å“ªé‡Œï¼Ÿ</h3><ol><li>äººæ°‘æ°‘ä¸»å‚ä¸ä¸æ–­æ‰©å¤§ã€‚</li><li>å›½å®¶æ²»ç†é«˜æ•ˆï¼Œç¤¾ä¼šå’Œè°ç¨³å®šã€‚</li><li>æƒåŠ›è¿ç”¨å¾—åˆ°æœ‰æ•ˆåˆ¶çº¦å’Œç›‘ç£ã€‚</li></ol><h3 id="ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯çš„æ ¸å¿ƒè¦ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯çš„æ ¸å¿ƒè¦ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯çš„æ ¸å¿ƒè¦ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯çš„æ ¸å¿ƒè¦ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li>åšæŒå…šçš„é¢†å¯¼ã€‚</li><li>åšæŒä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ã€‚</li><li>è´¯å½»ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ç†è®ºã€‚</li></ol><h3 id="ä¸ºä»€ä¹ˆè¦å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–ï¼Ÿ</h3><ol><li>æ–‡åŒ–æ˜¯ä¸€ä¸ªå›½å®¶ã€ä¸€ä¸ªæ°‘æ—çš„çµé­‚ï¼Œ</li><li>æ²¡æœ‰æ–‡åŒ–ç¹è£å…´ç››å°±æ²¡æœ‰ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´;</li><li>æ›´å¥½æ»¡è¶³äººæ°‘æ—¥ç›Šå¢é•¿çš„ç²¾ç¥æ–‡åŒ–éœ€è¦ã€‚</li></ol><h3 id="â€œè„±è´«æ”»åšç²¾ç¥â€çš„å†…æ¶µï¼Ÿ"><a href="#â€œè„±è´«æ”»åšç²¾ç¥â€çš„å†…æ¶µï¼Ÿ" class="headerlink" title="â€œè„±è´«æ”»åšç²¾ç¥â€çš„å†…æ¶µï¼Ÿ"></a>â€œè„±è´«æ”»åšç²¾ç¥â€çš„å†…æ¶µï¼Ÿ</h3><ol><li>ä¸Šä¸‹åŒå¿ƒã€å°½è¯´å‡ºæˆ˜ï¼›</li><li>ç²¾å‡†åŠ¡å®ã€å¼€æ‹“åˆ›æ–°ï¼›</li><li>æ”»åšå…‹éš¾ã€ä¸è´Ÿäººæ°‘;</li></ol><h3 id="æ€æ ·æ¨è¿›ç¤¾ä¼šæ²»ç†ç°ä»£åŒ–ï¼Ÿ"><a href="#æ€æ ·æ¨è¿›ç¤¾ä¼šæ²»ç†ç°ä»£åŒ–ï¼Ÿ" class="headerlink" title="æ€æ ·æ¨è¿›ç¤¾ä¼šæ²»ç†ç°ä»£åŒ–ï¼Ÿ"></a>æ€æ ·æ¨è¿›ç¤¾ä¼šæ²»ç†ç°ä»£åŒ–ï¼Ÿ</h3><ol><li>åšæŒç³»ç»Ÿæ²»ç†ã€ç»¼åˆæ²»ç†ã€ä¾æ³•æ²»ç†ã€æºå¤´æ²»ç†ã€‚</li><li>å¥å…¨å…šç»„ç»‡é¢†å¯¼çš„è‡ªæ²»ã€ æ³•æ²»ã€å¾·æ´½ç›¸ç»“åˆçš„åŸä¹¡åŸºå±‚æ²»ç†ä½“ç³»ã€‚</li><li>åŠ å¼ºç¤¾ä¼šæ²»å®‰ç»¼åˆæ²»ç†ã€‚</li></ol><h3 id="ç¤¾ä¼šä¸»ä¹‰ç”Ÿæ€æ–‡æ˜è§‚çš„ä¸»è¦å†…å®¹ï¼Ÿ"><a href="#ç¤¾ä¼šä¸»ä¹‰ç”Ÿæ€æ–‡æ˜è§‚çš„ä¸»è¦å†…å®¹ï¼Ÿ" class="headerlink" title="ç¤¾ä¼šä¸»ä¹‰ç”Ÿæ€æ–‡æ˜è§‚çš„ä¸»è¦å†…å®¹ï¼Ÿ"></a>ç¤¾ä¼šä¸»ä¹‰ç”Ÿæ€æ–‡æ˜è§‚çš„ä¸»è¦å†…å®¹ï¼Ÿ</h3><ol><li>åšæŒäººä¸è‡ªç„¶å’Œè°å…±ç”Ÿã€‚</li><li>ç»¿æ°´é’å±±å°±æ˜¯é‡‘å±±é“¶å±±ã€‚</li><li>è‰¯å¥½ç”Ÿæ€ç¯å¢ƒæ˜¯æœ€æ™®æƒ çš„æ°‘ç”Ÿç¦ç¤¾ã€‚</li><li>ç»Ÿç­¹å±±æ°´æ—ç”°æ¹–è‰æ²™ç³»ç»Ÿæ²»ç†ã€‚</li><li>ç”¨æœ€ä¸¥æ ¼åˆ¶åº¦æœ€ä¸¥å¯†æ³•æ²»ä¿æŠ¤ç”Ÿæ€ç¯å¢ƒã€‚</li><li>å…±è°‹å…¨çƒç”Ÿæ€æ–‡æ˜å»ºè®¾ã€‚</li></ol><h3 id="å›½å®¶å®‰å…¨"><a href="#å›½å®¶å®‰å…¨" class="headerlink" title="å›½å®¶å®‰å…¨"></a>å›½å®¶å®‰å…¨</h3><p>å›½å®¶å®‰å…¨æ˜¯æŒ‡å›½å®¶æ”¿æƒã€ä¸»æƒã€ç»Ÿä¸€å’Œé¢†å£«å®Œæ•´ã€äººæ°‘ç¦ç¥‰ã€ç»æµç¤¾ä¼šå¯æŒç»­å‘å±•ï¼Œå’Œå›½å®¶å…¶ä»–é‡å¤§åˆ©ç›Šç›¸å¯¹å¤„äºæ²¡æœ‰å±é™©å’Œä¸å—å†…å¤–å¨åŠ©çš„çŠ¶æ€ï¼Œä»¥åŠä¿éšœæŒç»­å®‰å…¨çŠ¶æ€çš„èƒ½åŠ›ã€‚</p><h3 id="æ€æ ·åšæŒå’Œå®Œå–„ï¼Œâ€”å›½ä¸¤åˆ¶ã€åˆ¶åº¦ä½“ç³»ï¼Ÿ"><a href="#æ€æ ·åšæŒå’Œå®Œå–„ï¼Œâ€”å›½ä¸¤åˆ¶ã€åˆ¶åº¦ä½“ç³»ï¼Ÿ" class="headerlink" title="æ€æ ·åšæŒå’Œå®Œå–„ï¼Œâ€”å›½ä¸¤åˆ¶ã€åˆ¶åº¦ä½“ç³»ï¼Ÿ"></a>æ€æ ·åšæŒå’Œå®Œå–„ï¼Œâ€”å›½ä¸¤åˆ¶ã€åˆ¶åº¦ä½“ç³»ï¼Ÿ</h3><ol><li>å¿…é¡»ä¾æ³•æ²»æ¸¯æ²»æ¾³ï¼Œç»´æŠ¤å®ªæ³•å’ŒåŸºæœ¬æ³•ç¡®å®šçš„å®ªåˆ¶ç§©åº;</li><li>åšå®ˆâ€œâ€”å›½â€åŸåˆ™ï¼Œå°Šé‡â€œä¸¤åˆ¶â€å·®å¼‚;</li><li>å®Œå–„ç‰¹åˆ«è¡Œæ”¿åŒºåŒå®ªæ³•å’ŒåŸºæœ¬æ³•å®æ–½ç›¸å…³çš„åˆ¶åº¦å’Œæœºåˆ¶;å¥å…¨ä¸­å¤®ä¾ç…§å®ªæ³•å’ŒåŸºæœ¬æ³•å¯¹ç‰¹åˆ«è¡Œæ”¿åŒºè¡Œä½¿å…¨é¢ç®¡æ²»æƒåˆ¶åº¦ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> Final Review </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Politics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœŸæœ«å¤ä¹ -hadoop</title>
      <link href="/2023/07/07/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0-hadoop/"/>
      <url>/2023/07/07/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0-hadoop/</url>
      
        <content type="html"><![CDATA[<h1 id="Hadoop"><a href="#Hadoop" class="headerlink" title="Hadoop"></a>Hadoop</h1><h2 id="HadoopåŸºæœ¬æ¦‚å¿µ"><a href="#HadoopåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="HadoopåŸºæœ¬æ¦‚å¿µ"></a>HadoopåŸºæœ¬æ¦‚å¿µ</h2><ol><li>å¥ å®šå¤§æ•°æ®æŠ€æœ¯çš„ç†è®ºåŸºçŸ³çš„Googleå…¬å¸çš„ä¸‰ç¯‡è®ºæ–‡åŒ…æ‹¬ï¼šGFSã€MapReduceã€BigTableï¼Œè¢«ç§°ä¸ºGoogleå…¬å¸çš„â€œä¸‰é©¾é©¬è½¦â€ã€‚åˆ†åˆ«å¯¹åº”äº†Hadoopçš„HDFSã€MapReduceã€Hbaseã€‚</li><li>Hadoopçš„è¿è¡Œæ¨¡å¼åŒ…æ‹¬ï¼šå•æœºï¼ˆæœ¬åœ°ï¼‰æ¨¡å¼ï¼Œä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼Œå®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼</li><li>Hadoopèƒ½å¤Ÿä½¿ç”¨æˆ·è½»æ¾å¼€å‘å’Œè¿è¡Œå¤„ç†å¤§æ•°æ®çš„åº”ç”¨ç¨‹åºï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯ï¼šå¤„ç†èƒ½åŠ›å¼ºï¼Œå®ç°äº†é«˜æ•ˆæ€§å’Œé«˜å¯é æ€§ï¼›åœ¨é›†ç¾¤é—´åˆ†é…æ•°æ®ï¼Œé«˜æ‰©å±•æ€§ï¼›èƒ½å¤Ÿä¿å­˜å¤šä¸ªæ•°æ®å‰¯æœ¬ï¼Œé«˜å®¹é”™æ€§ã€‚</li><li>æœºæ¶æ„ŸçŸ¥æœºåˆ¶ï¼šåŒæ—¶å…¼é¡¾èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡é€Ÿåº¦å’Œæé«˜æ•°æ®çš„å®¹é”™èƒ½åŠ›ã€‚</li><li>è™šæ‹Ÿæœºæ˜¯ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå®ƒèƒ½å¤Ÿåœ¨ç°æœ‰çš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œç³»ç»Ÿã€‚</li><li>Hadoopçš„å®‰è£…æ–¹å¼åŒ…æ‹¬ï¼šå•æœºæ¨¡å¼ï¼Œä¼ªåˆ†å¸ƒå¼æ¨¡å¼å’Œå®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ä¸‰ç§ã€‚</li><li>é›†ç¾¤æ˜¯æŒ‡ä¸€ç»„ç›¸äº’ç‹¬ç«‹çš„ã€é€šè¿‡é«˜é€Ÿç½‘ç»œäº’è”çš„è®¡ç®—æœºï¼Œå®ƒä»¬æ„æˆäº†ä¸€ä¸ªç»„ï¼Œå¹¶ä»¥å•ä¸€ç³»ç»Ÿçš„æ¨¡å¼åŠ ä»¥ç®¡ç†ã€‚</li><li>åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯æŒ‡å°†å¤šå°æœåŠ¡å™¨é›†ä¸­åœ¨ä¸€èµ·ï¼Œ æ¯å°æœåŠ¡å™¨éƒ½å®ç°æ€»ä½“ä¸­çš„ä¸åŒä¸šåŠ¡ï¼Œåšä¸åŒçš„äº‹æƒ…ã€‚</li></ol><p>åœ¨linuxçš„å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤ï¼Œèƒ½å¤Ÿå¯åŠ¨æ‰€æœ‰Hadoopç›¸å…³çš„æœåŠ¡è¿›ç¨‹ã€‚</span></span><br><span class="line">stop-all.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤ï¼Œèƒ½å¤Ÿå•ç‹¬å¯åŠ¨HDFSæœåŠ¡ã€‚</span></span><br><span class="line">start-dfs.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹åœ¨å½“å‰ç³»ç»Ÿä¸­å¯åŠ¨äº†å‡ ä¸ªjavaè¿›ç¨‹çš„ä¿¡æ¯çš„</span></span><br><span class="line">jps</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®ç°æ˜¾ç¤ºæœ¬æœºIP</span> </span><br><span class="line">ifconfig</span><br></pre></td></tr></table></figure><h2 id="HDFSåŠŸèƒ½"><a href="#HDFSåŠŸèƒ½" class="headerlink" title="HDFSåŠŸèƒ½"></a>HDFSåŠŸèƒ½</h2><ol><li>HDFSæ˜¯åŸºäºæµæ•°æ®æ¨¡å¼è®¿é—®å’Œå¤„ç†è¶…å¤§æ–‡ä»¶çš„éœ€æ±‚è€Œå¼€å‘çš„ï¼Œå…·æœ‰é«˜å®¹é”™ã€é«˜å¯é æ€§ã€é«˜å¯æ‰©å±•æ€§ã€é«˜ååç‡ç­‰ç‰¹å¾ï¼Œé€‚åˆçš„è¯»å†™ä»»åŠ¡æ˜¯ä¸€æ¬¡å†™å…¥ï¼Œå¤šæ¬¡è¯»ã€‚</li><li>åœ¨HDFSä¸­é€šè¿‡åˆ†å—æ¥å®ç°æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨åŠŸèƒ½ï¼Œä¸€ä¸ªæ•°æ®å—ä¼šåœ¨å¤šä¸ªæ­¤ç±»èŠ‚ç‚¹ä¸­è¿›è¡Œå†—ä½™å¤‡ä»½ã€‚</li><li>NameNodeæ˜¯HDFSçš„ç®¡ç†èŠ‚ç‚¹ï¼Œè´Ÿè´£ç®¡ç†å’Œç»´æŠ¤HDFSçš„å‘½åç©ºé—´å’Œç®¡ç†DataNodeä¸Šçš„æ•°æ®å—ï¼Œå®ƒå¯ä»¥æ¥å—å®¢æˆ·ç«¯çš„æ–‡ä»¶æ“ä½œè¯·æ±‚ã€‚æ‰€ç®¡ç†å‘½åç©ºé—´çš„ä¿¡æ¯æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼šfsimageå’Œeditsã€‚</li><li>SecondaryNameNodeï¼Œå…¶ä¸»è¦èŒè´£æ˜¯å®šæœŸæŠŠNameNodeä¸Šçš„fsimageå’Œeditsä¸‹è½½å¹¶åˆå¹¶ç”Ÿæˆæ–°çš„fsimageã€‚</li><li>åœ¨Hadoop2.2ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼ŒHDFSé»˜è®¤Block Sizeçš„å¤§å°æ˜¯128mã€‚</li><li>HDFSçš„ç¼ºç‚¹æ˜¯ï¼šä¸é€‚åˆå¤„ç†ä½å»¶è¿Ÿçš„æ•°æ®è®¿é—®ï¼Œä¸é€‚åˆå¤šç”¨æˆ·å†™å…¥åŠä»»æ„ä¿®æ”¹æ–‡ä»¶ï¼Œä¸é€‚åˆå¤„ç†å¤§é‡çš„å°æ–‡ä»¶ã€‚</li><li>é«˜å¯ç”¨æ€§ï¼šæ˜¯æŒ‡é€šè¿‡åœ¨åŒä¸€é›†ç¾¤ä¸­è¿è¡Œä¸¤ä¸ªNameNodeçš„æ–¹å¼æ¥é˜²æ­¢ç”±äºå•ä¸ªNameNodeæ•…éšœå¼•èµ·çš„æ•´ä¸ªHDFSé›†ç¾¤æ— æ³•ä½¿ç”¨ã€‚</li><li>é…é¢ï¼šæ˜¯æŒ‡å¯ä»¥è®¾ç½®HDFSåœ¨æŸä¸ªç›®å½•ä¸‹æ–‡ä»¶æ•°é‡ä¸ç›®å½•æ•°é‡ä¹‹å’Œæœ€å¤§å€¼ã€‚</li><li>è”é‚¦ï¼šæ˜¯æŒ‡åœ¨HDFSä¸­æœ‰å¤šä¸ªNameNodeæˆ–NameSpaceæ˜¯è”åˆçš„ï¼Œç›¸äº’ç‹¬ç«‹ï¼Œå„è‡ªåˆ†å·¥ï¼Œç®¡ç†è‡ªå·±çš„åŒºåŸŸã€‚</li><li>åœ¨core-site.xmlä¿®æ”¹fs.trash.intervalé€‰é¡¹æ¥è®¾ç½®å·²åˆ é™¤æ–‡ä»¶åœ¨å›æ”¶ç«™ä¸­çš„ä¿ç•™æ—¶é—´ã€‚</li></ol><p>HDFS Shellå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºç›®å½•ï¼ˆæ–‡ä»¶å¤¹ï¼‰</span></span><br><span class="line">hdfs dfs -mkdir</span><br></pre></td></tr></table></figure><p>HDFS API</p><ul><li>getBlockSizeï¼šè·å¾—æŒ‡å®šæ–‡ä»¶çš„æ•°æ®å—å¤§å°</li><li>getLengthï¼šå®ç°è¿”å›æ–‡ä»¶é•¿åº¦</li></ul><h2 id="YARNçš„åŠŸèƒ½"><a href="#YARNçš„åŠŸèƒ½" class="headerlink" title="YARNçš„åŠŸèƒ½"></a>YARNçš„åŠŸèƒ½</h2><ol><li>Hadoop2.0ç›¸æ¯”è¾ƒHadoop1.0å¢åŠ äº†YARNæ¨¡å—ä»¥å®ç°å¯¹ä¸Šå±‚åº”ç”¨æä¾›ç»Ÿä¸€çš„èµ„æºç®¡ç†å’Œè°ƒåº¦åŠŸèƒ½ã€‚</li><li>Containeræ˜¯YARNä¸­çš„èµ„æºæŠ½è±¡ï¼Œå®ƒå°è£…äº†æŸä¸ªèŠ‚ç‚¹ä¸Šçš„å†…å­˜ã€CPUã€ç£ç›˜ã€ç½‘ç»œç­‰å¤šç»´åº¦èµ„æºã€‚</li><li>YARNæä¾›å…ˆå…¥å…ˆå‡ºè°ƒåº¦å™¨ï¼Œå®¹å™¨è°ƒåº¦å™¨ï¼Œå…¬å¹³è°ƒåº¦å™¨ä¸‰ç§è°ƒåº¦æœºåˆ¶ã€‚</li></ol><h2 id="MapReduceçš„åŠŸèƒ½"><a href="#MapReduceçš„åŠŸèƒ½" class="headerlink" title="MapReduceçš„åŠŸèƒ½"></a>MapReduceçš„åŠŸèƒ½</h2><ol><li>MapReduceçš„ç‰¹ç‚¹ï¼šæ˜“äºç¼–ç¨‹ï¼Œåˆ†å¸ƒå¼ç¨‹åºå¯ä»¥åœ¨å¤§é‡å»‰ä»·çš„PCä¸Šè¿è¡Œï¼›è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œå¯ä»¥é€šè¿‡å¢åŠ é›†ç¾¤ä¸­è®¡ç®—æœºæ•°æ¥æé«˜è®¡ç®—èƒ½åŠ›ï¼›é«˜å®¹é”™æ€§ï¼Œå½“ä¸€å°ä¸»æœºå‡ºæ•…éšœè®¡ç®—ä»»åŠ¡å¯ä»¥è½¬ç§»åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šã€‚</li><li>MapReduceåœ¨å¯¹å¤§æ•°æ®çš„è®¡ç®—è¿‡ç¨‹è‡³å°‘åˆ†ä¸ºMapå’ŒReduceä¸¤ä¸ªéƒ¨åˆ†ã€‚</li><li>MapReduceåœ¨Mapæ­¥éª¤åå¯¹æ•°æ®è¿›è¡Œåˆ†åŒºï¼Œæ’åºï¼Œæº¢å†™ï¼Œåˆå¹¶çš„æ­¥éª¤å¯ä»¥ç»Ÿç§°ä¸º Shuffle è¿‡ç¨‹ã€‚ShuffleåŠŸèƒ½æ ¹æ®å…¶åŠŸèƒ½å’Œåœ¨MapReduceè¿‡ç¨‹ä¸­çš„æ­¥éª¤ï¼Œå¯ä»¥åˆ†ä¸ºMap<br>Shuffleå’ŒReduce Shuffleã€‚</li><li>Hadoopçš„å†…ç½®ç±»å‹IntWritableç”¨æ¥å®šä¹‰æ•´å½¢æ•°æ®ï¼Œä¸Javaçš„intç±»å‹å¯¹åº”ã€‚</li><li>Hadoopçš„å†…ç½®ç±»å‹ LongWritable ç”¨æ¥å®šä¹‰é•¿æ•´å‹å‹æ•°æ®ï¼Œä¸Javaçš„longç±»å‹å¯¹åº”ã€‚</li><li>åºåˆ—åŒ–æ˜¯ä¸€ç§å°†å†…å­˜ä¸­çš„Javaå¯¹è±¡è½¬åŒ–ä¸ºå…¶ä»–å¯å­˜å‚¨æ–‡ä»¶æˆ–å¯è·¨è®¡ç®—æœºä¼ è¾“æ•°æ®æµçš„æŠ€æœ¯ã€‚</li><li>Hadoopåºåˆ—åŒ–å®ç°äº†org.apche.hadoop.io.Writableæ¥å£ï¼Œå…¶ä¸­åŒ…å«write()å’ŒreadFields()ä¸¤ä¸ªæ–¹æ³•ã€‚</li><li>LineRecordReader ç±»å®ç°äº†MapReduceä»æ–‡æœ¬æ–‡ä»¶ä¸­é€è¡Œè¯»å–æ–‡æœ¬å†…å®¹ï¼Œç”Ÿæˆ&lt;Key,Value&gt;æ ¼å¼æ•°æ®ã€‚</li><li>MapReduceé€šè¿‡åˆ†ç‰‡å¯¹æ•°æ®è¿›è¡Œé€»è¾‘åˆ’åˆ†ï¼Œåœ¨è¿›è¡ŒMapè®¡ç®—æ—¶æ‰€åˆ’åˆ†çš„å¤„ç†æ•°æ®å¯¹MapTaskä¸€ä¸€å¯¹åº”ã€‚æ‰€ä¿å­˜çš„HDFSçš„æ•°æ®å—ï¼ˆBlockï¼‰ä¸MapReduceæ‰€å¤„ç†çš„æ•°æ®åˆ‡ç‰‡ï¼ˆsplitï¼‰å¤§å°å…³ç³»æ˜¯ç›¸ç­‰ã€æ•´æ•°å€ã€å‡ åˆ†ä¹‹ä¸€çš„å…³ç³»ã€‚</li><li>åœ¨Mapé˜¶æ®µçš„åˆ†åŒºæ­¥éª¤å®ç°äº†æ ¹æ®Keyå€¼å¯¹æ•°æ®è¿›è¡Œåˆ’åˆ†ï¼Œä½¿å…¶åˆ†é…ç»™å¯¹åº”ReduceTaskã€‚</li></ol><h2 id="ç®€ç­”é¢˜"><a href="#ç®€ç­”é¢˜" class="headerlink" title="ç®€ç­”é¢˜"></a>ç®€ç­”é¢˜</h2><ol><li>ç®€è¿°å¤§æ•°æ®ç†å¿µçš„å››ä¸ªç‰¹å¾ï¼š<br/><br>æ•°æ®ä½“é‡å¤§ï¼šå¤§æ•°æ®çš„æ•°æ®é‡ä» TBçº§åˆ«è·ƒå‡åˆ°PBçº§åˆ«ã€‚<br/><br>æ•°æ®ç±»å‹å¤šï¼šå¤§æ•°æ®çš„æ•°æ®ç±»å‹åŒ…æ‹¬å‰æ–‡æåˆ°çš„ç½‘ç»œæ—¥å¿—ã€è§†é¢‘ã€å›¾ç‰‡ã€åœ°ç†ä½ç½®ä¿¡æ¯ç­‰ã€‚<br/><br>å¤„ç†é€Ÿåº¦å¿«ï¼š1ç§’å®šå¾‹ã€‚è¿™æ˜¯å¤§æ•°æ®æŠ€æœ¯ä¸ä¼ ç»Ÿæ•°æ®æŒ–æ˜æŠ€æœ¯çš„æœ¬è´¨åŒºåˆ«ã€‚<br/><br>ä»·å€¼å¯†åº¦ä½ï¼šä»¥è§†é¢‘ä¸ºä¾‹ï¼Œåœ¨è¿ç»­ä¸é—´æ–­çš„è§†é¢‘ç›‘æ§è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½æœ‰ç”¨çš„æ•°æ®ä»…ä»…æœ‰ä¸€ä¸¤ç§’ã€‚</li><li>ç®€è¿°Hadoopå¯¹ Googleå…¬å¸ä¸‰ç¯‡è®ºæ–‡æ€æƒ³çš„å®ç°çš„åŠŸèƒ½ï¼š<br/><br>HDFSæ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå®ç°äº†åˆ†å¸ƒå¼è®¡ç®—ä¸­æ•°æ®å­˜å‚¨ç®¡ç†åŠŸèƒ½ï¼Œå®ƒæ˜¯å¯¹GFSè®ºæ–‡æ€æƒ³çš„å®ç°ã€‚<br/><br>MapReduceæ˜¯ç”¨äºå¤§è§„æ¨¡æ•°æ®é›†ï¼ˆå¤§äº1TBï¼‰çš„å¹¶è¡Œè¿ç®—ç¼–ç¨‹æ¨¡å‹ï¼Œå®ƒæ˜¯å¯¹MapReduceè®ºæ–‡æ€æƒ³çš„å®ç°ã€‚<br/><br>HBaseæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€é¢å‘åˆ—çš„å¼€æºæ•°æ®åº“ã€‚å®ƒæ˜¯åœ¨Hadoopä¹‹ä¸Šæä¾›äº†ç±»ä¼¼äº BigTableçš„èƒ½åŠ›ï¼Œæ˜¯å¯¹BigTableè®ºæ–‡æ€æƒ³çš„å®ç°ã€‚</li><li>ç®€è¿°å¯¹HDFSè¿›è¡Œè®¿é—®å’Œæ“ä½œçš„ä¸‰ç§æ–¹å¼ï¼š<br/><br>é€šè¿‡Webç•Œé¢è¿›è¡ŒHDFSæ“ä½œï¼Œä½¿ç”¨æµè§ˆå™¨è®¿é—®HDFSå¯¹åº”IPç«¯å£ä¸º50070çš„é¡µé¢å¯¹HDFSè¿›è¡Œè®¿é—®å’Œæ“ä½œã€‚<br/><br>HDFSå‘½ä»¤æ˜¯ç”±ä¸€ç³»åˆ—ç±»ä½¿ç”¨Linux<br>Shellçš„å‘½ä»¤ç»„æˆçš„ï¼Œå‘½ä»¤åˆ†ä¸ºæ“ä½œå‘½ä»¤ï¼Œç®¡ç†å‘½ä»¤å’Œå…¶ä»–å‘½ä»¤ã€‚å¯ä»¥é€šè¿‡Linuxæˆ–è¿œç¨‹æ§åˆ¶æ®µçš„å‘½ä»¤è¡Œè¾“å…¥Shellåç§°æ¥å¯¹HDFSè¿›è¡Œè®¿é—®å’Œæ“ä½œã€‚<br/><br>Hadoopæä¾›äº†å¤šç§HDFSçš„è®¿é—®æ¥å£ï¼ŒHadoop Java APIä½äºâ€œorg.apache.hadoop.fsâ€åŒ…ä¸­ï¼Œèƒ½å¤Ÿå®ç°é€šè¿‡Javaè¯­è¨€å¯¹HDFSè¿›è¡Œæ–‡ä»¶æ“ä½œå’Œæ–‡ä»¶ç³»ç»Ÿç®¡ç†çš„è®¿é—®åŠŸèƒ½ã€‚</li><li>ç®€è¿°HDFSçš„ä¸‰ä¸ªä¼˜ç‚¹ï¼š<br/><br>å¤„ç†è¶…å¤§æ–‡ä»¶ï¼šHDFSèƒ½å¤Ÿå¤„ç†TBçº§ç”šè‡³PBçº§çš„æ•°æ®ã€‚<br/><br>æ”¯æŒæµå¼æ•°æ®è®¿é—®ï¼šHDFS<br>è®¾è®¡å»ºç«‹åœ¨â€œä¸€æ¬¡å†™å…¥ï¼Œå¤šæ¬¡è¯»å–â€çš„åŸºç¡€ä¸Šï¼Œæ„å‘³ç€ä¸€ä¸ªæ•°æ®é›†ä¸€æ—¦ç”Ÿæˆï¼Œå°±ä¼šè¢«å¤åˆ¶åˆ†å‘åˆ°ä¸åŒçš„å­˜å‚¨èŠ‚ç‚¹ï¼Œç„¶åå“åº”å„ç§æ•°æ®åˆ†æä»»åŠ¡è¯·æ±‚ã€‚<br/><br>ä½æˆæœ¬è¿è¡Œï¼šHDFSå¯è¿è¡Œåœ¨ä½å»‰çš„å•†ç”¨ç¡¬ä»¶é›†ç¾¤ä¸Šã€‚</li><li>ç®€è¿°MapReduceçš„å››ä¸ªç‰¹ç‚¹ï¼š<br/><br>æ˜“äºç¼–ç¨‹ï¼šç”¨å®ƒçš„ä¸€äº›ç®€å•æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªåˆ†å¸ƒå¼ç¨‹åºï¼Œ<br/><br>è‰¯å¥½çš„æ‰©å±•æ€§ï¼šå½“è®¡ç®—èµ„æºä¸èƒ½å¾—åˆ°æ»¡è¶³çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ç®€å•åœ°å¢åŠ è®¡ç®—æœºæ¥æ‰©å±•å®ƒçš„è®¡ç®—èƒ½åŠ›ã€‚<br/><br>é«˜å®¹é”™æ€§ï¼šä¸€å°ä¸»æœºå‡ºé—®é¢˜äº†ï¼Œå®ƒå¯ä»¥æŠŠä¸Šé¢çš„è®¡ç®—ä»»åŠ¡è½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œä¸è‡³äºä½¿è¿™ä¸ªä»»åŠ¡è¿è¡Œå¤±è´¥ï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦äººå·¥å¹²é¢„ï¼Œå®Œå…¨ç”±MapReduceåœ¨å†…éƒ¨å®Œæˆã€‚<br/><br>èƒ½å¯¹PBçº§ä»¥ä¸Šæµ·é‡æ•°æ®è¿›è¡Œç¦»çº¿å¤„ç†ï¼šMapReduceé€‚åˆç¦»çº¿å¤„ç†è€Œä¸é€‚åˆå®æ—¶å¤„ç†æ¯”å¦‚æ¯«ç§’çº§åˆ«åœ°è¿”å›ä¸€ä¸ªç»“æœï¼ŒMapReduceå¾ˆéš¾åšåˆ°ã€‚</li><li>ç®€è¿°Hadoopçš„ä¸‰ç§å®‰è£…æ¨¡å¼ï¼š<br/><br>å•æœºæ¨¡å¼ï¼šæŒ‡Hadoopè¿è¡Œåœ¨ä¸€å°ä¸»æœºä¸Šï¼ŒæŒ‰é»˜è®¤é…ç½®ä»¥éåˆ†å¸ƒå¼æ¨¡å¼è¿è¡Œä¸€ä¸ªç‹¬çš„Javaè¿›ç¨‹ã€‚å•æœºæ¨¡å¼æ˜¯Hadoopçš„é»˜è®¤æ¨¡å¼ã€‚<br/><br>ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼šæŒ‡Hadoopè¿è¡Œåœ¨ä¸€å°ä¸»æœºä¸Šï¼Œä½¿ç”¨å¤šä¸ªJavaè¿›ç¨‹ï¼Œæ¨¡ä»¿å®Œå…¨åˆ†å¸ƒå¼çš„å„ç±»èŠ‚ç‚¹ã€‚ä¼ªåˆ†å¸ƒå¼æ¨¡å¼å…·å¤‡å®Œå…¨åˆ†å¸ƒå¼çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¸¸ç”¨è°ƒè¯•ç¨‹åºã€‚<br/><br>å®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ï¼šä¹Ÿå«é›†ç¾¤æ¨¡å¼ï¼Œæ˜¯å°† Hadoopè¿è¡Œåœ¨å¤šå°ä¸»æœºä¸­ï¼Œå„ä¸ªä¸»æœºæŒ‰ç…§ç›¸å…³é…ç½®è¿è¡Œç›¸ç«‹çš„Hadoopå®ˆæŠ¤è¿›ç¨‹ã€‚å®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼æ˜¯çœŸæ­£çš„åˆ†å¸ƒå¼ç¯å¢ƒï¼Œå¯ç”¨äºå®é™…çš„ç”Ÿäº§ç¯å¢ƒã€‚</li></ol><h2 id="æ˜“é”™æ¦‚å¿µ"><a href="#æ˜“é”™æ¦‚å¿µ" class="headerlink" title="æ˜“é”™æ¦‚å¿µ"></a>æ˜“é”™æ¦‚å¿µ</h2><ol><li>Hadoopæ˜¯Javaå¼€å‘çš„ï¼Œæ‰€ä»¥ MapReduceåªæ”¯æŒJavaè¯­è¨€ç¼–å†™ã€‚</li><li>Mapreduceçš„input splitå°±æ˜¯ä¸€ä¸ªblockã€‚</li><li>å®¢æˆ·ç«¯ä¸Šä¼ çš„æ•°æ®é¦–å…ˆå‘é€ç»™NameNodeï¼Œæ ¹æ®NameNodeæ‰€ç®¡ç†çš„DataNodeçš„åˆ†å·¥å†é€ä¸ªå‘é€ç»™DataNodeã€‚</li><li>ä¸ºäº†å®ç°ç¯å½¢ç¼“å†²åŒºåŠŸèƒ½ï¼ŒHadoopéœ€è¦é…ç½®ç‰¹æ®Šç»“æ„çš„ç¯å½¢å†…å­˜èŠ¯ç‰‡ã€‚</li><li>MapReduceæ˜¯Javaè¯­è¨€å¼€å‘çš„ï¼Œå› æ­¤å…¶æ•°æ®ç±»å‹ä¹Ÿæ²¿ç”¨äº†Javaçš„æ•°æ®ç±»å‹ã€‚</li><li>å¦‚æœNameNodeæ„å¤–ç»ˆæ­¢ï¼ŒSecondaryNameNodeä¼šæ¥æ›¿å®ƒä½¿é›†ç¾¤ç»§ç»­å·¥ä½œã€‚</li><li>ä¸ºäº†ä¿è¯æ•°æ®çš„ç¨³å®šæ€§ï¼Œæ•°æ®åˆ‡ç‰‡ï¼ˆSplitï¼‰çš„å¤§å°å¿…é¡»æ˜¯æ•°æ®å—ï¼ˆblockï¼‰çš„ä¸€æ ·å¤§ã€‚</li><li>é«˜å¯ç”¨æ€§HAé€šè¿‡åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­åŒæ—¶å¤„äºActiveçŠ¶æ€çš„ä¸¤ä¸ªNameNodeæ¥ä¿è¯HDFSèƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚</li><li>æ•°æ®å—çš„å¤§å°ï¼ˆBlockSizeï¼‰æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ã€‚</li><li>åœ¨MapReduceè®¡ç®—ä¸­ä¸ºäº†æé«˜æ•°æ®è®¡ç®—é€Ÿåº¦ï¼Œå½“å•ä¸ªMapTaskå®Œæˆåæ•°æ®ä¼šç›´æ¥è¢«æ‹‰å–åˆ°Reduceé˜¶æ®µè¿›è¡Œåç»­è®¡ç®—ã€‚</li><li>ç”±äºä¼šå‡ºç°ç›¸åŒçš„Keyåœ¨ä¸åŒçš„ReduceTaskè¿›è¡Œç»Ÿè®¡çš„æƒ…å†µï¼Œå› æ­¤åœ¨Reduceé˜¶æ®µæœ€åéœ€è¦å¯¹æ‰€æœ‰èŠ‚ç‚¹æ‰€ç”Ÿæˆæ‰€æœ‰æ–‡ä»¶è¿›è¡Œåˆå¹¶ã€‚</li></ol><h2 id="HDFS-Shellå‘½ä»¤æ“ä½œ"><a href="#HDFS-Shellå‘½ä»¤æ“ä½œ" class="headerlink" title="HDFS Shellå‘½ä»¤æ“ä½œ"></a>HDFS Shellå‘½ä»¤æ“ä½œ</h2><ol><li>åœ¨HDFSçš„æ ¹ç›®å½•ä¸­ä¸Šåˆ›å»ºä¸€ä¸ªç›®å½•ç»“æ„ï¼Œä¸º<code>new/folder</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mkdir -p /new/folder</span><br></pre></td></tr></table></figure></li><li>åœ¨HDFSæ ¹ç›®å½•çš„<code>new</code>ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶<code>1.txt</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -touchz /new/1.txt</span><br></pre></td></tr></table></figure></li><li>å°†ç”¨æˆ·ç›®å½•ä¸‹çš„<code>context.txt</code>å†…å®¹è¿½åŠ åˆ°HDFSæ–‡ä»¶<code>/new/1.txt</code>ä¸­<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -appendToFile context.txt /new/1.txt</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹HDFSæ–‡ä»¶<code>/new/1.txt</code>çš„æ–‡ä»¶å†…å®¹<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -cat /new/1.txt</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹HDFSæ–‡ä»¶ç›®å½•<code>/new</code>æ‰€å çš„ç£ç›˜ç©ºé—´å¤§å°<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -du /new</span><br></pre></td></tr></table></figure></li><li>åˆ é™¤HDFSæ–‡ä»¶ç›®å½•<code>/new</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -rm /new</span><br></pre></td></tr></table></figure></li><li>åœ¨HDFSçš„æ ¹ç›®å½•ä¸­ä¸Šåˆ›å»ºä¸€ä¸ªç›®å½•ç»“æ„ï¼Œä¸º<code>dir1/dir2/dir3</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -mkdir -p /dirl/dir2/dir3</span><br></pre></td></tr></table></figure></li><li>å°†Linuxç”¨æˆ·æ ¹ç›®å½•ä¸­çš„æ–‡ä»¶<code>localFile.txt</code>å¤åˆ¶åˆ°HDFSæ ¹ç›®å½•ä¸­ä¿å­˜ä¸º<code>hdfsFile.txt</code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -copyFromLocal localFile.txt /hdfsFile.txt</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -put localFile.txt /hdfsFile.txt</span><br></pre></td></tr></table></figure></li><li>æ˜¾ç¤ºHDFSä¸­çº§è”åˆ—å‡ºæ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -ls -R /</span><br></pre></td></tr></table></figure></li><li>åœ¨HDFSæ ¹ç›®å½•<code>dir1</code>ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶<code>1.txt</code>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -touchz /dir1/1.txt</span><br></pre></td></tr></table></figure></li><li>å°†ç”¨æˆ·ç›®å½•ä¸‹çš„<code>code2.txt</code>å†…å®¹è¿½åŠ åˆ°HDFSæ–‡ä»¶<code>/dir1/1.txt</code>ä¸­   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -appendToFile code2.txt /dir1/1.txt</span><br></pre></td></tr></table></figure></li><li>å°†dir1ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶<code>1.txt</code>ä¸‹è½½åˆ°Linuxçš„æœ¬åœ°æ ¹ç›®å½•ä¸­ï¼Œä¿å­˜ä¸ºæ–‡ä»¶<code>downloadFile.txt</code>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -copyToLocal / dir1/1.txt downloadFile.txt</span><br></pre></td></tr></table></figure>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -get /dir1/1.txt downloadFile.txt</span><br></pre></td></tr></table></figure></li></ol><h3 id="HDFS-APIç¼–ç¨‹"><a href="#HDFS-APIç¼–ç¨‹" class="headerlink" title="HDFS APIç¼–ç¨‹"></a>HDFS APIç¼–ç¨‹</h3><ol><li><p>å·²çŸ¥HDFSçš„IPåœ°å€ä¸º<code>192.168.44.128</code>ï¼Œè®¿é—®ç«¯å£ä¸º<code>9000</code>ï¼Œç”¨æˆ·åä¸º<code>admin</code>ã€‚ç¼–ç¨‹å®ç°è°ƒç”¨<code>FileSystem</code><br>ç±»è‡ªå¸¦çš„<code>copyFromLocalFile</code>æ–¹æ³•ä¸Šä¼ Linuxç³»ç»Ÿä¸­æœ¬åœ°æ–‡ä»¶<code>/home/admin/upload.txt</code>åˆ°HDFSæ–‡ä»¶å¤¹<code>/user/admin/</code><br>ä¸­ä¿å­˜ä¸ºæ–‡ä»¶<code>1.txt</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Exam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.URI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">URI</span> <span class="variable">uri</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URI</span>(<span class="string">&quot;hdfs://192.168.44.128:9000&quot;</span>);</span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line">        <span class="type">FileSystem</span> <span class="variable">fs</span> <span class="operator">=</span> FileSystem.get(uri, conf, <span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;/home/admin/upload.txt&quot;</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">dst</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;/user/admin/1.txt&quot;</span>);</span><br><span class="line">        fs.copyFromLocalFile(src, dst);</span><br><span class="line">        fs.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å·²çŸ¥HDFSçš„IPåœ°å€ä¸º<code>192.168.44.128</code>ï¼Œè®¿é—®ç«¯å£ä¸º<code>9000</code>ï¼Œç”¨æˆ·åä¸º<code>admin</code>ã€‚ç¼–ç¨‹å®ç°è°ƒç”¨<code>FileSystem</code>ç±»è‡ªå¸¦çš„<code>copyToLocalFile</code><br>æ–¹æ³•ä¸‹è½½HDFSæ–‡ä»¶å¤¹<code>/user/admin/</code>ä¸­æ–‡ä»¶<code>1.txt</code>åˆ°Linuxç³»ç»Ÿä¸­æœ¬åœ°ç›®å½•<code>/home/admin/</code>ä¿å­˜ä¸º<code>download.txt</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Exam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.URI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">URI</span> <span class="variable">uri</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URI</span>(<span class="string">&quot;hdfs://192.168.44.128:9000&quot;</span>);</span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">conf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line">        <span class="type">FileSystem</span> <span class="variable">fs</span> <span class="operator">=</span> FileSystem.get(uri, conf, <span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;/user/admin/1.txt&quot;</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">dst</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;/home/admin/download.txt&quot;</span>);</span><br><span class="line">        fs.copyToLocalFile(src, dst);</span><br><span class="line">        fs.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="MapReduceç¨‹åºè®¾è®¡é¢˜"><a href="#MapReduceç¨‹åºè®¾è®¡é¢˜" class="headerlink" title="MapReduceç¨‹åºè®¾è®¡é¢˜"></a>MapReduceç¨‹åºè®¾è®¡é¢˜</h2><h3 id="ç»ƒä¹ 1"><a href="#ç»ƒä¹ 1" class="headerlink" title="ç»ƒä¹ 1"></a>ç»ƒä¹ 1</h3><p>åœ¨æŸä¼ä¸šç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“ä¸­æ‰€ä¿å­˜å‘˜å·¥ä¿¡æ¯è¡¨EMPçš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th>EMPNO</th><th>ENAME</th><th>JOB</th><th>MGR</th><th>HIREDATE</th><th>SAL</th><th>COMM</th><th>DEPTNO</th></tr></thead><tbody><tr><td>3641</td><td>çŸ³é‡‘æ³‰</td><td>ç®¡ç†</td><td>0001</td><td>2009&#x2F;3&#x2F;4</td><td>20000</td><td>50000</td><td>1</td></tr><tr><td>6984</td><td>é«˜ä¸½</td><td>è¡Œæ”¿</td><td>5684</td><td>2009&#x2F;3&#x2F;7</td><td>3500</td><td>4000</td><td>1</td></tr><tr><td>7397</td><td>é—¨äº®</td><td>å¼€å‘</td><td>7396</td><td>2009&#x2F;5&#x2F;11</td><td>10000</td><td>25000</td><td>2</td></tr><tr><td>7398</td><td>æè´º</td><td>å¼€å‘</td><td>7396</td><td>2009&#x2F;9&#x2F;22</td><td>10000</td><td>25000</td><td>2</td></tr><tr><td>8049</td><td>æåŠ é‡Œ</td><td>é”€å”®</td><td>3641</td><td>2009&#x2F;3&#x2F;21</td><td>8000</td><td>50000</td><td>3</td></tr><tr><td>8331</td><td>å­™ç«‹å®ª</td><td>é”€å”®</td><td>8049</td><td>2009&#x2F;4&#x2F;29</td><td>6000</td><td>40000</td><td>3</td></tr><tr><td>9486</td><td>ææ˜ç¤¼</td><td>ç”Ÿäº§</td><td>3641</td><td>2009&#x2F;3&#x2F;25</td><td>7000</td><td>9000</td><td>4</td></tr><tr><td>9696</td><td>å¼ é¡ºæ¶›</td><td>ç”Ÿäº§</td><td>9486</td><td>2009&#x2F;4&#x2F;20</td><td>4000</td><td>5000</td><td>4</td></tr></tbody></table><p>å…¶ä¸­è¡¨ä¸­å„å­—æ®µä»£è¡¨çš„å«ä¹‰ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>EMPNO</td><td>å‘˜å·¥å·</td></tr><tr><td>ENAME</td><td>å‘˜å·¥å§“å</td></tr><tr><td>JOB</td><td>å²—ä½</td></tr><tr><td>MGR</td><td>ç›´å±é¢†å¯¼</td></tr><tr><td>HIREDATE</td><td>é›‡ä½£æ—¶é—´</td></tr><tr><td>SAL</td><td>æœˆè–ª</td></tr><tr><td>COMM</td><td>å¥–é‡‘</td></tr><tr><td>DEPTNO</td><td>éƒ¨é—¨å·</td></tr></tbody></table><p>å°†æ•°æ®ä»æ•°æ®åº“ä¸­å¯¼å‡ºï¼Œä¿å­˜ä¸ºæ–‡ä»¶emp.csvä»¥ä½œä¸ºç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨å‘˜å·¥æœˆè–ªæ€»é¢çš„åŸºç¡€æ•°æ®ï¼Œæ–‡ä»¶å…¶å†…å®¹ä¸ºï¼š</p><blockquote><p>3641,çŸ³é‡‘æ³‰,ç®¡ç†,0001,2009&#x2F;3&#x2F;4,20000,50000,1</p><p>6984,é«˜ä¸½,è¡Œæ”¿,5684,2009&#x2F;3&#x2F;7,3500,4000,1</p><p>7397,é—¨äº®,å¼€å‘,7396,2009&#x2F;5&#x2F;11,10000,25000,2</p><p>7398,æè´º,å¼€å‘,7396,2009&#x2F;9&#x2F;22,10000,25000,2</p><p>8049,æåŠ é‡Œ,é”€å”®,3641,2009&#x2F;3&#x2F;21,8000,50000,3</p><p>8331,å­™ç«‹å®ª,é”€å”®,8049,2009&#x2F;4&#x2F;29,6000,40000,3</p><p>9486,ææ˜ç¤¼,ç”Ÿäº§,3641,2009&#x2F;3&#x2F;25,7000,9000,4</p><p>9696,å¼ é¡ºæ¶›,ç”Ÿäº§,9486,2009&#x2F;4&#x2F;20,4000,5000,4</p></blockquote><p>å°†<code>emp.csv</code>ä¸Šä¼ åˆ°HDFSç›®å½•<code>hdfs://192.168.44.128:9000/user/input/</code></p><p>ä»¥MapReduceæ–¹å¼å®ç°æ ¹æ®<code>emp.csv</code>ä¸­æ‰€åŒ…å«çš„å‘˜å·¥ä¿¡æ¯ç»Ÿè®¡éƒ¨é—¨æœˆè–ªæ€»é¢çš„åŠŸèƒ½ï¼Œä»¥æ–‡å­—çš„æ–¹å¼åˆ†ææ±‚æ¯ä¸ªéƒ¨é—¨æœˆå·¥èµ„æ€»é¢æ•°æ®çš„Mapå’ŒReduceæ­¥éª¤å„å®Œæˆçš„åŠŸèƒ½ä»¥åŠè¾“å…¥ï¼Œè¾“å‡ºæ•°æ®ç±»å‹ã€‚<br>æ ¹æ®æ³¨é‡Šæè¿°åˆ†åˆ«å¡«å†™Mainç±»ï¼ŒMapç±»å’ŒReduceç±»å¯¹åº”javaä»£ç ã€‚è¦æ±‚å°†è®¡ç®—çš„ç»“æœä¿å­˜åœ¨HDFSç›®å½•<code>hdfs://192.168.44.128:9000/user/output/</code><br>ä¸­</p><h4 id="ç¨‹åºåˆ†æ"><a href="#ç¨‹åºåˆ†æ" class="headerlink" title="ç¨‹åºåˆ†æ"></a>ç¨‹åºåˆ†æ</h4><p>Mapé˜¶æ®µè¾“å…¥ç±»å‹ä¸º<code>Key LongWritable : Value Text</code>åˆ†åˆ«è¡¨ç¤ºæ–‡æœ¬åç§»é‡ï¼Œå½“å‰è¡Œå‘˜å·¥çš„ä¿¡æ¯</p><p>Mapæ‰€å®ç°çš„åŠŸèƒ½æ˜¯æ ¹æ®é€—å·ä»å½“å‰è¡Œæ–‡æœ¬å†…å®¹ä¸­æå–å‡ºå½“å‰å‘˜å·¥çš„éƒ¨é—¨ç¼–å·å’Œæœˆè–ª</p><p>è¾“å‡º<code>key IntWritable : Value IntWritable</code>åˆ†åˆ«è¡¨ç¤ºéƒ¨é—¨ç¼–å·ï¼Œå½“å‰è¡Œå‘˜å·¥çš„æœˆè–ª</p><p>Reduceé˜¶æ®µè¾“å…¥ç±»å‹<code>Key IntWritable : Value IntWritable</code>åˆ†åˆ«è¡¨ç¤ºéƒ¨é—¨ç¼–å·ï¼Œå½“å‰éƒ¨é—¨çš„å‘˜å·¥æœˆè–ªé›†åˆ</p><p>Reduceæ‰€å®ç°çš„åŠŸèƒ½æ˜¯å°†å½“å‰éƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥æœˆè–ªè¿›è¡Œç´¯åŠ å¾—åˆ°æ•´ä¸ªéƒ¨é—¨çš„æœˆè–ªæ€»é¢</p><p>è¾“å‡º<code>Key IntWritable : Value IntWritable</code>åˆ†åˆ«è¡¨ç¤ºéƒ¨é—¨ç¼–å·ï¼Œå½“å‰éƒ¨é—¨çš„æœˆè–ªæ€»é¢</p><h4 id="ç¨‹åº"><a href="#ç¨‹åº" class="headerlink" title="ç¨‹åº"></a>ç¨‹åº</h4><ol><li><p>ExamMapper Class</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MapReduceExam1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExamMapper</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;LongWritable, Text, IntWritable, IntWritable&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">map</span><span class="params">(LongWritable key1, Text value1, Context context)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">// è¯»å–çš„ä¸€è¡Œæ–‡æœ¬å†…å®¹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> value1.toString();</span><br><span class="line">        <span class="comment">// å°†å­—ç¬¦ä¸²ä»¥é€—å·ä¸ºæ ‡è®°ç‚¹è¿›è¡Œåˆ†å‰²</span></span><br><span class="line">        String[] words = data.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="comment">// è¾“å‡º&lt; key,Value &gt;</span></span><br><span class="line">        context.write(<span class="keyword">new</span> <span class="title class_">IntWritable</span>(Integer.parseInt(words[<span class="number">7</span>])), <span class="keyword">new</span> <span class="title class_">IntWritable</span>(Integer.parseInt(words[<span class="number">5</span>])));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ExamReducer Class</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MapReduceExam1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExamReducer</span> <span class="keyword">extends</span> <span class="title class_">Reducer</span>&lt;IntWritable, IntWritable, IntWritable, IntWritable&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">reduce</span><span class="params">(IntWritable key3, Iterable&lt;IntWritable&gt; value3, Context context)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (IntWritable value : value3) &#123;</span><br><span class="line">            total += value.get();</span><br><span class="line">        &#125;</span><br><span class="line">        context.write(key3, <span class="keyword">new</span> <span class="title class_">IntWritable</span>(total));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ExamMain Class</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MapReduceExam1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExamMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Job</span> <span class="variable">job</span> <span class="operator">=</span> Job.getInstance(<span class="keyword">new</span> <span class="title class_">Configuration</span>());</span><br><span class="line">        <span class="comment">// è®¾ç½®Clientçš„ç±»</span></span><br><span class="line">        job.setJarByClass(ExamMain.class);</span><br><span class="line">        <span class="comment">// è®¾ç½®Mapçš„ç±»å’Œè¾“å…¥ç±»å‹</span></span><br><span class="line">        job.setMapperClass(ExamMapper.class);</span><br><span class="line">        job.setMapOutputKeyClass(IntWritable.class);</span><br><span class="line">        job.setMapOutputValueClass(IntWritable.class);</span><br><span class="line">        <span class="comment">// è®¾ç½®reduceçš„ç±»å’Œè¾“å…¥ç±»å‹</span></span><br><span class="line">        job.setReducerClass(ExamReducer.class);</span><br><span class="line">        job.setOutputKeyClass(IntWritable.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line"></span><br><span class="line">        FileInputFormat.setInputPaths(job, <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;hdfs://192.168.44.128:9000/user/input/Employee/EMP.csv&quot;</span>));</span><br><span class="line">        FileOutputFormat.setOutputPath(job, <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;hdfs://192.168.44.128:9000/user/output/SalaryTotal&quot;</span>));</span><br><span class="line">        job.waitForCompletion(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="ç»ƒä¹ 1-1"><a href="#ç»ƒä¹ 1-1" class="headerlink" title="ç»ƒä¹ 1"></a>ç»ƒä¹ 1</h3><p>åœ¨æŸå›¾ä¹¦é¦†å›¾ä¹¦ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“ä¸­æ‰€ä¿å­˜å›¾ä¹¦ä¿¡æ¯è¡¨BookInfoçš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th>BOOKID</th><th>BNAME</th><th>ROOM</th><th>TYPE</th><th>DATE</th><th>PRICE</th></tr></thead><tbody><tr><td>0001</td><td>è€äººä¸æµ·</td><td>1</td><td>æ–‡å­¦</td><td>2009&#x2F;3&#x2F;4</td><td>35</td></tr><tr><td>0002</td><td>æ—¶å°šæ‚å¿—</td><td>2</td><td>æœŸåˆŠæ‚å¿—</td><td>2009&#x2F;3&#x2F;7</td><td>20</td></tr><tr><td>0003</td><td>Cè¯­è¨€</td><td>3</td><td>è®¡ç®—æœº</td><td>2009&#x2F;5&#x2F;11</td><td>32</td></tr><tr><td>0004</td><td>çº¢æ¥¼æ¢¦</td><td>1</td><td>æ–‡å­¦</td><td>2009&#x2F;9&#x2F;22</td><td>50</td></tr><tr><td>0005</td><td>JAVAå¼€å‘</td><td>3</td><td>è®¡ç®—æœº</td><td>2009&#x2F;3&#x2F;21</td><td>24</td></tr><tr><td>0006</td><td>è®¡ç®—æœºåŸºç¡€</td><td>3</td><td>è®¡ç®—æœº</td><td>2009&#x2F;4&#x2F;29</td><td>25</td></tr><tr><td>0007</td><td>è¥¿æ¸¸è®°</td><td>1</td><td>æ–‡å­¦</td><td>2009&#x2F;3&#x2F;25</td><td>40</td></tr><tr><td>0008</td><td>è¯»è€…æ–‡æ‘˜</td><td>2</td><td>æœŸåˆŠæ‚å¿—</td><td>2009&#x2F;4&#x2F;20</td><td>8</td></tr></tbody></table><p>å…¶ä¸­è¡¨ä¸­å„å­—æ®µä»£è¡¨çš„å«ä¹‰ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>BOOKID</td><td>å›¾ä¹¦ç¼–å·</td></tr><tr><td>BNAME</td><td>ä¹¦å</td></tr><tr><td>ROOM</td><td>æ‰€åœ¨æˆ¿é—´</td></tr><tr><td>TYPE</td><td>å›¾ä¹¦ç±»å‹</td></tr><tr><td>DATE</td><td>è´­å…¥æ—¶é—´</td></tr><tr><td>PRICE</td><td>ä»·æ ¼</td></tr></tbody></table><p>å°†æ•°æ®ä»æ•°æ®åº“ä¸­å¯¼å‡ºï¼Œä¿å­˜ä¸ºæ–‡ä»¶book.csvä»¥ä½œä¸ºç»Ÿè®¡æ¯ç±»å›¾ä¹¦æ€»ä»·æ ¼çš„åŸºç¡€æ•°æ®ï¼Œæ–‡ä»¶å…¶å†…å®¹ä¸ºï¼š</p><blockquote><p>0001,è€äººä¸æµ·,1,æ–‡å­¦,2009&#x2F;3&#x2F;4,35</p><p>0002,æ—¶å°šæ‚å¿—,2,æœŸåˆŠæ‚å¿—,2009&#x2F;3&#x2F;7,20</p><p>0003,Cè¯­è¨€,3 è®¡ç®—æœº,2009&#x2F;5&#x2F;11,32</p><p>0004,çº¢æ¥¼æ¢¦,1,æ–‡å­¦,2009&#x2F;9&#x2F;22,50</p><p>0005,JAVAå¼€å‘,3,è®¡ç®—æœº,2009&#x2F;3&#x2F;21,24</p><p>0006,è®¡ç®—æœºåŸºç¡€,3,è®¡ç®—æœº,2009&#x2F;4&#x2F;29,25</p><p>0007,è¥¿æ¸¸è®°,1,æ–‡å­¦,2009&#x2F;3&#x2F;25,40</p><p>0008,è¯»è€…æ–‡æ‘˜,2,æœŸåˆŠæ‚å¿—,2009&#x2F;4&#x2F;20,8</p></blockquote><p>å°†<code>book.csv</code>ä¸Šä¼ åˆ°HDFSç›®å½•<code>hdfs://192.168.44.128:9000/user/input/</code><br>ä»¥MapReduceæ–¹å¼å®ç°æ ¹æ®book.csvä¸­æ‰€åŒ…å«çš„å›¾ä¹¦ä¿¡æ¯ç»Ÿè®¡æ¯ç±»å›¾ä¹¦çš„æ€»ä»·æ ¼çš„åŠŸèƒ½ï¼Œä»¥æ–‡å­—çš„æ–¹å¼åˆ†ææ±‚æ¯å¤§ç±»å›¾ä¹¦ä»·æ ¼çš„Mapå’ŒReduceæ­¥éª¤å„å®Œæˆçš„åŠŸèƒ½ä»¥åŠè¾“å…¥ï¼Œè¾“å‡ºæ•°æ®ç±»å‹ã€‚æ ¹æ®æ³¨é‡Šæè¿°åˆ†åˆ«å¡«å†™Mainç±»ï¼ŒMapç±»å’ŒReduceç±»å¯¹åº”javaä»£ç ã€‚è¦æ±‚å°†è®¡ç®—çš„ç»“æœä¿å­˜åœ¨HDFSç›®å½•<code>hdfs://192.168.44.128:9000/user/output/</code><br>ä¸­ã€‚</p><h4 id="ç¨‹åºåˆ†æ-1"><a href="#ç¨‹åºåˆ†æ-1" class="headerlink" title="ç¨‹åºåˆ†æ"></a>ç¨‹åºåˆ†æ</h4><p>Mapé˜¶æ®µè¾“å…¥ç±»å‹ä¸º<code>Key LongWritable : Value Text</code>åˆ†åˆ«è¡¨ç¤ºæ–‡æœ¬åç§»é‡ï¼Œå½“å‰è¡Œå›¾ä¹¦çš„ä¿¡æ¯</p><p>Mapæ‰€å®ç°çš„åŠŸèƒ½æ˜¯æ ¹æ®é€—å·ä»å½“å‰è¡Œæ–‡æœ¬å†…å®¹ä¸­æå–å‡ºå½“å‰å›¾ä¹¦çš„ç±»å‹å’Œä»·æ ¼</p><p>è¾“å‡º<code>key Text : Value IntWritable</code>åˆ†åˆ«è¡¨ç¤ºå½“å‰è¡Œå›¾ä¹¦çš„ç±»å‹å’Œä»·æ ¼</p><p>Reduceé˜¶æ®µè¾“å…¥ç±»å‹ä¸º<code>key Text : Value IntWritable</code>åˆ†åˆ«è¡¨ç¤ºå½“å‰è¡Œå›¾ä¹¦çš„ç±»å‹ï¼Œå½“å‰ç±»æ‰€æœ‰å›¾ä¹¦çš„ä»·æ ¼é›†åˆ</p><p>Reduceæ‰€å®ç°çš„åŠŸèƒ½æ˜¯å°†å½“å‰ç±»å‹çš„æ‰€æœ‰å›¾ä¹¦ä»·æ ¼è¿›è¡Œç´¯åŠ å¾—çš„ä»·æ ¼æ€»é¢</p><p>è¾“å‡º<code>key Text : Value IntWritable</code>åˆ†åˆ«è¡¨ç¤ºå›¾ä¹¦ç±»å‹ï¼Œå½“å‰ç±»å‹å›¾ä¹¦çš„ä»·æ ¼æ€»é¢</p><h4 id="ç¨‹åº-1"><a href="#ç¨‹åº-1" class="headerlink" title="ç¨‹åº"></a>ç¨‹åº</h4><ol><li>ExamMapper Class<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MapReduceExam2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExamMapper</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;LongWritable, Text, Text, IntWritable&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">map</span><span class="params">(LongWritable key1, Text value1, Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> value1.toString();</span><br><span class="line">        <span class="comment">// å°†å­—ç¬¦ä¸²ä»¥é€—å·ä¸ºæ ‡è®°ç‚¹è¿›è¡Œåˆ†å‰²ï¼Œä¿å­˜å¦‚å­—ç¬¦ä¸²æ•°ç»„ä¸­</span></span><br><span class="line">        String[] words = data.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        context.write(<span class="keyword">new</span> <span class="title class_">Text</span>(words[<span class="number">3</span>]), <span class="keyword">new</span> <span class="title class_">IntWritable</span>(Integer.parseInt(words[<span class="number">5</span>])));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ExamReducer Class<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MapReduceExam2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExamReducer</span> <span class="keyword">extends</span> <span class="title class_">Reducer</span>&lt;Text, IntWritable, Text, IntWritable&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">reduce</span><span class="params">(Text key3, Iterable&lt;IntWritable&gt; value3, Context context)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (IntWritable value : value3) &#123;</span><br><span class="line">            total += value.get();</span><br><span class="line">        &#125;</span><br><span class="line">        context.write(key3, <span class="keyword">new</span> <span class="title class_">IntWritable</span>(total));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ExamMain Class<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MapReduceExam2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExamMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªjobä½œä¸šå®ä¾‹</span></span><br><span class="line">        <span class="type">Job</span> <span class="variable">job</span> <span class="operator">=</span> Job.getInstance(<span class="keyword">new</span> <span class="title class_">Configuration</span>());</span><br><span class="line">        <span class="comment">// è®¾ç½®ä½œä¸šçš„å¯åŠ¨ç±»</span></span><br><span class="line">        job.setJarByClass(ExamMain.class);</span><br><span class="line">        <span class="comment">// è®¾ç½®Mapçš„ç±»å’Œè¾“å…¥ç±»å‹</span></span><br><span class="line">        job.setMapperClass(ExamMapper.class);</span><br><span class="line">        job.setMapOutputKeyClass(Text.class);</span><br><span class="line">        job.setMapOutputValueClass(IntWritable.class);</span><br><span class="line">        <span class="comment">// è®¾ç½®reduceçš„ç±»å’Œè¾“å…¥ç±»å‹</span></span><br><span class="line">        job.setReducerClass(ExamReducer.class);</span><br><span class="line">        job.setOutputKeyClass(Text.class);</span><br><span class="line">        job.setOutputValueClass(IntWritable.class);</span><br><span class="line"></span><br><span class="line">        FileInputFormat.setInputPaths(job, <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;hdfs://192.168.44.128:9000/ExamData/book.csv&quot;</span>));</span><br><span class="line">        FileOutputFormat.setOutputPath(job, <span class="keyword">new</span> <span class="title class_">Path</span>(<span class="string">&quot;hdfs://192.168.44.128:9000/ExamOutput/&quot;</span>));</span><br><span class="line">        job.waitForCompletion(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Final Review </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºChatGPTçš„tokensæ”¶è´¹æ ‡å‡†</title>
      <link href="/2023/07/07/About-GPT-Token/"/>
      <url>/2023/07/07/About-GPT-Token/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³äºChatGPTçš„tokensæ”¶è´¹æ ‡å‡†"><a href="#å…³äºChatGPTçš„tokensæ”¶è´¹æ ‡å‡†" class="headerlink" title="å…³äºChatGPTçš„tokensæ”¶è´¹æ ‡å‡†"></a>å…³äºChatGPTçš„tokensæ”¶è´¹æ ‡å‡†</h1><p>æ ¹æ®OpenAIå®˜ç½‘ç»™å‡ºçš„<a href="https://openai.com/pricing">è®¡è´¹æ ‡å‡†</a></p><p>æ€»ç»“äº†ä»¥ä¸‹è¡¨æ ¼ï¼š</p><table><thead><tr><th>æ¨¡å‹</th><th>æœ€å¤§é•¿åº¦</th><th>è¾“å…¥ï¼ˆ&#x2F;1k tokensï¼‰</th><th>è¾“å‡ºï¼ˆ1k tokensï¼‰</th><th>ä½¿ç”¨ä»·æ ¼</th><th>ç±»å‹</th></tr></thead><tbody><tr><td>GPT-4</td><td>8K</td><td>$0.03</td><td>$0.06</td><td></td><td>è¯­è¨€æ¨¡å‹</td></tr><tr><td>GPT-4</td><td>32K</td><td>$0.06</td><td>$0.12</td><td></td><td>è¯­è¨€æ¨¡å‹</td></tr><tr><td>GPT-3.5 Turbo</td><td>4K</td><td>$0.0015</td><td>$0.002</td><td></td><td>è¯­è¨€æ¨¡å‹</td></tr><tr><td>GPT-3.5 Turbo</td><td>16K</td><td>$0.003</td><td>$0.004</td><td></td><td>è¯­è¨€æ¨¡å‹</td></tr><tr><td>Ada</td><td></td><td>$0.0004</td><td>$0.0016</td><td></td><td>å¾®è°ƒæ¨¡å‹</td></tr><tr><td>Babbage</td><td></td><td>$0.0006</td><td>$0.0024</td><td></td><td>å¾®è°ƒæ¨¡å‹</td></tr><tr><td>Curie</td><td></td><td>$0.0030</td><td>$0.012</td><td></td><td>å¾®è°ƒæ¨¡å‹</td></tr><tr><td>Davinci</td><td></td><td>$0.0300</td><td>$0.12</td><td></td><td>å¾®è°ƒæ¨¡å‹</td></tr><tr><td>Ada v2</td><td>Ada v2</td><td></td><td></td><td>$0.0001&#x2F;1K tokens</td><td>åµŒå…¥æ¨¡å‹</td></tr><tr><td>Image models</td><td>1024Ã—1024</td><td></td><td></td><td>$0.020&#x2F;image</td><td>å›¾åƒæ¨¡å‹</td></tr><tr><td>Image models</td><td>512Ã—512</td><td></td><td></td><td>$0.018&#x2F;image</td><td>å›¾åƒæ¨¡å‹</td></tr><tr><td>Image models</td><td>256Ã—256</td><td></td><td></td><td>$0.016&#x2F;image</td><td>å›¾åƒæ¨¡å‹</td></tr><tr><td>Whisper</td><td></td><td></td><td></td><td>$0.006&#x2F;min</td><td>éŸ³é¢‘æ¨¡å‹</td></tr></tbody></table><blockquote><p>äº‹å®ä¸Šï¼ŒOpenAIæ¨å‡ºçš„æ¨¡å‹ä¸åªè¿™äº›ï¼Œé€šè¿‡apiå¯ä»¥å¾—åˆ°æœ€å®Œæ•´çš„æ¨¡å‹åˆ—è¡¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl https://api.openai.com/v1/models \</span><br><span class="line">-H &quot;Authorization: Bearer $OPENAI_API_KEY&quot;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰keyæˆ–è€…ä¸æƒ³å‘é€è¯·æ±‚å¯ä»¥ç›´æ¥è·å–ä¸‹é¢çš„jsonæ•°æ®éƒ½æ˜¯ä¸€æ ·çš„</p><p>æˆªæ­¢2023å¹´7æœˆ7æ—¥å…¨éƒ¨æ¨¡å‹çš„jsonæ•°æ®ï¼š</p><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="openai_models.json" href="/citation/openai_models.json"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">openai_models.json</p><p class="url">/citation/openai_models.json</p></div></a></div></div></blockquote><h2 id="Tokens"><a href="#Tokens" class="headerlink" title="Tokens"></a>Tokens</h2><p>ä¸Šè¿°å†…å®¹ä¸­å¤šæ¬¡æåˆ°äº†tokensçš„æ¦‚å¿µï¼Œä»€ä¹ˆæ˜¯tokensï¼Ÿ</p><blockquote><p>æ‚¨å¯ä»¥å°†æ ‡è®°è§†ä¸ºç”¨äºè‡ªç„¶è¯­è¨€å¤„ç†çš„å•è¯ç‰‡æ®µã€‚å¯¹äºè‹±æ–‡æ–‡æœ¬ï¼Œ1 ä¸ªæ ‡è®°å¤§çº¦ä¸º 4 ä¸ªå­—ç¬¦æˆ– 0.75 ä¸ªå•è¯ã€‚ä½œä¸ºå‚è€ƒï¼Œèå£«æ¯”äºšçš„ä½œå“é›†å¤§çº¦æœ‰<br>90 ä¸‡å­—æˆ– 120 ä¸‡ä¸ªç¬¦å·ã€‚</p><p><code>1000</code>tokensçº¦ç­‰äº<code>750</code>ä¸ªå•è¯</p><p>è¦äº†è§£æœ‰å…³ä»£å¸å¦‚ä½•å·¥ä½œå¹¶ä¼°è®¡æ‚¨çš„ä½¿ç”¨æƒ…å†µçš„æ›´å¤šä¿¡æ¯â€¦â€¦</p><ul><li>ä½¿ç”¨æˆ‘ä»¬çš„äº¤äº’å¼ <a href="https://platform.openai.com/tokenizer">åˆ†è¯å™¨å·¥å…·</a>è¿›è¡Œå®éªŒã€‚</li><li>ç™»å½•æ‚¨çš„å¸æˆ·å¹¶åœ¨ Playground ä¸­è¾“å…¥æ–‡æœ¬ã€‚é¡µè„šä¸­çš„è®¡æ•°å™¨å°†æ˜¾ç¤ºæ–‡æœ¬ä¸­æœ‰å¤šå°‘ä¸ªæ ‡è®°ã€‚</li></ul></blockquote><p>æ ¹æ®OpenAIå®˜æ–¹ç»™å‡ºçš„å›ç­”è¿˜æ˜¯æ— æ³•æœ‰ä¸€ä¸ªå…·ä½“çš„æŒæ¡ã€‚</p><p>è½¬æ¢ä¸ºä¸­æ–‡ï¼Œtokensçš„å¤§å°ä¸ºå¤šå°‘ï¼Ÿ</p><p>ä½¿ç”¨gpt-3.5-turbo-0301ä¸ºä¾‹ï¼š</p><table><thead><tr><th>Request content</th><th>Response content</th><th>input tokens</th><th>output tokens</th><th>total</th></tr></thead><tbody><tr><td>Say this is a test!</td><td>This is a test!</td><td>13</td><td>5</td><td>18</td></tr><tr><td>è¯·å½¢å®¹ä¸€ä¸‹å°çŒ«</td><td>å°çŒ«æ˜¯ä¸€ç§å¯çˆ±çš„å°åŠ¨ç‰©ï¼Œé€šå¸¸ä½“å‹å¨‡å°ï¼Œæ¯›å‘æŸ”è½¯ã€‚å®ƒä»¬çš„çœ¼ç›å¤§è€Œæ˜äº®ï¼Œé€éœ²å‡ºä¸€ç§å¤©çœŸæ— é‚ªçš„ç¥é‡‡ã€‚å°çŒ«çš„è€³æœµå°–å°–ï¼Œçµæ•è€Œè­¦è§‰ï¼Œæ—¶åˆ»æ•æ‰ç€å‘¨å›´çš„å£°éŸ³ã€‚å®ƒä»¬çš„å°é¼»å­ç²‰å«©å¯çˆ±ï¼Œé¼»å°–å¾®å¾®åŠ¨ç€ï¼Œå¥½å¥‡åœ°æ¢ç´¢ç€å‘¨å›´çš„ä¸–ç•Œã€‚å°çŒ«çš„çˆªå­å°–é”è€Œçµæ´»ï¼Œèƒ½å¤Ÿè½»æ¾æ”€çˆ¬å’ŒæŠ“æ•çŒç‰©ã€‚å®ƒä»¬çš„å°¾å·´ä¿®é•¿è€ŒçµåŠ¨ï¼Œæ—¶è€Œå‚ä¸‹ï¼Œæ—¶è€Œç«–èµ·ï¼Œè¡¨è¾¾å‡ºå„ç§æƒ…ç»ªã€‚å°çŒ«çš„èº«ä½“æŸ”è½¯è€Œçµæ´»ï¼Œå®ƒä»¬ç»å¸¸ä¼šæ‘†å‡ºå„ç§å¯çˆ±çš„å§¿åŠ¿ï¼Œè®©äººçœ‹äº†å¿ƒæƒ…æ„‰æ‚¦ã€‚æ€»ä¹‹ï¼Œå°çŒ«æ˜¯ä¸€ç§ä»¤äººé™¶é†‰çš„å¯çˆ±ç”Ÿç‰©ï¼Œå®ƒä»¬çš„å­˜åœ¨è®©äººæ„Ÿåˆ°æ¸©æš–å’Œå¹¸ç¦ã€‚</td><td>16</td><td>319</td><td>335</td></tr><tr><td>è¯·ç¿»è¯‘ï¼šThis technical report presents GPT-4, a large multimodal model capable of processing image and text inputs and producing text outputs. Such models are an important area of study as they have the potential to be used in a wide range of applications, such as dialogue systems, text summarization, and machine translation. As such, they have been the subject of substantial interest and progress in recent years.</td><td>è¿™ä»½æŠ€æœ¯æŠ¥å‘Šä»‹ç»äº†GPT-4ï¼Œä¸€ä¸ªèƒ½å¤Ÿå¤„ç†å›¾åƒå’Œæ–‡æœ¬è¾“å…¥å¹¶ç”Ÿæˆæ–‡æœ¬è¾“å‡ºçš„å¤§å‹å¤šæ¨¡æ€æ¨¡å‹ã€‚è¿™æ ·çš„æ¨¡å‹æ˜¯ç ”ç©¶çš„é‡è¦é¢†åŸŸï¼Œå› ä¸ºå®ƒä»¬æœ‰æ½œåŠ›åœ¨å„ç§åº”ç”¨ä¸­ä½¿ç”¨ï¼Œå¦‚å¯¹è¯ç³»ç»Ÿã€æ–‡æœ¬æ‘˜è¦å’Œæœºå™¨ç¿»è¯‘ã€‚å› æ­¤ï¼Œè¿‘å¹´æ¥å®ƒä»¬å—åˆ°äº†å¹¿æ³›å…³æ³¨å’Œè¿›å±•çš„ç ”ç©¶å¯¹è±¡ã€‚</td><td>93</td><td>127</td><td>220</td></tr></tbody></table><p>ç»è¿‡è®¡ç®—å¾—å‡ºï¼Œ1å­—çº¦ç­‰äº1tokenï¼Œè‹±æ–‡çŠ¶æ€4ä¸ªå­—ç¬¦çº¦ç­‰äº1tokenã€‚</p><blockquote><p>å‡è®¾ï¼šæˆ‘ç°åœ¨æœ‰ä¸€ç¯‡è®ºæ–‡è¦å†™ï¼Œéœ€æ±‚ï¼ˆinput contentï¼‰è¾“å…¥äº†100å­—ï¼Œéœ€è¦ç”Ÿæˆä¸€ç¯‡5000å­—çš„è®ºæ–‡ï¼ˆoutput<br>contentï¼‰ï¼Œç®—ä¸Šä¸­é—´çš„æ¶¦è‰²å’Œä¿®æ”¹ï¼ˆçº¦ç­‰äºé‡å¤3éï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥è®¡ç®—å†™ä¸€ç¯‡è®ºæ–‡å¤§çº¦ä¼šæ¶ˆè€—tokens &#x3D; ((100 + 5000) * 5) &#x3D; 25500</p><p>ä½¿ç”¨GPT-3.5ï¼Œè´¹ç”¨ä¸º 0.03825ç¾å…ƒ çº¦ç­‰äº 0.277äººæ°‘å¸ï¼Œ<br>å¦‚æœå†…å®¹æ€»é•¿åº¦è¶…è¿‡4096kï¼Œé‚£ä¹ˆä»·æ ¼ä¼šç¿»ä¸€å€ï¼Œè´¹ç”¨ä¸º 0.0765ç¾å…ƒ çº¦ç­‰äº 0.5534äººæ°‘å¸ï¼ˆæ±‡ç‡ä¸º1ç¾å…ƒå…‘7.2337äººæ°‘å¸ï¼‰</p><p>ä½¿ç”¨GPT-4ï¼Œè´¹ç”¨ä¸º 0.765ç¾å…ƒ çº¦ç­‰äº 5.534äººæ°‘å¸</p><p>å½“ç„¶è¿™åªæ˜¯çŒœæµ‹ã€‚</p></blockquote><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>ä½¿ç”¨gpt-3.5-turbo-16kä¸gpt-3.5-turbo-4kï¼ˆå¹¶æœªå†™å®Œä¸€ç¯‡è®ºæ–‡ï¼‰ï¼šï¼š</p><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gpt-3.5-turbo-16k.html" href="/citation/gpt-3.5-turbo-16k.html"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">gpt-3.5-turbo-16k.html</p><p class="url">/citation/gpt-3.5-turbo-16k.html</p></div></a></div><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="gpt-3.5-turbo-4k.html" href="/citation/gpt-3.5-turbo-4k.html"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">gpt-3.5-turbo-4k.html</p><p class="url">/citation/gpt-3.5-turbo-4k.html</p></div></a></div></div><p>æ•´ç†å¥½çš„è®ºæ–‡ï¼ˆå­—æ•°ï¼š7479ï¼‰ï¼š</p><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="ä¹ è¿‘å¹³æ–°æ—¶ä»£.pdf" href="/citation/ä¹ è¿‘å¹³æ–°æ—¶ä»£.pdf"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">ä¹ è¿‘å¹³æ–°æ—¶ä»£.pdf</p><p class="url">/citation/ä¹ è¿‘å¹³æ–°æ—¶ä»£.pdf</p></div></a></div></div><p>æ ¹æ®æœ€åçš„è¿”å›<code>Total tokens spent: 52087</code>å¯ä»¥å¾—å‡ºæœ¬æ¬¡è®ºæ–‡ä¸€å…±èŠ±è´¹äº†<code>52087/1000*0.003*7.2337=1.1303451957Â¥</code>èŠ±è´¹1.13äººæ°‘å¸ã€‚</p><h2 id="æ€»ç»“ä¸æ€è€ƒ"><a href="#æ€»ç»“ä¸æ€è€ƒ" class="headerlink" title="æ€»ç»“ä¸æ€è€ƒ"></a>æ€»ç»“ä¸æ€è€ƒ</h2><p>ä¸ºä»€ä¹ˆä¼šä¸é¢„æµ‹çš„èŠ±è´¹ä¸ä¸€è‡´ï¼Ÿ</p><ol><li>ç¤ºä¾‹ä¸­ç”Ÿæˆçš„æ–‡ç« ä¸º7000+</li><li>é‡‡ç”¨çš„æ˜¯gptå¯¹è¯çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€æ¬¡å¯¹è¯éƒ½éœ€è¦æŠŠæœ¬æ¬¡å¯¹è¯ä¸­çš„ä¸Šæ–‡å…¨éƒ¨å½“ä½œå‰ç½®ä¼ å…¥ï¼Œè¿™æ ·å°±å¢åŠ äº†tokensçš„æ¶ˆè€—</li><li>è¾“å…¥ä¸è¾“å‡ºçš„tokensçš„ä»·æ ¼å¹¶ä¸ç›¸ç­‰ï¼Œè¾“å‡ºçš„tokensæ›´è´µä¸€äº›</li></ol>]]></content>
      
      
      <categories>
          
          <category> Pointless small talk </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœŸæœ«å¤ä¹ -æ•°æ®åº“åŸç†</title>
      <link href="/2023/07/06/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/"/>
      <url>/2023/07/06/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="ç›¸å…³"><a href="#ç›¸å…³" class="headerlink" title="ç›¸å…³"></a>ç›¸å…³</h2><p>å…·ä½“è€ƒäº›ä»€ä¹ˆæˆ‘ä¹Ÿä¸å¤ªè®°å¾—ï¼Œæœ‰å…³ç³»ä»£æ•°ã€sqlè¯­è¨€ã€E-Rå›¾ï¼Œå…¶ä½™çš„ä¸å¤ªæ¸…æ¥šäº†ã€‚</p><h2 id="å…³ç³»ä»£æ•°"><a href="#å…³ç³»ä»£æ•°" class="headerlink" title="å…³ç³»ä»£æ•°"></a>å…³ç³»ä»£æ•°</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å…³ç³»ä»£æ•°æ˜¯ä¸€ç§æ•°å­¦å·¥å…·å’ŒæŸ¥è¯¢è¯­è¨€ï¼Œç”¨äºå¤„ç†å’Œæ“ä½œå…³ç³»å‹æ•°æ®åº“ä¸­çš„å…³ç³»æ•°æ®ã€‚å®ƒæä¾›äº†ä¸€ç»„æ“ä½œç¬¦ï¼Œç”¨äºå¯¹å…³ç³»è¿›è¡Œæ“ä½œå’Œç»„åˆï¼Œä»¥è·å–æ‰€éœ€çš„æ•°æ®ç»“æœã€‚</p><p>å…³ç³»ä»£æ•°çš„åŸºæœ¬æ“ä½œç¬¦åŒ…æ‹¬ï¼š</p><ol><li>é€‰æ‹©ï¼ˆSelectionï¼‰ï¼šæ ¹æ®æŒ‡å®šçš„æ¡ä»¶ä»å…³ç³»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„å…ƒç»„ã€‚</li><li>æŠ•å½±ï¼ˆProjectionï¼‰ï¼šä»å…³ç³»ä¸­é€‰æ‹©æŒ‡å®šçš„å±æ€§åˆ—ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å…³ç³»ã€‚</li><li>è¿æ¥ï¼ˆJoinï¼‰ï¼šå°†ä¸¤ä¸ªå…³ç³»æ ¹æ®å…±äº«çš„å±æ€§åˆ—åˆå¹¶æˆä¸€ä¸ªæ–°çš„å…³ç³»ã€‚</li><li>äº¤ï¼ˆIntersectionï¼‰ï¼šè·å–ä¸¤ä¸ªå…³ç³»çš„äº¤é›†ï¼Œå³å…±æœ‰çš„å…ƒç»„ã€‚</li><li>å¹¶ï¼ˆUnionï¼‰ï¼šè·å–ä¸¤ä¸ªå…³ç³»çš„å¹¶é›†ï¼Œå³åˆå¹¶ä¸¤ä¸ªå…³ç³»çš„å…ƒç»„ï¼Œå»é™¤é‡å¤é¡¹ã€‚</li><li>å·®ï¼ˆDifferenceï¼‰ï¼šè·å–ä¸€ä¸ªå…³ç³»ä¸­æœ‰è€Œå¦ä¸€ä¸ªå…³ç³»ä¸­æ²¡æœ‰çš„å…ƒç»„ã€‚</li><li>é™¤ï¼ˆDivisionï¼‰ï¼šæ ¹æ®æŒ‡å®šæ¡ä»¶ä»ä¸€ä¸ªå…³ç³»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„å…ƒç»„ï¼Œç„¶åä»å¦ä¸€ä¸ªå…³ç³»ä¸­é€‰æ‹©ä¸å‰ä¸€æ­¥ç»“æœå…³ç³»ä¸­çš„æ‰€æœ‰å…ƒç»„åŒ¹é…çš„å…ƒç»„ã€‚</li></ol><p>é€šè¿‡ç»„åˆå’ŒåµŒå¥—è¿™äº›åŸºæœ¬æ“ä½œç¬¦ï¼Œå¯ä»¥è¿›è¡Œæ›´å¤æ‚çš„æŸ¥è¯¢å’Œæ“ä½œï¼Œä»è€Œå®ç°å¯¹å…³ç³»æ•°æ®åº“ä¸­çš„æ•°æ®çš„æœ‰æ•ˆç®¡ç†å’Œæ£€ç´¢ã€‚å…³ç³»ä»£æ•°æ˜¯å…³ç³»æ•°æ®åº“ç†è®ºçš„åŸºç¡€ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸€ç§å½¢å¼åŒ–çš„æ–¹å¼æ¥æè¿°å’Œæ“ä½œå…³ç³»æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³ç³»ä»£æ•°åŸºæœ¬æ“ä½œçš„å¸¸ç”¨ç¬¦å·è¡¨ç¤ºï¼š</p><ol><li><p>é€‰æ‹©ï¼ˆSelectionï¼‰ï¼šç”¨Ïƒï¼ˆsigmaï¼‰ç¬¦å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼ŒÏƒ&lt;æ¡ä»¶&gt;(å…³ç³») è¡¨ç¤ºé€‰æ‹©æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„å…ƒç»„ã€‚</p></li><li><p>æŠ•å½±ï¼ˆProjectionï¼‰ï¼šç”¨Ï€ï¼ˆpiï¼‰ç¬¦å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼ŒÏ€&lt;å±æ€§åˆ—è¡¨&gt;(å…³ç³») è¡¨ç¤ºä»å…³ç³»ä¸­é€‰æ‹©æŒ‡å®šçš„å±æ€§åˆ—ã€‚</p></li><li><p>è¿æ¥ï¼ˆJoinï¼‰ï¼šç”¨â¨ï¼ˆjoinï¼‰ç¬¦å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå…³ç³»1 â¨ å…³ç³»2 è¡¨ç¤ºæ ¹æ®å…±äº«çš„å±æ€§åˆ—å°†ä¸¤ä¸ªå…³ç³»è¿›è¡Œè¿æ¥ã€‚</p></li><li><p>äº¤ï¼ˆIntersectionï¼‰ï¼šç”¨âˆ©ï¼ˆintersectionï¼‰ç¬¦å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå…³ç³»1 âˆ© å…³ç³»2 è¡¨ç¤ºè·å–ä¸¤ä¸ªå…³ç³»çš„äº¤é›†ï¼Œå³å…±æœ‰çš„å…ƒç»„ã€‚</p></li><li><p>å¹¶ï¼ˆUnionï¼‰ï¼šç”¨âˆªï¼ˆunionï¼‰ç¬¦å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå…³ç³»1 âˆª å…³ç³»2 è¡¨ç¤ºè·å–ä¸¤ä¸ªå…³ç³»çš„å¹¶é›†ï¼Œå³åˆå¹¶ä¸¤ä¸ªå…³ç³»çš„å…ƒç»„ï¼Œå»é™¤é‡å¤é¡¹ã€‚</p></li><li><p>å·®ï¼ˆDifferenceï¼‰ï¼šç”¨-ï¼ˆminusï¼‰ç¬¦å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå…³ç³»1 - å…³ç³»2 è¡¨ç¤ºè·å–ä¸€ä¸ªå…³ç³»ä¸­æœ‰è€Œå¦ä¸€ä¸ªå…³ç³»ä¸­æ²¡æœ‰çš„å…ƒç»„ã€‚</p></li><li><p>é™¤ï¼ˆDivisionï¼‰ï¼šç”¨Ã·ï¼ˆdivisionï¼‰ç¬¦å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå…³ç³»1 Ã· å…³ç³»2 è¡¨ç¤ºæ ¹æ®æŒ‡å®šæ¡ä»¶ä»ä¸€ä¸ªå…³ç³»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„å…ƒç»„ï¼Œç„¶åä»å¦ä¸€ä¸ªå…³ç³»ä¸­é€‰æ‹©ä¸å‰ä¸€æ­¥ç»“æœå…³ç³»ä¸­çš„æ‰€æœ‰å…ƒç»„åŒ¹é…çš„å…ƒç»„ã€‚</p></li></ol><p>è¿™äº›ç¬¦å·è¡¨ç¤ºäº†å…³ç³»ä»£æ•°ä¸­çš„åŸºæœ¬æ“ä½œï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œç»„åˆå’ŒåµŒå¥—ï¼Œä»¥å®ç°æ›´å¤æ‚çš„æŸ¥è¯¢å’Œæ“ä½œã€‚</p><h3 id="è®­ç»ƒåœº"><a href="#è®­ç»ƒåœº" class="headerlink" title="è®­ç»ƒåœº"></a>è®­ç»ƒåœº</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Emp(E#,Ename,Age,Salary,D#);</span><br><span class="line">Depa(D#,Dname,Mgr#);</span><br></pre></td></tr></table></figure><ol><li><p>æ£€ç´¢æ¯ä¸ªéƒ¨é—¨ç»ç†çš„å·¥èµ„ï¼ˆæ˜¾ç¤ºéƒ¨é—¨ç¼–å·ï¼Œéƒ¨é—¨åç§°ï¼Œç»ç†ç¼–å·ï¼Œç»ç†å§“åï¼Œç»ç†å·¥èµ„ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ï€ D#, Dname, Mgr#, Ename, Salary (Ïƒ Emp.E# = Depa.Mgr# âˆ§ Emp.D# = Depa.D# (Emp âˆ Depa))</span><br></pre></td></tr></table></figure></li><li><p>æ£€ç´¢éƒ¨é—¨åç§°ä¸ºâ€œé”€å”®ç§‘â€çš„èŒå·¥å·¥å·ï¼Œå§“åï¼Œå·¥èµ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ï€ E#, Ename, Salary (Ïƒ Dname = &quot;é”€å”®ç§‘&quot; (Emp âˆ Depa))</span><br></pre></td></tr></table></figure></li><li><p>å·²çŸ¥ä¸€å…³ç³»æ•°æ®åº“çš„æ¨¡å¼å¦‚ä¸‹ï¼š<br>ä¾›åº”å•†å…³ç³»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">S(Sno,Sname,City);</span><br></pre></td></tr></table></figure><p>é›¶ä»¶å…³ç³»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P(Pno,Pname,Color,Weight);</span><br></pre></td></tr></table></figure><p>å·¥ç¨‹å…³ç³»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">J(Jno,Jname,City);</span><br></pre></td></tr></table></figure><p>ä¾›è´§å…³ç³»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SPJ(Sno,Pno,Jno,Qty);</span><br></pre></td></tr></table></figure><p>ç”¨å…³ç³»ä»£æ•°å®Œæˆä¸‹åˆ—æŸ¥è¯¢ï¼š</p><ol><li><p>æŸ¥è¯¢ä¸ºå·¥ç¨‹â€™J1â€™ä¾›è´§çš„ä¾›åº”å•†åï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname</span><br><span class="line"><span class="keyword">FROM</span> S</span><br><span class="line"><span class="keyword">WHERE</span> Sno <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> Sno</span><br><span class="line">    <span class="keyword">FROM</span> SPJ</span><br><span class="line">    <span class="keyword">WHERE</span> Jno <span class="operator">=</span> <span class="string">&#x27;J1&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢ä¾›åº”â€™èºæ¯â€™é›¶ä»¶çš„ä¾›åº”å•†åå’Œæ‰€åœ¨åŸå¸‚ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, City</span><br><span class="line"><span class="keyword">FROM</span> S</span><br><span class="line"><span class="keyword">WHERE</span> Sno <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> Sno</span><br><span class="line">    <span class="keyword">FROM</span> SPJ</span><br><span class="line">    <span class="keyword">WHERE</span> Pno <span class="keyword">IN</span> (</span><br><span class="line">        <span class="keyword">SELECT</span> Pno</span><br><span class="line">        <span class="keyword">FROM</span> P</span><br><span class="line">        <span class="keyword">WHERE</span> Pname <span class="operator">=</span> <span class="string">&#x27;èºæ¯&#x27;</span></span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢å·¥ç¨‹â€™J2â€™ä¸ä½¿ç”¨çš„é›¶ä»¶åå’Œé¢œè‰²ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Pname, Color</span><br><span class="line"><span class="keyword">FROM</span> P</span><br><span class="line"><span class="keyword">WHERE</span> Pno <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> Pno</span><br><span class="line">    <span class="keyword">FROM</span> SPJ</span><br><span class="line">    <span class="keyword">WHERE</span> Jno <span class="operator">=</span> <span class="string">&#x27;J2&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="SQLè¯­è¨€"><a href="#SQLè¯­è¨€" class="headerlink" title="SQLè¯­è¨€"></a>SQLè¯­è¨€</h2><h3 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>SQLï¼ˆStructured Query Languageï¼‰æ˜¯ä¸€ç§ç”¨äºç®¡ç†å…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿçš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„è¯­è¨€ï¼Œç”¨äºå­˜å‚¨ã€æ£€ç´¢ã€æ“ä½œå’Œç®¡ç†æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p><p>SQLæä¾›äº†ä¸€ç»„ç”¨äºæ‰§è¡Œå„ç§æ“ä½œçš„å‘½ä»¤å’Œè¯­å¥ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸»è¦æ–¹é¢ï¼š</p><ol><li><p>æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆData Definition Languageï¼ŒDDLï¼‰ï¼šç”¨äºåˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤æ•°æ®åº“å¯¹è±¡ï¼ˆä¾‹å¦‚è¡¨ã€è§†å›¾ã€ç´¢å¼•ç­‰ï¼‰çš„è¯­å¥ã€‚DDLè¯­å¥åŒ…æ‹¬CREATEã€ALTERå’ŒDROPç­‰ã€‚</p></li><li><p>æ•°æ®æ“ä½œè¯­è¨€ï¼ˆData Manipulation Languageï¼ŒDMLï¼‰ï¼šç”¨äºæ“ä½œå’Œå¤„ç†æ•°æ®åº“ä¸­çš„æ•°æ®çš„è¯­å¥ã€‚DMLè¯­å¥åŒ…æ‹¬SELECTã€INSERTã€UPDATEå’ŒDELETEç­‰ã€‚</p></li><li><p>æ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆData Control Languageï¼ŒDCLï¼‰ï¼šç”¨äºæ§åˆ¶æ•°æ®åº“çš„å®‰å…¨æ€§å’Œè®¿é—®æƒé™çš„è¯­å¥ã€‚DCLè¯­å¥åŒ…æ‹¬GRANTå’ŒREVOKEç­‰ã€‚</p></li><li><p>æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆData Query Languageï¼ŒDQLï¼‰ï¼šç”¨äºä»æ•°æ®åº“ä¸­æ£€ç´¢æ•°æ®çš„è¯­å¥ã€‚DQLè¯­å¥ä¸»è¦æ˜¯SELECTè¯­å¥ï¼Œç”¨äºæŸ¥è¯¢æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„æ•°æ®ã€‚</p></li></ol><p>SQLè¯­è¨€çš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>é¢å‘é›†åˆï¼šSQLå¤„ç†æ•°æ®çš„åŸºæœ¬å•ä½æ˜¯é›†åˆï¼Œå³è¡¨ä¸­çš„è¡Œã€‚</li><li>å£°æ˜å¼è¯­è¨€ï¼šSQLæ˜¯ä¸€ç§å£°æ˜å¼è¯­è¨€ï¼Œç”¨æˆ·åªéœ€æè¿°æ‰€éœ€çš„ç»“æœï¼Œè€Œä¸éœ€è¦æŒ‡å®šå…·ä½“çš„æ“ä½œæ­¥éª¤ã€‚</li><li>é«˜åº¦å¯æ‰©å±•ï¼šSQLæ”¯æŒåœ¨å•ä¸ªæŸ¥è¯¢ä¸­ä½¿ç”¨å¤šä¸ªè¡¨è¿›è¡Œè”æ¥ï¼Œæ‰§è¡Œå¤æ‚çš„æ•°æ®æ“ä½œå’Œèšåˆè¿ç®—ã€‚</li><li>å¹¿æ³›åº”ç”¨ï¼šSQLæ˜¯å…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿçš„æ ‡å‡†æŸ¥è¯¢è¯­è¨€ï¼Œå‡ ä¹æ‰€æœ‰ä¸»æµçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚MySQLã€Oracleã€SQL Serverç­‰ï¼‰éƒ½æ”¯æŒSQLè¯­è¨€ã€‚</li></ul><p>é€šè¿‡SQLè¯­è¨€ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†å’Œæ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œæ‰§è¡Œå„ç§æŸ¥è¯¢ã€æ›´æ–°å’Œç®¡ç†ä»»åŠ¡ã€‚</p><h3 id="è®­ç»ƒåœº-1"><a href="#è®­ç»ƒåœº-1" class="headerlink" title="è®­ç»ƒåœº"></a>è®­ç»ƒåœº</h3><p>è¿™é‡Œå­˜åœ¨æ•°æ®åº“ï¼Œç»“æ„ä¸º</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student(<span class="keyword">No</span>,name,sex,age,class);</span><br><span class="line">Course(Cno,cname,Tno);</span><br><span class="line">Teacher(Tno,name,sex,prof,dept);</span><br><span class="line">Score(<span class="keyword">No</span>,Cno,Grade);</span><br></pre></td></tr></table></figure><ol><li><p>æŸ¥è¯¢é€‰ä¿®è¯¾ç¨‹<code>3-105</code>ä¸”æˆç»©åœ¨60åˆ°80ä¹‹é—´çš„æ‰€æœ‰è®°å½•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Cno <span class="operator">=</span> <span class="string">&#x27;3-105&#x27;</span> <span class="keyword">AND</span> Grade <span class="keyword">BETWEEN</span> <span class="number">60</span> <span class="keyword">AND</span> <span class="number">80</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢æˆç»©ä¸º85,86æˆ–88çš„è®°å½•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Grade <span class="keyword">IN</span> (<span class="number">85</span>, <span class="number">86</span>, <span class="number">88</span>);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢<code>95031</code>ç­çš„å­¦ç”Ÿäººæ•°ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Class <span class="operator">=</span> <span class="string">&#x27;95031&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢è‡³å°‘æœ‰5ååŒå­¦é€‰ä¿®çš„å¹¶ä»¥3å¼€å¤´çš„è¯¾ç¨‹çš„å¹³å‡æˆç»©ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(Grade)</span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Cno <span class="keyword">LIKE</span> <span class="string">&#x27;3%&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢æœ€ä½åˆ†å¤§äº70ï¼Œæœ€é«˜åˆ†å°äº90çš„<code>NO</code>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span></span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">No</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MIN</span>(Grade) <span class="operator">&gt;</span> <span class="number">70</span> <span class="keyword">AND</span> <span class="built_in">MAX</span>(Grade) <span class="operator">&lt;</span> <span class="number">90</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢<code>95033</code>ç­å­¦ç”Ÿæ‰€é€‰è¯¾ç¨‹çš„å¹³å‡åˆ†ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(Grade)</span><br><span class="line"><span class="keyword">FROM</span> Score, Student</span><br><span class="line"><span class="keyword">WHERE</span> Score.No <span class="operator">=</span> Student.No <span class="keyword">AND</span> Class <span class="operator">=</span> <span class="string">&#x27;95033&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">No</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢é€‰ä¿®<code>3-105</code>è¯¾ç¨‹çš„æˆç»©é«˜äº<code>109</code>å·åŒå­¦æˆç»©çš„æ‰€æœ‰åŒå­¦çš„è®°å½•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Cno <span class="operator">=</span> <span class="string">&#x27;3-105&#x27;</span> <span class="keyword">AND</span> Grade <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> Grade <span class="keyword">FROM</span> Score <span class="keyword">WHERE</span> Cno <span class="operator">=</span> <span class="string">&#x27;3-105&#x27;</span> <span class="keyword">AND</span> <span class="keyword">No</span> <span class="operator">=</span> <span class="string">&#x27;109&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢ä¸å­¦å·ä¸º<code>108</code>çš„åŒå­¦åŒå²çš„æ‰€æœ‰å­¦ç”Ÿçš„<code>NO</code>, <code>Name</code>, <code>Age</code>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, Name, Age</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Age <span class="operator">=</span> (<span class="keyword">SELECT</span> Age <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> <span class="keyword">No</span> <span class="operator">=</span> <span class="string">&#x27;108&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢<code>å¼ æ—­</code>æ•™å¸ˆä»»è¯¾çš„è¯¾ç¨‹å·åŠé€‰ä¿®å…¶è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, Grade</span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Cno <span class="keyword">IN</span> (<span class="keyword">SELECT</span> Cno <span class="keyword">FROM</span> Course <span class="keyword">WHERE</span> Tno <span class="operator">=</span> (<span class="keyword">SELECT</span> Tno <span class="keyword">FROM</span> Teacher <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ æ—­&#x27;</span>));</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, Grade</span><br><span class="line"><span class="keyword">FROM</span> Score, Teacher, Course</span><br><span class="line"><span class="keyword">WHERE</span> Teacher.Tno <span class="operator">=</span> Course.Tno <span class="keyword">AND</span> Course.Cno <span class="operator">=</span> Score.Cno <span class="keyword">AND</span> Teacher.name <span class="operator">=</span> <span class="string">&#x27;å¼ æ—­&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢é€‰ä¿®æŸè¯¾ç¨‹çš„å­¦ç”Ÿäººæ•°å¤šäº30äººçš„æ•™å¸ˆå§“åï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name</span><br><span class="line"><span class="keyword">FROM</span> Teahcer</span><br><span class="line"><span class="keyword">WHERE</span> Tno <span class="keyword">IN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> Tno</span><br><span class="line">   <span class="keyword">FROM</span> Course</span><br><span class="line">   <span class="keyword">WHERE</span> Cno <span class="keyword">IN</span> (</span><br><span class="line">       <span class="keyword">SELECT</span> Cno</span><br><span class="line">       <span class="keyword">FROM</span> Score</span><br><span class="line">       <span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno</span><br><span class="line">       <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="keyword">No</span>) <span class="operator">&gt;</span> <span class="number">30</span></span><br><span class="line">   )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name</span><br><span class="line"><span class="keyword">FROM</span> Techaer, Score, Course</span><br><span class="line"><span class="keyword">WHERE</span> Techaer.Tno <span class="operator">=</span> Course.Tno</span><br><span class="line">   <span class="keyword">AND</span> Course.Cno <span class="operator">=</span> Score.Cno</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">30</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢<code>è®¡ç®—æœºç³»</code>ä¸<code>ç”µå­å·¥ç¨‹ç³»</code>ä¸åŒèŒç§°çš„æ•™å¸ˆå§“åå’ŒèŒç§°ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name, prof</span><br><span class="line"><span class="keyword">FROM</span> Teacher</span><br><span class="line"><span class="keyword">WHERE</span> Dept <span class="operator">=</span> <span class="string">&#x27;ç”µå­å·¥ç¨‹ç³»&#x27;</span> <span class="keyword">AND</span> Prof <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> Prof</span><br><span class="line">   <span class="keyword">FROM</span> Teacher</span><br><span class="line">   <span class="keyword">WHERE</span> Dept <span class="operator">=</span> <span class="string">&#x27;è®¡ç®—æœºç³»&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢é€‰ä¿®ç¼–å·ä¸º<code>3-105</code>è¯¾ç¨‹ä¸”æˆç»©è‡³å°‘é«˜äºé€‰ä¿®ç¼–å·ä¸º<code>3-234</code>è¯¾ç¨‹çš„åŒå­¦çš„è¯¾å·ã€å­¦å·ã€æˆç»©ï¼Œå¹¶æŒ‰æˆç»©é™åºæ’åˆ—ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, grade</span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Cno <span class="operator">=</span> <span class="string">&#x27;3-105&#x27;</span> <span class="keyword">AND</span> Grade <span class="operator">&gt;</span> <span class="keyword">ANY</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> grade</span><br><span class="line">   <span class="keyword">FROM</span> Score</span><br><span class="line">   <span class="keyword">WHERE</span> Cno <span class="operator">=</span> <span class="string">&#x27;3-234&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> grade <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢é€‰ä¿®ç¼–å·ä¸º<code>3-105</code>è¯¾ç¨‹ä¸”æˆç»©é«˜äºé€‰ä¿®ç¼–å·ä¸º<code>3-234</code>è¯¾ç¨‹çš„åŒå­¦çš„è¯¾å·ã€å­¦å·ã€æˆç»©ï¼Œå¹¶æŒ‰æˆç»©é™åºæ’åˆ—ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, grade</span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Cno <span class="operator">=</span> <span class="string">&#x27;3-105&#x27;</span> <span class="keyword">AND</span> Grade <span class="operator">&gt;</span> <span class="keyword">ALL</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> grade</span><br><span class="line">   <span class="keyword">FROM</span> Score</span><br><span class="line">   <span class="keyword">WHERE</span> Cno <span class="operator">=</span> <span class="string">&#x27;3-234&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> grade <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></li><li><p>åˆ—å‡ºæ‰€æœ‰è€å¸ˆå’ŒåŒå­¦çš„å§“åã€æ€§åˆ«å’Œå¹´é¾„ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name, Sex, Age</span><br><span class="line"><span class="keyword">FROM</span> teacher</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> Name, Sex, Age</span><br><span class="line"><span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢æˆç»©æ¯”è¯¥è¯¾å¹³å‡æˆç»©ä½çš„å­¦ç”Ÿçš„æˆç»©è¡¨ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, Grade</span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Grade <span class="operator">&lt;</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(Grade)</span><br><span class="line">   <span class="keyword">FROM</span> Score <span class="keyword">AS</span> y</span><br><span class="line">   <span class="keyword">WHERE</span> Score.Cno <span class="operator">=</span> y.Cno</span><br><span class="line">   <span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>åˆ—å‡ºæ‰€æœ‰ä»»è¯¾æ•™å¸ˆçš„Nameå’ŒDeptï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name, Dept</span><br><span class="line"><span class="keyword">FROM</span> Teacher</span><br><span class="line"><span class="keyword">WHERE</span> Tno <span class="keyword">IN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> Tno</span><br><span class="line">   <span class="keyword">FROM</span> Course</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name, Dept</span><br><span class="line"><span class="keyword">FROM</span> Teahcer <span class="keyword">AS</span> A</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">   <span class="keyword">FROM</span> Course <span class="keyword">AS</span> B</span><br><span class="line">   <span class="keyword">WHERE</span> A.Tno <span class="operator">=</span> B.Tno</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>åˆ—å‡ºæ‰€æœ‰æœªè®²è¯¾æ•™å¸ˆçš„Nameå’ŒDeptï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name, Dept</span><br><span class="line"><span class="keyword">FROM</span> Teacher</span><br><span class="line"><span class="keyword">WHERE</span> Tno <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> Tno</span><br><span class="line">   <span class="keyword">FROM</span> Course</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name, Dept</span><br><span class="line"><span class="keyword">FROM</span> Teahcer <span class="keyword">AS</span> A</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">   <span class="keyword">FROM</span> Course <span class="keyword">AS</span> B</span><br><span class="line">   <span class="keyword">WHERE</span> A.Tno <span class="operator">=</span> B.Tno</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>åˆ—å‡ºè‡³å°‘æœ‰2åç”·ç”Ÿçš„ç­çº§ç¼–å·ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Class</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> sex <span class="operator">=</span> <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Class</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢ä¸å§“<code>ç‹</code>çš„å­¦ç”Ÿè®°å½•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> Name <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;ç‹%&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢æ¯é—¨è¯¾æœ€é«˜åˆ†çš„åŒå­¦çš„No, Cno, Gradeï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, Cno, Grade</span><br><span class="line"><span class="keyword">FROM</span> Score A</span><br><span class="line"><span class="keyword">WHERE</span> Grade <span class="operator">=</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(Grade)</span><br><span class="line">   <span class="keyword">FROM</span> Score B</span><br><span class="line">   <span class="keyword">WHERE</span> A.Cno <span class="operator">=</span> B.Cno</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, Cno, Grade</span><br><span class="line"><span class="keyword">FROM</span> Score A</span><br><span class="line"><span class="keyword">WHERE</span> A.Cno <span class="operator">=</span> B.Cno <span class="keyword">AND</span> Grade <span class="operator">=</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(Grade)</span><br><span class="line">   <span class="keyword">FROM</span> Score B</span><br><span class="line">   <span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢ä¸â€œæå†›â€åŒæ€§åˆ«å¹¶åŒç­çš„åŒå­¦å§“åï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Class <span class="operator">=</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> Class</span><br><span class="line">   <span class="keyword">FROM</span> Student</span><br><span class="line">   <span class="keyword">WHERE</span> Name <span class="operator">=</span> <span class="string">&#x27;æå†›&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">AND</span> sex <span class="operator">=</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> sex</span><br><span class="line">   <span class="keyword">FROM</span> Student</span><br><span class="line">   <span class="keyword">WHERE</span> Name <span class="operator">=</span> <span class="string">&#x27;æå†›&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢<code>ç”·</code>æ•™å¸ˆåŠå…¶æ‰€ä»»çš„è¯¾ç¨‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> A.Name, B.Cname</span><br><span class="line"><span class="keyword">FROM</span> Teacher A, Course B</span><br><span class="line"><span class="keyword">WHERE</span> A.Tno <span class="operator">=</span> B.Tno <span class="keyword">AND</span> A.sex <span class="operator">=</span> <span class="string">&#x27;ç”·&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢é€‰ä¿®<code>è®¡ç®—æœºå¯¼è®º</code>è¯¾ç¨‹çš„<code>ç”·</code>åŒå­¦çš„æˆç»©è¡¨ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, Cno, Grade</span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> Cno <span class="keyword">IN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> Cno</span><br><span class="line">   <span class="keyword">FROM</span> Course</span><br><span class="line">   <span class="keyword">WHERE</span> Cname <span class="operator">=</span> <span class="string">&#x27;è®¡ç®—æœºå¯¼è®º&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">AND</span> <span class="keyword">No</span> <span class="keyword">IN</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="keyword">No</span></span><br><span class="line">   <span class="keyword">FROM</span> Student</span><br><span class="line">   <span class="keyword">WHERE</span> Sex <span class="operator">=</span> <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">No</span>, Cno, Grade</span><br><span class="line"><span class="keyword">FROM</span> Score A, Student B, Course C</span><br><span class="line"><span class="keyword">WHERE</span> A.No <span class="operator">=</span> B.No</span><br><span class="line"><span class="keyword">AND</span> A.Cno <span class="operator">=</span> C.Cno</span><br><span class="line"><span class="keyword">AND</span> C.Cname <span class="operator">=</span> <span class="string">&#x27;è®¡ç®—æœºå¯¼è®º&#x27;</span></span><br><span class="line"><span class="keyword">AND</span> B.Sex <span class="operator">=</span> <span class="string">&#x27;ç”·&#x27;</span>;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨æ•°æ®åº“ä¸­è¦æ±‚æ¯ä¸ªç»ç†çš„å·¥èµ„å¤§äº2000å…ƒã€‚è¯•åœ¨Depaè¡¨çš„å®šä¹‰æ—¶ï¼ŒåŠ ä¸€ä¸ªCheckå­å¥ï¼Œä»¥æ»¡è¶³ä¸Šè¿°è¦æ±‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE Depa ADD CHECK (Mgr# IN (SELECT E# FROM Emp WHERE Salary &gt; 2000))</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°Depaè¡¨ï¼Œå°†ç»ç†ç¼–å·ï¼ˆMgr#ï¼‰è®¾ç½®ä¸ºnullï¼Œæ»¡è¶³æ¡ä»¶ï¼šDepaè¡¨ä¸­çš„Mgr#ç­‰äºEmpè¡¨ä¸­çš„E#ï¼Œå¹¶ä¸”Empè¡¨ä¸­çš„Ageå¤§äº50ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE Depa SET Mgr# = NULL WHERE Mgr# IN (SELECT E# FROM Emp WHERE Age &gt; 50)</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ªå¹´é¾„å¤§äº50å²çš„èŒå·¥è§†å›¾ï¼ˆD#, Dname, E#, Ename, Age, Salaryï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW wyy AS</span><br><span class="line">SELECT D#, Dname, E#, Ename, Age, Salary</span><br><span class="line">FROM Emp, Depa</span><br><span class="line">WHERE Emp.E# = Depa.Mgr# AND Emp.Age &gt; 50;</span><br></pre></td></tr></table></figure></li><li><p>ç”¨Create table å‘½ä»¤å®šä¹‰Depaè¡¨ï¼ˆéœ€è¦å®šä¹‰ä¸»é”®å’Œå¤–é”®ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> Depa (</span><br><span class="line">    D# <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">primary</span> key,</span><br><span class="line">    Dname <span class="type">char</span>(<span class="number">8</span>),</span><br><span class="line">    Mgr# <span class="type">char</span>(<span class="number">15</span>),</span><br><span class="line">    <span class="keyword">Foreign</span> key (Mgr#) <span class="keyword">references</span> Emp(E#)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„èŒå·¥äººæ•°å’Œå¹³å‡å·¥èµ„ï¼Œè¦æ±‚æ˜¾ç¤ºï¼ˆéƒ¨é—¨å·ï¼Œéƒ¨é—¨åç§°ï¼ŒèŒå·¥äººæ•°ï¼Œå¹³å‡å·¥èµ„ï¼‰ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> D#, Dname, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> èŒå·¥äººæ•°, <span class="built_in">AVG</span>(Salary) <span class="keyword">as</span> å¹³å‡å·¥èµ„</span><br><span class="line"><span class="keyword">FROM</span> Depa, Emp</span><br><span class="line"><span class="keyword">WHERE</span> Depa.D# <span class="operator">=</span> Emp.D#</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> D#</span><br></pre></td></tr></table></figure></li><li><p>åœ¨Depaè¡¨ä¸­åˆ é™¤äººæ•°å°‘äº10äººçš„éƒ¨é—¨å…ƒç»„</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> Depa</span><br><span class="line"><span class="keyword">WHERE</span> D# <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> D#</span><br><span class="line">    <span class="keyword">FROM</span> Emp</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> D#</span><br><span class="line">    <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&lt;</span> <span class="number">10</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ol><div class="note warning"><p>å¯¹äºä¸Šè¿°å…³ç³»ä»£æ•°ä¸SQLçš„ç¤ºä¾‹å¯èƒ½å­˜åœ¨ä¸åˆç†çš„éƒ¨åˆ†ï¼Œè¯·è·Ÿæ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œæ¯•ç«Ÿï¼Œåªæœ‰ç”Ÿäº§ç¯å¢ƒæ‰æ˜¯æœ‰çœŸæ­£æ˜ç¡®éœ€æ±‚çš„ä¸çœŸå®çš„ç¯å¢ƒã€‚</p></div><h3 id="ä¸‡ç”¨æ¨¡ç‰ˆ"><a href="#ä¸‡ç”¨æ¨¡ç‰ˆ" class="headerlink" title="ä¸‡ç”¨æ¨¡ç‰ˆ"></a>ä¸‡ç”¨æ¨¡ç‰ˆ</h3><ul><li><p>æŸ¥è¯¢æ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [åˆ—å]</span><br><span class="line"><span class="keyword">FROM</span> [è¡¨å]</span><br><span class="line">[<span class="keyword">JOIN</span> å­å¥]</span><br><span class="line"><span class="keyword">WHERE</span> [æ¡ä»¶]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> [åˆ—å]</span><br><span class="line"><span class="keyword">HAVING</span> [æ¡ä»¶]</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> [åˆ—å] [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]</span><br><span class="line">LIMIT [æ•°é‡];</span><br></pre></td></tr></table></figure></li><li><p>æ’å…¥æ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> [è¡¨å] ([åˆ—<span class="number">1</span>], [åˆ—<span class="number">2</span>], ...)</span><br><span class="line"><span class="keyword">VALUES</span> ([å€¼<span class="number">1</span>], [å€¼<span class="number">2</span>], ...);</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹æ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> [è¡¨å]</span><br><span class="line"><span class="keyword">SET</span> [åˆ—<span class="number">1</span>] <span class="operator">=</span> [æ–°å€¼<span class="number">1</span>], [åˆ—<span class="number">2</span>] <span class="operator">=</span> [æ–°å€¼<span class="number">2</span>], ...</span><br><span class="line"><span class="keyword">WHERE</span> [æ¡ä»¶];</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤æ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> [è¡¨å]</span><br><span class="line"><span class="keyword">WHERE</span> [æ¡ä»¶];</span><br></pre></td></tr></table></figure></li><li><p>å®šä¹‰è§†å›¾æ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> [è§†å›¾å] <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> [åˆ—<span class="number">1</span>], [åˆ—<span class="number">2</span>], ...</span><br><span class="line"><span class="keyword">FROM</span> [è¡¨å]</span><br><span class="line"><span class="keyword">WHERE</span> [æ¡ä»¶];</span><br></pre></td></tr></table></figure><ul><li><p>è§£é‡Šè¯´æ˜ï¼š</p><ul><li><code>[è§†å›¾å]</code>ï¼šæŒ‡å®šè¦åˆ›å»ºçš„è§†å›¾çš„åç§°ã€‚</li><li><code>[åˆ—1], [åˆ—2], ...</code>ï¼šæŒ‡å®šè¦åŒ…å«åœ¨è§†å›¾ä¸­çš„åˆ—åã€‚</li><li><code>[è¡¨å]</code>ï¼šæŒ‡å®šè¦ä»ä¸­æå–æ•°æ®çš„è¡¨åã€‚</li><li><code>[æ¡ä»¶]</code>ï¼šå¯é€‰é¡¹ï¼Œç”¨äºç­›é€‰ç‰¹å®šçš„æ•°æ®è¡Œã€‚</li></ul></li><li><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æ–¹æ‹¬å· <code>[ ]</code> ä¸­çš„å†…å®¹æ˜¯éœ€è¦æ›¿æ¢ä¸ºå…·ä½“çš„å€¼æˆ–è¡¨è¾¾å¼ã€‚</li><li>è§†å›¾æ˜¯ä»ä¸€ä¸ªæˆ–å¤šä¸ªåŸºæœ¬è¡¨æ´¾ç”Ÿå‡ºæ¥çš„è™šæ‹Ÿè¡¨ï¼Œå…¶å†…å®¹æ˜¯åŸºäºæŸ¥è¯¢çš„ç»“æœé›†ã€‚å› æ­¤ï¼Œåœ¨å®šä¹‰è§†å›¾æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆé€‚çš„ SELECT<br>è¯­å¥æ¥æŒ‡å®šè§†å›¾çš„å†…å®¹ã€‚</li></ul></li></ul></li><li><p>å»ºè¡¨æ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [è¡¨å] (</span><br><span class="line">    [åˆ—<span class="number">1</span>] [æ•°æ®ç±»å‹] [çº¦æŸ],</span><br><span class="line">    [åˆ—<span class="number">2</span>] [æ•°æ®ç±»å‹] [çº¦æŸ],</span><br><span class="line">    ...</span><br><span class="line">    [åˆ—N] [æ•°æ®ç±»å‹] [çº¦æŸ]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li><p>è§£é‡Šè¯´æ˜ï¼š</p><ul><li><code>[è¡¨å]</code>ï¼šæŒ‡å®šè¦åˆ›å»ºçš„è¡¨çš„åç§°ã€‚</li><li><code>[åˆ—1], [åˆ—2], ..., [åˆ—N]</code>ï¼šæŒ‡å®šè¦åˆ›å»ºçš„åˆ—åã€‚</li><li><code>[æ•°æ®ç±»å‹]</code>ï¼šæŒ‡å®šæ¯ä¸ªåˆ—çš„æ•°æ®ç±»å‹ï¼Œå¦‚ INTã€VARCHARã€DATE ç­‰ã€‚</li><li><code>[çº¦æŸ]</code>ï¼šå¯é€‰é¡¹ï¼Œç”¨äºæŒ‡å®šåˆ—çº§åˆ«çš„çº¦æŸæ¡ä»¶ï¼Œå¦‚ PRIMARY KEYã€NOT NULLã€UNIQUE ç­‰ã€‚</li></ul></li><li><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æ–¹æ‹¬å· <code>[ ]</code> ä¸­çš„å†…å®¹æ˜¯éœ€è¦æ›¿æ¢ä¸ºå…·ä½“çš„å€¼æˆ–è¡¨è¾¾å¼ã€‚</li><li>æ¯ä¸ªåˆ—å®šä¹‰éœ€è¦åŒ…å«åˆ—åå’Œæ•°æ®ç±»å‹ã€‚</li><li>å¯ä»¥åœ¨æ¯ä¸ªåˆ—å®šä¹‰åé¢æ·»åŠ çº¦æŸæ¥è¿›ä¸€æ­¥å®šä¹‰åˆ—çš„è¡Œä¸ºå’Œé™åˆ¶ã€‚</li><li>å¯ä»¥æ ¹æ®éœ€è¦åœ¨è¡¨å®šä¹‰çš„æœ«å°¾æ·»åŠ å…¶ä»–é€‰é¡¹ï¼Œå¦‚å­˜å‚¨å¼•æ“ã€å­—ç¬¦é›†ç­‰ã€‚</li></ul></li></ul></li><li><p>åˆ›å»ºè§’è‰²æ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> ROLE <span class="string">&#x27;è§’è‰²å&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li><p>è§£é‡Šè¯´æ˜ï¼š</p><ul><li><code>&#39;è§’è‰²å&#39;</code>ï¼šæŒ‡å®šè¦åˆ›å»ºçš„è§’è‰²åç§°ï¼Œè§’è‰²åç§°ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚</li></ul></li><li><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>è§’è‰²åç§°åº”éµå¾ª MySQL çš„å‘½åè§„åˆ™ï¼Œå¦‚ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ã€ç©ºæ ¼ç­‰ã€‚</li><li>åˆ›å»ºè§’è‰²éœ€è¦å…·æœ‰é€‚å½“çš„æƒé™ï¼Œé€šå¸¸æ˜¯ <code>CREATE ROLE</code> æƒé™ã€‚</li></ul></li></ul></li><li><p>è§’è‰²èµ‹æƒæ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> æƒé™åˆ—è¡¨ <span class="keyword">TO</span> <span class="string">&#x27;è§’è‰²å&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li><p>è§£é‡Šè¯´æ˜ï¼š</p><ul><li><code>æƒé™åˆ—è¡¨</code>ï¼šæŒ‡å®šè¦æˆäºˆç»™è§’è‰²çš„æƒé™ï¼Œå¯ä»¥æ˜¯å•ä¸ªæƒé™æˆ–å¤šä¸ªæƒé™ï¼Œå¤šä¸ªæƒé™ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚</li><li><code>&#39;è§’è‰²å&#39;</code>ï¼šæŒ‡å®šè¦æˆäºˆæƒé™çš„è§’è‰²åç§°ï¼Œè§’è‰²åç§°ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚</li></ul></li><li><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>è§’è‰²å’Œæƒé™éƒ½åº”å­˜åœ¨äºæ•°æ®åº“ä¸­ã€‚</li><li>æˆäºˆæƒé™éœ€è¦å…·æœ‰é€‚å½“çš„æƒé™ï¼Œé€šå¸¸æ˜¯ <code>GRANT</code> æƒé™ã€‚</li></ul></li><li><p>ä½¿ç”¨ä¸Šè¿°æ¨¡æ¿ï¼Œä½ å¯ä»¥ä¸ºè§’è‰²èµ‹äºˆæŒ‡å®šçš„æƒé™ã€‚å°† <code>&#39;è§’è‰²å&#39;</code> æ›¿æ¢ä¸ºå®é™…çš„è§’è‰²åç§°ï¼Œå°† <code>æƒé™åˆ—è¡¨</code><br>æ›¿æ¢ä¸ºè¦æˆäºˆçš„å…·ä½“æƒé™å³å¯ã€‚å¦‚æœéœ€è¦æˆäºˆå¤šä¸ªæƒé™ï¼Œå¯ä»¥åœ¨ <code>æƒé™åˆ—è¡¨</code> ä¸­ä½¿ç”¨é€—å·åˆ†éš”ä¸åŒçš„æƒé™é¡¹ã€‚</p><blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span>, <span class="keyword">UPDATE</span> <span class="keyword">ON</span> database.table <span class="keyword">TO</span> <span class="string">&#x27;è§’è‰²å&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç¤ºä¾‹å°† SELECTã€INSERT å’Œ UPDATE æƒé™æˆäºˆç»™åä¸º <code>&#39;è§’è‰²å&#39;</code> çš„è§’è‰²ã€‚ä½ å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´æƒé™åˆ—è¡¨å’Œè§’è‰²åç§°ã€‚</p></blockquote></li></ul></li><li><p>æˆæƒæ¨¡ç‰ˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> [æƒé™åˆ—è¡¨] <span class="keyword">ON</span> [æ•°æ®åº“].[è¡¨] <span class="keyword">TO</span> <span class="string">&#x27;[ç”¨æˆ·å]&#x27;</span>@<span class="string">&#x27;[ä¸»æœº]&#x27;</span> [<span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION];</span><br></pre></td></tr></table></figure><ul><li><p>è§£é‡Šè¯´æ˜ï¼š</p><ul><li><code>[æƒé™åˆ—è¡¨]</code>ï¼šæŒ‡å®šè¦æˆäºˆçš„æƒé™ï¼Œå¯ä»¥æ˜¯å¤šä¸ªæƒé™ï¼Œç”¨é€—å·åˆ†éš”ï¼Œå¦‚ SELECT, INSERT, UPDATEã€‚</li><li><code>[æ•°æ®åº“]</code>ï¼šæŒ‡å®šè¦æˆäºˆæƒé™çš„æ•°æ®åº“åç§°ã€‚å¦‚æœè¦æˆäºˆå…¨å±€æƒé™ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ <code>*</code>ã€‚</li><li><code>[è¡¨]</code>ï¼šå¯é€‰é¡¹ï¼ŒæŒ‡å®šè¦æˆäºˆæƒé™çš„è¡¨åã€‚å¦‚æœè¦æˆäºˆæ•°æ®åº“çº§åˆ«çš„æƒé™ï¼Œå¯ä»¥çœç•¥è¯¥éƒ¨åˆ†ã€‚</li><li><code>&#39;[ç”¨æˆ·å]&#39;@&#39;[ä¸»æœº]&#39;</code><br>ï¼šæŒ‡å®šè¦æˆäºˆæƒé™çš„ç”¨æˆ·å’Œå¯¹åº”çš„ä¸»æœºã€‚ç”¨æˆ·åå’Œä¸»æœºåˆ†åˆ«ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚å¦‚æœè¦æˆäºˆå…¨å±€æƒé™ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ <code>%</code>ã€‚</li><li><code>WITH GRANT OPTION</code>ï¼šå¯é€‰é¡¹ï¼Œå…è®¸è¢«æˆæƒçš„ç”¨æˆ·è¿›ä¸€æ­¥æˆäºˆè¯¥æƒé™ç»™å…¶ä»–ç”¨æˆ·ã€‚</li></ul></li><li><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æ–¹æ‹¬å· <code>[ ]</code> ä¸­çš„å†…å®¹æ˜¯éœ€è¦æ›¿æ¢ä¸ºå…·ä½“çš„å€¼æˆ–è¡¨è¾¾å¼ã€‚</li><li>æƒé™å¯ä»¥æ˜¯è¯¸å¦‚ SELECTã€INSERTã€UPDATEã€DELETE ç­‰æ•°æ®åº“æ“ä½œçš„å…³é”®å­—ã€‚</li><li>å¯ä»¥æ ¹æ®éœ€è¦æŒ‡å®šå…·ä½“çš„æ•°æ®åº“å’Œè¡¨ï¼Œæˆ–è€…ä½¿ç”¨é€šé…ç¬¦ <code>*</code> è¡¨ç¤ºæ‰€æœ‰æ•°æ®åº“æˆ–è¡¨ã€‚</li><li>æˆæƒæ“ä½œéœ€è¦å…·æœ‰é€‚å½“çš„æƒé™ï¼Œé€šå¸¸æ˜¯ <code>GRANT OPTION</code> æƒé™ã€‚</li></ul></li></ul></li></ul><h2 id="E-Rå›¾"><a href="#E-Rå›¾" class="headerlink" title="E-Rå›¾"></a>E-Rå›¾</h2><h3 id="æ¦‚å¿µ-2"><a href="#æ¦‚å¿µ-2" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>E-Rå›¾ï¼ˆå®ä½“-å…³ç³»å›¾ï¼‰æ˜¯ä¸€ç§ç”¨äºæ•°æ®å»ºæ¨¡çš„å›¾å½¢å·¥å…·ï¼Œç”¨äºæè¿°ç°å®ä¸–ç•Œä¸­çš„å®ä½“ã€å®ä½“ä¹‹é—´çš„å…³ç³»ä»¥åŠå®ä½“å±æ€§çš„ç»“æ„åŒ–å›¾å½¢åŒ–è¡¨ç¤ºã€‚å®ƒåŸºäºå®ä½“-å…³ç³»æ¨¡å‹ï¼Œæ˜¯ä¸€ç§é«˜å±‚æ¬¡ã€æŠ½è±¡çš„è¡¨ç¤ºæ–¹å¼ï¼Œç”¨äºåœ¨æ•°æ®åº“è®¾è®¡å’Œå¼€å‘è¿‡ç¨‹ä¸­æè¿°å®ä½“ã€å…³ç³»å’Œå±æ€§ä¹‹é—´çš„æ¦‚å¿µå’Œå…³è”ã€‚</p><p>E-Rå›¾ç”±å®ä½“ã€å…³ç³»å’Œå±æ€§ç»„æˆï¼Œå…¶ä¸­ï¼š</p><ul><li>å®ä½“ï¼ˆEntityï¼‰ä»£è¡¨ç°å®ä¸–ç•Œä¸­å…·æœ‰ç‹¬ç«‹å­˜åœ¨å’Œå¯è¯†åˆ«çš„äº‹ç‰©ï¼Œå¦‚äººã€ç‰©ã€åœ°ç‚¹æˆ–æ¦‚å¿µã€‚æ¯ä¸ªå®ä½“éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆä¸»é”®ï¼‰ï¼Œå¹¶å…·æœ‰å±æ€§æè¿°å®ä½“çš„ç‰¹å¾ã€‚</li><li>å…³ç³»ï¼ˆRelationshipï¼‰è¡¨ç¤ºå®ä½“ä¹‹é—´çš„è”ç³»æˆ–å…³è”ã€‚å…³ç³»å¯ä»¥æ˜¯ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šæˆ–å¤šå¯¹å¤šçš„å…³ç³»ï¼Œç”¨äºæè¿°å®ä½“ä¹‹é—´çš„äº¤äº’å’Œä¾èµ–ã€‚</li><li>å±æ€§ï¼ˆAttributeï¼‰æ˜¯å®ä½“çš„ç‰¹å¾æˆ–æè¿°ï¼Œç”¨äºå­˜å‚¨å®ä½“çš„å…·ä½“æ•°æ®ã€‚å±æ€§å¯ä»¥æ˜¯ç®€å•å±æ€§ï¼ˆå¦‚å§“åã€å¹´é¾„ï¼‰æˆ–å¤åˆå±æ€§ï¼ˆå¦‚åœ°å€ï¼Œç”±è¡—é“ã€åŸå¸‚å’Œé‚®ç¼–ç»„æˆï¼‰ã€‚</li></ul><p>é€šè¿‡ä½¿ç”¨ç¬¦å·å’Œè¿æ¥çº¿ï¼ŒE-Rå›¾æä¾›äº†ä¸€ç§ç›´è§‚çš„æ–¹å¼æ¥å¯è§†åŒ–å’Œè¡¨ç¤ºå®ä½“ã€å…³ç³»å’Œå±æ€§ä¹‹é—´çš„ç»“æ„å’Œç›¸äº’ä½œç”¨ã€‚å®ƒæ˜¯æ•°æ®åº“è®¾è®¡å’Œè§„åˆ’çš„é‡è¦å·¥å…·ï¼Œæœ‰åŠ©äºç†è§£å’Œæ²Ÿé€šæ•°æ®æ¨¡å‹çš„æ¦‚å¿µï¼Œä»¥ä¾¿æ›´å¥½åœ°è®¾è®¡å’Œç®¡ç†æ•°æ®åº“ç³»ç»Ÿã€‚</p><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>Student(<u>id</u>, name, gender)</p><p>Class(<u>cid</u>, name)</p><p>Teacher(<u>tid</u>, gender, name)</p><p><strong>æˆ‘ä»¬ä½¿ç”¨<code>_</code>æ¥è¡¨è¿°ä¸€å¼ æ•°æ®è¡¨ä¸­çš„ä¸»é”®å­—æ®µã€‚</strong></p><p><strong>å›¾ä¸­è¿æ¥è¡¨ä¸è¡¨çš„çº¿æ¡ï¼Œåº”è¯¥æ˜¯å¹²å‡€çš„ï¼Œä¸åº”è¯¥æœ‰ç±»ä¼¼äºåˆ†æ”¯çš„éƒ¨åˆ†ï¼Œåº”è¯¥ä¸è¿æ¥è¡¨ä¸å­—æ®µçš„çº¿æ¡ä¸€è‡´ã€‚</strong></p><img no-lazy class="inline" src="/picture/E-Rå›¾.png" style="height:500px;"/>]]></content>
      
      
      <categories>
          
          <category> Final Review </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>My first blog post</title>
      <link href="/2023/07/05/my-first-blog-post/"/>
      <url>/2023/07/05/my-first-blog-post/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™ï¼Ÿ"><a href="#å¦‚ä½•æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™ï¼Ÿ"></a>å¦‚ä½•æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™ï¼Ÿ</h1><h2 id="èµ·å› "><a href="#èµ·å› " class="headerlink" title="èµ·å› "></a>èµ·å› </h2><p><code>ä»Šå¤©æ—©äº›çš„æ—¶å€™æˆ‘åœ¨çœ‹Nginxçš„æ•™ç¨‹ï¼Œé‚£ä½youtuberå°±ä½¿ç”¨äº†Hexoæ­å»ºçš„åšå®¢è¿›è¡Œåå‘ä»£ç†æµ‹è¯•ï¼Œäºæ˜¯æˆ‘å°±å¾ˆæ„Ÿå…´è¶£ï¼Œä¾¿å»äº†è§£äº†ä¸€ä¸‹</code></p><div class="link-group"><div class="tagLink"><a class="link-card" title="30åˆ†é’ŸNginxå…¥é—¨æ•™ç¨‹ - YouTube" href="https://youtu.be/sCJcusORiE8"><span class="link-card-backdrop" style="background-image: url(https://pica.zhimg.com/80/v2-970dd5538f106dd6be064c4eafc01c36_1440w.webp)"></span><div class="left"><img src="https://pica.zhimg.com/80/v2-970dd5538f106dd6be064c4eafc01c36_1440w.webp" class="lazyload placeholder" data-srcset="https://pica.zhimg.com/80/v2-970dd5538f106dd6be064c4eafc01c36_1440w.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">30åˆ†é’ŸNginxå…¥é—¨æ•™ç¨‹ - YouTube</p><p class="url">https://youtu.be/sCJcusORiE8</p></div></a></div></div><p>è®¿é—®<a href="https://hexo.io/">Hexo</a>ä»¥äº†è§£æ›´å¤šå†…å®¹ã€‚</p><p>æˆ‘é€‰æ‹©äº†ä¸€ä¸ªè‡ªå·±è›®å–œæ¬¢çš„ä¸»é¢˜ã€‚</p><p>æˆ‘ä¹Ÿä¿®æ”¹äº†å¾ˆå¤šé…ç½®é¡¹ï¼Œä¸è¿‡æ€»çš„è¯´è¿˜æ˜¯éå¸¸å®¹æ˜“ç†è§£çš„ã€‚</p><h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>è¿™è¿‡ç¨‹ä¸­æœ€æœ€æœ€ç¦»è°±çš„é—®é¢˜ï¼ˆå¯¹æˆ‘æ¥è¯´ï¼‰æ˜¯ï¼šå…³äºgit pushçš„é—®é¢˜ï¼Œç»å¸¸pushä¸ä¸Šå»ï¼Œæ‰€ä»¥æˆ‘å°±æ’æŸ¥äº†é—®é¢˜åŸå› ï¼Œè¯•è¿‡äº†ä¿®æ”¹<code>/etc/hosts</code>çš„é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo bash -c &#x27;echo &quot;&lt;IP&gt; &lt;hostname&gt;&quot; &gt;&gt; /etc/hosts&#x27;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°è¯•äº†ä¿®æ”¹<code>http.version</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.version HTTP/1.1</span><br></pre></td></tr></table></figure><p>å‘ç°æ²¡æœ‰ç”¨ï¼Œæœ€åï¼Œæˆ‘å‘ç°æ˜¯ä»£ç†çš„é—®é¢˜ï¼Œå› ä¸ºåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€GitHubæ²¡é—®é¢˜ï¼Œä½†ä½¿ç”¨gitçš„æ—¶å€™å°±<code>could&#39;t connect</code>ï¼ŒåŸå› åœ¨äºgité»˜è®¤ä¸ä½¿ç”¨ä»£ç†ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy 127.0.0.1:[port]</span><br><span class="line">git config --global https.proxy 127.0.0.1:[port]</span><br></pre></td></tr></table></figure><p><code>port</code>ä¸ºä»£ç†ç«¯å£å·</p><p>è¿™ä¸ªé—®é¢˜å°±å¦‚æ­¤è§£å†³äº†ã€‚</p><h2 id="åè¨€"><a href="#åè¨€" class="headerlink" title="åè¨€"></a>åè¨€</h2><p>è¯´å®è¯ï¼Œå¤ªç´¯äº†å†™è¿™ä¸œè¥¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Pointless small talk </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
